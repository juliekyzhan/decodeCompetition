<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kunya Zhan">
<meta name="dcterms.date" content="2025-12-19">

<title>data_mining</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="data_mining_files/libs/clipboard/clipboard.min.js"></script>
<script src="data_mining_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="data_mining_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="data_mining_files/libs/quarto-html/popper.min.js"></script>
<script src="data_mining_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data_mining_files/libs/quarto-html/anchor.min.js"></script>
<link href="data_mining_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_mining_files/libs/quarto-html/quarto-syntax-highlighting-fe91322616dd2b9cea8bc6bfc6aa44e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="data_mining_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data_mining_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data_mining_files/libs/bootstrap/bootstrap-6f1071c4549ec1672fc8885a20292773.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>
<link href="data_mining_files/libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="data_mining_files/libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-mining" id="toc-data-mining" class="nav-link active" data-scroll-target="#data-mining"><span class="header-section-number">1</span> Data Mining</a>
  <ul class="collapse">
  <li><a href="#packages-installing-if-not-already-installed" id="toc-packages-installing-if-not-already-installed" class="nav-link" data-scroll-target="#packages-installing-if-not-already-installed"><span class="header-section-number">1.1</span> Packages Installing if not already installed</a></li>
  <li><a href="#set-up" id="toc-set-up" class="nav-link" data-scroll-target="#set-up"><span class="header-section-number">1.2</span> set up</a></li>
  </ul></li>
  <li><a href="#data-cleansing" id="toc-data-cleansing" class="nav-link" data-scroll-target="#data-cleansing"><span class="header-section-number">2</span> 1. Data cleansing</a>
  <ul class="collapse">
  <li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link" data-scroll-target="#data-acquisition"><span class="header-section-number">2.1</span> 1.1 data acquisition</a></li>
  <li><a href="#matching-variables-and-special-patch" id="toc-matching-variables-and-special-patch" class="nav-link" data-scroll-target="#matching-variables-and-special-patch"><span class="header-section-number">2.2</span> 1.2 matching variables and special patch</a></li>
  <li><a href="#name-cleansing" id="toc-name-cleansing" class="nav-link" data-scroll-target="#name-cleansing"><span class="header-section-number">2.3</span> 1.3 name cleansing</a>
  <ul class="collapse">
  <li><a href="#preparing-bioguide-as-matching-map" id="toc-preparing-bioguide-as-matching-map" class="nav-link" data-scroll-target="#preparing-bioguide-as-matching-map"><span class="header-section-number">2.3.1</span> 1.3.1 preparing bioguide as matching map</a></li>
  <li><a href="#name-cleansing-legis_sum-and-special-patches" id="toc-name-cleansing-legis_sum-and-special-patches" class="nav-link" data-scroll-target="#name-cleansing-legis_sum-and-special-patches"><span class="header-section-number">2.3.2</span> 1.3.2 name cleansing legis_sum and special patches</a></li>
  <li><a href="#name-mapping" id="toc-name-mapping" class="nav-link" data-scroll-target="#name-mapping"><span class="header-section-number">2.3.3</span> 1.3.3 name mapping</a></li>
  </ul></li>
  <li><a href="#ideology-update" id="toc-ideology-update" class="nav-link" data-scroll-target="#ideology-update"><span class="header-section-number">2.4</span> 1.4 ideology update</a></li>
  </ul></li>
  <li><a href="#data-aggregation-and-generation" id="toc-data-aggregation-and-generation" class="nav-link" data-scroll-target="#data-aggregation-and-generation"><span class="header-section-number">3</span> 2. data aggregation and generation</a>
  <ul class="collapse">
  <li><a href="#individual-level-aggregation" id="toc-individual-level-aggregation" class="nav-link" data-scroll-target="#individual-level-aggregation"><span class="header-section-number">3.1</span> 2.1 individual level aggregation</a></li>
  <li><a href="#topic-level-aggregation" id="toc-topic-level-aggregation" class="nav-link" data-scroll-target="#topic-level-aggregation"><span class="header-section-number">3.2</span> 2.2 topic level aggregation</a></li>
  </ul></li>
  <li><a href="#overall-descriptive-analysis-for-individual" id="toc-overall-descriptive-analysis-for-individual" class="nav-link" data-scroll-target="#overall-descriptive-analysis-for-individual"><span class="header-section-number">4</span> 3. overall descriptive analysis for individual</a>
  <ul class="collapse">
  <li><a href="#distribution-plots" id="toc-distribution-plots" class="nav-link" data-scroll-target="#distribution-plots"><span class="header-section-number">4.1</span> 3.1 distribution plots</a></li>
  <li><a href="#distribution-map" id="toc-distribution-map" class="nav-link" data-scroll-target="#distribution-map"><span class="header-section-number">4.2</span> 3.2 distribution map</a>
  <ul class="collapse">
  <li><a href="#map-dataset-generation-and-cleansing" id="toc-map-dataset-generation-and-cleansing" class="nav-link" data-scroll-target="#map-dataset-generation-and-cleansing"><span class="header-section-number">4.2.1</span> 3.2.1 map dataset generation and cleansing</a></li>
  <li><a href="#flip-key-construction" id="toc-flip-key-construction" class="nav-link" data-scroll-target="#flip-key-construction"><span class="header-section-number">4.2.2</span> 3.2.2 flip-key construction</a></li>
  <li><a href="#house-map-generation-function" id="toc-house-map-generation-function" class="nav-link" data-scroll-target="#house-map-generation-function"><span class="header-section-number">4.2.3</span> 3.2.3 house map generation function</a></li>
  <li><a href="#senate-map-function-need-further-debug" id="toc-senate-map-function-need-further-debug" class="nav-link" data-scroll-target="#senate-map-function-need-further-debug"><span class="header-section-number">4.2.4</span> 3.2.4 senate map function (need further debug)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#overall-descriptive-analysis-for-issues" id="toc-overall-descriptive-analysis-for-issues" class="nav-link" data-scroll-target="#overall-descriptive-analysis-for-issues"><span class="header-section-number">5</span> 4. overall descriptive analysis for issues</a>
  <ul class="collapse">
  <li><a href="#analysis-based-on-bills-data" id="toc-analysis-based-on-bills-data" class="nav-link" data-scroll-target="#analysis-based-on-bills-data"><span class="header-section-number">5.1</span> 4.1 analysis based on bills data</a>
  <ul class="collapse">
  <li><a href="#bills-data-cleansing" id="toc-bills-data-cleansing" class="nav-link" data-scroll-target="#bills-data-cleansing"><span class="header-section-number">5.1.1</span> 4.1.1 bills data cleansing</a></li>
  <li><a href="#issues-have-major-change-on-bills-data-from-115th-to-118th-congress" id="toc-issues-have-major-change-on-bills-data-from-115th-to-118th-congress" class="nav-link" data-scroll-target="#issues-have-major-change-on-bills-data-from-115th-to-118th-congress"><span class="header-section-number">5.1.2</span> 4.1.2 issues have major change on bills data from 115th to 118th congress</a></li>
  <li><a href="#bills-trends-plot-for-all-issues" id="toc-bills-trends-plot-for-all-issues" class="nav-link" data-scroll-target="#bills-trends-plot-for-all-issues"><span class="header-section-number">5.1.3</span> 4.1.3 bills trends plot for all issues</a></li>
  <li><a href="#calculating-shanon-entropy-for-bills-news" id="toc-calculating-shanon-entropy-for-bills-news" class="nav-link" data-scroll-target="#calculating-shanon-entropy-for-bills-news"><span class="header-section-number">5.1.4</span> 4.1.4 calculating shanon-entropy for bills news</a></li>
  </ul></li>
  <li><a href="#issue-analysis-using-legis_tp" id="toc-issue-analysis-using-legis_tp" class="nav-link" data-scroll-target="#issue-analysis-using-legis_tp"><span class="header-section-number">5.2</span> 4.2 issue analysis using legis_tp</a>
  <ul class="collapse">
  <li><a href="#issue-heatmap-by-congress" id="toc-issue-heatmap-by-congress" class="nav-link" data-scroll-target="#issue-heatmap-by-congress"><span class="header-section-number">5.2.1</span> 4.2.1 issue heatmap by congress</a></li>
  <li><a href="#focal-issue-of-each-congress" id="toc-focal-issue-of-each-congress" class="nav-link" data-scroll-target="#focal-issue-of-each-congress"><span class="header-section-number">5.2.2</span> 4.2.2 focal issue of each congress</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#lgbm-features-importance-analysis" id="toc-lgbm-features-importance-analysis" class="nav-link" data-scroll-target="#lgbm-features-importance-analysis"><span class="header-section-number">6</span> 5. lgbm features importance analysis</a></li>
  <li><a href="#key-characteristics-analysis" id="toc-key-characteristics-analysis" class="nav-link" data-scroll-target="#key-characteristics-analysis"><span class="header-section-number">7</span> 6. key characteristics analysis</a>
  <ul class="collapse">
  <li><a href="#preparing" id="toc-preparing" class="nav-link" data-scroll-target="#preparing"><span class="header-section-number">7.1</span> 6.0 preparing</a>
  <ul class="collapse">
  <li><a href="#data-cleansing-1" id="toc-data-cleansing-1" class="nav-link" data-scroll-target="#data-cleansing-1"><span class="header-section-number">7.1.1</span> 6.0.1 data cleansing</a></li>
  <li><a href="#co-linerality-check" id="toc-co-linerality-check" class="nav-link" data-scroll-target="#co-linerality-check"><span class="header-section-number">7.1.2</span> 6.0.2 co-linerality check</a></li>
  </ul></li>
  <li><a href="#dependent-variable-is.dom" id="toc-dependent-variable-is.dom" class="nav-link" data-scroll-target="#dependent-variable-is.dom"><span class="header-section-number">7.2</span> 6.1 dependent variable: is.dom</a>
  <ul class="collapse">
  <li><a href="#multiple-variables-logit-model" id="toc-multiple-variables-logit-model" class="nav-link" data-scroll-target="#multiple-variables-logit-model"><span class="header-section-number">7.2.1</span> 6.1.1 multiple variables logit model</a></li>
  <li><a href="#single-variable-logit-model" id="toc-single-variable-logit-model" class="nav-link" data-scroll-target="#single-variable-logit-model"><span class="header-section-number">7.2.2</span> 6.1.2 single variable logit model</a></li>
  </ul></li>
  <li><a href="#dependent-variable-dom_percentage" id="toc-dependent-variable-dom_percentage" class="nav-link" data-scroll-target="#dependent-variable-dom_percentage"><span class="header-section-number">7.3</span> 6.2 dependent variable: dom_percentage</a>
  <ul class="collapse">
  <li><a href="#multiple-variables-regression-model" id="toc-multiple-variables-regression-model" class="nav-link" data-scroll-target="#multiple-variables-regression-model"><span class="header-section-number">7.3.1</span> 6.2.1 multiple variables regression model</a></li>
  <li><a href="#single-variable-regression-model" id="toc-single-variable-regression-model" class="nav-link" data-scroll-target="#single-variable-regression-model"><span class="header-section-number">7.3.2</span> 6.2.2 single variable regression model</a></li>
  <li><a href="#robustness-check" id="toc-robustness-check" class="nav-link" data-scroll-target="#robustness-check"><span class="header-section-number">7.3.3</span> robustness check</a></li>
  </ul></li>
  <li><a href="#dependent-variable-prof_percentage" id="toc-dependent-variable-prof_percentage" class="nav-link" data-scroll-target="#dependent-variable-prof_percentage"><span class="header-section-number">7.4</span> 6.3 dependent variable: prof_percentage</a>
  <ul class="collapse">
  <li><a href="#multiple-variables-regression-model-1" id="toc-multiple-variables-regression-model-1" class="nav-link" data-scroll-target="#multiple-variables-regression-model-1"><span class="header-section-number">7.4.1</span> 6.3.1 multiple variables regression model</a></li>
  <li><a href="#single-variable-regression-model-1" id="toc-single-variable-regression-model-1" class="nav-link" data-scroll-target="#single-variable-regression-model-1"><span class="header-section-number">7.4.2</span> 6.3.2 single variable regression model</a></li>
  <li><a href="#robustness-check-1" id="toc-robustness-check-1" class="nav-link" data-scroll-target="#robustness-check-1"><span class="header-section-number">7.4.3</span> robustness check</a></li>
  </ul></li>
  <li><a href="#dependent-variable-intl_percentage" id="toc-dependent-variable-intl_percentage" class="nav-link" data-scroll-target="#dependent-variable-intl_percentage"><span class="header-section-number">7.5</span> 6.4 dependent variable: intl_percentage</a>
  <ul class="collapse">
  <li><a href="#multiple-variables-regression-model-2" id="toc-multiple-variables-regression-model-2" class="nav-link" data-scroll-target="#multiple-variables-regression-model-2"><span class="header-section-number">7.5.1</span> 6.4.1 multiple variables regression model</a></li>
  <li><a href="#single-variable-regression-model-2" id="toc-single-variable-regression-model-2" class="nav-link" data-scroll-target="#single-variable-regression-model-2"><span class="header-section-number">7.5.2</span> 6.4.2 single variable regression model</a></li>
  <li><a href="#robustness-check-2" id="toc-robustness-check-2" class="nav-link" data-scroll-target="#robustness-check-2"><span class="header-section-number">7.5.3</span> robustness check</a></li>
  </ul></li>
  <li><a href="#interaction-model" id="toc-interaction-model" class="nav-link" data-scroll-target="#interaction-model"><span class="header-section-number">7.6</span> 6.5 interaction model</a>
  <ul class="collapse">
  <li><a href="#dependent-variable-is.dom-1" id="toc-dependent-variable-is.dom-1" class="nav-link" data-scroll-target="#dependent-variable-is.dom-1"><span class="header-section-number">7.6.1</span> 6.5.1 dependent variable: is.dom</a></li>
  <li><a href="#dependent-variable-dom_percentagedemo" id="toc-dependent-variable-dom_percentagedemo" class="nav-link" data-scroll-target="#dependent-variable-dom_percentagedemo"><span class="header-section-number">7.6.2</span> 6.5.2 dependent variable: dom_percentage(demo)</a></li>
  <li><a href="#dependent-variable-dom-district" id="toc-dependent-variable-dom-district" class="nav-link" data-scroll-target="#dependent-variable-dom-district"><span class="header-section-number">7.6.3</span> 6.5.3 dependent variable: dom (district)</a></li>
  <li><a href="#dependent-variable-profdistrict" id="toc-dependent-variable-profdistrict" class="nav-link" data-scroll-target="#dependent-variable-profdistrict"><span class="header-section-number">7.6.4</span> 6.5.4 dependent variable: prof(district)</a></li>
  </ul></li>
  <li><a href="#district-data-multilateral---liner-regression" id="toc-district-data-multilateral---liner-regression" class="nav-link" data-scroll-target="#district-data-multilateral---liner-regression"><span class="header-section-number">7.7</span> 6.6 district data multilateral - liner regression</a>
  <ul class="collapse">
  <li><a href="#party-level" id="toc-party-level" class="nav-link" data-scroll-target="#party-level"><span class="header-section-number">7.7.1</span> 6.6.1 party level</a></li>
  <li><a href="#chamber-level" id="toc-chamber-level" class="nav-link" data-scroll-target="#chamber-level"><span class="header-section-number">7.7.2</span> 6.6.2 chamber level</a></li>
  <li><a href="#partychamber" id="toc-partychamber" class="nav-link" data-scroll-target="#partychamber"><span class="header-section-number">7.7.3</span> 6.6.3 party+chamber</a></li>
  <li><a href="#congress" id="toc-congress" class="nav-link" data-scroll-target="#congress"><span class="header-section-number">7.7.4</span> 6.6.4 congress</a></li>
  </ul></li>
  <li><a href="#district-analysis---logit-regression" id="toc-district-analysis---logit-regression" class="nav-link" data-scroll-target="#district-analysis---logit-regression"><span class="header-section-number">7.8</span> 6.7 district analysis - logit regression</a>
  <ul class="collapse">
  <li><a href="#focus-on-edu" id="toc-focus-on-edu" class="nav-link" data-scroll-target="#focus-on-edu"><span class="header-section-number">7.8.1</span> 6.7.1 focus on edu</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">data_mining</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kunya Zhan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 19, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="data-mining" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Data Mining</h1>
<p>This quarto document reorganizes the analyses from <em>descriptive analysis 1021.Rmd</em>, focusing on data mining and pattern discovery in the <em>decodeCompetition dataset</em>. It consists two main sections:</p>
<ol type="1">
<li><strong>Data Mining</strong>: exploration of the original dataset to identify salient patterns and cross-party differences;</li>
<li><strong>Model-based analysis:</strong> identification of key characteristics through regression and logistic models.</li>
</ol>
<section id="packages-installing-if-not-already-installed" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="packages-installing-if-not-already-installed"><span class="header-section-number">1.1</span> Packages Installing if not already installed</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[2]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[3]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[4]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[5]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[6]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[7]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[8]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[9]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[10]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[11]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[12]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[13]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[14]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[15]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[16]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[17]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[18]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[19]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[20]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[21]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[22]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[23]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[24]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[25]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[26]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[27]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[28]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[29]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[30]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[31]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[32]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[33]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[34]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[35]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[36]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[37]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[38]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[39]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[40]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[41]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[42]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[43]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[44]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[45]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[46]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[47]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[48]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[49]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[50]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[51]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[52]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[53]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[54]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[55]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           

[[56]]
 [1] "here"            "grid"            "ggrepel"         "marginaleffects"
 [5] "randomcoloR"     "ggbreak"         "cowplot"         "RColorBrewer"   
 [9] "interactions"    "splines"         "mgcv"            "tidytext"       
[13] "segmented"       "nlme"            "MASS"            "patchwork"      
[17] "rlang"           "ggfortify"       "pscl"            "modelsummary"   
[21] "ggnewscale"      "knitr"           "broom"           "kableExtra"     
[25] "fmsb"            "lattice"         "performance"     "broom.mixed"    
[29] "ggcorrplot"      "lubridate"       "forcats"         "purrr"          
[33] "tibble"          "tidyverse"       "htmltools"       "stargazer"      
[37] "ggeffects"       "tigris"          "DHARMa"          "nnet"           
[41] "MuMIn"           "lme4"            "pROC"            "factoextra"     
[45] "cluster"         "networkD3"       "Rtsne"           "glmnet"         
[49] "Matrix"          "car"             "carData"         "plm"            
[53] "skimr"           "showtext"        "showtextdb"      "sysfonts"       
[57] "scales"          "readxl"          "tidyr"           "ggplot2"        
[61] "readr"           "stringr"         "dplyr"           "Rcpp"           
[65] "stats"           "graphics"        "grDevices"       "utils"          
[69] "datasets"        "methods"         "base"           </code></pre>
</div>
</div>
</section>
<section id="set-up" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="set-up"><span class="header-section-number">1.2</span> set up</h2>
</section>
</section>
<section id="data-cleansing" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> 1. Data cleansing</h1>
<section id="data-acquisition" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="data-acquisition"><span class="header-section-number">2.1</span> 1.1 data acquisition</h2>
</section>
<section id="matching-variables-and-special-patch" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="matching-variables-and-special-patch"><span class="header-section-number">2.2</span> 1.2 matching variables and special patch</h2>
<section id="special-clean-for-legis_sum-and-legis-data" class="level4" data-number="2.2.0.1">
<h4 data-number="2.2.0.1" class="anchored" data-anchor-id="special-clean-for-legis_sum-and-legis-data"><span class="header-section-number">2.2.0.1</span> special clean for legis_sum and legis data</h4>
</section>
</section>
<section id="name-cleansing" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="name-cleansing"><span class="header-section-number">2.3</span> 1.3 name cleansing</h2>
<section id="preparing-bioguide-as-matching-map" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="preparing-bioguide-as-matching-map"><span class="header-section-number">2.3.1</span> 1.3.1 preparing bioguide as matching map</h3>
<p>name cleansing: addressing issues that some full_name are missing</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Number of remaining missing full_name: 342 </code></pre>
</div>
</div>
<p>district cleansing: matching district code in main databases</p>
<p>age cleansing: create age_to_date to match ages in main database and prepare age_to_congress to replace ages in main databases</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> Age calculation completed.</code></pre>
</div>
</div>
</section>
<section id="name-cleansing-legis_sum-and-special-patches" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="name-cleansing-legis_sum-and-special-patches"><span class="header-section-number">2.3.2</span> 1.3.2 name cleansing legis_sum and special patches</h3>
<p>main database name extracting</p>
<section id="special-patches" class="level4" data-number="2.3.2.1">
<h4 data-number="2.3.2.1" class="anchored" data-anchor-id="special-patches"><span class="header-section-number">2.3.2.1</span> * special patches</h4>
<p>The database has a override problem with some congress members. For example, Sen.&nbsp;Blunt Rochester, Lisa [D-DE] was elected as senator in 119th congress, but the database mistakebly override her information before as senator, while she was a representative. Those who are identified will be corrected as a special path in this chuck.</p>
<p>special patch1: patch for Sen.&nbsp;Blunt Rochester, Lisa [D-DE]</p>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["full_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["congress"],"name":[2],"type":["chr"],"align":["left"]},{"label":["chamber"],"name":[3],"type":["chr"],"align":["left"]},{"label":["district"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"118","3":"House of Representatives","4":"At Large"},{"1":"Sen. Blunt Rochester, Lisa [D-DE]","2":"116","3":"House of Representatives","4":"At Large"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>special patch2: for congressmen Sen.&nbsp;Menendez, Robert [D-NJ] and Rep.&nbsp;Menendez, Robert [D-NJ-8], since they have different eng_name but extracting from full_name cannot automatically discern the difference</p>
</section>
</section>
<section id="name-mapping" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="name-mapping"><span class="header-section-number">2.3.3</span> 1.3.3 name mapping</h3>
<p>define name matching function</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Step 1 matched: 38618 / 47203 
Step 2 matched: 45873 / 47203 
Step 4 (normalized + middle name removed) matched: 46043 / 47203 
 Bioguide ID matching complete.
Remaining NA bioguide_id: 1160 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_missing_fullname_list.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_missing_fullname_list.csv"</code></pre>
</div>
</div>
<p>address missing name issues</p>
</section>
</section>
<section id="ideology-update" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="ideology-update"><span class="header-section-number">2.4</span> 1.4 ideology update</h2>
<p>The original ideology data in the main database is standardized. We use ideology data at [GovTrack](<a href="https://www.govtrack.us/about/analysis#ideology" class="uri">https://www.govtrack.us/about/analysis#ideology</a>) to replace them. ref: <a href="http://razor.occams.info/">Tauberer, Joshua</a>. 2012. Observing the Unobservables in the U.S. Congress, presented at Law Via the Internet 2012, Cornell Law School, October 2012.</p>
<p>ideology cleansing</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  115.0   115.0   116.0   116.5   117.0   118.0 </code></pre>
</div>
</div>
<p>ideology merge</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> Merge complete.
   Matched: 45279 
   Remaining NA ideology: 1924 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_sum1.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_sum1.csv"</code></pre>
</div>
</div>
<p>ideology missing distribution: missing at random</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> legis_sum1 total missing: 1924 / 47203 

Missing by party:

Democratic Republican 
       775       1149 

Missing by state:

 AL  AZ  CA  CO  FL  GA  IN  MI  MN  MS  NC  NJ  NM  NV  NY  OH  OK  PA  RI  TN 
 66 243 199  32  99  33 173 136  34  33 101 135  34  34  70  33  67  32  33  33 
 TX  UT  VT  WI  WV 
 34 171  32  34  33 

Missing by chamber:

house of representatives                   senate 
                     794                     1130 

Missing by party x chamber:
            
             house of representatives senate
  Democratic                      266    509
  Republican                      528    621</code></pre>
</div>
</div>
</section>
</section>
<section id="data-aggregation-and-generation" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> 2. data aggregation and generation</h1>
<section id="individual-level-aggregation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="individual-level-aggregation"><span class="header-section-number">3.1</span> 2.1 individual level aggregation</h2>
<p>generate function: generate_decision_with_traits()</p>
<blockquote class="blockquote">
<p>This function aggregates prediction and importance metrics for each legislator across different datasets, such as train, test,or merged. It computes the relative importance of 3 behavioral modes - intl, dom, and prof, and assigns each legislator a dominant decision category based on their most prominent behavior. It finally merges these aggregated results with demographic and institutional traits like gender, party, and ideology.</p>
</blockquote>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_cg.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_cg.csv"</code></pre>
</div>
</div>
</section>
<section id="topic-level-aggregation" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="topic-level-aggregation"><span class="header-section-number">3.2</span> 2.2 topic level aggregation</h2>
<p>generate function: generate_decision_with_issue()</p>
<blockquote class="blockquote">
<p>This function processes legislative data to summarize each legislators issue-level decision pattern (international, domestic, or professional). It groups the data by legislator, Congress session, and issue, aggregates importance scores, and calculates the dominant decision type for each group.</p>
</blockquote>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_tp.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_tp.csv"</code></pre>
</div>
</div>
</section>
</section>
<section id="overall-descriptive-analysis-for-individual" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> 3. overall descriptive analysis for individual</h1>
<p>This block visualizes the distribution of legislators decision types (intl/dom/prof) in legis datasets. It includes overall bar plots and congress-specific facet plots. Additionally, it inspects label distributions across congress, party, chamber, gender, and committee.</p>
<section id="distribution-plots" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="distribution-plots"><span class="header-section-number">4.1</span> 3.1 distribution plots</h2>
<p>overall</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.
 Please use `after_stat(count)` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresoverall%20barplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>by congress</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresoverall%20barplot%20by%20congress-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>seats change each congress</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387067 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387167 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386872 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387909 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386870 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390641 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409257 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414876 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409970 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411198 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412351 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411201 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409529 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448990 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448993 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387067 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387167 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386872 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387909 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386870 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390641 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387385 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409257 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414876 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409970 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411198 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412351 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411201 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409529 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387167 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386872 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387909 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386870 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411198 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412351 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448990 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387167 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386872 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387909 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386870 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411198 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412351 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448990 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386872 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411198 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412351 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386872 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387909 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411198 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412351 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387032 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387755 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386871 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387115 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387037 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390639 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387908 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032390640 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387341 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032387500 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032386867 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032393262 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032398493 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409258 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409256 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410409 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409588 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032409972 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032411587 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032410230 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032412349 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032414877 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032425053 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448694 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032448994 is out of integer range</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in yaml.load(string, error.label = error.label, ...): NAs introduced by
coercion: 15032449022 is out of integer range</code></pre>
</div>
</div>
<section id="waiting-for-cleaning-code" class="level4" data-number="4.1.0.1">
<h4 data-number="4.1.0.1" class="anchored" data-anchor-id="waiting-for-cleaning-code"><span class="header-section-number">4.1.0.1</span> waiting for cleaning (code)</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22  8
   chamber       party congress seat_count prev_seat seat_change seat_change_pct
   &lt;chr&gt;         &lt;chr&gt;    &lt;dbl&gt;      &lt;int&gt;     &lt;int&gt;       &lt;int&gt;           &lt;dbl&gt;
 1 House of Rep Demo      115        192        NA          NA           NA   
 2 House of Rep Demo      116        234       192          42           21.9 
 3 House of Rep Demo      117        226       234          -8           -3.42
 4 House of Rep Demo      118        217       226          -9           -3.98
 5 House of Rep Inde      115          2        NA          NA           NA   
 6 House of Rep Inde      116          2         2           0            0   
 7 House of Rep Repu      115        233        NA          NA           NA   
 8 House of Rep Repu      116        194       233         -39          -16.7 
 9 House of Rep Repu      117        216       194          22           11.3 
10 House of Rep Repu      118        223       216           7            3.24
#  12 more rows
#  1 more variable: direction &lt;chr&gt;</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
 Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresseats%20change%20each%20congress-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="distribution-map" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="distribution-map"><span class="header-section-number">4.2</span> 3.2 distribution map</h2>
<section id="map-dataset-generation-and-cleansing" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="map-dataset-generation-and-cleansing"><span class="header-section-number">4.2.1</span> 3.2.1 map dataset generation and cleansing</h3>
<p>district cleansing</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in
unique(legis_cg_heatmap$district[is.na(as.integer(legis_cg_heatmap$district))]):
NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "At Large"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
 In argument: `district_clean = case_when(...)`.
Caused by warning in `sprintf()`:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
</section>
<section id="flip-key-construction" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="flip-key-construction"><span class="header-section-number">4.2.2</span> 3.2.2 flip-key construction</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "AL"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CT"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ME"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RI"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CA"</code></pre>
</div>
</div>
</section>
<section id="house-map-generation-function" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="house-map-generation-function"><span class="header-section-number">4.2.3</span> 3.2.3 house map generation function</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> Loading congressional district map for 115th Congress...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>HTTP download failed, trying FTP as fallback...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in download.file(ftp_url, destfile = file_loc, quiet = !progress_bar, :
URL 'ftp://ftp2.census.gov/geo/tiger/GENZ2016/shp/cb_2016_us_cd115_500k.zip':
Timeout of 1800 seconds was reached</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Cloud download failed. Loading from local file instead...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/maps/legis_115_map.png</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresmap%20function%20application-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Loading congressional district map for 116th Congress...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>HTTP download failed, trying FTP as fallback...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in download.file(ftp_url, destfile = file_loc, quiet = !progress_bar, :
URL 'ftp://ftp2.census.gov/geo/tiger/GENZ2020/shp/cb_2020_us_cd116_500k.zip':
Timeout of 1800 seconds was reached</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Cloud download failed. Loading from local file instead...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `stopifnot()`.
 In argument: `district_clean = sprintf("%02d", as.integer(district_code))`.
Caused by warning in `sprintf()`:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/maps/legis_116_map.png</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresmap%20function%20application-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Loading congressional district map for 117th Congress...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>HTTP download failed, trying FTP as fallback...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in download.file(ftp_url, destfile = file_loc, quiet = !progress_bar, :
URL 'ftp://ftp2.census.gov/geo/tiger/GENZ2020/shp/cb_2020_us_cd116_500k.zip':
Timeout of 1800 seconds was reached</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Cloud download failed. Loading from local file instead...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `stopifnot()`.
 In argument: `district_clean = sprintf("%02d", as.integer(district_code))`.
Caused by warning in `sprintf()`:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/maps/legis_117_map.png</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresmap%20function%20application-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Loading congressional district map for 118th Congress...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     
Downloading: 1.7 kB     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>HTTP download failed, trying FTP as fallback...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in download.file(ftp_url, destfile = file_loc, quiet = !progress_bar, :
URL 'ftp://ftp2.census.gov/geo/tiger/GENZ2022/shp/cb_2022_us_cd118_500k.zip':
Timeout of 1800 seconds was reached</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Cloud download failed. Loading from local file instead...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/maps/legis_118_map.png</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresmap%20function%20application-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="senate-map-function-need-further-debug" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="senate-map-function-need-further-debug"><span class="header-section-number">4.2.4</span> 3.2.4 senate map function (need further debug)</h3>
</section>
</section>
</section>
<section id="overall-descriptive-analysis-for-issues" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> 4. overall descriptive analysis for issues</h1>
<section id="analysis-based-on-bills-data" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="analysis-based-on-bills-data"><span class="header-section-number">5.1</span> 4.1 analysis based on bills data</h2>
<section id="bills-data-cleansing" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="bills-data-cleansing"><span class="header-section-number">5.1.1</span> 4.1.1 bills data cleansing</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  search_key            type               number         congress    
 Length:8214        Length:8214        Min.   :    1   Min.   :115.0  
 Class :character   Class :character   1st Qu.:  579   1st Qu.:115.0  
 Mode  :character   Mode  :character   Median : 1627   Median :116.0  
                                       Mean   : 2116   Mean   :116.2  
                                       3rd Qu.: 2878   3rd Qu.:117.0  
                                       Max.   :10559   Max.   :118.0  
                                                                      
 effective_date          year         month           bioguide_id       
 Length:8214        Min.   :2017   Length:8214        Length:8214       
 Class :character   1st Qu.:2018   Class :character   Class :character  
 Mode  :character   Median :2019   Mode  :character   Mode  :character  
                    Mean   :2020                                        
                    3rd Qu.:2021                                        
                    Max.   :2024                                        
                                                                        
    issue             chamber             gender             party          
 Length:8214        Length:8214        Length:8214        Length:8214       
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
   decision         intl_percentage  prof_percentage  dom_percentage  
 Length:8214        Min.   :0.1539   Min.   :0.3382   Min.   :0.1823  
 Class :character   1st Qu.:0.1841   1st Qu.:0.3837   1st Qu.:0.3602  
 Mode  :character   Median :0.2038   Median :0.3965   Median :0.4015  
                    Mean   :0.2111   Mean   :0.3976   Mean   :0.3913  
                    3rd Qu.:0.2303   3rd Qu.:0.4121   3rd Qu.:0.4275  
                    Max.   :0.3811   Max.   :0.4528   Max.   :0.4814  
                    NA's   :622      NA's   :622      NA's   :622     </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="issues-have-major-change-on-bills-data-from-115th-to-118th-congress" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="issues-have-major-change-on-bills-data-from-115th-to-118th-congress"><span class="header-section-number">5.1.2</span> 4.1.2 issues have major change on bills data from 115th to 118th congress</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> num [1:115] 115 115 115 115 115 115 115 115 115 115 ...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/issue change most 115118_bills.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/issue change most 115118_bills.png"</code></pre>
</div>
</div>
</section>
<section id="bills-trends-plot-for-all-issues" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="bills-trends-plot-for-all-issues"><span class="header-section-number">5.1.3</span> 4.1.3 bills trends plot for all issues</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_text_repel()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: ggrepel: 21 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresissues%20bills%20all%20trend-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_text_repel()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: ggrepel: 11 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/issue_share_per_congress_115118_bills.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/issue_share_per_congress_115118_bills.png"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["congress"],"name":[1],"type":["int"],"align":["right"]},{"label":["chamber"],"name":[2],"type":["chr"],"align":["left"]},{"label":["party"],"name":[3],"type":["chr"],"align":["left"]},{"label":["issue"],"name":[4],"type":["chr"],"align":["left"]},{"label":["total_mentions"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"115","2":"House of Representatives","3":"Democratic","4":"National Security","5":"46"},{"1":"115","2":"House of Representatives","3":"Independent","4":"Civil Rights and Liberties, Minority Issues","5":"1"},{"1":"115","2":"House of Representatives","3":"Republican","4":"Armed Forces","5":"47"},{"1":"115","2":"Senate","3":"Democratic","4":"Foreign Affairs","5":"297"},{"1":"115","2":"Senate","3":"Independent","4":"Foreign Affairs","5":"18"},{"1":"115","2":"Senate","3":"Republican","4":"Foreign Affairs","5":"234"},{"1":"116","2":"House of Representatives","3":"Democratic","4":"Foreign Affairs","5":"85"},{"1":"116","2":"House of Representatives","3":"Independent","4":"Armed Forces","5":"2"},{"1":"116","2":"House of Representatives","3":"Republican","4":"Foreign Affairs","5":"89"},{"1":"116","2":"Senate","3":"Democratic","4":"National Security","5":"206"},{"1":"116","2":"Senate","3":"Independent","4":"Foreign Affairs","5":"15"},{"1":"116","2":"Senate","3":"Republican","4":"Armed Forces","5":"270"},{"1":"117","2":"House of Representatives","3":"Democratic","4":"Foreign Affairs","5":"58"},{"1":"117","2":"House of Representatives","3":"Republican","4":"Foreign Affairs","5":"144"},{"1":"117","2":"Senate","3":"Democratic","4":"Foreign Affairs","5":"56"},{"1":"117","2":"Senate","3":"Independent","4":"Foreign Affairs","5":"3"},{"1":"117","2":"Senate","3":"Republican","4":"Foreign Affairs","5":"126"},{"1":"118","2":"House of Representatives","3":"Democratic","4":"Energy","5":"68"},{"1":"118","2":"House of Representatives","3":"Republican","4":"Foreign Affairs","5":"151"},{"1":"118","2":"Senate","3":"Democratic","4":"Foreign Affairs","5":"69"},{"1":"118","2":"Senate","3":"Independent","4":"Foreign Affairs","5":"3"},{"1":"118","2":"Senate","3":"Republican","4":"Foreign Affairs","5":"170"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/top_issues_chamber_party_bills.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/top_issues_chamber_party_bills.csv"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figurescongress%20issue%20attention%20bills-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/top_issues_congress_bills.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/top_issues_congress_bills.csv"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> No plot provided. Returning path only: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/top_issues_party_news.csv</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/top_issues_party_news.csv"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresparty%20issue%20attention%20bills-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figurescongress%20issue%20attention%20bills%20party-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figurescongress%20issue%20attention%20bills%20party-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figurescongress%20issue%20attention%20bills%20party-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figurescongress%20issue%20attention%20bills%20party-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="calculating-shanon-entropy-for-bills-news" class="level3" data-number="5.1.4">
<h3 data-number="5.1.4" class="anchored" data-anchor-id="calculating-shanon-entropy-for-bills-news"><span class="header-section-number">5.1.4</span> 4.1.4 calculating shanon-entropy for bills news</h3>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["bioguide_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["congress"],"name":[2],"type":["int"],"align":["right"]},{"label":["gender"],"name":[3],"type":["chr"],"align":["left"]},{"label":["chamber"],"name":[4],"type":["chr"],"align":["left"]},{"label":["party"],"name":[5],"type":["chr"],"align":["left"]},{"label":["shannon_entropy"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["n_issues"],"name":[7],"type":["int"],"align":["right"]},{"label":["total_news"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"A000055","2":"115","3":"M","4":"House of Representatives","5":"Republican","6":"0.6365142","7":"2","8":"3"},{"1":"A000055","2":"118","3":"M","4":"House of Representatives","5":"Republican","6":"0.6931472","7":"2","8":"2"},{"1":"A000148","2":"117","3":"M","4":"House of Representatives","5":"Democratic","6":"0.0000000","7":"1","8":"1"},{"1":"A000148","2":"118","3":"M","4":"House of Representatives","5":"Democratic","6":"0.0000000","7":"1","8":"1"},{"1":"A000360","2":"115","3":"M","4":"Senate","5":"Republican","6":"1.3862944","7":"4","8":"4"},{"1":"A000360","2":"116","3":"M","4":"Senate","5":"Republican","6":"0.0000000","7":"1","8":"5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresissues%20shanon%20entropy%20bills-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/Average Attention Diversity by Congress-bills.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/Average Attention Diversity by Congress-bills.png"</code></pre>
</div>
</div>
</section>
</section>
<section id="issue-analysis-using-legis_tp" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="issue-analysis-using-legis_tp"><span class="header-section-number">5.2</span> 4.2 issue analysis using legis_tp</h2>
<section id="issue-heatmap-by-congress" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="issue-heatmap-by-congress"><span class="header-section-number">5.2.1</span> 4.2.1 issue heatmap by congress</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_mode.png</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresissue%20heatmap%20by%20congress-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="focal-issue-of-each-congress" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="focal-issue-of-each-congress"><span class="header-section-number">5.2.2</span> 4.2.2 focal issue of each congress</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figurescongress%20focal%20issue-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_issue_trend.png</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="lgbm-features-importance-analysis" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> 5. lgbm features importance analysis</h1>
</section>
<section id="key-characteristics-analysis" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> 6. key characteristics analysis</h1>
<p>this part will use regression and logistic model to see the key relationship between legislators personal characteristics and decision mode</p>
<section id="preparing" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="preparing"><span class="header-section-number">7.1</span> 6.0 preparing</h2>
<section id="data-cleansing-1" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="data-cleansing-1"><span class="header-section-number">7.1.1</span> 6.0.1 data cleansing</h3>
</section>
<section id="co-linerality-check" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2" class="anchored" data-anchor-id="co-linerality-check"><span class="header-section-number">7.1.2</span> 6.0.2 co-linerality check</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresco-linerality%20check-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Collinearity check completed.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                 high_edu_share
high_edu_share                                     1.0000000000
foreign_born_ratio                                 0.3588219143
white_ratio                                       -0.1379387802
black_or_african_american_ratio                   -0.1045964418
asian_ratio                                        0.4623362227
american_indian_and_alaska_native_ratio           -0.1489879018
native_hawaiian_and_other_pacific_islander_ratio  -0.0007010114
white_collar_share                                 0.9475847363
blue_collar_share                                 -0.8721902238
agriculture_share                                 -0.2889135984
median_household_income_that_year                  0.8130408299
age                                               -0.0229606810
seniority                                          0.0219622519
ideology                                          -0.3953951100
is.republican                                     -0.3639318130
                                                 foreign_born_ratio white_ratio
high_edu_share                                           0.35882191 -0.13793878
foreign_born_ratio                                       1.00000000 -0.65572487
white_ratio                                             -0.65572487  1.00000000
black_or_african_american_ratio                          0.01144230 -0.48647337
asian_ratio                                              0.67760824 -0.54263784
american_indian_and_alaska_native_ratio                 -0.10232424 -0.02902484
native_hawaiian_and_other_pacific_islander_ratio         0.08610676 -0.25780864
white_collar_share                                       0.22753682 -0.05251385
blue_collar_share                                       -0.41229980  0.21705511
agriculture_share                                       -0.04301023  0.07139152
median_household_income_that_year                        0.44222957 -0.24274490
age                                                     -0.05103331  0.01522321
seniority                                                0.01908682 -0.06765186
ideology                                                -0.51932728  0.45028512
is.republican                                           -0.48849781  0.39679370
                                                 black_or_african_american_ratio
high_edu_share                                                       -0.10459644
foreign_born_ratio                                                    0.01144230
white_ratio                                                          -0.48647337
black_or_african_american_ratio                                       1.00000000
asian_ratio                                                          -0.11828069
american_indian_and_alaska_native_ratio                              -0.19897227
native_hawaiian_and_other_pacific_islander_ratio                     -0.12113473
white_collar_share                                                   -0.10021818
blue_collar_share                                                     0.05799567
agriculture_share                                                    -0.19605026
median_household_income_that_year                                    -0.25284887
age                                                                   0.12080624
seniority                                                             0.09859898
ideology                                                             -0.11159800
is.republican                                                        -0.12353074
                                                 asian_ratio
high_edu_share                                    0.46233622
foreign_born_ratio                                0.67760824
white_ratio                                      -0.54263784
black_or_african_american_ratio                  -0.11828069
asian_ratio                                       1.00000000
american_indian_and_alaska_native_ratio          -0.08866362
native_hawaiian_and_other_pacific_islander_ratio  0.43764414
white_collar_share                                0.38498764
blue_collar_share                                -0.47512944
agriculture_share                                -0.10888098
median_household_income_that_year                 0.57877647
age                                              -0.02634040
seniority                                         0.02391466
ideology                                         -0.43767838
is.republican                                    -0.41429182
                                                 american_indian_and_alaska_native_ratio
high_edu_share                                                              -0.148987902
foreign_born_ratio                                                          -0.102324239
white_ratio                                                                 -0.029024843
black_or_african_american_ratio                                             -0.198972266
asian_ratio                                                                 -0.088663623
american_indian_and_alaska_native_ratio                                      1.000000000
native_hawaiian_and_other_pacific_islander_ratio                             0.040432300
white_collar_share                                                          -0.142751627
blue_collar_share                                                            0.076258685
agriculture_share                                                            0.151237030
median_household_income_that_year                                           -0.110630807
age                                                                         -0.004396017
seniority                                                                   -0.008906587
ideology                                                                     0.091426241
is.republican                                                                0.073589112
                                                 native_hawaiian_and_other_pacific_islander_ratio
high_edu_share                                                                      -0.0007010114
foreign_born_ratio                                                                   0.0861067635
white_ratio                                                                         -0.2578086393
black_or_african_american_ratio                                                     -0.1211347321
asian_ratio                                                                          0.4376441401
american_indian_and_alaska_native_ratio                                              0.0404323000
native_hawaiian_and_other_pacific_islander_ratio                                     1.0000000000
white_collar_share                                                                  -0.0379262714
blue_collar_share                                                                   -0.0711249625
agriculture_share                                                                    0.0251243933
median_household_income_that_year                                                    0.0919105330
age                                                                                 -0.0005398870
seniority                                                                            0.0036257565
ideology                                                                            -0.1189871174
is.republican                                                                       -0.1077462015
                                                 white_collar_share
high_edu_share                                           0.94758474
foreign_born_ratio                                       0.22753682
white_ratio                                             -0.05251385
black_or_african_american_ratio                         -0.10021818
asian_ratio                                              0.38498764
american_indian_and_alaska_native_ratio                 -0.14275163
native_hawaiian_and_other_pacific_islander_ratio        -0.03792627
white_collar_share                                       1.00000000
blue_collar_share                                       -0.88572786
agriculture_share                                       -0.35278530
median_household_income_that_year                        0.75419187
age                                                     -0.02076818
seniority                                                0.01647412
ideology                                                -0.27629802
is.republican                                           -0.25185676
                                                 blue_collar_share
high_edu_share                                         -0.87219022
foreign_born_ratio                                     -0.41229980
white_ratio                                             0.21705511
black_or_african_american_ratio                         0.05799567
asian_ratio                                            -0.47512944
american_indian_and_alaska_native_ratio                 0.07625869
native_hawaiian_and_other_pacific_islander_ratio       -0.07112496
white_collar_share                                     -0.88572786
blue_collar_share                                       1.00000000
agriculture_share                                       0.18672356
median_household_income_that_year                      -0.67233585
age                                                     0.00764594
seniority                                              -0.01353603
ideology                                                0.40844285
is.republican                                           0.40135845
                                                 agriculture_share
high_edu_share                                        -0.288913598
foreign_born_ratio                                    -0.043010229
white_ratio                                            0.071391517
black_or_african_american_ratio                       -0.196050257
asian_ratio                                           -0.108880982
american_indian_and_alaska_native_ratio                0.151237030
native_hawaiian_and_other_pacific_islander_ratio       0.025124393
white_collar_share                                    -0.352785298
blue_collar_share                                      0.186723558
agriculture_share                                      1.000000000
median_household_income_that_year                     -0.149894284
age                                                    0.018453893
seniority                                              0.006335458
ideology                                               0.113246906
is.republican                                          0.115202772
                                                 median_household_income_that_year
high_edu_share                                                         0.813040830
foreign_born_ratio                                                     0.442229574
white_ratio                                                           -0.242744897
black_or_african_american_ratio                                       -0.252848866
asian_ratio                                                            0.578776470
american_indian_and_alaska_native_ratio                               -0.110630807
native_hawaiian_and_other_pacific_islander_ratio                       0.091910533
white_collar_share                                                     0.754191867
blue_collar_share                                                     -0.672335847
agriculture_share                                                     -0.149894284
median_household_income_that_year                                      1.000000000
age                                                                   -0.092513572
seniority                                                              0.001018352
ideology                                                              -0.358391223
is.republican                                                         -0.321734195
                                                          age    seniority
high_edu_share                                   -0.022960681  0.021962252
foreign_born_ratio                               -0.051033307  0.019086819
white_ratio                                       0.015223206 -0.067651860
black_or_african_american_ratio                   0.120806241  0.098598979
asian_ratio                                      -0.026340403  0.023914658
american_indian_and_alaska_native_ratio          -0.004396017 -0.008906587
native_hawaiian_and_other_pacific_islander_ratio -0.000539887  0.003625756
white_collar_share                               -0.020768178  0.016474116
blue_collar_share                                 0.007645940 -0.013536034
agriculture_share                                 0.018453893  0.006335458
median_household_income_that_year                -0.092513572  0.001018352
age                                               1.000000000  0.610906251
seniority                                         0.610906251  1.000000000
ideology                                         -0.083294941 -0.206433728
is.republican                                    -0.084099296 -0.122277112
                                                    ideology is.republican
high_edu_share                                   -0.39539511   -0.36393181
foreign_born_ratio                               -0.51932728   -0.48849781
white_ratio                                       0.45028512    0.39679370
black_or_african_american_ratio                  -0.11159800   -0.12353074
asian_ratio                                      -0.43767838   -0.41429182
american_indian_and_alaska_native_ratio           0.09142624    0.07358911
native_hawaiian_and_other_pacific_islander_ratio -0.11898712   -0.10774620
white_collar_share                               -0.27629802   -0.25185676
blue_collar_share                                 0.40844285    0.40135845
agriculture_share                                 0.11324691    0.11520277
median_household_income_that_year                -0.35839122   -0.32173420
age                                              -0.08329494   -0.08409930
seniority                                        -0.20643373   -0.12227711
ideology                                          1.00000000    0.87459677
is.republican                                     0.87459677    1.00000000</code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["numeric"],"name":[1],"type":["chr"],"align":["left"]},{"label":["categorical"],"name":[2],"type":["chr"],"align":["left"]},{"label":["p_value"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"high_edu_share","2":"chamber","3":"2.960583e-02"},{"1":"foreign_born_ratio","2":"chamber","3":"4.880322e-11"},{"1":"white_ratio","2":"chamber","3":"3.781923e-06"},{"1":"asian_ratio","2":"chamber","3":"1.154326e-03"},{"1":"american_indian_and_alaska_native_ratio","2":"chamber","3":"4.076351e-06"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"chamber","3":"2.470669e-04"},{"1":"blue_collar_share","2":"chamber","3":"2.335168e-02"},{"1":"median_household_income_that_year","2":"chamber","3":"1.962894e-05"},{"1":"age","2":"chamber","3":"7.984659e-16"},{"1":"seniority","2":"chamber","3":"1.531871e-20"},{"1":"ideology","2":"chamber","3":"1.541138e-03"},{"1":"high_edu_share","2":"gender","3":"9.877904e-06"},{"1":"foreign_born_ratio","2":"gender","3":"5.916238e-08"},{"1":"white_ratio","2":"gender","3":"3.067855e-04"},{"1":"asian_ratio","2":"gender","3":"3.859914e-09"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"gender","3":"2.475659e-02"},{"1":"white_collar_share","2":"gender","3":"7.678066e-04"},{"1":"blue_collar_share","2":"gender","3":"3.746994e-07"},{"1":"agriculture_share","2":"gender","3":"4.022686e-02"},{"1":"median_household_income_that_year","2":"gender","3":"2.315024e-03"},{"1":"ideology","2":"gender","3":"1.748783e-21"},{"1":"is.republican","2":"gender","3":"2.890532e-19"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["var1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["var2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["p_value"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"gender","2":"chamber","3":"0.4169404","_rn_":"2"},{"1":"chamber","2":"gender","3":"0.4169404","_rn_":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["var1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["var2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["correlation"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["p_value"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["significance"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"high_edu_share","2":"white_collar_share","3":"0.9475847","4":"0.000000e+00","5":"***","_rn_":"cor6"},{"1":"white_collar_share","2":"blue_collar_share","3":"-0.8857279","4":"0.000000e+00","5":"***","_rn_":"cor77"},{"1":"ideology","2":"is.republican","3":"0.8745968","4":"0.000000e+00","5":"***","_rn_":"cor104"},{"1":"high_edu_share","2":"blue_collar_share","3":"-0.8721902","4":"0.000000e+00","5":"***","_rn_":"cor7"},{"1":"high_edu_share","2":"median_household_income_that_year","3":"0.8130408","4":"2.393345e-297","5":"***","_rn_":"cor9"},{"1":"white_collar_share","2":"median_household_income_that_year","3":"0.7541919","4":"1.120659e-231","5":"***","_rn_":"cor79"},{"1":"foreign_born_ratio","2":"asian_ratio","3":"0.6776082","4":"7.793803e-170","5":"***","_rn_":"cor16"},{"1":"blue_collar_share","2":"median_household_income_that_year","3":"-0.6723358","4":"2.889893e-166","5":"***","_rn_":"cor85"},{"1":"foreign_born_ratio","2":"white_ratio","3":"-0.6557249","4":"1.723865e-155","5":"***","_rn_":"cor14"},{"1":"age","2":"seniority","3":"0.6109063","4":"2.810204e-130","5":"***","_rn_":"cor99"},{"1":"asian_ratio","2":"median_household_income_that_year","3":"0.5787765","4":"2.130385e-113","5":"***","_rn_":"cor55"},{"1":"white_ratio","2":"asian_ratio","3":"-0.5426378","4":"3.091937e-97","5":"***","_rn_":"cor28"},{"1":"foreign_born_ratio","2":"ideology","3":"-0.5193273","4":"2.536198e-84","5":"***","_rn_":"cor25"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="dependent-variable-is.dom" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="dependent-variable-is.dom"><span class="header-section-number">7.2</span> 6.1 dependent variable: is.dom</h2>
<section id="multiple-variables-logit-model" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="multiple-variables-logit-model"><span class="header-section-number">7.2.1</span> 6.1.1 multiple variables logit model</h3>
<p>lasso - demographic</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20lasso1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.002453229 
11 x 1 sparse Matrix of class "dgCMatrix"
                                  lambda.min
(Intercept)                     -0.021544647
age                              0.001824360
partyIndependent                -0.155134729
partyRepublican                  0.396245760
ideology                         0.157589689
chamberhouse of representatives -0.234362349
genderMale                       0.317922599
seniority                        0.007261417
as.factor(congress)116          -0.167538967
as.factor(congress)117          -2.130413713
as.factor(congress)118          -1.110868678</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20lasso1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.01470672 
11 x 1 sparse Matrix of class "dgCMatrix"
                                  lambda.min
(Intercept)                     -0.290161677
age                              0.003625695
partyIndependent                -0.261733859
partyRepublican                  0.288133126
ideology                         0.368666418
chamberhouse of representatives -0.224180186
genderMale                       0.311421462
seniority                        0.007172590
as.factor(congress)116          -0.082311372
as.factor(congress)117          -1.894294509
as.factor(congress)118          -0.972556438</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20lasso1-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.004906458 
11 x 1 sparse Matrix of class "dgCMatrix"
                                  lambda.min
(Intercept)                     -0.087839646
age                              0.002188608
partyIndependent                -0.156017287
partyRepublican                  0.361888468
ideology                         0.217498666
chamberhouse of representatives -0.227240878
genderMale                       0.312099844
seniority                        0.007099589
as.factor(congress)116          -0.137236814
as.factor(congress)117          -2.066053180
as.factor(congress)118          -1.068759590</code></pre>
</div>
</div>
<p>lasso - add district_data</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20lasso2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.003246056 
22 x 1 sparse Matrix of class "dgCMatrix"
                                                    lambda.min
(Intercept)                                      -2.806455e+00
age                                               1.720203e-03
partyIndependent                                 -2.109634e-01
partyRepublican                                   4.265438e-01
ideology                                          2.260952e-01
chambersenate                                     2.456913e-01
genderMale                                        3.081019e-01
seniority                                         6.853633e-03
high_edu_share                                    .           
foreign_born_ratio                                .           
white_ratio                                       2.763544e-01
black_or_african_american_ratio                   2.026778e-01
asian_ratio                                      -6.054071e-01
american_indian_and_alaska_native_ratio          -3.370847e+00
native_hawaiian_and_other_pacific_islander_ratio -1.985755e+00
white_collar_share                                4.705871e+00
blue_collar_share                                -1.225158e+00
agriculture_share                                 1.089124e+01
median_household_income_that_year                -4.740977e-06
as.factor(congress)116                           -7.637673e-02
as.factor(congress)117                           -2.113752e+00
as.factor(congress)118                           -1.065473e+00</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20lasso2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.02343915 
22 x 1 sparse Matrix of class "dgCMatrix"
                                                    lambda.min
(Intercept)                                      -2.326789e+00
age                                               4.046736e-03
partyIndependent                                 -3.541106e-01
partyRepublican                                   2.924937e-01
ideology                                          4.578320e-01
chambersenate                                     2.303853e-01
genderMale                                        2.994133e-01
seniority                                         6.545377e-03
high_edu_share                                   -1.872168e-01
foreign_born_ratio                                4.959142e-01
white_ratio                                       1.000988e+00
black_or_african_american_ratio                   7.930315e-01
asian_ratio                                      -8.627127e-02
american_indian_and_alaska_native_ratio          -3.103878e+00
native_hawaiian_and_other_pacific_islander_ratio -1.786965e+00
white_collar_share                                3.147276e+00
blue_collar_share                                -3.265869e+00
agriculture_share                                 1.028911e+01
median_household_income_that_year                -5.587191e-06
as.factor(congress)116                            3.519350e-02
as.factor(congress)117                           -1.686327e+00
as.factor(congress)118                           -7.720139e-01</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20lasso2-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.007819771 
22 x 1 sparse Matrix of class "dgCMatrix"
                                                    lambda.min
(Intercept)                                      -2.239836e+00
age                                               2.316573e-03
partyIndependent                                 -1.791293e-01
partyRepublican                                   3.714670e-01
ideology                                          3.028371e-01
chambersenate                                     2.251646e-01
genderMale                                        2.935738e-01
seniority                                         6.343714e-03
high_edu_share                                    .           
foreign_born_ratio                                .           
white_ratio                                       5.125976e-01
black_or_african_american_ratio                   3.656727e-01
asian_ratio                                      -2.576795e-01
american_indian_and_alaska_native_ratio          -2.951089e+00
native_hawaiian_and_other_pacific_islander_ratio -1.965719e+00
white_collar_share                                3.497949e+00
blue_collar_share                                -2.115535e+00
agriculture_share                                 9.271883e+00
median_household_income_that_year                -3.888981e-06
as.factor(congress)116                           -1.725205e-02
as.factor(congress)117                           -1.955937e+00
as.factor(congress)118                           -9.526542e-01</code></pre>
</div>
</div>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.694943  1        1.301900
is.republican       4.940997  1        2.222835
ideology            5.159754  1        2.271509
chamber             1.193848  1        1.092634
seniority           1.825166  1        1.350987
gender              1.081779  1        1.040086
as.factor(congress) 1.181549  3        1.028195</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.114866  1        1.055872
chamber             1.075535  1        1.037080
ideology            1.106890  1        1.052088
gender              1.078908  1        1.038705
as.factor(congress) 1.060676  3        1.009866</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.088583  1        1.043352
chamber             1.049973  1        1.024682
is.republican       1.101730  1        1.049633
gender              1.068439  1        1.033653
as.factor(congress) 1.075200  3        1.012158</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.089119  1        1.043608
chamber             1.072157  1        1.035450
is.republican       1.111850  1        1.054443
gender              1.068256  1        1.033565
as.factor(congress) 1.053351  3        1.008700</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.157871  1        1.076044
chamber             1.107106  1        1.052191
ideology            1.164539  1        1.079138
gender              1.080584  1        1.039511
as.factor(congress) 1.033283  3        1.005472</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                                                      GVIF Df GVIF^(1/(2*Df))
high_edu_share                                   15.305626  1        3.912240
foreign_born_ratio                                4.635696  1        2.153067
white_ratio                                       8.778755  1        2.962896
black_or_african_american_ratio                   5.055349  1        2.248410
asian_ratio                                       4.063717  1        2.015866
american_indian_and_alaska_native_ratio           1.454668  1        1.206096
native_hawaiian_and_other_pacific_islander_ratio  1.798815  1        1.341199
white_collar_share                               23.314475  1        4.828507
blue_collar_share                                 9.018321  1        3.003052
agriculture_share                                 1.538158  1        1.240225
median_household_income_that_year                 5.690833  1        2.385547
as.factor(congress)                               2.482749  3        1.163649</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                     GVIF Df GVIF^(1/(2*Df))
high_edu_share                                   3.767448  1        1.940992
foreign_born_ratio                               2.107124  1        1.451594
black_or_african_american_ratio                  1.259623  1        1.122329
asian_ratio                                      3.308850  1        1.819024
american_indian_and_alaska_native_ratio          1.090506  1        1.044273
native_hawaiian_and_other_pacific_islander_ratio 1.437391  1        1.198913
agriculture_share                                1.199188  1        1.095075
median_household_income_that_year                5.213959  1        2.283410
as.factor(congress)                              1.416505  3        1.059749</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                     GVIF Df GVIF^(1/(2*Df))
foreign_born_ratio                               2.153849  1        1.467600
asian_ratio                                      3.331401  1        1.825213
black_or_african_american_ratio                  1.268916  1        1.126462
american_indian_and_alaska_native_ratio          1.097551  1        1.047641
native_hawaiian_and_other_pacific_islander_ratio 1.426372  1        1.194308
median_household_income_that_year                3.396003  1        1.842825
blue_collar_share                                2.194539  1        1.481398
agriculture_share                                1.130019  1        1.063023
as.factor(congress)                              1.411197  3        1.059086</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                     GVIF Df GVIF^(1/(2*Df))
foreign_born_ratio                               3.895458  1        1.973691
white_ratio                                      6.992191  1        2.644275
black_or_african_american_ratio                  4.196232  1        2.048471
american_indian_and_alaska_native_ratio          1.359785  1        1.166098
native_hawaiian_and_other_pacific_islander_ratio 1.525596  1        1.235150
median_household_income_that_year                1.810483  1        1.345542
agriculture_share                                1.142511  1        1.068883
as.factor(congress)                              1.786892  3        1.101581</code></pre>
</div>
</div>
<section id="residual-check-for-logit-model" class="level4" data-number="7.2.1.1">
<h4 data-number="7.2.1.1" class="anchored" data-anchor-id="residual-check-for-logit-model"><span class="header-section-number">7.2.1.1</span> residual check for logit model</h4>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.window(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot.xy(xy, type, ...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in title(...): "predictor" is not a graphical parameter</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> All residual plots saved under: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/logit_residual_plots </code></pre>
</div>
</div>
</section>
</section>
<section id="single-variable-logit-model" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="single-variable-logit-model"><span class="header-section-number">7.2.2</span> 6.1.2 single variable logit model</h3>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["OR"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"ideology","2":"9.563488e-01","3":"2.385382e-01","4":"4.0092058","5":"0.0000609233","6":"2.602178e+00"},{"1":"white_ratio","2":"1.231408e+00","3":"3.703654e-01","4":"3.3248458","5":"0.0008846744","6":"3.426049e+00"},{"1":"white_collar_share","2":"2.758195e+00","3":"9.353428e-01","4":"2.9488606","5":"0.0031894781","6":"1.577136e+01"},{"1":"foreign_born_ratio","2":"-1.596171e+00","3":"6.034657e-01","4":"-2.6450071","5":"0.0081689195","6":"2.026711e-01"},{"1":"asian_ratio","2":"-1.928809e+00","3":"8.915335e-01","4":"-2.1634733","5":"0.0305047951","6":"1.453212e-01"},{"1":"blue_collar_share","2":"-2.405613e+00","3":"1.223483e+00","4":"-1.9662002","5":"0.0492754928","6":"9.021022e-02"},{"1":"age","2":"8.927545e-03","3":"5.203696e-03","4":"1.7156161","5":"0.0862323383","6":"1.008968e+00"},{"1":"high_edu_share","2":"1.049793e+00","3":"6.207060e-01","4":"1.6912890","5":"0.0907816285","6":"2.857060e+00"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.261386e+01","3":"7.485576e+00","4":"-1.6850884","5":"0.0919715139","6":"3.325612e-06"},{"1":"seniority","2":"9.667184e-03","3":"6.164440e-03","4":"1.5682177","5":"0.1168303328","6":"1.009714e+00"},{"1":"american_indian_and_alaska_native_ratio","2":"-3.932886e+00","3":"2.657381e+00","4":"-1.4799857","5":"0.1388770705","6":"1.958706e-02"},{"1":"agriculture_share","2":"5.128622e+00","3":"5.559173e+00","4":"0.9225513","5":"0.3562410591","6":"1.687844e+02"},{"1":"median_household_income_that_year","2":"1.490668e-06","3":"3.426845e-06","4":"0.4349973","5":"0.6635643861","6":"1.000001e+00"},{"1":"black_or_african_american_ratio","2":"-2.179935e-01","3":"5.451851e-01","4":"-0.3998524","5":"0.6892652684","6":"8.041306e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20logit%20sin%20district2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>coefficient plot</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `geom_errobarh()` was deprecated in ggplot2 4.0.0.
 Please use the `orientation` argument of `geom_errorbar()` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`height` was translated to `width`.
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_logit_single_coefficient.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_logit_single_coefficient.png"</code></pre>
</div>
</div>
</section>
</section>
<section id="dependent-variable-dom_percentage" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="dependent-variable-dom_percentage"><span class="header-section-number">7.3</span> 6.2 dependent variable: dom_percentage</h2>
<section id="multiple-variables-regression-model" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="multiple-variables-regression-model"><span class="header-section-number">7.3.1</span> 6.2.1 multiple variables regression model</h3>
<p>lasso</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20lm%20mul1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0005956207 
10 x 1 sparse Matrix of class "dgCMatrix"
                                   lambda.min
(Intercept)                      0.3790179267
age                              .           
is.republican1                   .           
ideology                         0.0281761686
chamberhouse of representatives -0.0114913975
genderMale                       0.0100646126
seniority                        0.0001152211
as.factor(congress)116           .           
as.factor(congress)117          -0.0290553490
as.factor(congress)118          -0.0201962864</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20lm%20mul1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.001861741 
10 x 1 sparse Matrix of class "dgCMatrix"
                                   lambda.min
(Intercept)                      3.807803e-01
age                             -3.795016e-05
is.republican1                  -1.609599e-03
ideology                         3.171574e-02
chamberhouse of representatives -1.178444e-02
genderMale                       1.086490e-02
seniority                        2.015896e-04
as.factor(congress)116          -2.258922e-03
as.factor(congress)117          -3.065714e-02
as.factor(congress)118          -2.228535e-02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20lm%20mul1-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.001307386 
10 x 1 sparse Matrix of class "dgCMatrix"
                                  lambda.min
(Intercept)                      0.379041463
age                              .          
is.republican1                   .          
ideology                         0.027709358
chamberhouse of representatives -0.011336271
genderMale                       0.009870291
seniority                        0.000106771
as.factor(congress)116           .          
as.factor(congress)117          -0.028383192
as.factor(congress)118          -0.019587382</code></pre>
</div>
</div>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.707603  1        1.306753
is.republican       5.040622  1        2.245133
ideology            5.412461  1        2.326470
seniority           1.837583  1        1.355575
chamber             1.204317  1        1.097414
gender              1.083356  1        1.040844
as.factor(congress) 1.178766  3        1.027790</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.095753  1        1.046782
chamber             1.055185  1        1.027222
gender              1.068973  1        1.033912
is.republican       1.087076  1        1.042630
as.factor(congress) 1.057888  3        1.009423</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.121874  1        1.059186
ideology            1.122167  1        1.059324
chamber             1.083326  1        1.040829
gender              1.079950  1        1.039206
as.factor(congress) 1.064188  3        1.010423</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.162189  1        1.078049
ideology            1.181348  1        1.086898
chamber             1.118401  1        1.057545
gender              1.082207  1        1.040292
as.factor(congress) 1.030459  3        1.005013</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.091092  1        1.044553
is.republican       1.098427  1        1.048059
chamber             1.078592  1        1.038553
gender              1.068774  1        1.033815
as.factor(congress) 1.027662  3        1.004558</code></pre>
</div>
</div>
<p>legis_lm0 marginal effects</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/ideology_marginal_effect_legis_dom.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/ideology_marginal_effect_legis_dom.png"</code></pre>
</div>
</div>
</section>
<section id="single-variable-regression-model" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="single-variable-regression-model"><span class="header-section-number">7.3.2</span> 6.2.2 single variable regression model</h3>
<p>models training - legis</p>
<p>single variable model coefficient plot</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`height` was translated to `width`.
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_lm_single_coefficient_dom.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_lm_single_coefficient_dom.png"</code></pre>
</div>
</div>
</section>
<section id="robustness-check" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3" class="anchored" data-anchor-id="robustness-check"><span class="header-section-number">7.3.3</span> robustness check</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `fortify(&lt;lm&gt;)` was deprecated in ggplot2 3.6.0.
 Please use `broom::augment(&lt;lm&gt;)` instead.
 The deprecated feature was likely used in the ggplot2 package.
  Please report the issue at &lt;https://github.com/tidyverse/ggplot2/issues&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom1.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom2.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom3.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom4.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  output/lm_diagnostics_plots </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_age_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_ideology_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_is.republican_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_gender_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_chamber_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_seniority_dom.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  output/lm_diagnostics_plots </code></pre>
</div>
</div>
</section>
</section>
<section id="dependent-variable-prof_percentage" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="dependent-variable-prof_percentage"><span class="header-section-number">7.4</span> 6.3 dependent variable: prof_percentage</h2>
<section id="multiple-variables-regression-model-1" class="level3" data-number="7.4.1">
<h3 data-number="7.4.1" class="anchored" data-anchor-id="multiple-variables-regression-model-1"><span class="header-section-number">7.4.1</span> 6.3.1 multiple variables regression model</h3>
<p>lasso</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof_percentage%20lm%20lasso-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 7.337787e-05 
11 x 1 sparse Matrix of class "dgCMatrix"
                                   lambda.min
(Intercept)                      3.963761e-01
age                             -7.395189e-08
partyIndependent                 2.528863e-03
partyRepublican                 -1.762001e-03
ideology                        -4.879505e-03
chamberhouse of representatives  3.294603e-03
genderMale                      -2.747912e-03
seniority                       -1.346113e-04
as.factor(congress)116           8.584846e-03
as.factor(congress)117           1.504472e-02
as.factor(congress)118           1.306156e-02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof_percentage%20lm%20lasso-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0003327597 
11 x 1 sparse Matrix of class "dgCMatrix"
                                   lambda.min
(Intercept)                      3.969855e-01
age                             -6.933148e-06
partyIndependent                 3.246779e-03
partyRepublican                 -1.822054e-03
ideology                        -4.956615e-03
chamberhouse of representatives  3.373733e-03
genderMale                      -2.839649e-03
seniority                       -1.348657e-04
as.factor(congress)116           8.491385e-03
as.factor(congress)117           1.487755e-02
as.factor(congress)118           1.291182e-02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof_percentage%20lm%20lasso-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0001218392 
11 x 1 sparse Matrix of class "dgCMatrix"
                                   lambda.min
(Intercept)                      3.964969e-01
age                             -1.377746e-06
partyIndependent                 2.651165e-03
partyRepublican                 -1.769419e-03
ideology                        -4.897978e-03
chamberhouse of representatives  3.307361e-03
genderMale                      -2.763057e-03
seniority                       -1.345490e-04
as.factor(congress)116           8.559312e-03
as.factor(congress)117           1.500475e-02
as.factor(congress)118           1.302514e-02</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof_percentage%20lm%20lasso2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 7.472604e-05 
22 x 1 sparse Matrix of class "dgCMatrix"
                                                    lambda.min
(Intercept)                                       4.525509e-01
age                                              -3.244181e-06
partyIndependent                                  4.387828e-03
partyRepublican                                  -1.596277e-03
ideology                                         -2.729171e-03
chambersenate                                    -2.928269e-03
genderMale                                       -2.840754e-03
seniority                                        -1.234677e-04
high_edu_share                                    4.214839e-02
foreign_born_ratio                                9.181693e-03
white_ratio                                      -5.482874e-03
black_or_african_american_ratio                   5.345298e-04
asian_ratio                                       .           
american_indian_and_alaska_native_ratio          -1.510626e-02
native_hawaiian_and_other_pacific_islander_ratio  5.480053e-03
white_collar_share                               -1.092744e-01
blue_collar_share                                 9.203157e-03
agriculture_share                                -1.136684e-01
median_household_income_that_year                 .           
as.factor(congress)116                            7.615448e-03
as.factor(congress)117                            1.500305e-02
as.factor(congress)118                            1.275025e-02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof_percentage%20lm%20lasso2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0004081743 
22 x 1 sparse Matrix of class "dgCMatrix"
                                                    lambda.min
(Intercept)                                       4.368156e-01
age                                              -1.097261e-05
partyIndependent                                  5.157143e-03
partyRepublican                                  -1.732919e-03
ideology                                         -3.163546e-03
chambersenate                                    -2.981108e-03
genderMale                                       -2.946651e-03
seniority                                        -1.268002e-04
high_edu_share                                    3.631760e-02
foreign_born_ratio                                1.294170e-02
white_ratio                                      -6.447460e-03
black_or_african_american_ratio                   5.482616e-04
asian_ratio                                      -5.547714e-03
american_indian_and_alaska_native_ratio          -1.597792e-02
native_hawaiian_and_other_pacific_islander_ratio  3.581627e-02
white_collar_share                               -8.395258e-02
blue_collar_share                                 2.948183e-02
agriculture_share                                -9.962568e-02
median_household_income_that_year                -7.366417e-09
as.factor(congress)116                            7.487973e-03
as.factor(congress)117                            1.442732e-02
as.factor(congress)118                            1.236362e-02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof_percentage%20lm%20lasso2-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0001640235 
22 x 1 sparse Matrix of class "dgCMatrix"
                                                    lambda.min
(Intercept)                                       4.460152e-01
age                                              -4.634175e-06
partyIndependent                                  4.321261e-03
partyRepublican                                  -1.583751e-03
ideology                                         -3.050818e-03
chambersenate                                    -2.871298e-03
genderMale                                       -2.818462e-03
seniority                                        -1.237050e-04
high_edu_share                                    3.509833e-02
foreign_born_ratio                                9.771678e-03
white_ratio                                      -5.831618e-03
black_or_african_american_ratio                   3.042915e-04
asian_ratio                                       .           
american_indian_and_alaska_native_ratio          -1.474437e-02
native_hawaiian_and_other_pacific_islander_ratio  5.753598e-03
white_collar_share                               -9.543425e-02
blue_collar_share                                 1.394166e-02
agriculture_share                                -1.053140e-01
median_household_income_that_year                 .           
as.factor(congress)116                            7.497066e-03
as.factor(congress)117                            1.468892e-02
as.factor(congress)118                            1.252662e-02</code></pre>
</div>
</div>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.707603  1        1.306753
is.republican       5.040622  1        2.245133
ideology            5.412461  1        2.326470
seniority           1.837583  1        1.355575
chamber             1.204317  1        1.097414
gender              1.083356  1        1.040844
as.factor(congress) 1.178766  3        1.027790</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.095753  1        1.046782
chamber             1.055185  1        1.027222
gender              1.068973  1        1.033912
is.republican       1.087076  1        1.042630
as.factor(congress) 1.057888  3        1.009423</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.121874  1        1.059186
ideology            1.122167  1        1.059324
chamber             1.083326  1        1.040829
gender              1.079950  1        1.039206
as.factor(congress) 1.064188  3        1.010423</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.162189  1        1.078049
ideology            1.181348  1        1.086898
chamber             1.118401  1        1.057545
gender              1.082207  1        1.040292
as.factor(congress) 1.030459  3        1.005013</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.091092  1        1.044553
is.republican       1.098427  1        1.048059
chamber             1.078592  1        1.038553
gender              1.068774  1        1.033815
as.factor(congress) 1.027662  3        1.004558</code></pre>
</div>
</div>
<p>legis_lm0 marginal effects</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/ideology_marginal_effect_legis_prof.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/ideology_marginal_effect_legis_prof.png"</code></pre>
</div>
</div>
</section>
<section id="single-variable-regression-model-1" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2" class="anchored" data-anchor-id="single-variable-regression-model-1"><span class="header-section-number">7.4.2</span> 6.3.2 single variable regression model</h3>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-1.701966e-02","3":"3.161084e-03","4":"-5.3841211","5":"8.684407e-08"},{"1":"foreign_born_ratio","2":"2.486539e-02","3":"5.241566e-03","4":"4.7438845","5":"2.337115e-06"},{"1":"white_collar_share","2":"-3.733531e-02","3":"8.292974e-03","4":"-4.5020412","5":"7.356660e-06"},{"1":"ideology","2":"-8.683380e-03","3":"2.066706e-03","4":"-4.2015547","5":"2.845726e-05"},{"1":"blue_collar_share","2":"3.206290e-02","3":"1.097351e-02","4":"2.9218450","5":"3.542044e-03"},{"1":"black_or_african_american_ratio","2":"1.262373e-02","3":"4.917513e-03","4":"2.5670970","5":"1.037063e-02"},{"1":"high_edu_share","2":"-1.405638e-02","3":"5.570129e-03","4":"-2.5235277","5":"1.174123e-02"},{"1":"seniority","2":"-1.329411e-04","3":"5.519407e-05","4":"-2.4086111","5":"1.615617e-02"},{"1":"asian_ratio","2":"1.612721e-02","3":"7.628115e-03","4":"2.1141798","5":"3.469703e-02"},{"1":"age","2":"-9.508520e-05","3":"4.638771e-05","4":"-2.0497930","5":"4.059127e-02"},{"1":"median_household_income_that_year","2":"-4.732203e-08","3":"3.066713e-08","4":"-1.5430862","5":"1.230624e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"8.144085e-02","3":"5.855811e-02","4":"1.3907698","5":"1.645422e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-1.613324e-02","3":"2.361156e-02","4":"-0.6832773","5":"4.945579e-01"},{"1":"agriculture_share","2":"-2.347023e-02","3":"4.885572e-02","4":"-0.4803987","5":"6.310278e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20lm%20sin%20district2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>single variable model coefficient plot</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`height` was translated to `width`.
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_lm_single_coefficient_prof.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_lm_single_coefficient_prof.png"</code></pre>
</div>
</div>
</section>
<section id="robustness-check-1" class="level3" data-number="7.4.3">
<h3 data-number="7.4.3" class="anchored" data-anchor-id="robustness-check-1"><span class="header-section-number">7.4.3</span> robustness check</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom1.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom2.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom3.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom4.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  output/lm_diagnostics_plots </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_age_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_ideology_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_is.republican_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_gender_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_chamber_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_seniority_dom.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  output/lm_diagnostics_plots </code></pre>
</div>
</div>
</section>
</section>
<section id="dependent-variable-intl_percentage" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="dependent-variable-intl_percentage"><span class="header-section-number">7.5</span> 6.4 dependent variable: intl_percentage</h2>
<section id="multiple-variables-regression-model-2" class="level3" data-number="7.5.1">
<h3 data-number="7.5.1" class="anchored" data-anchor-id="multiple-variables-regression-model-2"><span class="header-section-number">7.5.1</span> 6.4.1 multiple variables regression model</h3>
<p>lasso</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresintl_percentage%20logit%20mul1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0004535473 
11 x 1 sparse Matrix of class "dgCMatrix"
                                  lambda.min
(Intercept)                      0.221849755
age                              .          
partyIndependent                 0.005293732
partyRepublican                  .          
ideology                        -0.020082298
chamberhouse of representatives  0.008511850
genderMale                      -0.007469594
seniority                        .          
as.factor(congress)116          -0.005215475
as.factor(congress)117           0.016410028
as.factor(congress)118           0.009357006</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresintl_percentage%20logit%20mul1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.002056782 
11 x 1 sparse Matrix of class "dgCMatrix"
                                   lambda.min
(Intercept)                      2.213320e-01
age                              3.985848e-05
partyIndependent                 1.038304e-02
partyRepublican                  2.956145e-03
ideology                        -2.521928e-02
chamberhouse of representatives  8.698286e-03
genderMale                      -8.091293e-03
seniority                       -5.759337e-05
as.factor(congress)116          -5.771419e-03
as.factor(congress)117           1.615189e-02
as.factor(congress)118           9.722491e-03</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresintl_percentage%20logit%20mul1-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Best lambda: 0.0009955353 
11 x 1 sparse Matrix of class "dgCMatrix"
                                  lambda.min
(Intercept)                      0.222003543
age                              .          
partyIndependent                 0.004639270
partyRepublican                  .          
ideology                        -0.019808879
chamberhouse of representatives  0.008328611
genderMale                      -0.007309502
seniority                        .          
as.factor(congress)116          -0.005340516
as.factor(congress)117           0.015913986
as.factor(congress)118           0.008920746</code></pre>
</div>
</div>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.707603  1        1.306753
is.republican       5.040622  1        2.245133
ideology            5.412461  1        2.326470
seniority           1.837583  1        1.355575
chamber             1.204317  1        1.097414
gender              1.083356  1        1.040844
as.factor(congress) 1.178766  3        1.027790</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.095753  1        1.046782
chamber             1.055185  1        1.027222
gender              1.068973  1        1.033912
is.republican       1.087076  1        1.042630
as.factor(congress) 1.057888  3        1.009423</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
age                 1.121874  1        1.059186
ideology            1.122167  1        1.059324
chamber             1.083326  1        1.040829
gender              1.079950  1        1.039206
as.factor(congress) 1.064188  3        1.010423</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.162189  1        1.078049
ideology            1.181348  1        1.086898
chamber             1.118401  1        1.057545
gender              1.082207  1        1.040292
as.factor(congress) 1.030459  3        1.005013</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        GVIF Df GVIF^(1/(2*Df))
seniority           1.091092  1        1.044553
is.republican       1.098427  1        1.048059
chamber             1.078592  1        1.038553
gender              1.068774  1        1.033815
as.factor(congress) 1.027662  3        1.004558</code></pre>
</div>
</div>
<p>legis_lm0 marginal effects</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code> Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/ideology_marginal_effect_legis_intl.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/ideology_marginal_effect_legis_intl.png"</code></pre>
</div>
</div>
</section>
<section id="single-variable-regression-model-2" class="level3" data-number="7.5.2">
<h3 data-number="7.5.2" class="anchored" data-anchor-id="single-variable-regression-model-2"><span class="header-section-number">7.5.2</span> 6.4.2 single variable regression model</h3>
<p>models training - legis</p>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-5.161546e-02","3":"5.746031e-03","4":"-8.98280269","5":"9.464095e-19"},{"1":"foreign_born_ratio","2":"7.410377e-02","3":"9.578821e-03","4":"7.73621008","5":"2.095513e-14"},{"1":"ideology","2":"-2.641306e-02","3":"3.830193e-03","4":"-6.89601323","5":"8.598600e-12"},{"1":"asian_ratio","2":"7.038672e-02","3":"1.402774e-02","4":"5.01767908","5":"5.983476e-07"},{"1":"black_or_african_american_ratio","2":"4.299798e-02","3":"9.060107e-03","4":"4.74585790","5":"2.314841e-06"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"4.209675e-01","3":"1.079996e-01","4":"3.89786116","5":"1.021835e-04"},{"1":"white_collar_share","2":"-5.496857e-02","3":"1.542131e-02","4":"-3.56445481","5":"3.783249e-04"},{"1":"median_household_income_that_year","2":"-1.098471e-07","3":"5.682719e-08","4":"-1.93300247","5":"5.346099e-02"},{"1":"high_edu_share","2":"-1.523237e-02","3":"1.034446e-02","4":"-1.47251415","5":"1.411332e-01"},{"1":"agriculture_share","2":"-1.255392e-01","3":"9.051899e-02","4":"-1.38688275","5":"1.657242e-01"},{"1":"blue_collar_share","2":"1.439096e-02","3":"2.041039e-02","4":"0.70508030","5":"4.808913e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-2.313323e-02","3":"4.377988e-02","4":"-0.52839871","5":"5.973162e-01"},{"1":"age","2":"-1.310628e-05","3":"8.672718e-05","4":"-0.15112083","5":"8.799046e-01"},{"1":"seniority","2":"1.005220e-05","3":"1.032575e-04","4":"0.09735082","5":"9.224633e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresintl.percentage%20lm%20sin%20district2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>single variable model coefficient plot</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`height` was translated to `width`.
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_lm_single_coefficient_intl.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/legis_lm_single_coefficient_intl.png"</code></pre>
</div>
</div>
</section>
<section id="robustness-check-2" class="level3" data-number="7.5.3">
<h3 data-number="7.5.3" class="anchored" data-anchor-id="robustness-check-2"><span class="header-section-number">7.5.3</span> robustness check</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom1.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom2.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom3.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_dom4.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  output/lm_diagnostics_plots </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_age_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_ideology_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_is.republican_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_gender_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_chamber_dom.png

`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
 Saved plot to: /Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/lm_diagnostics_plots/diagnostic_legis_seniority_dom.png</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  output/lm_diagnostics_plots </code></pre>
</div>
</div>
</section>
</section>
<section id="interaction-model" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="interaction-model"><span class="header-section-number">7.6</span> 6.5 interaction model</h2>
<section id="dependent-variable-is.dom-1" class="level3" data-number="7.6.1">
<h3 data-number="7.6.1" class="anchored" data-anchor-id="dependent-variable-is.dom-1"><span class="header-section-number">7.6.1</span> 6.5.1 dependent variable: is.dom</h3>
<p>legis</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = is.dom ~ age + seniority + is.republican + chamber + 
    ideology * gender + as.factor(congress), family = binomial(), 
    data = legis_cg)

Coefficients:
                                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                     -0.098052   0.536629  -0.183   0.8550    
age                              0.002007   0.006988   0.287   0.7740    
seniority                        0.007839   0.008734   0.897   0.3695    
is.republican1                   0.459190   0.281283   1.632   0.1026    
chamberhouse of representatives -0.253655   0.152521  -1.663   0.0963 .  
ideology                         0.383738   0.655030   0.586   0.5580    
genderMale                       0.523181   0.288202   1.815   0.0695 .  
as.factor(congress)116          -0.237772   0.172823  -1.376   0.1689    
as.factor(congress)117          -2.235608   0.214632 -10.416  &lt; 2e-16 ***
as.factor(congress)118          -1.195547   0.178092  -6.713 1.91e-11 ***
ideology:genderMale             -0.408031   0.554942  -0.735   0.4622    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1661.8  on 1213  degrees of freedom
Residual deviance: 1458.8  on 1203  degrees of freedom
  (51 observations deleted due to missingness)
AIC: 1480.8

Number of Fisher Scoring iterations: 4

# A tibble: 11  8
   term          estimate odds_ratio conf.low.or conf.high.or std.error  p.value
   &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)   -0.0981       0.907      0.316         2.60    0.537   8.55e- 1
 2 age            0.00201      1.00       0.988         1.02    0.00699 7.74e- 1
 3 seniority      0.00784      1.01       0.991         1.03    0.00873 3.69e- 1
 4 is.republica  0.459        1.58       0.913         2.75    0.281   1.03e- 1
 5 chamberhouse -0.254        0.776      0.575         1.05    0.153   9.63e- 2
 6 ideology       0.384        1.47       0.407         5.32    0.655   5.58e- 1
 7 genderMale     0.523        1.69       0.962         2.98    0.288   6.95e- 2
 8 as.factor(co -0.238        0.788      0.561         1.11    0.173   1.69e- 1
 9 as.factor(co -2.24         0.107      0.0696        0.162   0.215   2.10e-25
10 as.factor(co -1.20         0.303      0.213         0.428   0.178   1.91e-11
11 ideology:gen -0.408        0.665      0.223         1.97    0.555   4.62e- 1
#  1 more variable: significance &lt;chr&gt;

Pseudo R-squared:
fitting null model for pseudo-r2
         llh      llhNull           G2     McFadden         r2ML         r2CU 
-729.3874951 -830.9062817  203.0375731    0.1221784    0.1540092    0.2065555 </code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["odds_ratio"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["conf.low.or"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["conf.high.or"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["significance"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"(Intercept)","2":"-0.098052282","3":"0.9066015","4":"0.31608496","5":"2.5950399","6":"0.536629153","7":"8.550186e-01","8":""},{"1":"age","2":"0.002006608","3":"1.0020086","4":"0.98837958","5":"1.0158471","6":"0.006987985","7":"7.739966e-01","8":""},{"1":"seniority","2":"0.007838620","3":"1.0078694","4":"0.99076401","5":"1.0253050","6":"0.008734044","7":"3.694635e-01","8":""},{"1":"is.republican1","2":"0.459189768","3":"1.5827910","4":"0.91294069","5":"2.7527763","6":"0.281283405","7":"1.025782e-01","8":""},{"1":"chamberhouse of representatives","2":"-0.253655174","3":"0.7759593","4":"0.57511724","5":"1.0461676","6":"0.152521346","7":"9.629646e-02","8":"."},{"1":"ideology","2":"0.383738383","3":"1.4677614","4":"0.40696607","5":"5.3223090","6":"0.655029990","7":"5.579875e-01","8":""},{"1":"genderMale","2":"0.523180704","3":"1.6873862","4":"0.96203951","5":"2.9802940","6":"0.288202166","7":"6.947392e-02","8":"."},{"1":"as.factor(congress)116","2":"-0.237772041","3":"0.7883824","4":"0.56129266","5":"1.1056353","6":"0.172823214","7":"1.688802e-01","8":""},{"1":"as.factor(congress)117","2":"-2.235607750","3":"0.1069271","4":"0.06961327","5":"0.1616298","6":"0.214632444","7":"2.096222e-25","8":"***"},{"1":"as.factor(congress)118","2":"-1.195546892","3":"0.3025385","4":"0.21272841","5":"0.4277682","6":"0.178091657","7":"1.905340e-11","8":"***"},{"1":"ideology:genderMale","2":"-0.408031016","3":"0.6649583","4":"0.22300367","5":"1.9684217","6":"0.554941551","7":"4.621760e-01","8":""}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = is.dom ~ age + seniority + is.republican * gender + 
    chamber + ideology + as.factor(congress), family = binomial(), 
    data = legis_cg)

Coefficients:
                                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                      0.006216   0.512626   0.012   0.9903    
age                              0.001735   0.006977   0.249   0.8037    
seniority                        0.008280   0.008704   0.951   0.3414    
is.republican1                   0.520731   0.365449   1.425   0.1542    
genderMale                       0.379544   0.189791   2.000   0.0455 *  
chamberhouse of representatives -0.252204   0.152463  -1.654   0.0981 .  
ideology                         0.104805   0.541545   0.194   0.8465    
as.factor(congress)116          -0.240084   0.172845  -1.389   0.1648    
as.factor(congress)117          -2.233957   0.214536 -10.413  &lt; 2e-16 ***
as.factor(congress)118          -1.194621   0.178198  -6.704 2.03e-11 ***
is.republican1:genderMale       -0.095563   0.299196  -0.319   0.7494    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1661.8  on 1213  degrees of freedom
Residual deviance: 1459.2  on 1203  degrees of freedom
  (51 observations deleted due to missingness)
AIC: 1481.2

Number of Fisher Scoring iterations: 4

# A tibble: 11  8
   term          estimate odds_ratio conf.low.or conf.high.or std.error  p.value
   &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)    0.00622      1.01       0.368         2.75    0.513   9.90e- 1
 2 age            0.00173      1.00       0.988         1.02    0.00698 8.04e- 1
 3 seniority      0.00828      1.01       0.991         1.03    0.00870 3.41e- 1
 4 is.republica  0.521        1.68       0.823         3.45    0.365   1.54e- 1
 5 genderMale     0.380        1.46       1.01          2.12    0.190   4.55e- 2
 6 chamberhouse -0.252        0.777      0.576         1.05    0.152   9.81e- 2
 7 ideology       0.105        1.11       0.383         3.21    0.542   8.47e- 1
 8 as.factor(co -0.240        0.787      0.560         1.10    0.173   1.65e- 1
 9 as.factor(co -2.23         0.107      0.0697        0.162   0.215   2.16e-25
10 as.factor(co -1.19         0.303      0.213         0.428   0.178   2.03e-11
11 is.republica -0.0956       0.909      0.506         1.64    0.299   7.49e- 1
#  1 more variable: significance &lt;chr&gt;

Pseudo R-squared:
fitting null model for pseudo-r2
         llh      llhNull           G2     McFadden         r2ML         r2CU 
-729.6074104 -830.9062817  202.5977426    0.1219137    0.1537026    0.2061444 </code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["odds_ratio"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["conf.low.or"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["conf.high.or"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["significance"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"(Intercept)","2":"0.006215981","3":"1.0062353","4":"0.36812517","5":"2.7503168","6":"0.512626459","7":"9.903253e-01","8":""},{"1":"age","2":"0.001734547","3":"1.0017361","4":"0.98813275","5":"1.0155480","6":"0.006976574","7":"8.036513e-01","8":""},{"1":"seniority","2":"0.008280490","3":"1.0083149","4":"0.99126167","5":"1.0257005","6":"0.008704241","7":"3.414436e-01","8":""},{"1":"is.republican1","2":"0.520731289","3":"1.6832581","4":"0.82280119","5":"3.4522098","6":"0.365448791","7":"1.541835e-01","8":""},{"1":"genderMale","2":"0.379544191","3":"1.4616182","4":"1.00918832","5":"2.1248987","6":"0.189791040","7":"4.552183e-02","8":"*"},{"1":"chamberhouse of representatives","2":"-0.252204247","3":"0.7770860","4":"0.57602140","5":"1.0475725","6":"0.152462784","7":"9.808647e-02","8":"."},{"1":"ideology","2":"0.104805176","3":"1.1104942","4":"0.38333245","5":"3.2091664","6":"0.541545299","7":"8.465440e-01","8":""},{"1":"as.factor(congress)116","2":"-0.240084077","3":"0.7865617","4":"0.55997036","5":"1.1031247","6":"0.172844947","7":"1.648284e-01","8":""},{"1":"as.factor(congress)117","2":"-2.233957147","3":"0.1071038","4":"0.06974216","5":"0.1618680","6":"0.214536187","7":"2.163826e-25","8":"***"},{"1":"as.factor(congress)118","2":"-1.194621301","3":"0.3028186","4":"0.21288029","5":"0.4282518","6":"0.178197607","7":"2.029108e-11","8":"***"},{"1":"is.republican1:genderMale","2":"-0.095562606","3":"0.9088615","4":"0.50566988","5":"1.6356032","6":"0.299196262","7":"7.494249e-01","8":""}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = is.dom ~ age + seniority + ideology + chamber + 
    is.republican * gender + as.factor(congress), family = binomial(), 
    data = legis_cg)

Coefficients:
                                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                      0.006216   0.512626   0.012   0.9903    
age                              0.001735   0.006977   0.249   0.8037    
seniority                        0.008280   0.008704   0.951   0.3414    
ideology                         0.104805   0.541545   0.194   0.8465    
chamberhouse of representatives -0.252204   0.152463  -1.654   0.0981 .  
is.republican1                   0.520731   0.365449   1.425   0.1542    
genderMale                       0.379544   0.189791   2.000   0.0455 *  
as.factor(congress)116          -0.240084   0.172845  -1.389   0.1648    
as.factor(congress)117          -2.233957   0.214536 -10.413  &lt; 2e-16 ***
as.factor(congress)118          -1.194621   0.178198  -6.704 2.03e-11 ***
is.republican1:genderMale       -0.095563   0.299196  -0.319   0.7494    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1661.8  on 1213  degrees of freedom
Residual deviance: 1459.2  on 1203  degrees of freedom
  (51 observations deleted due to missingness)
AIC: 1481.2

Number of Fisher Scoring iterations: 4

# A tibble: 11  8
   term          estimate odds_ratio conf.low.or conf.high.or std.error  p.value
   &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)    0.00622      1.01       0.368         2.75    0.513   9.90e- 1
 2 age            0.00173      1.00       0.988         1.02    0.00698 8.04e- 1
 3 seniority      0.00828      1.01       0.991         1.03    0.00870 3.41e- 1
 4 ideology       0.105        1.11       0.383         3.21    0.542   8.47e- 1
 5 chamberhouse -0.252        0.777      0.576         1.05    0.152   9.81e- 2
 6 is.republica  0.521        1.68       0.823         3.45    0.365   1.54e- 1
 7 genderMale     0.380        1.46       1.01          2.12    0.190   4.55e- 2
 8 as.factor(co -0.240        0.787      0.560         1.10    0.173   1.65e- 1
 9 as.factor(co -2.23         0.107      0.0697        0.162   0.215   2.16e-25
10 as.factor(co -1.19         0.303      0.213         0.428   0.178   2.03e-11
11 is.republica -0.0956       0.909      0.506         1.64    0.299   7.49e- 1
#  1 more variable: significance &lt;chr&gt;

Pseudo R-squared:
fitting null model for pseudo-r2
         llh      llhNull           G2     McFadden         r2ML         r2CU 
-729.6074104 -830.9062817  202.5977426    0.1219137    0.1537026    0.2061444 </code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["odds_ratio"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["conf.low.or"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["conf.high.or"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["significance"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"(Intercept)","2":"0.006215981","3":"1.0062353","4":"0.36812517","5":"2.7503168","6":"0.512626459","7":"9.903253e-01","8":""},{"1":"age","2":"0.001734547","3":"1.0017361","4":"0.98813275","5":"1.0155480","6":"0.006976574","7":"8.036513e-01","8":""},{"1":"seniority","2":"0.008280490","3":"1.0083149","4":"0.99126167","5":"1.0257005","6":"0.008704241","7":"3.414436e-01","8":""},{"1":"ideology","2":"0.104805176","3":"1.1104942","4":"0.38333245","5":"3.2091664","6":"0.541545299","7":"8.465440e-01","8":""},{"1":"chamberhouse of representatives","2":"-0.252204247","3":"0.7770860","4":"0.57602140","5":"1.0475725","6":"0.152462784","7":"9.808647e-02","8":"."},{"1":"is.republican1","2":"0.520731289","3":"1.6832581","4":"0.82280119","5":"3.4522098","6":"0.365448791","7":"1.541835e-01","8":""},{"1":"genderMale","2":"0.379544191","3":"1.4616182","4":"1.00918832","5":"2.1248987","6":"0.189791040","7":"4.552183e-02","8":"*"},{"1":"as.factor(congress)116","2":"-0.240084077","3":"0.7865617","4":"0.55997036","5":"1.1031247","6":"0.172844947","7":"1.648284e-01","8":""},{"1":"as.factor(congress)117","2":"-2.233957147","3":"0.1071038","4":"0.06974216","5":"0.1618680","6":"0.214536187","7":"2.163826e-25","8":"***"},{"1":"as.factor(congress)118","2":"-1.194621301","3":"0.3028186","4":"0.21288029","5":"0.4282518","6":"0.178197607","7":"2.029108e-11","8":"***"},{"1":"is.republican1:genderMale","2":"-0.095562606","3":"0.9088615","4":"0.50566988","5":"1.6356032","6":"0.299196262","7":"7.494249e-01","8":""}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = is.dom ~ age + seniority + ideology + gender + 
    is.republican * chamber + as.factor(congress), family = binomial(), 
    data = legis_cg)

Coefficients:
                                                Estimate Std. Error z value
(Intercept)                                     0.105781   0.509713   0.208
age                                             0.001807   0.006985   0.259
seniority                                       0.008785   0.008698   1.010
ideology                                        0.293954   0.555368   0.529
genderMale                                      0.329719   0.147513   2.235
is.republican1                                  0.066178   0.380943   0.174
chamberhouse of representatives                -0.455662   0.205716  -2.215
as.factor(congress)116                         -0.219212   0.173570  -1.263
as.factor(congress)117                         -2.213135   0.214886 -10.299
as.factor(congress)118                         -1.190742   0.178247  -6.680
is.republican1:chamberhouse of representatives  0.423226   0.287667   1.471
                                               Pr(&gt;|z|)    
(Intercept)                                      0.8356    
age                                              0.7959    
seniority                                        0.3125    
ideology                                         0.5966    
genderMale                                       0.0254 *  
is.republican1                                   0.8621    
chamberhouse of representatives                  0.0268 *  
as.factor(congress)116                           0.2066    
as.factor(congress)117                          &lt; 2e-16 ***
as.factor(congress)118                         2.38e-11 ***
is.republican1:chamberhouse of representatives   0.1412    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1661.8  on 1213  degrees of freedom
Residual deviance: 1457.2  on 1203  degrees of freedom
  (51 observations deleted due to missingness)
AIC: 1479.2

Number of Fisher Scoring iterations: 4

# A tibble: 11  8
   term          estimate odds_ratio conf.low.or conf.high.or std.error  p.value
   &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)    0.106        1.11       0.409         3.02    0.510   8.36e- 1
 2 age            0.00181      1.00       0.988         1.02    0.00699 7.96e- 1
 3 seniority      0.00878      1.01       0.992         1.03    0.00870 3.12e- 1
 4 ideology       0.294        1.34       0.451         3.99    0.555   5.97e- 1
 5 genderMale     0.330        1.39       1.04          1.86    0.148   2.54e- 2
 6 is.republica  0.0662       1.07       0.506         2.26    0.381   8.62e- 1
 7 chamberhouse -0.456        0.634      0.423         0.949   0.206   2.68e- 2
 8 as.factor(co -0.219        0.803      0.571         1.13    0.174   2.07e- 1
 9 as.factor(co -2.21         0.109      0.0712        0.165   0.215   7.11e-25
10 as.factor(co -1.19         0.304      0.214         0.430   0.178   2.38e-11
11 is.republica  0.423        1.53       0.869         2.69    0.288   1.41e- 1
#  1 more variable: significance &lt;chr&gt;

Pseudo R-squared:
fitting null model for pseudo-r2
         llh      llhNull           G2     McFadden         r2ML         r2CU 
-728.5759283 -830.9062817  204.6607067    0.1231551    0.1551395    0.2080715 </code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["odds_ratio"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["conf.low.or"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["conf.high.or"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["significance"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"(Intercept)","2":"0.105780841","3":"1.1115782","4":"0.40923555","5":"3.0226478","6":"0.509712506","7":"8.355957e-01","8":""},{"1":"age","2":"0.001806950","3":"1.0018086","4":"0.98818807","5":"1.0156400","6":"0.006985373","7":"7.958851e-01","8":""},{"1":"seniority","2":"0.008784953","3":"1.0088237","4":"0.99177853","5":"1.0262100","6":"0.008697945","7":"3.124937e-01","8":""},{"1":"ideology","2":"0.293953504","3":"1.3417215","4":"0.45117569","5":"3.9878445","6":"0.555368384","7":"5.966011e-01","8":""},{"1":"genderMale","2":"0.329718760","3":"1.3905770","4":"1.04238691","5":"1.8592244","6":"0.147513348","7":"2.540559e-02","8":"*"},{"1":"is.republican1","2":"0.066178068","3":"1.0684170","4":"0.50637898","5":"2.2578313","6":"0.380943456","7":"8.620843e-01","8":""},{"1":"chamberhouse of representatives","2":"-0.455662254","3":"0.6340279","4":"0.42318547","5":"0.9486319","6":"0.205716222","7":"2.675979e-02","8":"*"},{"1":"as.factor(congress)116","2":"-0.219211806","3":"0.8031516","4":"0.57101375","5":"1.1280913","6":"0.173570383","7":"2.066049e-01","8":""},{"1":"as.factor(congress)117","2":"-2.213134703","3":"0.1093573","4":"0.07116366","5":"0.1653943","6":"0.214885862","7":"7.111078e-25","8":"***"},{"1":"as.factor(congress)118","2":"-1.190741579","3":"0.3039957","4":"0.21369023","5":"0.4299645","6":"0.178247074","7":"2.384750e-11","8":"***"},{"1":"is.republican1:chamberhouse of representatives","2":"0.423225610","3":"1.5268787","4":"0.86882327","5":"2.6852505","6":"0.287667296","7":"1.412281e-01","8":""}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20interaction%20legis-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Johnson-Neyman intervals are not available for factor predictors or
moderators.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS

Slope of ideology when gender = Female: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.38   0.66     0.59   0.56

Slope of ideology when gender = Male: 

   Est.   S.E.   z val.      p
------- ------ -------- ------
  -0.02   0.57    -0.04   0.97</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: ideology and chamber are not included in an interaction with one another in
the model.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20interaction%20legis-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Automated checks indicate that ideology and chamber may not be included in
an interaction with one another in the model. Double-check to ensure the
model is specified correctly. This message may be a false positive.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Johnson-Neyman intervals are not available for factor predictors or
moderators.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS

Slope of ideology when chamber = senate: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.10   0.54     0.19   0.85

Slope of ideology when chamber = house of representatives: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.10   0.54     0.19   0.85</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.
 Detected factor predictor.
 Plotting with cat_plot() instead.
 See `?interactions::cat_plot()` for full details on how to specify models
  with categorical predictors.
 If you experience errors or unexpected results, try using cat_plot()
  directly.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20interaction%20legis-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Johnson-Neyman intervals are not available for factor predictors or
moderators.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS

Slope of is.republican when gender = Female: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.52   0.37     1.42   0.15

Slope of is.republican when gender = Male: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.43   0.29     1.48   0.14</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.
 Detected factor predictor.
 Plotting with cat_plot() instead.
 See `?interactions::cat_plot()` for full details on how to specify models
  with categorical predictors.
 If you experience errors or unexpected results, try using cat_plot()
  directly.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresis.dom%20interaction%20legis-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using data legis_cg from global environment. This could cause incorrect
results if legis_cg has been altered since the model was fit. You can
manually provide the data to the "data =" argument.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Johnson-Neyman intervals are not available for factor predictors or
moderators.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS

Slope of is.republican when chamber = senate: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.07   0.38     0.17   0.86

Slope of is.republican when chamber = house of representatives: 

  Est.   S.E.   z val.      p
------ ------ -------- ------
  0.49   0.28     1.73   0.08</code></pre>
</div>
</div>
</section>
<section id="dependent-variable-dom_percentagedemo" class="level3" data-number="7.6.2">
<h3 data-number="7.6.2" class="anchored" data-anchor-id="dependent-variable-dom_percentagedemo"><span class="header-section-number">7.6.2</span> 6.5.2 dependent variable: dom_percentage(demo)</h3>
<p>legis</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + chamber + is.republican + 
    ideology * gender + as.factor(congress), data = legis_cg)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.201465 -0.027982  0.008753  0.036760  0.106253 

Coefficients:
                                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                      3.729e-01  1.177e-02  31.674  &lt; 2e-16 ***
age                              4.501e-05  1.279e-04   0.352 0.724961    
chamberhouse of representatives -1.270e-02  3.378e-03  -3.759 0.000179 ***
is.republican1                  -1.704e-03  6.276e-03  -0.272 0.785996    
ideology                         4.802e-02  1.453e-02   3.306 0.000976 ***
genderMale                       2.163e-02  6.256e-03   3.458 0.000564 ***
as.factor(congress)116          -3.604e-03  4.114e-03  -0.876 0.381196    
as.factor(congress)117          -3.270e-02  4.416e-03  -7.406 2.44e-13 ***
as.factor(congress)118          -2.388e-02  4.138e-03  -5.770 1.01e-08 ***
ideology:genderMale             -2.364e-02  1.223e-02  -1.933 0.053518 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04968 on 1204 degrees of freedom
  (51 observations deleted due to missingness)
Multiple R-squared:  0.1276,    Adjusted R-squared:  0.1211 
F-statistic: 19.57 on 9 and 1204 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + ideology * chamber + is.republican + 
    gender + as.factor(congress), data = legis_cg)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.190034 -0.028379  0.008737  0.034999  0.110720 

Coefficients:
                                           Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)                               3.931e-01  1.154e-02  34.057  &lt; 2e-16
age                                       5.294e-05  1.271e-04   0.417  0.67699
ideology                                  9.679e-03  1.278e-02   0.757  0.44897
chamberhouse of representatives          -3.819e-02  6.643e-03  -5.749 1.14e-08
is.republican1                           -7.111e-03  6.331e-03  -1.123  0.26156
genderMale                                1.023e-02  3.269e-03   3.130  0.00179
as.factor(congress)116                   -2.275e-03  4.100e-03  -0.555  0.57903
as.factor(congress)117                   -3.052e-02  4.415e-03  -6.913 7.70e-12
as.factor(congress)118                   -2.249e-02  4.123e-03  -5.455 5.94e-08
ideology:chamberhouse of representatives  4.968e-02  1.122e-02   4.428 1.04e-05
                                            
(Intercept)                              ***
age                                         
ideology                                    
chamberhouse of representatives          ***
is.republican1                              
genderMale                               ** 
as.factor(congress)116                      
as.factor(congress)117                   ***
as.factor(congress)118                   ***
ideology:chamberhouse of representatives ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04936 on 1204 degrees of freedom
  (51 observations deleted due to missingness)
Multiple R-squared:  0.1389,    Adjusted R-squared:  0.1325 
F-statistic: 21.59 on 9 and 1204 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = is.dom ~ age + seniority + ideology + chamber + 
    is.republican * gender + as.factor(congress), data = legis_cg)

Residuals:
    Min      1Q  Median      3Q     Max 
-0.7997 -0.3954 -0.1324  0.3989  0.9699 

Coefficients:
                                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                      0.5208654  0.1069092   4.872 1.25e-06 ***
age                              0.0003629  0.0014510   0.250   0.8025    
seniority                        0.0017434  0.0018202   0.958   0.3383    
ideology                         0.0188671  0.1139183   0.166   0.8685    
chamberhouse of representatives -0.0526163  0.0320422  -1.642   0.1008    
is.republican1                   0.1086320  0.0755320   1.438   0.1506    
genderMale                       0.0765476  0.0390021   1.963   0.0499 *  
as.factor(congress)116          -0.0589248  0.0379035  -1.555   0.1203    
as.factor(congress)117          -0.4714524  0.0406742 -11.591  &lt; 2e-16 ***
as.factor(congress)118          -0.2826398  0.0383892  -7.362 3.34e-13 ***
is.republican1:genderMale       -0.0180290  0.0615652  -0.293   0.7697    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4576 on 1203 degrees of freedom
  (51 observations deleted due to missingness)
Multiple R-squared:  0.1553,    Adjusted R-squared:  0.1483 
F-statistic: 22.12 on 10 and 1203 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = is.dom ~ age + seniority + ideology + gender + is.republican * 
    chamber + as.factor(congress), data = legis_cg)

Residuals:
    Min      1Q  Median      3Q     Max 
-0.7678 -0.4056 -0.1321  0.3870  0.9809 

Coefficients:
                                                 Estimate Std. Error t value
(Intercept)                                     0.5425245  0.1061891   5.109
age                                             0.0003652  0.0014492   0.252
seniority                                       0.0018496  0.0018178   1.017
ideology                                        0.0552659  0.1163764   0.475
genderMale                                      0.0667891  0.0302843   2.205
is.republican1                                  0.0180183  0.0799001   0.226
chamberhouse of representatives                -0.0938340  0.0430969  -2.177
as.factor(congress)116                         -0.0547644  0.0379779  -1.442
as.factor(congress)117                         -0.4668482  0.0407739 -11.450
as.factor(congress)118                         -0.2814335  0.0383511  -7.338
is.republican1:chamberhouse of representatives  0.0854989  0.0599980   1.425
                                               Pr(&gt;|t|)    
(Intercept)                                    3.76e-07 ***
age                                              0.8011    
seniority                                        0.3091    
ideology                                         0.6350    
genderMale                                       0.0276 *  
is.republican1                                   0.8216    
chamberhouse of representatives                  0.0297 *  
as.factor(congress)116                           0.1496    
as.factor(congress)117                          &lt; 2e-16 ***
as.factor(congress)118                         3.97e-13 ***
is.republican1:chamberhouse of representatives   0.1544    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4572 on 1203 degrees of freedom
  (51 observations deleted due to missingness)
Multiple R-squared:  0.1567,    Adjusted R-squared:  0.1497 
F-statistic: 22.35 on 10 and 1203 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_demo-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_demo-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Detected factor predictor.
 Plotting with cat_plot() instead.
 See `?interactions::cat_plot()` for full details on how to specify models
  with categorical predictors.
 If you experience errors or unexpected results, try using cat_plot()
  directly.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_demo-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Detected factor predictor.
 Plotting with cat_plot() instead.
 See `?interactions::cat_plot()` for full details on how to specify models
  with categorical predictors.
 If you experience errors or unexpected results, try using cat_plot()
  directly.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_demo-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="dependent-variable-dom-district" class="level3" data-number="7.6.3">
<h3 data-number="7.6.3" class="anchored" data-anchor-id="dependent-variable-dom-district"><span class="header-section-number">7.6.3</span> 6.5.3 dependent variable: dom (district)</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + chamber + ideology + high_edu_share * 
    party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.196304 -0.028633  0.007982  0.036103  0.102187 

Coefficients:
                                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                      3.467e-01  1.249e-02  27.757  &lt; 2e-16 ***
age                              4.466e-05  1.264e-04   0.353 0.723801    
chambersenate                    1.309e-02  3.348e-03   3.910 9.74e-05 ***
ideology                         3.804e-02  1.203e-02   3.163 0.001599 ** 
high_edu_share                   5.352e-02  1.882e-02   2.845 0.004523 ** 
partyIndependent                -3.499e-02  1.019e-01  -0.343 0.731291    
partyRepublican                 -2.877e-02  1.248e-02  -2.306 0.021299 *  
genderMale                       1.136e-02  3.258e-03   3.487 0.000505 ***
as.factor(congress)116          -3.854e-03  4.057e-03  -0.950 0.342345    
as.factor(congress)117          -3.412e-02  4.374e-03  -7.801 1.33e-14 ***
as.factor(congress)118          -2.736e-02  4.142e-03  -6.605 5.97e-11 ***
high_edu_share:partyIndependent  5.739e-02  2.930e-01   0.196 0.844742    
high_edu_share:partyRepublican   8.979e-02  3.306e-02   2.716 0.006707 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.0489 on 1194 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1454,    Adjusted R-squared:  0.1368 
F-statistic: 16.93 on 12 and 1194 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + ideology + blue_collar_share * 
    party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.206260 -0.028733  0.009043  0.035465  0.098801 

Coefficients:
                                     Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                         0.3709795  0.0121296  30.585  &lt; 2e-16 ***
age                                 0.0001812  0.0001230   1.473 0.141041    
ideology                            0.0454109  0.0116235   3.907 9.88e-05 ***
blue_collar_share                  -0.0711958  0.0410548  -1.734 0.083147 .  
partyIndependent                   -0.0313254  0.1205948  -0.260 0.795095    
partyRepublican                     0.0420154  0.0155920   2.695 0.007144 ** 
genderMale                          0.0118406  0.0032817   3.608 0.000321 ***
as.factor(congress)116             -0.0016111  0.0040952  -0.393 0.694094    
as.factor(congress)117             -0.0303879  0.0043816  -6.935 6.62e-12 ***
as.factor(congress)118             -0.0236230  0.0041147  -5.741 1.19e-08 ***
blue_collar_share:partyIndependent  0.0960305  0.5564643   0.173 0.863017    
blue_collar_share:partyRepublican  -0.2069914  0.0649938  -3.185 0.001486 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.0492 on 1195 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1344,    Adjusted R-squared:  0.1264 
F-statistic: 16.87 on 11 and 1195 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + ideology + white_collar_share * 
    party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.194565 -0.027864  0.008017  0.035781  0.102798 

Coefficients:
                                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                          0.2825352  0.0200229  14.111  &lt; 2e-16 ***
age                                  0.0001796  0.0001224   1.467 0.142590    
ideology                             0.0468984  0.0115224   4.070 5.01e-05 ***
white_collar_share                   0.1216924  0.0273995   4.441 9.76e-06 ***
partyIndependent                     0.1554723  0.3148465   0.494 0.621536    
partyRepublican                     -0.0469025  0.0292501  -1.603 0.109089    
genderMale                           0.0114095  0.0032633   3.496 0.000489 ***
as.factor(congress)116              -0.0024627  0.0040680  -0.605 0.545040    
as.factor(congress)117              -0.0332884  0.0043770  -7.605 5.73e-14 ***
as.factor(congress)118              -0.0262121  0.0041254  -6.354 2.98e-10 ***
white_collar_share:partyIndependent -0.2734219  0.5189576  -0.527 0.598383    
white_collar_share:partyRepublican   0.0703402  0.0472848   1.488 0.137124    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04899 on 1195 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1415,    Adjusted R-squared:  0.1336 
F-statistic:  17.9 on 11 and 1195 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + seniority + ideology + chamber + 
    white_ratio * party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.169303 -0.027462  0.007735  0.034984  0.117417 

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                   3.199e-01  1.232e-02  25.979  &lt; 2e-16 ***
age                          -5.475e-05  1.544e-04  -0.355  0.72302    
seniority                     2.562e-04  1.930e-04   1.327  0.18465    
ideology                      1.926e-02  1.232e-02   1.563  0.11829    
chambersenate                 8.336e-03  3.419e-03   2.438  0.01492 *  
white_ratio                   9.033e-02  1.136e-02   7.950 4.29e-15 ***
partyIndependent              2.879e-02  1.243e-01   0.232  0.81684    
partyRepublican               7.017e-02  1.504e-02   4.664 3.45e-06 ***
genderMale                    1.036e-02  3.229e-03   3.208  0.00137 ** 
as.factor(congress)116       -4.362e-03  4.008e-03  -1.088  0.27666    
as.factor(congress)117       -2.946e-02  4.384e-03  -6.719 2.83e-11 ***
as.factor(congress)118       -2.052e-02  4.179e-03  -4.910 1.04e-06 ***
white_ratio:partyIndependent -7.326e-02  1.423e-01  -0.515  0.60668    
white_ratio:partyRepublican  -1.060e-01  1.861e-02  -5.697 1.54e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04829 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1675,    Adjusted R-squared:  0.1585 
F-statistic: 18.47 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + seniority + ideology + chamber + 
    asian_ratio * party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.198531 -0.027087  0.008967  0.036503  0.111170 

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                   3.775e-01  1.100e-02  34.311  &lt; 2e-16 ***
age                          -8.118e-05  1.582e-04  -0.513 0.608064    
seniority                     2.282e-04  1.973e-04   1.156 0.247771    
ideology                      3.442e-02  1.256e-02   2.741 0.006214 ** 
chambersenate                 1.195e-02  3.471e-03   3.442 0.000598 ***
asian_ratio                  -5.474e-02  2.331e-02  -2.348 0.019025 *  
partyIndependent             -4.556e-02  3.742e-02  -1.217 0.223706    
partyRepublican              -1.308e-02  7.078e-03  -1.847 0.064954 .  
genderMale                    1.078e-02  3.304e-03   3.263 0.001132 ** 
as.factor(congress)116       -3.214e-03  4.098e-03  -0.784 0.433092    
as.factor(congress)117       -3.183e-02  4.403e-03  -7.229 8.68e-13 ***
as.factor(congress)118       -2.416e-02  4.149e-03  -5.824 7.38e-09 ***
asian_ratio:partyIndependent  1.398e+00  1.817e+00   0.769 0.441864    
asian_ratio:partyRepublican   2.270e-01  7.198e-02   3.155 0.001648 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04933 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1312,    Adjusted R-squared:  0.1217 
F-statistic: 13.85 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + seniority + ideology + chamber + 
    black_or_african_american_ratio * party + gender + as.factor(congress), 
    data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.180552 -0.027315  0.008684  0.034669  0.116323 

Coefficients:
                                                   Estimate Std. Error t value
(Intercept)                                       3.820e-01  1.054e-02  36.228
age                                              -6.779e-06  1.565e-04  -0.043
seniority                                         3.003e-04  1.949e-04   1.541
ideology                                          2.795e-02  1.229e-02   2.274
chambersenate                                     9.140e-03  3.453e-03   2.647
black_or_african_american_ratio                  -1.003e-01  1.583e-02  -6.334
partyIndependent                                 -4.414e-02  2.334e-02  -1.891
partyRepublican                                  -1.844e-02  6.827e-03  -2.701
genderMale                                        1.055e-02  3.249e-03   3.246
as.factor(congress)116                           -3.010e-03  4.036e-03  -0.746
as.factor(congress)117                           -3.226e-02  4.334e-03  -7.445
as.factor(congress)118                           -2.390e-02  4.090e-03  -5.843
black_or_african_american_ratio:partyIndependent  6.637e-01  5.619e-01   1.181
black_or_african_american_ratio:partyRepublican   1.638e-01  2.781e-02   5.891
                                                 Pr(&gt;|t|)    
(Intercept)                                       &lt; 2e-16 ***
age                                               0.96547    
seniority                                         0.12365    
ideology                                          0.02314 *  
chambersenate                                     0.00824 ** 
black_or_african_american_ratio                  3.37e-10 ***
partyIndependent                                  0.05888 .  
partyRepublican                                   0.00702 ** 
genderMale                                        0.00120 ** 
as.factor(congress)116                            0.45600    
as.factor(congress)117                           1.86e-13 ***
as.factor(congress)118                           6.62e-09 ***
black_or_african_american_ratio:partyIndependent  0.23771    
black_or_african_american_ratio:partyRepublican  4.99e-09 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04861 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1563,    Adjusted R-squared:  0.1471 
F-statistic:    17 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + seniority + ideology + chamber + 
    median_household_income_that_year * party + gender + as.factor(congress), 
    data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.183955 -0.027142  0.008148  0.036196  0.111148 

Coefficients:
                                                     Estimate Std. Error
(Intercept)                                         3.450e-01  1.310e-02
age                                                -6.837e-05  1.558e-04
seniority                                           2.570e-04  1.953e-04
ideology                                            4.223e-02  1.236e-02
chambersenate                                       1.325e-02  3.454e-03
median_household_income_that_year                   3.551e-07  1.004e-07
partyIndependent                                    8.093e-02  1.407e-01
partyRepublican                                    -1.924e-02  1.376e-02
genderMale                                          1.048e-02  3.267e-03
as.factor(congress)116                             -5.466e-03  4.084e-03
as.factor(congress)117                             -3.584e-02  4.439e-03
as.factor(congress)118                             -3.239e-02  4.446e-03
median_household_income_that_year:partyIndependent -1.448e-06  2.160e-06
median_household_income_that_year:partyRepublican   2.637e-07  1.690e-07
                                                   t value Pr(&gt;|t|)    
(Intercept)                                         26.328  &lt; 2e-16 ***
age                                                 -0.439 0.660886    
seniority                                            1.316 0.188392    
ideology                                             3.417 0.000654 ***
chambersenate                                        3.835 0.000132 ***
median_household_income_that_year                    3.538 0.000419 ***
partyIndependent                                     0.575 0.565238    
partyRepublican                                     -1.399 0.162207    
genderMale                                           3.207 0.001376 ** 
as.factor(congress)116                              -1.338 0.181027    
as.factor(congress)117                              -8.074 1.65e-15 ***
as.factor(congress)118                              -7.285 5.82e-13 ***
median_household_income_that_year:partyIndependent  -0.670 0.502871    
median_household_income_that_year:partyRepublican    1.560 0.118972    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04901 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1423,    Adjusted R-squared:  0.133 
F-statistic: 15.23 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = dom_percentage ~ age + seniority + ideology + chamber + 
    foreign_born_ratio * party + gender + as.factor(congress), 
    data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.182191 -0.027940  0.008986  0.035127  0.125166 

Coefficients:
                                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                          3.961e-01  1.164e-02  34.034  &lt; 2e-16 ***
age                                 -9.394e-05  1.570e-04  -0.598  0.54981    
seniority                            2.104e-04  1.959e-04   1.074  0.28307    
ideology                             2.419e-02  1.259e-02   1.920  0.05504 .  
chambersenate                        9.395e-03  3.493e-03   2.690  0.00725 ** 
foreign_born_ratio                  -9.966e-02  2.045e-02  -4.872 1.25e-06 ***
partyIndependent                    -4.191e-02  3.043e-02  -1.377  0.16875    
partyRepublican                     -1.738e-02  7.404e-03  -2.347  0.01910 *  
genderMale                           1.035e-02  3.285e-03   3.150  0.00167 ** 
as.factor(congress)116              -4.066e-03  4.076e-03  -0.998  0.31867    
as.factor(congress)117              -3.311e-02  4.382e-03  -7.555 8.29e-14 ***
as.factor(congress)118              -2.419e-02  4.133e-03  -5.853 6.23e-09 ***
foreign_born_ratio:partyIndependent  2.789e-01  4.338e-01   0.643  0.52039    
foreign_born_ratio:partyRepublican   1.052e-01  3.322e-02   3.166  0.00158 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.0491 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1393,    Adjusted R-squared:  0.1299 
F-statistic: 14.85 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdom.percentage%20interaction%20legis_district-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="dependent-variable-profdistrict" class="level3" data-number="7.6.4">
<h3 data-number="7.6.4" class="anchored" data-anchor-id="dependent-variable-profdistrict"><span class="header-section-number">7.6.4</span> 6.5.4 dependent variable: prof(district)</h3>
<p>district variable*party and gender</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + chamber + ideology + high_edu_share * 
    party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.053531 -0.012791 -0.001278  0.012525  0.057651 

Coefficients:
                                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                      0.4103877  0.0048035  85.435  &lt; 2e-16 ***
age                             -0.0000716  0.0000486  -1.473  0.14095    
chambersenate                   -0.0041300  0.0012876  -3.207  0.00137 ** 
ideology                        -0.0042016  0.0046254  -0.908  0.36387    
high_edu_share                  -0.0212149  0.0072366  -2.932  0.00344 ** 
partyIndependent                -0.0045948  0.0391737  -0.117  0.90665    
partyRepublican                  0.0040639  0.0047997   0.847  0.39733    
genderMale                      -0.0031878  0.0012531  -2.544  0.01108 *  
as.factor(congress)116           0.0090477  0.0015605   5.798 8.58e-09 ***
as.factor(congress)117           0.0160173  0.0016823   9.521  &lt; 2e-16 ***
as.factor(congress)118           0.0144013  0.0015930   9.040  &lt; 2e-16 ***
high_edu_share:partyIndependent  0.0230551  0.1126886   0.205  0.83793    
high_edu_share:partyRepublican  -0.0247503  0.0127157  -1.946  0.05184 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01881 on 1194 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1332,    Adjusted R-squared:  0.1245 
F-statistic: 15.29 on 12 and 1194 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + ideology + blue_collar_share * 
    party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.051649 -0.012215 -0.002158  0.012828  0.059886 

Coefficients:
                                     Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                         0.3972972  0.0046428  85.574  &lt; 2e-16 ***
age                                -0.0001170  0.0000471  -2.483  0.01315 *  
ideology                           -0.0071438  0.0044490  -1.606  0.10860    
blue_collar_share                   0.0440635  0.0157142   2.804  0.00513 ** 
partyIndependent                    0.0194207  0.0461591   0.421  0.67403    
partyRepublican                    -0.0143646  0.0059680  -2.407  0.01624 *  
genderMale                         -0.0033207  0.0012561  -2.644  0.00831 ** 
as.factor(congress)116              0.0082267  0.0015675   5.248 1.82e-07 ***
as.factor(congress)117              0.0147546  0.0016771   8.798  &lt; 2e-16 ***
as.factor(congress)118              0.0132070  0.0015750   8.386  &lt; 2e-16 ***
blue_collar_share:partyIndependent -0.0827728  0.2129933  -0.389  0.69763    
blue_collar_share:partyRepublican   0.0519687  0.0248772   2.089  0.03692 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01883 on 1195 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1304,    Adjusted R-squared:  0.1224 
F-statistic: 16.29 on 11 and 1195 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + ideology + white_collar_share * 
    party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.052559 -0.012207 -0.001763  0.012904  0.057469 

Coefficients:
                                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                          4.336e-01  7.677e-03  56.484  &lt; 2e-16 ***
age                                 -1.138e-04  4.694e-05  -2.424   0.0155 *  
ideology                            -7.111e-03  4.418e-03  -1.609   0.1078    
white_collar_share                  -4.582e-02  1.051e-02  -4.362 1.40e-05 ***
partyIndependent                    -7.866e-02  1.207e-01  -0.652   0.5148    
partyRepublican                      9.900e-03  1.122e-02   0.883   0.3776    
genderMale                          -3.198e-03  1.251e-03  -2.556   0.0107 *  
as.factor(congress)116               8.565e-03  1.560e-03   5.491 4.88e-08 ***
as.factor(congress)117               1.579e-02  1.678e-03   9.407  &lt; 2e-16 ***
as.factor(congress)118               1.407e-02  1.582e-03   8.892  &lt; 2e-16 ***
white_collar_share:partyIndependent  1.327e-01  1.990e-01   0.667   0.5050    
white_collar_share:partyRepublican  -2.035e-02  1.813e-02  -1.123   0.2619    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01879 on 1195 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1345,    Adjusted R-squared:  0.1265 
F-statistic: 16.88 on 11 and 1195 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + seniority + ideology + chamber + 
    white_ratio * party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.052405 -0.012737 -0.001387  0.013239  0.056493 

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                   4.116e-01  4.799e-03  85.767  &lt; 2e-16 ***
age                          -4.948e-06  6.019e-05  -0.082  0.93449    
seniority                    -1.461e-04  7.522e-05  -1.943  0.05231 .  
ideology                     -8.768e-04  4.801e-03  -0.183  0.85512    
chambersenate                -2.575e-03  1.332e-03  -1.933  0.05349 .  
white_ratio                  -2.095e-02  4.427e-03  -4.731 2.50e-06 ***
partyIndependent             -6.587e-04  4.843e-02  -0.014  0.98915    
partyRepublican              -1.892e-02  5.862e-03  -3.228  0.00128 ** 
genderMale                   -2.788e-03  1.258e-03  -2.215  0.02692 *  
as.factor(congress)116        9.141e-03  1.562e-03   5.853 6.22e-09 ***
as.factor(congress)117        1.470e-02  1.708e-03   8.606  &lt; 2e-16 ***
as.factor(congress)118        1.258e-02  1.628e-03   7.727 2.33e-14 ***
white_ratio:partyIndependent  9.851e-03  5.544e-02   0.178  0.85898    
white_ratio:partyRepublican   2.438e-02  7.252e-03   3.361  0.00080 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01882 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1332,    Adjusted R-squared:  0.1238 
F-statistic:  14.1 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + seniority + ideology + chamber + 
    asian_ratio * party + gender + as.factor(congress), data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.053302 -0.012786 -0.001753  0.012693  0.057851 

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                   3.994e-01  4.232e-03  94.379  &lt; 2e-16 ***
age                          -2.544e-06  6.088e-05  -0.042  0.96667    
seniority                    -1.389e-04  7.593e-05  -1.830  0.06752 .  
ideology                     -4.822e-03  4.831e-03  -0.998  0.31843    
chambersenate                -3.456e-03  1.335e-03  -2.588  0.00977 ** 
asian_ratio                   3.644e-03  8.968e-03   0.406  0.68459    
partyIndependent              9.996e-03  1.440e-02   0.694  0.48763    
partyRepublican              -4.556e-04  2.723e-03  -0.167  0.86714    
genderMale                   -2.939e-03  1.271e-03  -2.312  0.02095 *  
as.factor(congress)116        8.868e-03  1.577e-03   5.625 2.31e-08 ***
as.factor(congress)117        1.524e-02  1.694e-03   8.998  &lt; 2e-16 ***
as.factor(congress)118        1.343e-02  1.596e-03   8.416  &lt; 2e-16 ***
asian_ratio:partyIndependent -3.322e-01  6.991e-01  -0.475  0.63478    
asian_ratio:partyRepublican  -4.095e-02  2.769e-02  -1.479  0.13942    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01898 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1182,    Adjusted R-squared:  0.1086 
F-statistic:  12.3 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + seniority + ideology + chamber + 
    black_or_african_american_ratio * party + gender + as.factor(congress), 
    data = legis_merged)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.054963 -0.012356 -0.001406  0.012760  0.056346 

Coefficients:
                                                   Estimate Std. Error t value
(Intercept)                                       3.966e-01  4.074e-03  97.369
age                                              -1.801e-05  6.047e-05  -0.298
seniority                                        -1.617e-04  7.529e-05  -2.148
ideology                                         -2.268e-03  4.748e-03  -0.478
chambersenate                                    -2.583e-03  1.334e-03  -1.936
black_or_african_american_ratio                   2.729e-02  6.115e-03   4.463
partyIndependent                                  1.176e-02  9.017e-03   1.304
partyRepublican                                   2.539e-03  2.637e-03   0.963
genderMale                                       -2.783e-03  1.255e-03  -2.217
as.factor(congress)116                            8.839e-03  1.559e-03   5.669
as.factor(congress)117                            1.537e-02  1.674e-03   9.180
as.factor(congress)118                            1.336e-02  1.580e-03   8.455
black_or_african_american_ratio:partyIndependent -2.003e-01  2.171e-01  -0.923
black_or_african_american_ratio:partyRepublican  -5.136e-02  1.074e-02  -4.781
                                                 Pr(&gt;|t|)    
(Intercept)                                       &lt; 2e-16 ***
age                                                0.7658    
seniority                                          0.0319 *  
ideology                                           0.6329    
chambersenate                                      0.0531 .  
black_or_african_american_ratio                  8.85e-06 ***
partyIndependent                                   0.1924    
partyRepublican                                    0.3359    
genderMale                                         0.0268 *  
as.factor(congress)116                           1.80e-08 ***
as.factor(congress)117                            &lt; 2e-16 ***
as.factor(congress)118                            &lt; 2e-16 ***
black_or_african_american_ratio:partyIndependent   0.3563    
black_or_african_american_ratio:partyRepublican  1.96e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01878 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1365,    Adjusted R-squared:  0.1271 
F-statistic: 14.51 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + seniority + ideology + chamber + 
    median_household_income_that_year * party + gender + as.factor(congress), 
    data = legis_merged)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.05350 -0.01262 -0.00155  0.01278  0.05554 

Coefficients:
                                                     Estimate Std. Error
(Intercept)                                         4.083e-01  5.045e-03
age                                                -3.506e-06  6.000e-05
seniority                                          -1.471e-04  7.519e-05
ideology                                           -6.406e-03  4.759e-03
chambersenate                                      -3.788e-03  1.330e-03
median_household_income_that_year                  -1.136e-07  3.864e-08
partyIndependent                                   -4.796e-02  5.417e-02
partyRepublican                                     2.339e-04  5.296e-03
genderMale                                         -2.799e-03  1.258e-03
as.factor(congress)116                              9.475e-03  1.572e-03
as.factor(congress)117                              1.637e-02  1.709e-03
as.factor(congress)118                              1.570e-02  1.712e-03
median_household_income_that_year:partyIndependent  7.788e-07  8.318e-07
median_household_income_that_year:partyRepublican  -4.469e-08  6.507e-08
                                                   t value Pr(&gt;|t|)    
(Intercept)                                         80.929  &lt; 2e-16 ***
age                                                 -0.058  0.95341    
seniority                                           -1.956  0.05069 .  
ideology                                            -1.346  0.17851    
chambersenate                                       -2.849  0.00447 ** 
median_household_income_that_year                   -2.940  0.00335 ** 
partyIndependent                                    -0.885  0.37609    
partyRepublican                                      0.044  0.96479    
genderMale                                          -2.225  0.02624 *  
as.factor(congress)116                               6.026 2.24e-09 ***
as.factor(congress)117                               9.577  &lt; 2e-16 ***
as.factor(congress)118                               9.174  &lt; 2e-16 ***
median_household_income_that_year:partyIndependent   0.936  0.34934    
median_household_income_that_year:partyRepublican   -0.687  0.49237    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01887 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1281,    Adjusted R-squared:  0.1186 
F-statistic: 13.48 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = prof_percentage ~ age + seniority + ideology + chamber + 
    median_household_income_that_year * party + gender + as.factor(congress), 
    data = legis_merged)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.05350 -0.01262 -0.00155  0.01278  0.05554 

Coefficients:
                                                     Estimate Std. Error
(Intercept)                                         4.083e-01  5.045e-03
age                                                -3.506e-06  6.000e-05
seniority                                          -1.471e-04  7.519e-05
ideology                                           -6.406e-03  4.759e-03
chambersenate                                      -3.788e-03  1.330e-03
median_household_income_that_year                  -1.136e-07  3.864e-08
partyIndependent                                   -4.796e-02  5.417e-02
partyRepublican                                     2.339e-04  5.296e-03
genderMale                                         -2.799e-03  1.258e-03
as.factor(congress)116                              9.475e-03  1.572e-03
as.factor(congress)117                              1.637e-02  1.709e-03
as.factor(congress)118                              1.570e-02  1.712e-03
median_household_income_that_year:partyIndependent  7.788e-07  8.318e-07
median_household_income_that_year:partyRepublican  -4.469e-08  6.507e-08
                                                   t value Pr(&gt;|t|)    
(Intercept)                                         80.929  &lt; 2e-16 ***
age                                                 -0.058  0.95341    
seniority                                           -1.956  0.05069 .  
ideology                                            -1.346  0.17851    
chambersenate                                       -2.849  0.00447 ** 
median_household_income_that_year                   -2.940  0.00335 ** 
partyIndependent                                    -0.885  0.37609    
partyRepublican                                      0.044  0.96479    
genderMale                                          -2.225  0.02624 *  
as.factor(congress)116                               6.026 2.24e-09 ***
as.factor(congress)117                               9.577  &lt; 2e-16 ***
as.factor(congress)118                               9.174  &lt; 2e-16 ***
median_household_income_that_year:partyIndependent   0.936  0.34934    
median_household_income_that_year:partyRepublican   -0.687  0.49237    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01887 on 1193 degrees of freedom
  (58 observations deleted due to missingness)
Multiple R-squared:  0.1281,    Adjusted R-squared:  0.1186 
F-statistic: 13.48 on 13 and 1193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresprof.percentage%20interaction%20legis-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="district-data-multilateral---liner-regression" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="district-data-multilateral---liner-regression"><span class="header-section-number">7.7</span> 6.6 district data multilateral - liner regression</h2>
<p>define function</p>
<section id="party-level" class="level3" data-number="7.7.1">
<h3 data-number="7.7.1" class="anchored" data-anchor-id="party-level"><span class="header-section-number">7.7.1</span> 6.6.1 party level</h3>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"1.121067e-01","3":"1.194372e-02","4":"9.3862490","5":"1.376032e-19"},{"1":"black_or_african_american_ratio","2":"-1.095832e-01","3":"1.684470e-02","4":"-6.5055010","5":"1.668204e-10"},{"1":"foreign_born_ratio","2":"-1.259661e-01","3":"2.116131e-02","4":"-5.9526614","5":"4.557540e-09"},{"1":"white_collar_share","2":"1.175763e-01","3":"3.025418e-02","4":"3.8862839","5":"1.134754e-04"},{"1":"median_household_income_that_year","2":"3.335681e-07","3":"1.159725e-07","4":"2.8762692","5":"4.171201e-03"},{"1":"asian_ratio","2":"-6.977653e-02","3":"2.556402e-02","4":"-2.7294822","5":"6.534969e-03"},{"1":"ideology","2":"4.828676e-02","3":"1.837566e-02","4":"2.6277559","5":"8.828985e-03"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-4.247679e-01","3":"1.716063e-01","4":"-2.4752470","5":"1.359755e-02"},{"1":"high_edu_share","2":"4.406075e-02","3":"2.106212e-02","4":"2.0919428","5":"3.687564e-02"},{"1":"seniority","2":"3.076109e-04","3":"2.197021e-04","4":"1.4001272","5":"1.620044e-01"},{"1":"blue_collar_share","2":"-6.220494e-02","3":"4.501903e-02","4":"-1.3817476","5":"1.675784e-01"},{"1":"agriculture_share","2":"1.404209e-01","3":"2.055780e-01","4":"0.6830540","5":"4.948441e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"2.520462e-02","3":"1.126993e-01","4":"0.2236448","5":"8.231120e-01"},{"1":"age","2":"3.088026e-05","3":"1.894541e-04","4":"0.1629960","5":"8.705778e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_party-democratics-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-2.468022e-02","3":"4.459620e-03","4":"-5.5341528","5":"4.730957e-08"},{"1":"black_or_african_american_ratio","2":"2.868942e-02","3":"6.114313e-03","4":"4.6921740","5":"3.371697e-06"},{"1":"white_collar_share","2":"-4.585163e-02","3":"1.077490e-02","4":"-4.2554119","5":"2.431061e-05"},{"1":"foreign_born_ratio","2":"2.411392e-02","3":"7.717290e-03","4":"3.1246621","5":"1.868563e-03"},{"1":"median_household_income_that_year","2":"-1.202332e-07","3":"4.140112e-08","4":"-2.9041059","5":"3.822556e-03"},{"1":"high_edu_share","2":"-2.038016e-02","3":"7.500838e-03","4":"-2.7170515","5":"6.782297e-03"},{"1":"blue_collar_share","2":"4.296577e-02","3":"1.600123e-02","4":"2.6851545","5":"7.455973e-03"},{"1":"seniority","2":"-1.984865e-04","3":"7.778413e-05","4":"-2.5517614","5":"1.097070e-02"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"6.197691e-02","3":"6.153781e-02","4":"1.0071354","5":"3.142875e-01"},{"1":"asian_ratio","2":"7.117372e-03","3":"9.180767e-03","4":"0.7752482","5":"4.385074e-01"},{"1":"age","2":"-4.667062e-05","3":"6.730802e-05","4":"-0.6933886","5":"4.883404e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"1.939619e-02","3":"4.023182e-02","4":"0.4821106","5":"6.299083e-01"},{"1":"ideology","2":"2.794987e-03","3":"6.590158e-03","4":"0.4241153","5":"6.716434e-01"},{"1":"agriculture_share","2":"1.264256e-02","3":"7.342698e-02","4":"0.1721787","5":"8.633568e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_party-democratics-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-8.742579e-02","3":"8.471749e-03","4":"-10.3196854","5":"4.796681e-23"},{"1":"foreign_born_ratio","2":"1.018511e-01","3":"1.509124e-02","4":"6.7490209","5":"3.599842e-11"},{"1":"black_or_african_american_ratio","2":"8.089212e-02","3":"1.208684e-02","4":"6.6925774","5":"5.157318e-11"},{"1":"ideology","2":"-5.108226e-02","3":"1.311630e-02","4":"-3.8945646","5":"1.101624e-04"},{"1":"asian_ratio","2":"6.265813e-02","3":"1.831364e-02","4":"3.4213908","5":"6.666403e-04"},{"1":"white_collar_share","2":"-7.172232e-02","3":"2.183035e-02","4":"-3.2854412","5":"1.079342e-03"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"3.628007e-01","3":"1.231112e-01","4":"2.9469339","5":"3.337736e-03"},{"1":"median_household_income_that_year","2":"-2.133296e-07","3":"8.350306e-08","4":"-2.5547515","5":"1.087926e-02"},{"1":"high_edu_share","2":"-2.367860e-02","3":"1.516790e-02","4":"-1.5610998","5":"1.190428e-01"},{"1":"agriculture_share","2":"-1.530774e-01","3":"1.477257e-01","4":"-1.0362274","5":"3.005257e-01"},{"1":"seniority","2":"-1.091153e-04","3":"1.583850e-04","4":"-0.6889243","5":"4.911435e-01"},{"1":"blue_collar_share","2":"1.923581e-02","3":"3.241008e-02","4":"0.5935131","5":"5.530680e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-4.460100e-02","3":"8.100882e-02","4":"-0.5505698","5":"5.821395e-01"},{"1":"age","2":"1.580591e-05","3":"1.364078e-04","4":"0.1158725","5":"9.077933e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_party-democratics-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"-2.457369e-01","3":"4.359815e-02","4":"-5.63640753","5":"2.584507e-08"},{"1":"high_edu_share","2":"1.234736e-01","3":"2.450053e-02","4":"5.03962873","5":"6.046460e-07"},{"1":"white_collar_share","2":"1.710057e-01","3":"3.453916e-02","4":"4.95106778","5":"9.407076e-07"},{"1":"black_or_african_american_ratio","2":"7.661909e-02","3":"2.012498e-02","4":"3.80716254","5":"1.538078e-04"},{"1":"ideology","2":"5.563739e-02","3":"1.519110e-02","4":"3.66249808","5":"2.708265e-04"},{"1":"median_household_income_that_year","2":"4.382436e-07","3":"1.330335e-07","4":"3.29423599","5":"1.040217e-03"},{"1":"white_ratio","2":"-2.849530e-02","3":"1.430414e-02","4":"-1.99210197","5":"4.677584e-02"},{"1":"age","2":"3.046903e-04","3":"1.586013e-04","4":"1.92110910","5":"5.515035e-02"},{"1":"asian_ratio","2":"9.939935e-02","3":"5.938529e-02","4":"1.67380420","5":"9.464797e-02"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-3.954690e-01","3":"7.276311e-01","4":"-0.54350203","5":"5.869697e-01"},{"1":"seniority","2":"7.256159e-05","3":"1.953814e-04","4":"0.37138428","5":"7.104711e-01"},{"1":"foreign_born_ratio","2":"-4.777438e-03","3":"2.427532e-02","4":"-0.19680228","5":"8.440435e-01"},{"1":"agriculture_share","2":"2.306483e-02","3":"1.587955e-01","4":"0.14524868","5":"8.845594e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"9.359652e-04","3":"6.966706e-02","4":"0.01343483","5":"9.892850e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_party-republican-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"8.993466e-02","3":"1.819020e-02","4":"4.944126836","5":"9.735883e-07"},{"1":"white_collar_share","2":"-6.092608e-02","3":"1.440385e-02","4":"-4.229846353","5":"2.672800e-05"},{"1":"high_edu_share","2":"-4.030700e-02","3":"1.024249e-02","4":"-3.935272379","5":"9.201345e-05"},{"1":"black_or_african_american_ratio","2":"-2.703485e-02","3":"8.377243e-03","4":"-3.227177417","5":"1.312689e-03"},{"1":"ideology","2":"-1.771297e-02","3":"6.220506e-03","4":"-2.847513617","5":"4.550289e-03"},{"1":"age","2":"-1.825529e-04","3":"6.525546e-05","4":"-2.797511906","5":"5.300602e-03"},{"1":"median_household_income_that_year","2":"-9.058952e-08","3":"5.555097e-08","4":"-1.630746004","5":"1.034261e-01"},{"1":"seniority","2":"-1.216601e-04","3":"8.050829e-05","4":"-1.511150002","5":"1.312310e-01"},{"1":"foreign_born_ratio","2":"1.104629e-02","3":"1.006496e-02","4":"1.097500445","5":"2.728272e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-2.560810e-02","3":"2.889354e-02","4":"-0.886291650","5":"3.757867e-01"},{"1":"asian_ratio","2":"-1.970592e-02","3":"2.468488e-02","4":"-0.798299143","5":"4.249871e-01"},{"1":"white_ratio","2":"4.409155e-03","3":"5.951538e-03","4":"0.740843008","5":"4.590549e-01"},{"1":"agriculture_share","2":"-1.816050e-02","3":"6.589525e-02","4":"-0.275596468","5":"7.829452e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"3.548324e-04","3":"3.020256e-01","4":"0.001174842","5":"9.990630e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_party-republican-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"1.558095e-01","3":"2.989237e-02","4":"5.21235146","5":"2.504615e-07"},{"1":"high_edu_share","2":"-8.316969e-02","3":"1.675109e-02","4":"-4.96503175","5":"8.777732e-07"},{"1":"white_collar_share","2":"-1.100846e-01","3":"2.365131e-02","4":"-4.65448118","5":"3.934877e-06"},{"1":"median_household_income_that_year","2":"-3.476658e-07","3":"9.064222e-08","4":"-3.83558330","5":"1.374111e-04"},{"1":"ideology","2":"-3.792560e-02","3":"1.046898e-02","4":"-3.62266463","5":"3.151499e-04"},{"1":"black_or_african_american_ratio","2":"-4.958183e-02","3":"1.376768e-02","4":"-3.60132046","5":"3.406358e-04"},{"1":"white_ratio","2":"2.408548e-02","3":"9.758647e-03","4":"2.46811704","5":"1.383774e-02"},{"1":"asian_ratio","2":"-7.969443e-02","3":"4.054676e-02","4":"-1.96549433","5":"4.978044e-02"},{"1":"age","2":"-1.221388e-04","3":"1.089695e-04","4":"-1.12085258","5":"2.627601e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"3.951333e-01","3":"4.970819e-01","4":"0.79490580","5":"4.269571e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"2.465711e-02","3":"4.759561e-02","4":"0.51805427","5":"6.045959e-01"},{"1":"foreign_born_ratio","2":"-6.269984e-03","3":"1.658665e-02","4":"-0.37801381","5":"7.055432e-01"},{"1":"seniority","2":"4.910565e-05","3":"1.339927e-04","4":"0.36647993","5":"7.141250e-01"},{"1":"agriculture_share","2":"-4.913002e-03","3":"1.085108e-01","4":"-0.04527662","5":"9.639007e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_party-republican-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="chamber-level" class="level3" data-number="7.7.2">
<h3 data-number="7.7.2" class="anchored" data-anchor-id="chamber-level"><span class="header-section-number">7.7.2</span> 6.6.2 chamber level</h3>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"8.906344e-02","3":"9.655147e-03","4":"9.2244513","5":"2.062552e-19"},{"1":"ideology","2":"5.333352e-02","3":"7.290756e-03","4":"7.3152249","5":"5.851215e-13"},{"1":"black_or_african_american_ratio","2":"-1.047544e-01","3":"1.518023e-02","4":"-6.9007079","5":"9.891851e-12"},{"1":"foreign_born_ratio","2":"-1.078266e-01","3":"1.589809e-02","4":"-6.7823635","5":"2.167655e-11"},{"1":"is.republican","2":"2.009274e-02","3":"3.665566e-03","4":"5.4814852","5":"5.499045e-08"},{"1":"white_collar_share","2":"9.119326e-02","3":"2.462992e-02","4":"3.7025397","5":"2.267404e-04"},{"1":"asian_ratio","2":"-8.619665e-02","3":"2.416630e-02","4":"-3.5668117","5":"3.808470e-04"},{"1":"median_household_income_that_year","2":"2.249128e-07","3":"9.263243e-08","4":"2.4280141","5":"1.538131e-02"},{"1":"seniority","2":"-3.980141e-04","3":"2.091384e-04","4":"-1.9031136","5":"5.734923e-02"},{"1":"high_edu_share","2":"2.957149e-02","3":"1.659601e-02","4":"1.7818434","5":"7.511953e-02"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-5.707387e-01","3":"3.264071e-01","4":"-1.7485490","5":"8.071769e-02"},{"1":"blue_collar_share","2":"-4.911585e-02","3":"3.365864e-02","4":"-1.4592347","5":"1.448574e-01"},{"1":"agriculture_share","2":"2.020872e-01","3":"1.412410e-01","4":"1.4307963","5":"1.528436e-01"},{"1":"age","2":"-1.049919e-04","3":"1.555311e-04","4":"-0.6750540","5":"4.998174e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"3.194314e-02","3":"9.321176e-02","4":"0.3426943","5":"7.319103e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-2.304379e-02","3":"3.629296e-03","4":"-6.3493812","5":"3.459777e-10"},{"1":"ideology","2":"-1.363458e-02","3":"2.706754e-03","4":"-5.0372441","5":"5.747217e-07"},{"1":"foreign_born_ratio","2":"2.936310e-02","3":"5.903875e-03","4":"4.9735301","5":"7.904837e-07"},{"1":"black_or_african_american_ratio","2":"2.530131e-02","3":"5.657037e-03","4":"4.4725379","5":"8.741540e-06"},{"1":"white_collar_share","2":"-3.641885e-02","3":"9.027936e-03","4":"-4.0340169","5":"5.959396e-05"},{"1":"is.republican","2":"-5.293006e-03","3":"1.350083e-03","4":"-3.9205054","5":"9.517261e-05"},{"1":"blue_collar_share","2":"3.053341e-02","3":"1.232708e-02","4":"2.4769373","5":"1.343842e-02"},{"1":"high_edu_share","2":"-1.380317e-02","3":"6.085095e-03","4":"-2.2683567","5":"2.354902e-02"},{"1":"asian_ratio","2":"2.002153e-02","3":"8.909063e-03","4":"2.2473216","5":"2.486652e-02"},{"1":"median_household_income_that_year","2":"-6.324470e-08","3":"3.404951e-08","4":"-1.8574334","5":"6.358340e-02"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"1.367782e-01","3":"1.199333e-01","4":"1.1404524","5":"2.544081e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-2.595071e-02","3":"3.420624e-02","4":"-0.7586543","5":"4.482625e-01"},{"1":"agriculture_share","2":"-3.450257e-02","3":"5.189244e-02","4":"-0.6648862","5":"5.062975e-01"},{"1":"age","2":"-3.564513e-05","3":"5.682619e-05","4":"-0.6272658","5":"5.306464e-01"},{"1":"seniority","2":"1.379295e-05","3":"7.656437e-05","4":"0.1801485","5":"8.570772e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-6.602043e-02","3":"6.813747e-03","4":"-9.68929915","5":"3.651928e-21"},{"1":"ideology","2":"-3.970052e-02","3":"5.168088e-03","4":"-7.68185924","5":"4.234268e-14"},{"1":"black_or_african_american_ratio","2":"7.945298e-02","3":"1.071934e-02","4":"7.41211516","5":"2.918157e-13"},{"1":"foreign_born_ratio","2":"7.846419e-02","3":"1.125463e-02","4":"6.97172390","5":"6.143179e-12"},{"1":"is.republican","2":"-1.480059e-02","3":"2.600923e-03","4":"-5.69051687","5":"1.720381e-08"},{"1":"asian_ratio","2":"6.617599e-02","3":"1.711053e-02","4":"3.86755996","5":"1.180300e-04"},{"1":"white_collar_share","2":"-5.477245e-02","3":"1.749895e-02","4":"-3.13004295","5":"1.805458e-03"},{"1":"seniority","2":"3.842270e-04","3":"1.483272e-04","4":"2.59040108","5":"9.743726e-03"},{"1":"median_household_income_that_year","2":"-1.616577e-07","3":"6.566270e-08","4":"-2.46194048","5":"1.400952e-02"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"4.339934e-01","3":"2.313355e-01","4":"1.87603450","5":"6.098136e-02"},{"1":"agriculture_share","2":"-1.675975e-01","3":"1.000855e-01","4":"-1.67454433","5":"9.437898e-02"},{"1":"high_edu_share","2":"-1.576616e-02","3":"1.177443e-02","4":"-1.33901678","5":"1.809110e-01"},{"1":"age","2":"1.406453e-04","3":"1.104259e-04","4":"1.27366246","5":"2.031167e-01"},{"1":"blue_collar_share","2":"1.857965e-02","3":"2.388187e-02","4":"0.77798121","5":"4.367892e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-6.000693e-03","3":"6.608365e-02","4":"-0.09080451","5":"9.276686e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"black_or_african_american_ratio","2":"1.371021e-01","3":"2.132153e-02","4":"6.4302219","5":"3.959595e-10"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-5.716024e-01","3":"1.388893e-01","4":"-4.1155265","5":"4.771153e-05"},{"1":"seniority","2":"4.808693e-04","3":"1.855757e-04","4":"2.5912291","5":"9.943857e-03"},{"1":"white_collar_share","2":"1.390692e-01","3":"5.372332e-02","4":"2.5886186","5":"1.001816e-02"},{"1":"white_ratio","2":"-2.850936e-02","3":"1.497065e-02","4":"-1.9043499","5":"5.764419e-02"},{"1":"agriculture_share","2":"-7.488304e-01","3":"4.226548e-01","4":"-1.7717305","5":"7.726678e-02"},{"1":"is.republican","2":"6.974266e-03","3":"4.149998e-03","4":"1.6805467","5":"9.369956e-02"},{"1":"asian_ratio","2":"-5.568647e-02","3":"3.428998e-02","4":"-1.6239867","5":"1.052348e-01"},{"1":"high_edu_share","2":"5.581414e-02","3":"3.544662e-02","4":"1.5745969","5":"1.162088e-01"},{"1":"age","2":"2.893153e-04","3":"1.959891e-04","4":"1.4761805","5":"1.407506e-01"},{"1":"blue_collar_share","2":"-7.861586e-02","3":"5.833716e-02","4":"-1.3476121","5":"1.786122e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-2.488700e-02","3":"7.129677e-02","4":"-0.3490621","5":"7.272423e-01"},{"1":"foreign_born_ratio","2":"7.908133e-03","3":"2.975665e-02","4":"0.2657602","5":"7.905727e-01"},{"1":"ideology","2":"1.288399e-03","3":"7.048374e-03","4":"0.1827938","5":"8.550697e-01"},{"1":"median_household_income_that_year","2":"-1.992368e-08","3":"1.779632e-07","4":"-0.1119540","5":"9.109209e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"black_or_african_american_ratio","2":"-3.660782e-02","3":"9.507570e-03","4":"-3.85038636","5":"0.0001390511"},{"1":"seniority","2":"-2.507663e-04","3":"7.968687e-05","4":"-3.14689634","5":"0.0017846484"},{"1":"white_collar_share","2":"-5.636922e-02","3":"2.319148e-02","4":"-2.43060046","5":"0.0155509502"},{"1":"blue_collar_share","2":"5.331094e-02","3":"2.506494e-02","4":"2.12691293","5":"0.0340920635"},{"1":"age","2":"-1.608440e-04","3":"8.434988e-05","4":"-1.90686731","5":"0.0573162573"},{"1":"is.republican","2":"-3.051232e-03","3":"1.789388e-03","4":"-1.70518171","5":"0.0890044426"},{"1":"white_ratio","2":"1.089888e-02","3":"6.462548e-03","4":"1.68646781","5":"0.0925532405"},{"1":"high_edu_share","2":"-2.453866e-02","3":"1.528349e-02","4":"-1.60556637","5":"0.1092269629"},{"1":"foreign_born_ratio","2":"-1.956671e-02","3":"1.279249e-02","4":"-1.52954669","5":"0.1269880736"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"8.627210e-02","3":"6.109023e-02","4":"1.41220777","5":"0.1587338539"},{"1":"agriculture_share","2":"1.792830e-01","3":"1.827969e-01","4":"0.98077691","5":"0.3273471071"},{"1":"american_indian_and_alaska_native_ratio","2":"1.907083e-02","3":"3.073408e-02","4":"0.62051080","5":"0.5353056287"},{"1":"asian_ratio","2":"-8.387841e-03","3":"1.483320e-02","4":"-0.56547766","5":"0.5720935157"},{"1":"median_household_income_that_year","2":"-2.343849e-08","3":"7.673402e-08","4":"-0.30545109","5":"0.7601953185"},{"1":"ideology","2":"-1.613690e-04","3":"3.014161e-03","4":"-0.05353696","5":"0.9573358076"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"black_or_african_american_ratio","2":"-1.004939e-01","3":"1.458620e-02","4":"-6.8896547","5":"2.434075e-11"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"4.853383e-01","3":"9.457520e-02","4":"5.1317712","5":"4.656506e-07"},{"1":"asian_ratio","2":"6.407661e-02","3":"2.348085e-02","4":"2.7288886","5":"6.659835e-03"},{"1":"white_collar_share","2":"-8.270293e-02","3":"3.711220e-02","4":"-2.2284565","5":"2.645366e-02"},{"1":"agriculture_share","2":"5.695119e-01","3":"2.910237e-01","4":"1.9569263","5":"5.111188e-02"},{"1":"seniority","2":"-2.300700e-04","3":"1.285022e-04","4":"-1.7903982","5":"7.421182e-02"},{"1":"white_ratio","2":"1.760993e-02","3":"1.032779e-02","4":"1.7051016","5":"8.901939e-02"},{"1":"is.republican","2":"-3.923783e-03","3":"2.863844e-03","4":"-1.3701107","5":"1.714876e-01"},{"1":"high_edu_share","2":"-3.127656e-02","3":"2.445774e-02","4":"-1.2788003","5":"2.017732e-01"},{"1":"age","2":"-1.284473e-04","3":"1.353098e-04","4":"-0.9492837","5":"3.430993e-01"},{"1":"blue_collar_share","2":"2.530498e-02","3":"4.028355e-02","4":"0.6281717","5":"5.302811e-01"},{"1":"foreign_born_ratio","2":"1.165965e-02","3":"2.050129e-02","4":"0.5687278","5":"5.698878e-01"},{"1":"median_household_income_that_year","2":"4.334776e-08","3":"1.226337e-07","4":"0.3534734","5":"7.239360e-01"},{"1":"ideology","2":"-1.128596e-03","3":"4.848536e-03","4":"-0.2327705","5":"8.160809e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"5.803884e-03","3":"4.914504e-02","4":"0.1180970","5":"9.060552e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="partychamber" class="level3" data-number="7.7.3">
<h3 data-number="7.7.3" class="anchored" data-anchor-id="partychamber"><span class="header-section-number">7.7.3</span> 6.6.3 party+chamber</h3>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_collar_share","2":"3.717687e-01","3":"6.737273e-02","4":"5.51808866","5":"1.258775e-07"},{"1":"high_edu_share","2":"2.302741e-01","3":"4.745212e-02","4":"4.85276840","5":"2.739700e-06"},{"1":"blue_collar_share","2":"-4.163832e-01","3":"9.128204e-02","4":"-4.56150176","5":"9.687587e-06"},{"1":"seniority","2":"1.046589e-03","3":"2.536177e-04","4":"4.12663856","5":"5.754003e-05"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-5.359098e-01","3":"1.377574e-01","4":"-3.89024238","5":"1.435057e-04"},{"1":"black_or_african_american_ratio","2":"1.459177e-01","3":"3.780055e-02","4":"3.86019962","5":"1.607227e-04"},{"1":"median_household_income_that_year","2":"8.788884e-07","3":"2.577974e-07","4":"3.40922083","5":"8.136390e-04"},{"1":"ideology","2":"-6.148115e-02","3":"2.032928e-02","4":"-3.02426573","5":"2.918040e-03"},{"1":"age","2":"7.555932e-04","3":"2.984801e-04","4":"2.53146961","5":"1.226545e-02"},{"1":"asian_ratio","2":"-5.838090e-02","3":"3.785858e-02","4":"-1.54207845","5":"1.249139e-01"},{"1":"foreign_born_ratio","2":"5.583554e-02","3":"4.048227e-02","4":"1.37925908","5":"1.696267e-01"},{"1":"agriculture_share","2":"-4.998399e-01","3":"6.588025e-01","4":"-0.75870979","5":"4.490768e-01"},{"1":"white_ratio","2":"-4.728850e-03","3":"1.993818e-02","4":"-0.23717561","5":"8.128061e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"1.165122e-02","3":"1.599938e-01","4":"0.07282294","5":"9.420326e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate_dem-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"1.806436e-01","3":"3.574840e-02","4":"5.0531929","5":"1.113781e-06"},{"1":"ideology","2":"3.770549e-02","3":"8.059313e-03","4":"4.6784999","5":"6.252493e-06"},{"1":"high_edu_share","2":"-8.754810e-02","3":"1.891666e-02","4":"-4.6280951","5":"7.292835e-06"},{"1":"white_collar_share","2":"-1.257180e-01","3":"2.735365e-02","4":"-4.5960224","5":"8.364616e-06"},{"1":"median_household_income_that_year","2":"-4.520458e-07","3":"9.978782e-08","4":"-4.5300701","5":"1.106584e-05"},{"1":"seniority","2":"-4.462453e-04","3":"9.975385e-05","4":"-4.4734643","5":"1.403812e-05"},{"1":"foreign_born_ratio","2":"-6.088322e-02","3":"1.544835e-02","4":"-3.9410827","5":"1.182927e-04"},{"1":"age","2":"-3.021087e-04","3":"1.182935e-04","4":"-2.5538911","5":"1.153087e-02"},{"1":"black_or_african_american_ratio","2":"-3.759963e-02","3":"1.536058e-02","4":"-2.4478001","5":"1.538961e-02"},{"1":"white_ratio","2":"1.610753e-02","3":"7.808631e-03","4":"2.0627859","5":"4.065378e-02"},{"1":"asian_ratio","2":"-2.033318e-02","3":"1.503288e-02","4":"-1.3525802","5":"1.779861e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"6.395853e-02","3":"5.678124e-02","4":"1.1264026","5":"2.615827e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"6.364295e-02","3":"6.324206e-02","4":"1.0063388","5":"3.156828e-01"},{"1":"agriculture_share","2":"1.910962e-01","3":"2.612116e-01","4":"0.7315763","5":"4.654345e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate_dem-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_collar_share","2":"-2.460624e-01","3":"5.006151e-02","4":"-4.9152004","5":"2.075355e-06"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"4.719586e-01","3":"9.870274e-02","4":"4.7816164","5":"3.748576e-06"},{"1":"high_edu_share","2":"-1.427332e-01","3":"3.537217e-02","4":"-4.0351836","5":"8.232761e-05"},{"1":"black_or_african_american_ratio","2":"-1.083234e-01","3":"2.760666e-02","4":"-3.9238124","5":"1.263433e-04"},{"1":"blue_collar_share","2":"2.357505e-01","3":"6.837161e-02","4":"3.4480755","5":"7.117384e-04"},{"1":"seniority","2":"-6.003078e-04","3":"1.890120e-04","4":"-3.1760305","5":"1.773249e-03"},{"1":"asian_ratio","2":"7.871452e-02","3":"2.721750e-02","4":"2.8920561","5":"4.327872e-03"},{"1":"median_household_income_that_year","2":"-4.268867e-07","3":"1.920957e-07","4":"-2.2222606","5":"2.758515e-02"},{"1":"age","2":"-4.534378e-04","3":"2.196186e-04","4":"-2.0646608","5":"4.047369e-02"},{"1":"ideology","2":"2.377552e-02","3":"1.491963e-02","4":"1.5935731","5":"1.130689e-01"},{"1":"white_ratio","2":"-1.137830e-02","3":"1.455710e-02","4":"-0.7816324","5":"4.355179e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-7.528801e-02","3":"1.168630e-01","4":"-0.6442418","5":"5.202870e-01"},{"1":"agriculture_share","2":"3.088054e-01","3":"4.820168e-01","4":"0.6406529","5":"5.226109e-01"},{"1":"foreign_born_ratio","2":"5.047979e-03","3":"2.976741e-02","4":"0.1695807","5":"8.655415e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate_dem-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"1.382540e-01","3":"1.480055e-02","4":"9.341137851","5":"6.277569e-19"},{"1":"black_or_african_american_ratio","2":"-1.300402e-01","3":"1.899566e-02","4":"-6.845782390","5":"2.803968e-11"},{"1":"foreign_born_ratio","2":"-1.400439e-01","3":"2.591394e-02","4":"-5.404190794","5":"1.109415e-07"},{"1":"ideology","2":"1.178413e-01","3":"2.471088e-02","4":"4.768802740","5":"2.591846e-06"},{"1":"white_collar_share","2":"9.549023e-02","3":"3.439676e-02","4":"2.776140447","5":"5.754129e-03"},{"1":"median_household_income_that_year","2":"3.182364e-07","3":"1.324872e-07","4":"2.402016743","5":"1.675115e-02"},{"1":"asian_ratio","2":"-5.757467e-02","3":"3.187916e-02","4":"-1.806028449","5":"7.165071e-02"},{"1":"seniority","2":"-4.795338e-04","3":"3.102813e-04","4":"-1.545481022","5":"1.229996e-01"},{"1":"high_edu_share","2":"3.388061e-02","3":"2.398724e-02","4":"1.412442813","5":"1.585819e-01"},{"1":"age","2":"-3.142567e-04","3":"2.330385e-04","4":"-1.348518481","5":"1.782343e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-4.337360e-01","3":"3.756949e-01","4":"-1.154490088","5":"2.489751e-01"},{"1":"agriculture_share","2":"1.524306e-01","3":"2.278681e-01","4":"0.668942114","5":"5.039107e-01"},{"1":"blue_collar_share","2":"-2.643675e-02","3":"5.175900e-02","4":"-0.510766204","5":"6.097910e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-6.290132e-04","3":"1.412426e-01","4":"-0.004453425","5":"9.964489e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house_dem-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-3.428796e-02","3":"5.448948e-03","4":"-6.29258225","5":"8.061692e-10"},{"1":"black_or_african_american_ratio","2":"3.403735e-02","3":"6.814608e-03","4":"4.99476256","5":"8.750447e-07"},{"1":"foreign_born_ratio","2":"3.396428e-02","3":"9.236978e-03","4":"3.67699014","5":"2.675633e-04"},{"1":"white_collar_share","2":"-3.815915e-02","3":"1.200415e-02","4":"-3.17882978","5":"1.591416e-03"},{"1":"ideology","2":"-1.993755e-02","3":"8.806717e-03","4":"-2.26390297","5":"2.410967e-02"},{"1":"median_household_income_that_year","2":"-9.385007e-08","3":"4.646497e-08","4":"-2.01980275","5":"4.405704e-02"},{"1":"high_edu_share","2":"-1.553038e-02","3":"8.380742e-03","4":"-1.85310373","5":"6.458929e-02"},{"1":"blue_collar_share","2":"2.697953e-02","3":"1.807194e-02","4":"1.49289641","5":"1.362372e-01"},{"1":"asian_ratio","2":"1.096874e-02","3":"1.118892e-02","4":"0.98032228","5":"3.275080e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"1.248211e-01","3":"1.315612e-01","4":"0.94876819","5":"3.433001e-01"},{"1":"age","2":"4.648872e-05","3":"8.131848e-05","4":"0.57168704","5":"5.678465e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"1.415387e-02","3":"4.942935e-02","4":"0.28634551","5":"7.747588e-01"},{"1":"agriculture_share","2":"1.176222e-02","3":"7.979450e-02","4":"0.14740635","5":"8.828841e-01"},{"1":"seniority","2":"9.147304e-06","3":"1.083891e-04","4":"0.08439321","5":"9.327849e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house_dem-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"white_ratio","2":"-1.039649e-01","3":"1.050414e-02","4":"-9.89751057","5":"7.645700e-21"},{"1":"black_or_african_american_ratio","2":"9.600138e-02","3":"1.358003e-02","4":"7.06930783","5":"6.792998e-12"},{"1":"foreign_born_ratio","2":"1.060776e-01","3":"1.851249e-02","4":"5.73005520","5":"1.952899e-08"},{"1":"ideology","2":"-9.790457e-02","3":"1.759098e-02","4":"-5.56561333","5":"4.767106e-08"},{"1":"median_household_income_that_year","2":"-2.243761e-07","3":"9.506136e-08","4":"-2.36032961","5":"1.872847e-02"},{"1":"white_collar_share","2":"-5.732733e-02","3":"2.474394e-02","4":"-2.31682308","5":"2.100782e-02"},{"1":"seniority","2":"4.703858e-04","3":"2.223556e-04","4":"2.11546621","5":"3.499125e-02"},{"1":"asian_ratio","2":"4.660416e-02","3":"2.284325e-02","4":"2.04017253","5":"4.197658e-02"},{"1":"age","2":"2.677782e-04","3":"1.672717e-04","4":"1.60085772","5":"1.101768e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"3.089353e-01","3":"2.695077e-01","4":"1.14629492","5":"2.523450e-01"},{"1":"high_edu_share","2":"-1.834740e-02","3":"1.722513e-02","4":"-1.06515350","5":"2.874364e-01"},{"1":"agriculture_share","2":"-1.642101e-01","3":"1.633467e-01","4":"-1.00528574","5":"3.153551e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-1.352669e-02","3":"1.013169e-01","4":"-0.13350866","5":"8.938569e-01"},{"1":"blue_collar_share","2":"-5.478894e-04","3":"3.714074e-02","4":"-0.01475171","5":"9.882375e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house_dem-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"-3.062964e-01","3":"4.797906e-02","4":"-6.3839611","5":"4.191204e-10"},{"1":"high_edu_share","2":"1.490144e-01","3":"2.632077e-02","4":"5.6614753","5":"2.633297e-08"},{"1":"white_collar_share","2":"2.006757e-01","3":"3.703301e-02","4":"5.4188323","5":"9.657097e-08"},{"1":"median_household_income_that_year","2":"6.807286e-07","3":"1.456483e-07","4":"4.6737845","5":"3.880972e-06"},{"1":"ideology","2":"6.702832e-02","3":"2.099022e-02","4":"3.1933126","5":"1.504088e-03"},{"1":"asian_ratio","2":"1.075813e-01","3":"6.409983e-02","4":"1.6783403","5":"9.395400e-02"},{"1":"age","2":"2.957931e-04","3":"2.018681e-04","4":"1.4652792","5":"1.435162e-01"},{"1":"black_or_african_american_ratio","2":"3.180711e-02","3":"2.823108e-02","4":"1.1266699","5":"2.604644e-01"},{"1":"white_ratio","2":"-1.194402e-02","3":"1.710252e-02","4":"-0.6983776","5":"4.852909e-01"},{"1":"agriculture_share","2":"8.890879e-02","3":"1.699865e-01","4":"0.5230343","5":"6.012000e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"5.577948e-01","3":"1.097418e+00","4":"0.5082791","5":"6.114992e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"4.906535e-02","3":"1.177004e-01","4":"0.4168665","5":"6.769689e-01"},{"1":"foreign_born_ratio","2":"6.414872e-03","3":"2.696357e-02","4":"0.2379088","5":"8.120568e-01"},{"1":"seniority","2":"-3.532982e-05","3":"2.782466e-04","4":"-0.1269730","5":"8.990163e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house_rep-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"1.030088e-01","3":"1.939673e-02","4":"5.3106268","5":"1.698059e-07"},{"1":"white_collar_share","2":"-6.730003e-02","3":"1.492123e-02","4":"-4.5103544","5":"8.208868e-06"},{"1":"high_edu_share","2":"-4.759708e-02","3":"1.063749e-02","4":"-4.4744669","5":"9.647787e-06"},{"1":"median_household_income_that_year","2":"-1.771626e-07","3":"5.892696e-08","4":"-3.0064785","5":"2.786305e-03"},{"1":"ideology","2":"-2.448279e-02","3":"8.331907e-03","4":"-2.9384382","5":"3.466373e-03"},{"1":"age","2":"-1.774257e-04","3":"7.987685e-05","4":"-2.2212408","5":"2.681245e-02"},{"1":"black_or_african_american_ratio","2":"-1.767022e-02","3":"1.125587e-02","4":"-1.5698674","5":"1.171276e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-6.688574e-02","3":"4.689407e-02","4":"-1.4263155","5":"1.544498e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-4.381074e-01","3":"4.377574e-01","4":"-1.0007994","5":"3.174454e-01"},{"1":"asian_ratio","2":"-2.527946e-02","3":"2.564043e-02","4":"-0.9859220","5":"3.246852e-01"},{"1":"foreign_born_ratio","2":"7.070874e-03","3":"1.075996e-02","4":"0.6571471","5":"5.114122e-01"},{"1":"seniority","2":"-5.978068e-05","3":"1.103921e-04","4":"-0.5415305","5":"5.883997e-01"},{"1":"agriculture_share","2":"-3.542904e-02","3":"6.786152e-02","4":"-0.5220785","5":"6.018648e-01"},{"1":"white_ratio","2":"9.857022e-04","3":"6.831044e-03","4":"0.1442974","5":"8.853282e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house_rep-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"blue_collar_share","2":"2.032954e-01","3":"3.334301e-02","4":"6.0970911","5":"2.275637e-09"},{"1":"high_edu_share","2":"-1.014205e-01","3":"1.824800e-02","4":"-5.5578980","5":"4.611905e-08"},{"1":"white_collar_share","2":"-1.333811e-01","3":"2.570844e-02","4":"-5.1882225","5":"3.179044e-07"},{"1":"median_household_income_that_year","2":"-5.035752e-07","3":"1.005227e-07","4":"-5.0095663","5":"7.768561e-07"},{"1":"ideology","2":"-4.254555e-02","3":"1.464139e-02","4":"-2.9058399","5":"3.841334e-03"},{"1":"asian_ratio","2":"-8.230320e-02","3":"4.435814e-02","4":"-1.8554251","5":"6.416951e-02"},{"1":"white_ratio","2":"1.095768e-02","3":"1.183845e-02","4":"0.9256007","5":"3.551347e-01"},{"1":"age","2":"-1.183649e-04","3":"1.405822e-04","4":"-0.8419621","5":"4.002392e-01"},{"1":"foreign_born_ratio","2":"-1.348659e-02","3":"1.866238e-02","4":"-0.7226617","5":"4.702519e-01"},{"1":"black_or_african_american_ratio","2":"-1.413537e-02","3":"1.956518e-02","4":"-0.7224756","5":"4.703661e-01"},{"1":"seniority","2":"9.510962e-05","3":"1.934295e-04","4":"0.4917018","5":"6.231607e-01"},{"1":"agriculture_share","2":"-5.348252e-02","3":"1.177208e-01","4":"-0.4543166","5":"6.498134e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"1.780539e-02","3":"8.151627e-02","4":"0.2184274","5":"8.271921e-01"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.195717e-01","3":"7.601318e-01","4":"-0.1573038","5":"8.750738e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-house_rep-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"black_or_african_american_ratio","2":"1.271075e-01","3":"2.603647e-02","4":"4.88190260","5":"2.271167e-06"},{"1":"white_ratio","2":"-8.865587e-02","3":"2.561104e-02","4":"-3.46162702","5":"6.675494e-04"},{"1":"median_household_income_that_year","2":"-1.146451e-06","3":"3.659058e-07","4":"-3.13318612","5":"2.012506e-03"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.651211e+00","3":"9.027439e-01","4":"-1.82910260","5":"6.900296e-02"},{"1":"agriculture_share","2":"-9.896397e-01","3":"5.874966e-01","4":"-1.68450281","5":"9.377999e-02"},{"1":"high_edu_share","2":"-1.240162e-01","3":"7.438576e-02","4":"-1.66720346","5":"9.717510e-02"},{"1":"asian_ratio","2":"3.004786e-01","3":"2.162158e-01","4":"1.38971664","5":"1.662941e-01"},{"1":"white_collar_share","2":"-9.629297e-02","3":"1.134629e-01","4":"-0.84867368","5":"3.971656e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"-5.763474e-02","3":"8.096963e-02","4":"-0.71180684","5":"4.774859e-01"},{"1":"blue_collar_share","2":"5.542168e-02","3":"1.107111e-01","4":"0.50059750","5":"6.172527e-01"},{"1":"foreign_born_ratio","2":"-3.135757e-02","3":"6.533467e-02","4":"-0.47995297","5":"6.318309e-01"},{"1":"age","2":"1.045566e-04","3":"2.668028e-04","4":"0.39188702","5":"6.955952e-01"},{"1":"ideology","2":"5.217932e-03","3":"2.825252e-02","4":"0.18468907","5":"8.536957e-01"},{"1":"seniority","2":"-2.156754e-05","3":"2.715001e-04","4":"-0.07943843","5":"9.367702e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate_rep-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"black_or_african_american_ratio","2":"-3.445689e-02","3":"1.260193e-02","4":"-2.7342548","5":"0.006863153"},{"1":"median_household_income_that_year","2":"4.369369e-07","3":"1.714668e-07","4":"2.5482303","5":"0.011644185"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"5.485251e-01","3":"4.212506e-01","4":"1.3021347","5":"0.194498006"},{"1":"white_ratio","2":"1.474205e-02","3":"1.223136e-02","4":"1.2052668","5":"0.229648102"},{"1":"blue_collar_share","2":"5.186498e-02","3":"5.132629e-02","4":"1.0104954","5":"0.313584965"},{"1":"seniority","2":"-1.182074e-04","3":"1.258327e-04","4":"-0.9394018","5":"0.348756029"},{"1":"age","2":"-1.161167e-04","3":"1.237056e-04","4":"-0.9386540","5":"0.349138918"},{"1":"agriculture_share","2":"2.293268e-01","3":"2.745121e-01","4":"0.8353979","5":"0.404577136"},{"1":"ideology","2":"9.577468e-03","3":"1.262066e-02","4":"0.7588720","5":"0.448992501"},{"1":"asian_ratio","2":"-6.686928e-02","3":"1.008536e-01","4":"-0.6630330","5":"0.508139167"},{"1":"white_collar_share","2":"-3.310455e-02","3":"5.275857e-02","4":"-0.6274725","5":"0.531127446"},{"1":"high_edu_share","2":"2.139405e-02","3":"3.478200e-02","4":"0.6150896","5":"0.539255495"},{"1":"foreign_born_ratio","2":"1.741193e-02","3":"3.034465e-02","4":"0.5738057","5":"0.566799985"},{"1":"american_indian_and_alaska_native_ratio","2":"1.636810e-02","3":"3.764882e-02","4":"0.4347573","5":"0.664248089"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate_rep-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["var"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"black_or_african_american_ratio","2":"-9.264637e-02","3":"1.668868e-02","4":"-5.55144981","5":"9.777348e-08"},{"1":"white_ratio","2":"7.391247e-02","3":"1.633989e-02","4":"4.52343892","5":"1.088479e-05"},{"1":"median_household_income_that_year","2":"7.094550e-07","3":"2.390687e-07","4":"2.96757775","5":"3.400602e-03"},{"1":"high_edu_share","2":"1.026170e-01","3":"4.824924e-02","4":"2.12681058","5":"3.476832e-02"},{"1":"agriculture_share","2":"7.602044e-01","3":"3.816942e-01","4":"1.99165833","5":"4.788780e-02"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"1.102609e+00","3":"5.880110e-01","4":"1.87514974","5":"6.235641e-02"},{"1":"white_collar_share","2":"1.293922e-01","3":"7.346669e-02","4":"1.76123580","5":"7.985950e-02"},{"1":"asian_ratio","2":"-2.336190e-01","3":"1.405848e-01","4":"-1.66176518","5":"9.826263e-02"},{"1":"blue_collar_share","2":"-1.072777e-01","3":"7.176018e-02","4":"-1.49494787","5":"1.366411e-01"},{"1":"ideology","2":"-1.479819e-02","3":"1.863572e-02","4":"-0.79407660","5":"4.282711e-01"},{"1":"seniority","2":"1.398002e-04","3":"1.766273e-04","4":"0.79149801","5":"4.296726e-01"},{"1":"american_indian_and_alaska_native_ratio","2":"4.125167e-02","3":"5.274937e-02","4":"0.78203154","5":"4.352012e-01"},{"1":"foreign_born_ratio","2":"1.393999e-02","3":"4.258999e-02","4":"0.32730668","5":"7.438080e-01"},{"1":"age","2":"1.155512e-05","3":"1.739342e-04","4":"0.06643389","5":"9.471045e-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_chamber-senate_rep-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="congress" class="level3" data-number="7.7.4">
<h3 data-number="7.7.4" class="anchored" data-anchor-id="congress"><span class="header-section-number">7.7.4</span> 6.6.4 congress</h3>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"white_ratio","2":"9.536643e-02","3":"2.044006e-02","4":"4.66566420","5":"4.684504e-06","6":"white_ratio"},{"1":"asian_ratio","2":"-1.950797e-01","3":"4.593646e-02","4":"-4.24672823","5":"2.916092e-05","6":"asian_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.065422e+00","3":"2.704578e-01","4":"-3.93932678","5":"1.021996e-04","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"foreign_born_ratio","2":"-1.043820e-01","3":"3.094256e-02","4":"-3.37341156","5":"8.423589e-04","6":"foreign_born_ratio"},{"1":"white_collar_share","2":"1.431077e-01","3":"4.894057e-02","4":"2.92411262","5":"3.724012e-03","6":"white_collar_share"},{"1":"blue_collar_share","2":"-1.623001e-01","3":"6.410510e-02","4":"-2.53178165","5":"1.187111e-02","6":"blue_collar_share"},{"1":"high_edu_share","2":"6.292251e-02","3":"3.340915e-02","4":"1.88339170","5":"6.063762e-02","6":"high_edu_share"},{"1":"is.republican","2":"9.384396e-03","3":"6.303968e-03","4":"1.48864910","5":"1.376516e-01","6":"is.republican"},{"1":"ideology","2":"1.728060e-02","3":"1.170853e-02","4":"1.47589795","5":"1.411112e-01","6":"ideology"},{"1":"median_household_income_that_year","2":"2.979371e-07","3":"2.101708e-07","4":"1.41759525","5":"1.573715e-01","6":"median_household_income_that_year"},{"1":"agriculture_share","2":"4.196235e-01","3":"3.212643e-01","4":"1.30616280","5":"1.925217e-01","6":"agriculture_share"},{"1":"black_or_african_american_ratio","2":"-2.212721e-02","3":"2.779163e-02","4":"-0.79618257","5":"4.265705e-01","6":"black_or_african_american_ratio"},{"1":"american_indian_and_alaska_native_ratio","2":"1.918919e-02","3":"1.206591e-01","4":"0.15903642","5":"8.737497e-01","6":"american_indian_and_alaska_native_ratio"},{"1":"seniority","2":"9.105896e-06","3":"3.084638e-04","4":"0.02952015","5":"9.764698e-01","6":"seniority"},{"1":"age","2":"5.507036e-06","3":"2.818939e-04","4":"0.01953585","5":"9.844269e-01","6":"age"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"blue_collar_share","2":"1.118725e-01","3":"2.742645e-02","4":"4.0790014","5":"5.834784e-05","6":"blue_collar_share"},{"1":"white_collar_share","2":"-7.972323e-02","3":"2.109355e-02","4":"-3.7795073","5":"1.903831e-04","6":"white_collar_share"},{"1":"high_edu_share","2":"-4.290641e-02","3":"1.440701e-02","4":"-2.9781619","5":"3.142220e-03","6":"high_edu_share"},{"1":"white_ratio","2":"-2.224966e-02","3":"9.125429e-03","4":"-2.4382044","5":"1.535461e-02","6":"white_ratio"},{"1":"asian_ratio","2":"4.725872e-02","3":"2.040612e-02","4":"2.3159098","5":"2.125342e-02","6":"asian_ratio"},{"1":"median_household_income_that_year","2":"-1.940687e-07","3":"9.105141e-08","4":"-2.1314190","5":"3.388670e-02","6":"median_household_income_that_year"},{"1":"foreign_born_ratio","2":"2.717224e-02","3":"1.362937e-02","4":"1.9936538","5":"4.711676e-02","6":"foreign_born_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"2.370217e-01","3":"1.199507e-01","4":"1.9759929","5":"4.909346e-02","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"seniority","2":"-1.478077e-04","3":"1.342694e-04","4":"-1.1008296","5":"2.718713e-01","6":"seniority"},{"1":"age","2":"-9.519618e-05","3":"1.228311e-04","4":"-0.7750171","5":"4.389525e-01","6":"age"},{"1":"ideology","2":"-3.374573e-03","3":"5.085134e-03","4":"-0.6636152","5":"5.074905e-01","6":"ideology"},{"1":"agriculture_share","2":"-8.171325e-02","3":"1.401014e-01","4":"-0.5832437","5":"5.601779e-01","6":"agriculture_share"},{"1":"american_indian_and_alaska_native_ratio","2":"-2.750800e-02","3":"5.247426e-02","4":"-0.5242189","5":"6.005226e-01","6":"american_indian_and_alaska_native_ratio"},{"1":"black_or_african_american_ratio","2":"1.716691e-03","3":"1.210430e-02","4":"0.1418249","5":"8.873158e-01","6":"black_or_african_american_ratio"},{"1":"is.republican","2":"-3.847472e-04","3":"2.759916e-03","4":"-0.1394054","5":"8.892252e-01","6":"is.republican"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"white_ratio","2":"-7.311806e-02","3":"1.382114e-02","4":"-5.2903078","5":"2.394851e-07","6":"white_ratio"},{"1":"asian_ratio","2":"1.478240e-01","3":"3.114230e-02","4":"4.7467259","5":"3.237651e-06","6":"asian_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"8.284458e-01","3":"1.832185e-01","4":"4.5216278","5":"8.919800e-06","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"foreign_born_ratio","2":"7.720888e-02","3":"2.105710e-02","4":"3.6666436","5":"2.917511e-04","6":"foreign_born_ratio"},{"1":"is.republican","2":"-9.000168e-03","3":"4.290082e-03","4":"-2.0979014","5":"3.676729e-02","6":"is.republican"},{"1":"white_collar_share","2":"-6.339010e-02","3":"3.369912e-02","4":"-1.8810609","5":"6.095513e-02","6":"white_collar_share"},{"1":"ideology","2":"-1.390683e-02","3":"7.974889e-03","4":"-1.7438272","5":"8.230261e-02","6":"ideology"},{"1":"agriculture_share","2":"-3.379286e-01","3":"2.191178e-01","4":"-1.5422235","5":"1.240986e-01","6":"agriculture_share"},{"1":"blue_collar_share","2":"5.043469e-02","3":"4.415064e-02","4":"1.1423321","5":"2.542486e-01","6":"blue_collar_share"},{"1":"black_or_african_american_ratio","2":"2.041013e-02","3":"1.895991e-02","4":"1.0764886","5":"2.825943e-01","6":"black_or_african_american_ratio"},{"1":"high_edu_share","2":"-2.001933e-02","3":"2.292049e-02","4":"-0.8734251","5":"3.831467e-01","6":"high_edu_share"},{"1":"median_household_income_that_year","2":"-1.038850e-07","3":"1.438734e-07","4":"-0.7220580","5":"4.708347e-01","6":"median_household_income_that_year"},{"1":"seniority","2":"1.386867e-04","3":"2.105388e-04","4":"0.6587230","5":"5.105892e-01","6":"seniority"},{"1":"age","2":"8.968064e-05","3":"1.924745e-04","4":"0.4659352","5":"6.416069e-01","6":"age"},{"1":"american_indian_and_alaska_native_ratio","2":"8.302091e-03","3":"8.239128e-02","4":"0.1007642","5":"9.198066e-01","6":"american_indian_and_alaska_native_ratio"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_115-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_115-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_115-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"white_ratio","2":"1.267241e-01","3":"1.781413e-02","4":"7.1136840","5":"7.171180e-12","6":"white_ratio"},{"1":"ideology","2":"6.370872e-02","3":"1.142794e-02","4":"5.5748203","5":"5.282412e-08","6":"ideology"},{"1":"foreign_born_ratio","2":"-1.532705e-01","3":"2.796750e-02","4":"-5.4803083","5":"8.494192e-08","6":"foreign_born_ratio"},{"1":"is.republican","2":"2.757472e-02","3":"5.993555e-03","4":"4.6007291","5":"6.017310e-06","6":"is.republican"},{"1":"asian_ratio","2":"-1.558033e-01","3":"3.957690e-02","4":"-3.9367230","5":"1.009583e-04","6":"asian_ratio"},{"1":"black_or_african_american_ratio","2":"-6.906268e-02","3":"2.378102e-02","4":"-2.9041099","5":"3.933563e-03","6":"black_or_african_american_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-8.722817e-01","3":"3.131933e-01","4":"-2.7851227","5":"5.662633e-03","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"white_collar_share","2":"6.964160e-02","3":"4.297719e-02","4":"1.6204314","5":"1.061035e-01","6":"white_collar_share"},{"1":"american_indian_and_alaska_native_ratio","2":"1.377956e-01","3":"1.222036e-01","4":"1.1275901","5":"2.603198e-01","6":"american_indian_and_alaska_native_ratio"},{"1":"agriculture_share","2":"1.955944e-01","3":"2.103376e-01","4":"0.9299074","5":"3.531050e-01","6":"agriculture_share"},{"1":"blue_collar_share","2":"2.291276e-02","3":"5.683239e-02","4":"0.4031638","5":"6.870912e-01","6":"blue_collar_share"},{"1":"seniority","2":"8.856867e-05","3":"3.174657e-04","4":"0.2789865","5":"7.804304e-01","6":"seniority"},{"1":"age","2":"-5.801760e-05","3":"2.541639e-04","4":"-0.2282685","5":"8.195793e-01","6":"age"},{"1":"high_edu_share","2":"5.646170e-03","3":"2.998990e-02","4":"0.1882691","5":"8.507825e-01","6":"high_edu_share"},{"1":"median_household_income_that_year","2":"-2.980556e-08","3":"1.747614e-07","4":"-0.1705500","5":"8.646831e-01","6":"median_household_income_that_year"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"white_ratio","2":"-2.609039e-02","3":"6.286497e-03","4":"-4.15022779","5":"4.240603e-05","6":"white_ratio"},{"1":"ideology","2":"-1.474051e-02","3":"3.938654e-03","4":"-3.74252385","5":"2.160232e-04","6":"ideology"},{"1":"is.republican","2":"-7.220535e-03","3":"2.038238e-03","4":"-3.54253717","5":"4.535671e-04","6":"is.republican"},{"1":"foreign_born_ratio","2":"3.298011e-02","3":"9.676095e-03","4":"3.40841109","5":"7.351238e-04","6":"foreign_born_ratio"},{"1":"asian_ratio","2":"3.213614e-02","3":"1.353098e-02","4":"2.37500412","5":"1.812513e-02","6":"asian_ratio"},{"1":"white_collar_share","2":"-3.014393e-02","3":"1.444267e-02","4":"-2.08714425","5":"3.764908e-02","6":"white_collar_share"},{"1":"black_or_african_american_ratio","2":"1.448637e-02","3":"8.075696e-03","4":"1.79382321","5":"7.376517e-02","6":"black_or_african_american_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"1.644093e-01","3":"1.063823e-01","4":"1.54545761","5":"1.232028e-01","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"seniority","2":"-1.438649e-04","3":"1.063417e-04","4":"-1.35285495","5":"1.770309e-01","6":"seniority"},{"1":"american_indian_and_alaska_native_ratio","2":"-3.838673e-02","3":"4.120003e-02","4":"-0.93171615","5":"3.521706e-01","6":"american_indian_and_alaska_native_ratio"},{"1":"blue_collar_share","2":"1.485068e-02","3":"1.913598e-02","4":"0.77606066","5":"4.382741e-01","6":"blue_collar_share"},{"1":"agriculture_share","2":"-5.064532e-02","3":"7.090847e-02","4":"-0.71423504","5":"4.755914e-01","6":"agriculture_share"},{"1":"age","2":"-6.030076e-05","3":"8.530580e-05","4":"-0.70687754","5":"4.801429e-01","6":"age"},{"1":"high_edu_share","2":"-6.328744e-03","3":"1.009914e-02","4":"-0.62666190","5":"5.313181e-01","6":"high_edu_share"},{"1":"median_household_income_that_year","2":"-2.900917e-09","3":"5.888566e-08","4":"-0.04926355","5":"9.607393e-01","6":"median_household_income_that_year"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"white_ratio","2":"-1.006352e-01","3":"1.273013e-02","4":"-7.90527199","5":"4.138263e-14","6":"white_ratio"},{"1":"foreign_born_ratio","2":"1.202919e-01","3":"2.013950e-02","4":"5.97293283","5":"6.078451e-09","6":"foreign_born_ratio"},{"1":"ideology","2":"-4.896963e-02","3":"8.261996e-03","4":"-5.92709397","5":"7.998251e-09","6":"ideology"},{"1":"is.republican","2":"-2.035485e-02","3":"4.351714e-03","4":"-4.67743273","5":"4.247779e-06","6":"is.republican"},{"1":"asian_ratio","2":"1.236673e-01","3":"2.859000e-02","4":"4.32554512","5":"2.023586e-05","6":"asian_ratio"},{"1":"black_or_african_american_ratio","2":"5.457830e-02","3":"1.721821e-02","4":"3.16980186","5":"1.669681e-03","6":"black_or_african_american_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"7.078350e-01","3":"2.266313e-01","4":"3.12328852","5":"1.948309e-03","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"white_collar_share","2":"-3.949632e-02","3":"3.124033e-02","4":"-1.26427331","5":"2.070324e-01","6":"white_collar_share"},{"1":"american_indian_and_alaska_native_ratio","2":"-9.941842e-02","3":"8.869391e-02","4":"-1.12091588","5":"2.631462e-01","6":"american_indian_and_alaska_native_ratio"},{"1":"agriculture_share","2":"-1.449683e-01","3":"1.526483e-01","4":"-0.94968820","5":"3.429721e-01","6":"agriculture_share"},{"1":"blue_collar_share","2":"-3.776689e-02","3":"4.120467e-02","4":"-0.91656818","5":"3.600444e-01","6":"blue_collar_share"},{"1":"age","2":"1.183166e-04","3":"1.846265e-04","4":"0.64084272","5":"5.220710e-01","6":"age"},{"1":"median_household_income_that_year","2":"3.271260e-08","3":"1.268295e-07","4":"0.25792577","5":"7.966264e-01","6":"median_household_income_that_year"},{"1":"seniority","2":"5.528510e-05","3":"2.307422e-04","4":"0.23959681","5":"8.107920e-01","6":"seniority"},{"1":"high_edu_share","2":"6.844870e-04","3":"2.176695e-02","4":"0.03144616","5":"9.749329e-01","6":"high_edu_share"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_116-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_116-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_116-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"black_or_african_american_ratio","2":"-7.214605e-02","3":"2.579204e-02","4":"-2.79722173","5":"0.005507896","6":"black_or_african_american_ratio"},{"1":"white_ratio","2":"3.651482e-02","3":"1.405403e-02","4":"2.59817347","5":"0.009862864","6":"white_ratio"},{"1":"foreign_born_ratio","2":"-6.242222e-02","3":"2.584168e-02","4":"-2.41556303","5":"0.016344502","6":"foreign_born_ratio"},{"1":"ideology","2":"2.316070e-02","3":"1.010321e-02","4":"2.29241147","5":"0.022631779","6":"ideology"},{"1":"is.republican","2":"9.409282e-03","3":"5.451960e-03","4":"1.72585319","5":"0.085457663","6":"is.republican"},{"1":"age","2":"3.198398e-04","3":"2.333535e-04","4":"1.37062321","5":"0.171570948","6":"age"},{"1":"median_household_income_that_year","2":"1.707843e-07","3":"1.482980e-07","4":"1.15162936","5":"0.250445399","6":"median_household_income_that_year"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"3.343116e-01","3":"3.104417e-01","4":"1.07689012","5":"0.282446489","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"seniority","2":"2.612074e-04","3":"2.820061e-04","4":"0.92624725","5":"0.355101171","6":"seniority"},{"1":"asian_ratio","2":"3.235468e-02","3":"3.869018e-02","4":"0.83625035","5":"0.403719608","6":"asian_ratio"},{"1":"white_collar_share","2":"2.962504e-02","3":"4.381430e-02","4":"0.67614988","5":"0.499497679","6":"white_collar_share"},{"1":"blue_collar_share","2":"3.214465e-02","3":"5.751072e-02","4":"0.55893309","5":"0.576649395","6":"blue_collar_share"},{"1":"american_indian_and_alaska_native_ratio","2":"5.492362e-02","3":"1.439010e-01","4":"0.38167632","5":"0.702987885","6":"american_indian_and_alaska_native_ratio"},{"1":"agriculture_share","2":"-3.436698e-02","3":"2.861142e-01","4":"-0.12011628","5":"0.904476267","6":"agriculture_share"},{"1":"high_edu_share","2":"2.110889e-03","3":"2.880051e-02","4":"0.07329345","5":"0.941624381","6":"high_edu_share"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"white_ratio","2":"-1.118799e-02","3":"5.187631e-03","4":"-2.15666572","5":"0.03187391","6":"white_ratio"},{"1":"black_or_african_american_ratio","2":"1.994498e-02","3":"9.542688e-03","4":"2.09008045","5":"0.03750303","6":"black_or_african_american_ratio"},{"1":"is.republican","2":"-4.055723e-03","3":"1.975539e-03","4":"-2.05297076","5":"0.04098817","6":"is.republican"},{"1":"foreign_born_ratio","2":"1.810120e-02","3":"9.541072e-03","4":"1.89718756","5":"0.05882108","6":"foreign_born_ratio"},{"1":"ideology","2":"-6.813093e-03","3":"3.665832e-03","4":"-1.85853914","5":"0.06415311","6":"ideology"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.444886e-01","3":"1.140853e-01","4":"-1.26649597","5":"0.20637699","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"age","2":"-9.940137e-05","3":"8.481252e-05","4":"-1.17201292","5":"0.24217066","6":"age"},{"1":"blue_collar_share","2":"-2.339284e-02","3":"2.111728e-02","4":"-1.10775845","5":"0.26890676","6":"blue_collar_share"},{"1":"seniority","2":"-1.057818e-04","3":"1.023675e-04","4":"-1.03335304","5":"0.30231477","6":"seniority"},{"1":"high_edu_share","2":"7.717392e-03","3":"1.058244e-02","4":"0.72926413","5":"0.46644323","6":"high_edu_share"},{"1":"asian_ratio","2":"-1.029471e-02","3":"1.423393e-02","4":"-0.72325137","5":"0.47012280","6":"asian_ratio"},{"1":"white_collar_share","2":"3.708537e-03","3":"1.612556e-02","4":"0.22997872","5":"0.81827444","6":"white_collar_share"},{"1":"agriculture_share","2":"-1.984896e-02","3":"1.052234e-01","4":"-0.18863641","5":"0.85051299","6":"agriculture_share"},{"1":"median_household_income_that_year","2":"-5.369903e-09","3":"5.466786e-08","4":"-0.09822778","5":"0.92182096","6":"median_household_income_that_year"},{"1":"american_indian_and_alaska_native_ratio","2":"-2.537480e-03","3":"5.293745e-02","4":"-0.04793356","5":"0.96180300","6":"american_indian_and_alaska_native_ratio"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"black_or_african_american_ratio","2":"5.219613e-02","3":"1.789268e-02","4":"2.9171782","5":"0.003815235","6":"black_or_african_american_ratio"},{"1":"white_ratio","2":"-2.532603e-02","3":"9.761493e-03","4":"-2.5944834","5":"0.009966824","6":"white_ratio"},{"1":"foreign_born_ratio","2":"4.432143e-02","3":"1.793989e-02","4":"2.4705519","5":"0.014079906","6":"foreign_born_ratio"},{"1":"ideology","2":"-1.634867e-02","3":"7.046986e-03","4":"-2.3199516","5":"0.021070438","6":"ideology"},{"1":"median_household_income_that_year","2":"-1.653919e-07","3":"1.027716e-07","4":"-1.6093158","5":"0.108662203","6":"median_household_income_that_year"},{"1":"is.republican","2":"-5.354017e-03","3":"3.808798e-03","4":"-1.4056973","5":"0.160903249","6":"is.republican"},{"1":"age","2":"-2.204084e-04","3":"1.627519e-04","4":"-1.3542601","5":"0.176726171","6":"age"},{"1":"white_collar_share","2":"-3.332970e-02","3":"3.039110e-02","4":"-1.0966928","5":"0.273708044","6":"white_collar_share"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.897985e-01","3":"2.157625e-01","4":"-0.8796640","5":"0.379787698","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"asian_ratio","2":"-2.205858e-02","3":"2.687331e-02","4":"-0.8208360","5":"0.412430555","6":"asian_ratio"},{"1":"seniority","2":"-1.553638e-04","3":"1.967499e-04","4":"-0.7896509","5":"0.430388136","6":"seniority"},{"1":"american_indian_and_alaska_native_ratio","2":"-5.239342e-02","3":"9.992304e-02","4":"-0.5243377","5":"0.600454093","6":"american_indian_and_alaska_native_ratio"},{"1":"high_edu_share","2":"-9.824627e-03","3":"1.999493e-02","4":"-0.4913558","5":"0.623555663","6":"high_edu_share"},{"1":"agriculture_share","2":"5.422230e-02","3":"1.986983e-01","4":"0.2728875","5":"0.785138688","6":"agriculture_share"},{"1":"blue_collar_share","2":"-8.754582e-03","3":"3.996248e-02","4":"-0.2190700","5":"0.826753409","6":"blue_collar_share"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_117-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_117-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_117-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"ideology","2":"3.548702e-02","3":"1.000569e-02","4":"3.5466834","5":"0.000445865","6":"ideology"},{"1":"white_collar_share","2":"1.224703e-01","3":"3.933233e-02","4":"3.1137301","5":"0.002001015","6":"white_collar_share"},{"1":"foreign_born_ratio","2":"-7.230373e-02","3":"2.422271e-02","4":"-2.9849563","5":"0.003037419","6":"foreign_born_ratio"},{"1":"is.republican","2":"1.495458e-02","3":"5.159728e-03","4":"2.8983278","5":"0.003988724","6":"is.republican"},{"1":"white_ratio","2":"3.934724e-02","3":"1.395500e-02","4":"2.8195805","5":"0.005084786","6":"white_ratio"},{"1":"black_or_african_american_ratio","2":"-5.764401e-02","3":"2.621911e-02","4":"-2.1985491","5":"0.028569674","6":"black_or_african_american_ratio"},{"1":"high_edu_share","2":"4.649173e-02","3":"2.546526e-02","4":"1.8256921","5":"0.068755977","6":"high_edu_share"},{"1":"median_household_income_that_year","2":"2.170974e-07","3":"1.286430e-07","4":"1.6875961","5":"0.092387362","6":"median_household_income_that_year"},{"1":"blue_collar_share","2":"-8.744246e-02","3":"5.285250e-02","4":"-1.6544622","5":"0.098937844","6":"blue_collar_share"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"2.969383e-01","3":"3.477467e-01","4":"0.8538927","5":"0.393753526","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"age","2":"1.778432e-04","3":"2.155819e-04","4":"0.8249451","5":"0.409966247","6":"age"},{"1":"asian_ratio","2":"-2.702448e-02","3":"3.515102e-02","4":"-0.7688108","5":"0.442528572","6":"asian_ratio"},{"1":"american_indian_and_alaska_native_ratio","2":"-6.819558e-02","3":"1.179688e-01","4":"-0.5780815","5":"0.563584039","6":"american_indian_and_alaska_native_ratio"},{"1":"seniority","2":"1.480373e-04","3":"2.605154e-04","4":"0.5682478","5":"0.570232115","6":"seniority"},{"1":"agriculture_share","2":"-3.659849e-02","3":"2.596341e-01","4":"-0.1409618","5":"0.887981935","6":"agriculture_share"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"is.republican","2":"-5.476152e-03","3":"1.928727e-03","4":"-2.8392569","5":"0.004786740","6":"is.republican"},{"1":"white_collar_share","2":"-4.078262e-02","3":"1.486121e-02","4":"-2.7442321","5":"0.006380599","6":"white_collar_share"},{"1":"ideology","2":"-9.632854e-03","3":"3.779030e-03","4":"-2.5490285","5":"0.011249053","6":"ideology"},{"1":"white_ratio","2":"-1.256297e-02","3":"5.273620e-03","4":"-2.3822294","5":"0.017746357","6":"white_ratio"},{"1":"foreign_born_ratio","2":"2.074488e-02","3":"9.173479e-03","4":"2.2613978","5":"0.024353185","6":"foreign_born_ratio"},{"1":"high_edu_share","2":"-1.548126e-02","3":"9.602547e-03","4":"-1.6122040","5":"0.107826651","6":"high_edu_share"},{"1":"black_or_african_american_ratio","2":"1.556371e-02","3":"9.909841e-03","4":"1.5705310","5":"0.117203003","6":"black_or_african_american_ratio"},{"1":"age","2":"-1.247697e-04","3":"8.034856e-05","4":"-1.5528551","5":"0.121364087","6":"age"},{"1":"seniority","2":"-1.310021e-04","3":"9.712775e-05","4":"-1.3487611","5":"0.178288217","6":"seniority"},{"1":"blue_collar_share","2":"2.559358e-02","3":"1.994004e-02","4":"1.2835268","5":"0.200164042","6":"blue_collar_share"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.142241e-01","3":"1.309864e-01","4":"-0.8720299","5":"0.383795030","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"agriculture_share","2":"7.773619e-02","3":"9.771502e-02","4":"0.7955398","5":"0.426843433","6":"agriculture_share"},{"1":"median_household_income_that_year","2":"-3.747471e-08","3":"4.861523e-08","4":"-0.7708429","5":"0.441324581","6":"median_household_income_that_year"},{"1":"american_indian_and_alaska_native_ratio","2":"1.737553e-02","3":"4.444914e-02","4":"0.3909081","5":"0.696105087","6":"american_indian_and_alaska_native_ratio"},{"1":"asian_ratio","2":"-2.671837e-03","3":"1.325149e-02","4":"-0.2016254","5":"0.840327764","6":"asian_ratio"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["var"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"ideology","2":"-2.585698e-02","3":"7.127790e-03","4":"-3.62762967","5":"0.0003307277","6":"ideology"},{"1":"foreign_born_ratio","2":"5.156092e-02","3":"1.716883e-02","4":"3.00316960","5":"0.0028657690","6":"foreign_born_ratio"},{"1":"white_collar_share","2":"-8.168180e-02","3":"2.792736e-02","4":"-2.92479468","5":"0.0036735144","6":"white_collar_share"},{"1":"white_ratio","2":"-2.678552e-02","3":"9.901506e-03","4":"-2.70519657","5":"0.0071632162","6":"white_ratio"},{"1":"is.republican","2":"-9.479876e-03","3":"3.678837e-03","4":"-2.57686766","5":"0.0103801480","6":"is.republican"},{"1":"black_or_african_american_ratio","2":"4.208229e-02","3":"1.857887e-02","4":"2.26506148","5":"0.0241250363","6":"black_or_african_american_ratio"},{"1":"median_household_income_that_year","2":"-1.796120e-07","3":"9.105933e-08","4":"-1.97247275","5":"0.0493492490","6":"median_household_income_that_year"},{"1":"high_edu_share","2":"-3.100616e-02","3":"1.806227e-02","4":"-1.71662592","5":"0.0869399361","6":"high_edu_share"},{"1":"blue_collar_share","2":"6.183984e-02","3":"3.746780e-02","4":"1.65047946","5":"0.0997496860","6":"blue_collar_share"},{"1":"asian_ratio","2":"2.969740e-02","3":"2.488874e-02","4":"1.19320642","5":"0.2336037214","6":"asian_ratio"},{"1":"native_hawaiian_and_other_pacific_islander_ratio","2":"-1.826944e-01","3":"2.465813e-01","4":"-0.74090935","5":"0.4592494796","6":"native_hawaiian_and_other_pacific_islander_ratio"},{"1":"american_indian_and_alaska_native_ratio","2":"5.081287e-02","3":"8.362378e-02","4":"0.60763659","5":"0.5438259700","6":"american_indian_and_alaska_native_ratio"},{"1":"age","2":"-5.305396e-05","3":"1.534520e-04","4":"-0.34573648","5":"0.7297490746","6":"age"},{"1":"agriculture_share","2":"-4.115402e-02","3":"1.840465e-01","4":"-0.22360670","5":"0.8231949328","6":"agriculture_share"},{"1":"seniority","2":"-1.701259e-05","3":"1.853706e-04","4":"-0.09177613","5":"0.9269285636","6":"seniority"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_118-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_118-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_data_analysis_legis_congress_118-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="district-analysis---logit-regression" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="district-analysis---logit-regression"><span class="header-section-number">7.8</span> 6.7 district analysis - logit regression</h2>
<section id="focus-on-edu" class="level3" data-number="7.8.1">
<h3 data-number="7.8.1" class="anchored" data-anchor-id="focus-on-edu"><span class="header-section-number">7.8.1</span> 6.7.1 focus on edu</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                   high_edu_share median_household_income_that_year 
                         3.593707                          4.006687 
               foreign_born_ratio                       asian_ratio 
                         2.376629                          3.119791 
                      white_ratio   black_or_african_american_ratio 
                         4.236425                          3.002663 
                agriculture_share 
                         1.157826 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                   high_edu_share median_household_income_that_year 
                         4.163972                          4.432439 
               foreign_born_ratio                       asian_ratio 
                         2.456555                          3.279993 
                      white_ratio   black_or_african_american_ratio 
                         4.758064                          3.147931 
                agriculture_share                          ideology 
                         1.162695                          1.379290 
                   gender_numeric                               age 
                         1.053062                          1.081191 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  high_edu_share
high_edu_share                         1.0000000
median_household_income_that_year      0.7928462
white_collar_share                     0.9572681
                                  median_household_income_that_year
high_edu_share                                            0.7928462
median_household_income_that_year                         1.0000000
white_collar_share                                        0.7429562
                                  white_collar_share
high_edu_share                             0.9572681
median_household_income_that_year          0.7429562
white_collar_share                         1.0000000</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_analysis_logit_legis_dem_edu-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_analysis_logit_legis_dem_edu-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                   high_edu_share median_household_income_that_year 
                         3.247599                          4.049152 
               foreign_born_ratio                       asian_ratio 
                         2.661879                          2.128910 
                      white_ratio   black_or_african_american_ratio 
                         4.487511                          3.462252 
                agriculture_share 
                         1.399239 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                   high_edu_share median_household_income_that_year 
                         3.255987                          4.141413 
               foreign_born_ratio                       asian_ratio 
                         2.438638                          2.287990 
                      white_ratio   black_or_african_american_ratio 
                         4.258949                          3.509136 
                agriculture_share                          ideology 
                         1.395244                          1.062255 
                   gender_numeric                               age 
                         1.033130                          1.031492 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_analysis_logit_legis_rep_edu-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_analysis_logit_legis_rep_edu-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output/figuresdistrict_analysis_logit_legis_rep_edu-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<!-- -->

</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb514" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb514-1"><a href="#cb514-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb514-2"><a href="#cb514-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "data_mining"</span></span>
<span id="cb514-3"><a href="#cb514-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Kunya Zhan"</span></span>
<span id="cb514-4"><a href="#cb514-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r format(Sys.Date(), '%B %d, %Y')`"</span></span>
<span id="cb514-5"><a href="#cb514-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb514-6"><a href="#cb514-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb514-7"><a href="#cb514-7" aria-hidden="true" tabindex="-1"></a><span class="co">   toc: true</span></span>
<span id="cb514-8"><a href="#cb514-8" aria-hidden="true" tabindex="-1"></a><span class="co">   toc-depth: 3</span></span>
<span id="cb514-9"><a href="#cb514-9" aria-hidden="true" tabindex="-1"></a><span class="co">   number-sections: true</span></span>
<span id="cb514-10"><a href="#cb514-10" aria-hidden="true" tabindex="-1"></a><span class="co">   code-fold: true</span></span>
<span id="cb514-11"><a href="#cb514-11" aria-hidden="true" tabindex="-1"></a><span class="co">   code-summary: "Show/Hide Code"</span></span>
<span id="cb514-12"><a href="#cb514-12" aria-hidden="true" tabindex="-1"></a><span class="co">   smooth-scroll: true</span></span>
<span id="cb514-13"><a href="#cb514-13" aria-hidden="true" tabindex="-1"></a><span class="co">   df-print: paged</span></span>
<span id="cb514-14"><a href="#cb514-14" aria-hidden="true" tabindex="-1"></a><span class="co">   code-tools: true</span></span>
<span id="cb514-15"><a href="#cb514-15" aria-hidden="true" tabindex="-1"></a><span class="co">   highlight-style: atom-one</span></span>
<span id="cb514-16"><a href="#cb514-16" aria-hidden="true" tabindex="-1"></a><span class="co">   toc-location: left</span></span>
<span id="cb514-17"><a href="#cb514-17" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb514-18"><a href="#cb514-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb514-19"><a href="#cb514-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-20"><a href="#cb514-20" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Mining</span></span>
<span id="cb514-21"><a href="#cb514-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-22"><a href="#cb514-22" aria-hidden="true" tabindex="-1"></a>This quarto document reorganizes the analyses from *descriptive analysis 1021.Rmd*, focusing on data mining and pattern discovery in the *decodeCompetition dataset*. It consists two main sections:</span>
<span id="cb514-23"><a href="#cb514-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-24"><a href="#cb514-24" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Data Mining**: exploration of the original dataset to identify salient patterns and cross-party differences;</span>
<span id="cb514-25"><a href="#cb514-25" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Model-based analysis:** identification of key characteristics through regression and logistic models.</span>
<span id="cb514-26"><a href="#cb514-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-27"><a href="#cb514-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Packages Installing if not already installed</span></span>
<span id="cb514-28"><a href="#cb514-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-31"><a href="#cb514-31" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-32"><a href="#cb514-32" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: install_libraries</span></span>
<span id="cb514-33"><a href="#cb514-33" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-34"><a href="#cb514-34" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb514-35"><a href="#cb514-35" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb514-36"><a href="#cb514-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-37"><a href="#cb514-37" aria-hidden="true" tabindex="-1"></a><span class="co">#  CRAN  install.packages </span></span>
<span id="cb514-38"><a href="#cb514-38" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cloud.r-project.org"</span>))</span>
<span id="cb514-39"><a href="#cb514-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-40"><a href="#cb514-40" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-41"><a href="#cb514-41" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb514-42"><a href="#cb514-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Rcpp"</span>, <span class="st">"dplyr"</span>, <span class="st">"stringr"</span>, <span class="st">"readr"</span>, <span class="st">"ggplot2"</span>, <span class="st">"tidyr"</span>, <span class="st">"readxl"</span>, <span class="st">"scales"</span>, </span>
<span id="cb514-43"><a href="#cb514-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"showtext"</span>, <span class="st">"sysfonts"</span>, <span class="st">"skimr"</span>, <span class="st">"plm"</span>, <span class="st">"car"</span>, <span class="st">"glmnet"</span>, </span>
<span id="cb514-44"><a href="#cb514-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Rtsne"</span>, <span class="st">"networkD3"</span>, <span class="st">"cluster"</span>, <span class="st">"factoextra"</span>, <span class="st">"pROC"</span>, <span class="st">"lme4"</span>, </span>
<span id="cb514-45"><a href="#cb514-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MuMIn"</span>, <span class="st">"nnet"</span>, <span class="st">"DHARMa"</span>, <span class="st">"tigris"</span>, <span class="st">"ggeffects"</span>, <span class="st">"stargazer"</span>,</span>
<span id="cb514-46"><a href="#cb514-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"htmltools"</span>, <span class="st">"tidyverse"</span>, <span class="st">"ggcorrplot"</span>, <span class="st">"purrr"</span>, <span class="st">"broom.mixed"</span>, </span>
<span id="cb514-47"><a href="#cb514-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"performance"</span>, <span class="st">"lattice"</span>, <span class="st">"fmsb"</span>, <span class="st">"kableExtra"</span>, <span class="st">"broom"</span>, </span>
<span id="cb514-48"><a href="#cb514-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"knitr"</span>, <span class="st">"ggnewscale"</span>, <span class="st">"modelsummary"</span>, <span class="st">"pscl"</span>, <span class="st">"ggfortify"</span>, </span>
<span id="cb514-49"><a href="#cb514-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rlang"</span>, <span class="st">"patchwork"</span>, <span class="st">"segmented"</span>, <span class="st">"tidytext"</span>, <span class="st">"mgcv"</span>, <span class="st">"splines"</span>, </span>
<span id="cb514-50"><a href="#cb514-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"interactions"</span>, <span class="st">"RColorBrewer"</span>, <span class="st">"cowplot"</span>, <span class="st">"ggbreak"</span>, <span class="st">"randomcoloR"</span>,</span>
<span id="cb514-51"><a href="#cb514-51" aria-hidden="true" tabindex="-1"></a>  <span class="st">"marginaleffects"</span>, <span class="st">"ggrepel"</span>, <span class="st">"grid"</span>,<span class="st">"here"</span></span>
<span id="cb514-52"><a href="#cb514-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-53"><a href="#cb514-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-54"><a href="#cb514-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Install only if missing</span></span>
<span id="cb514-55"><a href="#cb514-55" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (pkg <span class="cf">in</span> packages) {</span>
<span id="cb514-56"><a href="#cb514-56" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(pkg, <span class="at">character.only =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb514-57"><a href="#cb514-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(pkg)</span>
<span id="cb514-58"><a href="#cb514-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-59"><a href="#cb514-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-60"><a href="#cb514-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-61"><a href="#cb514-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all packages</span></span>
<span id="cb514-62"><a href="#cb514-62" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-63"><a href="#cb514-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-64"><a href="#cb514-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-65"><a href="#cb514-65" aria-hidden="true" tabindex="-1"></a><span class="fu">## set up</span></span>
<span id="cb514-66"><a href="#cb514-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-69"><a href="#cb514-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-70"><a href="#cb514-70" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb514-71"><a href="#cb514-71" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb514-72"><a href="#cb514-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-73"><a href="#cb514-73" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Prevent Mac from sleeping during long render ----</span></span>
<span id="cb514-74"><a href="#cb514-74" aria-hidden="true" tabindex="-1"></a><span class="fu">system</span>(<span class="st">"caffeinate -dimsu &amp;"</span>)</span>
<span id="cb514-75"><a href="#cb514-75" aria-hidden="true" tabindex="-1"></a><span class="fu">on.exit</span>(<span class="fu">system</span>(<span class="st">"killall caffeinate"</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-76"><a href="#cb514-76" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">" macOS sleep prevention active for this Quarto render...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-77"><a href="#cb514-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-78"><a href="#cb514-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-79"><a href="#cb514-79" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Create a unified output directory ----</span></span>
<span id="cb514-80"><a href="#cb514-80" aria-hidden="true" tabindex="-1"></a>output_dir <span class="ot">&lt;-</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/data_mining_output"</span></span>
<span id="cb514-81"><a href="#cb514-81" aria-hidden="true" tabindex="-1"></a>fig_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(output_dir, <span class="st">"figures"</span>)</span>
<span id="cb514-82"><a href="#cb514-82" aria-hidden="true" tabindex="-1"></a>cache_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(output_dir, <span class="st">"cache"</span>)</span>
<span id="cb514-83"><a href="#cb514-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-84"><a href="#cb514-84" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb514-85"><a href="#cb514-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">echo =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-86"><a href="#cb514-86" aria-hidden="true" tabindex="-1"></a>  <span class="at">fig.path =</span> fig_dir,</span>
<span id="cb514-87"><a href="#cb514-87" aria-hidden="true" tabindex="-1"></a>  <span class="at">cache.path =</span> cache_dir</span>
<span id="cb514-88"><a href="#cb514-88" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-89"><a href="#cb514-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-90"><a href="#cb514-90" aria-hidden="true" tabindex="-1"></a><span class="co"># A helper function to save plots/data consistently</span></span>
<span id="cb514-91"><a href="#cb514-91" aria-hidden="true" tabindex="-1"></a>save_to_output <span class="ot">&lt;-</span> <span class="cf">function</span>(filename, <span class="at">plot =</span> <span class="cn">NULL</span>, ...) {</span>
<span id="cb514-92"><a href="#cb514-92" aria-hidden="true" tabindex="-1"></a>  full_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(output_dir, filename)</span>
<span id="cb514-93"><a href="#cb514-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-94"><a href="#cb514-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">dirname</span>(full_path), <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb514-95"><a href="#cb514-95" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-96"><a href="#cb514-96" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(plot)) {</span>
<span id="cb514-97"><a href="#cb514-97" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(full_path, <span class="at">plot =</span> plot, ...)</span>
<span id="cb514-98"><a href="#cb514-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">" Saved plot to: "</span>, full_path)</span>
<span id="cb514-99"><a href="#cb514-99" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb514-100"><a href="#cb514-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">" No plot provided. Returning path only: "</span>, full_path)</span>
<span id="cb514-101"><a href="#cb514-101" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-102"><a href="#cb514-102" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-103"><a href="#cb514-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(full_path)</span>
<span id="cb514-104"><a href="#cb514-104" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-105"><a href="#cb514-105" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-106"><a href="#cb514-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-107"><a href="#cb514-107" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Data cleansing</span></span>
<span id="cb514-108"><a href="#cb514-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-109"><a href="#cb514-109" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.1 data acquisition</span></span>
<span id="cb514-110"><a href="#cb514-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-113"><a href="#cb514-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-114"><a href="#cb514-114" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load_data</span></span>
<span id="cb514-115"><a href="#cb514-115" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-116"><a href="#cb514-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb514-117"><a href="#cb514-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb514-118"><a href="#cb514-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-119"><a href="#cb514-119" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- main databases -----</span></span>
<span id="cb514-120"><a href="#cb514-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-121"><a href="#cb514-121" aria-hidden="true" tabindex="-1"></a>legis_sum_path <span class="ot">&lt;-</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/LightGBM_output_1022/legis_analysis_sum.xlsx"</span></span>
<span id="cb514-122"><a href="#cb514-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-123"><a href="#cb514-123" aria-hidden="true" tabindex="-1"></a>legis_sum <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(legis_sum_path)</span>
<span id="cb514-124"><a href="#cb514-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-125"><a href="#cb514-125" aria-hidden="true" tabindex="-1"></a>legis_path <span class="ot">&lt;-</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/LightGBM_output_1022/legis_analysis_all.xlsx"</span></span>
<span id="cb514-126"><a href="#cb514-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-127"><a href="#cb514-127" aria-hidden="true" tabindex="-1"></a>legis_all <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(legis_path)</span>
<span id="cb514-128"><a href="#cb514-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-129"><a href="#cb514-129" aria-hidden="true" tabindex="-1"></a>legis_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/output/LightGBM_output_1022/legis_train_data.csv"</span>)</span>
<span id="cb514-130"><a href="#cb514-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-131"><a href="#cb514-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-132"><a href="#cb514-132" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- supplementary databases -----</span></span>
<span id="cb514-133"><a href="#cb514-133" aria-hidden="true" tabindex="-1"></a>bioguide_path <span class="ot">&lt;-</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/members_district_1103.xlsx"</span></span>
<span id="cb514-134"><a href="#cb514-134" aria-hidden="true" tabindex="-1"></a>bioguide <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(bioguide_path)</span>
<span id="cb514-135"><a href="#cb514-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-136"><a href="#cb514-136" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology</span></span>
<span id="cb514-137"><a href="#cb514-137" aria-hidden="true" tabindex="-1"></a>ideology_115_senate <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2018-senate-ideology.csv"</span>)</span>
<span id="cb514-138"><a href="#cb514-138" aria-hidden="true" tabindex="-1"></a>ideology_115_house <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2018-house-ideology.csv"</span>)</span>
<span id="cb514-139"><a href="#cb514-139" aria-hidden="true" tabindex="-1"></a>ideology_116_senate <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2020-senate-ideology.csv"</span>)</span>
<span id="cb514-140"><a href="#cb514-140" aria-hidden="true" tabindex="-1"></a>ideology_116_house <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2020-house-ideology.csv"</span>)</span>
<span id="cb514-141"><a href="#cb514-141" aria-hidden="true" tabindex="-1"></a>ideology_117_senate <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2022-senate-ideology.csv"</span>)</span>
<span id="cb514-142"><a href="#cb514-142" aria-hidden="true" tabindex="-1"></a>ideology_117_house <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2022-house-ideology.csv"</span>)</span>
<span id="cb514-143"><a href="#cb514-143" aria-hidden="true" tabindex="-1"></a>ideology_118_senate <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2024-senate-ideology.csv"</span>)</span>
<span id="cb514-144"><a href="#cb514-144" aria-hidden="true" tabindex="-1"></a>ideology_118_house <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/new ideology/govtrack-stats-2024-house-ideology.csv"</span>)</span>
<span id="cb514-145"><a href="#cb514-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-146"><a href="#cb514-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-147"><a href="#cb514-147" aria-hidden="true" tabindex="-1"></a><span class="co"># original legislative data</span></span>
<span id="cb514-148"><a href="#cb514-148" aria-hidden="true" tabindex="-1"></a>bills_data_path <span class="ot">&lt;-</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/LightGBM_raw/115-118_congress_data.csv"</span></span>
<span id="cb514-149"><a href="#cb514-149" aria-hidden="true" tabindex="-1"></a>bills_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(bills_data_path)</span>
<span id="cb514-150"><a href="#cb514-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-151"><a href="#cb514-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-152"><a href="#cb514-152" aria-hidden="true" tabindex="-1"></a><span class="co"># constituency_features</span></span>
<span id="cb514-153"><a href="#cb514-153" aria-hidden="true" tabindex="-1"></a>district_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/constituency_features/constituency_features.csv"</span>)</span>
<span id="cb514-154"><a href="#cb514-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-155"><a href="#cb514-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-156"><a href="#cb514-156" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.2 matching variables and special patch</span></span>
<span id="cb514-157"><a href="#cb514-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-160"><a href="#cb514-160" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-161"><a href="#cb514-161" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: matching variables </span></span>
<span id="cb514-162"><a href="#cb514-162" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-163"><a href="#cb514-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-164"><a href="#cb514-164" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ matching variables map ------</span></span>
<span id="cb514-165"><a href="#cb514-165" aria-hidden="true" tabindex="-1"></a>match_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb514-166"><a href="#cb514-166" aria-hidden="true" tabindex="-1"></a>  <span class="st">"leverage_pl"</span>, <span class="st">"leverage_ne"</span>, <span class="st">"committee_pl"</span>, <span class="st">"committee_ne"</span>,</span>
<span id="cb514-167"><a href="#cb514-167" aria-hidden="true" tabindex="-1"></a>  <span class="st">"employ_industry_pl"</span>, <span class="st">"employ_industry_ne"</span>,</span>
<span id="cb514-168"><a href="#cb514-168" aria-hidden="true" tabindex="-1"></a>  <span class="st">"payroll_industry_pl"</span>, <span class="st">"payroll_industry_ne"</span>,</span>
<span id="cb514-169"><a href="#cb514-169" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ethnicity_pl"</span>, <span class="st">"ethnicity_ne"</span>,</span>
<span id="cb514-170"><a href="#cb514-170" aria-hidden="true" tabindex="-1"></a>  <span class="st">"party_value_pl"</span>, <span class="st">"party_value_ne"</span>,</span>
<span id="cb514-171"><a href="#cb514-171" aria-hidden="true" tabindex="-1"></a>  <span class="st">"party_score_pl"</span>, <span class="st">"party_score_ne"</span></span>
<span id="cb514-172"><a href="#cb514-172" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-173"><a href="#cb514-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-174"><a href="#cb514-174" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Add raw columns ------</span></span>
<span id="cb514-175"><a href="#cb514-175" aria-hidden="true" tabindex="-1"></a>legis_data_raw <span class="ot">&lt;-</span> legis_data <span class="sc">%&gt;%</span></span>
<span id="cb514-176"><a href="#cb514-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="at">.cols =</span> <span class="fu">all_of</span>(match_vars), <span class="at">.fn =</span> <span class="sc">~</span> <span class="fu">paste0</span>(.x, <span class="st">"_raw"</span>))</span>
<span id="cb514-177"><a href="#cb514-177" aria-hidden="true" tabindex="-1"></a>legis_all <span class="ot">&lt;-</span> legis_all <span class="sc">%&gt;%</span></span>
<span id="cb514-178"><a href="#cb514-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-179"><a href="#cb514-179" aria-hidden="true" tabindex="-1"></a>    legis_data_raw <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(full_name, issue, congress, <span class="fu">ends_with</span>(<span class="st">"_raw"</span>)),</span>
<span id="cb514-180"><a href="#cb514-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"full_name"</span>, <span class="st">"issue"</span>, <span class="st">"congress"</span>)</span>
<span id="cb514-181"><a href="#cb514-181" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-182"><a href="#cb514-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-183"><a href="#cb514-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-184"><a href="#cb514-184" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Sanity check ------</span></span>
<span id="cb514-185"><a href="#cb514-185" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">all</span>(<span class="fu">paste0</span>(match_vars, <span class="st">"_raw"</span>) <span class="sc">%in%</span> <span class="fu">names</span>(legis_all)))</span>
<span id="cb514-186"><a href="#cb514-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-187"><a href="#cb514-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-188"><a href="#cb514-188" aria-hidden="true" tabindex="-1"></a><span class="fu">#### special clean for legis_sum and legis data</span></span>
<span id="cb514-189"><a href="#cb514-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-192"><a href="#cb514-192" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-193"><a href="#cb514-193" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: special clean for legis</span></span>
<span id="cb514-194"><a href="#cb514-194" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-195"><a href="#cb514-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-196"><a href="#cb514-196" aria-hidden="true" tabindex="-1"></a>legis_data <span class="ot">&lt;-</span> legis_data <span class="sc">%&gt;%</span></span>
<span id="cb514-197"><a href="#cb514-197" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">issue =</span> <span class="fu">str_to_title</span>(issue))</span>
<span id="cb514-198"><a href="#cb514-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-199"><a href="#cb514-199" aria-hidden="true" tabindex="-1"></a>legis_sum <span class="ot">&lt;-</span> legis_sum <span class="sc">%&gt;%</span></span>
<span id="cb514-200"><a href="#cb514-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">issue =</span> <span class="fu">str_to_title</span>(issue))</span>
<span id="cb514-201"><a href="#cb514-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-202"><a href="#cb514-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-203"><a href="#cb514-203" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.3 name cleansing</span></span>
<span id="cb514-204"><a href="#cb514-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-205"><a href="#cb514-205" aria-hidden="true" tabindex="-1"></a><span class="fu">### 1.3.1 preparing bioguide as matching map</span></span>
<span id="cb514-206"><a href="#cb514-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-207"><a href="#cb514-207" aria-hidden="true" tabindex="-1"></a>name cleansing: addressing issues that some full_name are missing</span>
<span id="cb514-208"><a href="#cb514-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-211"><a href="#cb514-211" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-212"><a href="#cb514-212" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: name missing check in congress_basic</span></span>
<span id="cb514-213"><a href="#cb514-213" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-214"><a href="#cb514-214" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> bioguide <span class="sc">%&gt;%</span></span>
<span id="cb514-215"><a href="#cb514-215" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb514-216"><a href="#cb514-216" aria-hidden="true" tabindex="-1"></a>    bioguide_id, full_name, direct_order_name, chamber, member_type,</span>
<span id="cb514-217"><a href="#cb514-217" aria-hidden="true" tabindex="-1"></a>    party, state_name, state_code, district, gender,</span>
<span id="cb514-218"><a href="#cb514-218" aria-hidden="true" tabindex="-1"></a>    birth_year, death_year, congress</span>
<span id="cb514-219"><a href="#cb514-219" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-220"><a href="#cb514-220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() </span>
<span id="cb514-221"><a href="#cb514-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-222"><a href="#cb514-222" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- check missing full_name inside bioguide ----</span></span>
<span id="cb514-223"><a href="#cb514-223" aria-hidden="true" tabindex="-1"></a>missing_name_df <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-224"><a href="#cb514-224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(full_name) <span class="sc">|</span> full_name <span class="sc">==</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-225"><a href="#cb514-225" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, direct_order_name, chamber, state_code, district, party, congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-226"><a href="#cb514-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(chamber, state_code, district)</span>
<span id="cb514-227"><a href="#cb514-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-228"><a href="#cb514-228" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(missing_name_df, <span class="st">"missing_name_df.csv"</span>)</span>
<span id="cb514-229"><a href="#cb514-229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-230"><a href="#cb514-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-233"><a href="#cb514-233" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-234"><a href="#cb514-234" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: clean_name_bioguide_before</span></span>
<span id="cb514-235"><a href="#cb514-235" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-236"><a href="#cb514-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-237"><a href="#cb514-237" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Step 0: Create direct_order_name -&gt; full_name mapping ------</span></span>
<span id="cb514-238"><a href="#cb514-238" aria-hidden="true" tabindex="-1"></a>name_map <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb514-239"><a href="#cb514-239" aria-hidden="true" tabindex="-1"></a>  <span class="at">direct_order_name =</span> <span class="fu">c</span>(</span>
<span id="cb514-240"><a href="#cb514-240" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mike Rogers"</span>, <span class="st">"J. French Hill"</span>, <span class="st">"Dave Min"</span>, <span class="st">"Cory Mills"</span>,</span>
<span id="cb514-241"><a href="#cb514-241" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Marjorie Taylor Greene"</span>, <span class="st">"David P. Joyce"</span>, <span class="st">"Michael Baumgartner"</span>,</span>
<span id="cb514-242"><a href="#cb514-242" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mark  Begich"</span>, <span class="st">"Richard C. Shelby"</span>, <span class="st">"Mark Udall"</span>, <span class="st">"Chuck Grassley"</span>,</span>
<span id="cb514-243"><a href="#cb514-243" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Daniel Coats"</span>, <span class="st">"Joe Donnelly"</span>, <span class="st">"Pat Roberts"</span>, <span class="st">"Rand Paul"</span>, <span class="st">"David Vitter"</span>,</span>
<span id="cb514-244"><a href="#cb514-244" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Carl Levin"</span>, <span class="st">"Al  Franken"</span>, <span class="st">"Claire McCaskill"</span>, <span class="st">"Richard Burr"</span>,</span>
<span id="cb514-245"><a href="#cb514-245" aria-hidden="true" tabindex="-1"></a>    <span class="st">"John Hoeven"</span>, <span class="st">"Heidi  Heitkamp"</span>, <span class="st">"Kelly Ayotte"</span>, <span class="st">"Dean Heller"</span>,</span>
<span id="cb514-246"><a href="#cb514-246" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rob Portman"</span>, <span class="st">"Ron Wyden"</span>, <span class="st">"Jack Reed"</span>, <span class="st">"Sheldon Whitehouse"</span>,</span>
<span id="cb514-247"><a href="#cb514-247" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lindsey Graham"</span>, <span class="st">"Tim Johnson"</span>, <span class="st">"Bob Corker"</span></span>
<span id="cb514-248"><a href="#cb514-248" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-249"><a href="#cb514-249" aria-hidden="true" tabindex="-1"></a>  <span class="at">full_name =</span> <span class="fu">c</span>(</span>
<span id="cb514-250"><a href="#cb514-250" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Rogers, Mike [R-AL-3]"</span>, <span class="st">"Rep. Hill, J. French [R-AR-2]"</span>,</span>
<span id="cb514-251"><a href="#cb514-251" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Min, Dave [D-CA-47]"</span>, <span class="st">"Rep. Mills, Cory [R-FL-7]"</span>,</span>
<span id="cb514-252"><a href="#cb514-252" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Greene, Marjorie Taylor [R-GA-14]"</span>, <span class="st">"Rep. Joyce, David P. [R-OH-14]"</span>,</span>
<span id="cb514-253"><a href="#cb514-253" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Baumgartner, Michael [R-WA-5]"</span>, <span class="st">"Sen. Begich, Mark [D-AK]"</span>,</span>
<span id="cb514-254"><a href="#cb514-254" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Shelby, Richard C. [R-AL]"</span>, <span class="st">"Sen. Udall, Mark [D-CO]"</span>,</span>
<span id="cb514-255"><a href="#cb514-255" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Grassley, Charles E. [R-IA]"</span>, <span class="st">"Sen. Coats, Daniel R. [R-IN]"</span>,</span>
<span id="cb514-256"><a href="#cb514-256" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Donnelly, Joe [D-IN]"</span>, <span class="st">"Sen. Roberts, Patrick J. [R-KS]"</span>,</span>
<span id="cb514-257"><a href="#cb514-257" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Paul, Randal H. [R-KY]"</span>, <span class="st">"Sen. Vitter, David [R-LA]"</span>,</span>
<span id="cb514-258"><a href="#cb514-258" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Levin, Carl [D-MI]"</span>, <span class="st">"Sen. Franken, Al [D-MN]"</span>,</span>
<span id="cb514-259"><a href="#cb514-259" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. McCaskill, Claire [D-MO]"</span>, <span class="st">"Sen. Burr, Richard [R-NC]"</span>,</span>
<span id="cb514-260"><a href="#cb514-260" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Hoeven, John [R-ND]"</span>, <span class="st">"Sen. Heitkamp, Heidi [D-ND]"</span>,</span>
<span id="cb514-261"><a href="#cb514-261" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Ayotte, Kelly [R-NH]"</span>, <span class="st">"Sen. Heller, Dean [R-NV]"</span>,</span>
<span id="cb514-262"><a href="#cb514-262" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Portman, Robert J. [R-OH]"</span>, <span class="st">"Sen. Wyden, Ronald [D-OR]"</span>,</span>
<span id="cb514-263"><a href="#cb514-263" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Reed, Jack [D-RI]"</span>, <span class="st">"Sen. Whitehouse, Sheldon [D-RI]"</span>,</span>
<span id="cb514-264"><a href="#cb514-264" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Graham, Lindsey [R-SC]"</span>, <span class="st">"Sen. Johnson, Timothy M. [D-SD]"</span>,</span>
<span id="cb514-265"><a href="#cb514-265" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Corker, Robert P. [R-TN]"</span></span>
<span id="cb514-266"><a href="#cb514-266" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-267"><a href="#cb514-267" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-268"><a href="#cb514-268" aria-hidden="true" tabindex="-1"></a>missing_name_df <span class="ot">&lt;-</span> missing_name_df <span class="sc">%&gt;%</span></span>
<span id="cb514-269"><a href="#cb514-269" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(name_map, <span class="at">by =</span> <span class="st">"direct_order_name"</span>)</span>
<span id="cb514-270"><a href="#cb514-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-271"><a href="#cb514-271" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Step 1: Define helper to clean names ------</span></span>
<span id="cb514-272"><a href="#cb514-272" aria-hidden="true" tabindex="-1"></a>clean_names <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb514-273"><a href="#cb514-273" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb514-274"><a href="#cb514-274" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">p{Zs}+"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-275"><a href="#cb514-275" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-276"><a href="#cb514-276" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_trim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-277"><a href="#cb514-277" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_to_lower</span>()</span>
<span id="cb514-278"><a href="#cb514-278" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-279"><a href="#cb514-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-280"><a href="#cb514-280" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-281"><a href="#cb514-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">direct_order_name_clean =</span> <span class="fu">clean_names</span>(direct_order_name))</span>
<span id="cb514-282"><a href="#cb514-282" aria-hidden="true" tabindex="-1"></a>missing_name_df <span class="ot">&lt;-</span> missing_name_df <span class="sc">%&gt;%</span></span>
<span id="cb514-283"><a href="#cb514-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">direct_order_name_clean =</span> <span class="fu">clean_names</span>(direct_order_name))</span>
<span id="cb514-284"><a href="#cb514-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-285"><a href="#cb514-285" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Step 2: Fill missing full_name using mapping ------</span></span>
<span id="cb514-286"><a href="#cb514-286" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-287"><a href="#cb514-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-288"><a href="#cb514-288" aria-hidden="true" tabindex="-1"></a>    missing_name_df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(direct_order_name_clean, full_name) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(),</span>
<span id="cb514-289"><a href="#cb514-289" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"direct_order_name_clean"</span></span>
<span id="cb514-290"><a href="#cb514-290" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-291"><a href="#cb514-291" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">full_name =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(full_name.x), full_name.y, full_name.x)) <span class="sc">%&gt;%</span></span>
<span id="cb514-292"><a href="#cb514-292" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">".x"</span>), <span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">".y"</span>), <span class="sc">-</span>direct_order_name_clean)</span>
<span id="cb514-293"><a href="#cb514-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-294"><a href="#cb514-294" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify no missing names remain</span></span>
<span id="cb514-295"><a href="#cb514-295" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of remaining missing full_name:"</span>, <span class="fu">sum</span>(<span class="fu">is.na</span>(congress_basic<span class="sc">$</span>full_name)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-296"><a href="#cb514-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-297"><a href="#cb514-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-298"><a href="#cb514-298" aria-hidden="true" tabindex="-1"></a>district cleansing: matching district code in main databases</span>
<span id="cb514-299"><a href="#cb514-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-302"><a href="#cb514-302" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-303"><a href="#cb514-303" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: clean district</span></span>
<span id="cb514-304"><a href="#cb514-304" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-305"><a href="#cb514-305" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-306"><a href="#cb514-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-307"><a href="#cb514-307" aria-hidden="true" tabindex="-1"></a>    <span class="at">district =</span> <span class="fu">as.character</span>(district),</span>
<span id="cb514-308"><a href="#cb514-308" aria-hidden="true" tabindex="-1"></a>    <span class="at">district =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-309"><a href="#cb514-309" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(district) <span class="sc">&amp;</span> chamber <span class="sc">==</span> <span class="st">"Senate"</span> <span class="sc">~</span> <span class="st">"99"</span>,</span>
<span id="cb514-310"><a href="#cb514-310" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(district) <span class="sc">&amp;</span> chamber <span class="sc">==</span> <span class="st">"House of Representatives"</span> <span class="sc">~</span> <span class="st">"At Large"</span>,</span>
<span id="cb514-311"><a href="#cb514-311" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> district</span>
<span id="cb514-312"><a href="#cb514-312" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-313"><a href="#cb514-313" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-314"><a href="#cb514-314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-315"><a href="#cb514-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-316"><a href="#cb514-316" aria-hidden="true" tabindex="-1"></a>age cleansing: create age_to_date to match ages in main database and prepare age_to_congress to replace ages in main databases</span>
<span id="cb514-317"><a href="#cb514-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-320"><a href="#cb514-320" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-321"><a href="#cb514-321" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: clean age</span></span>
<span id="cb514-322"><a href="#cb514-322" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-323"><a href="#cb514-323" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ delete 119th congress data  ------</span></span>
<span id="cb514-324"><a href="#cb514-324" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-325"><a href="#cb514-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">!=</span> <span class="dv">119</span>)</span>
<span id="cb514-326"><a href="#cb514-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-327"><a href="#cb514-327" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Define congress start years ------</span></span>
<span id="cb514-328"><a href="#cb514-328" aria-hidden="true" tabindex="-1"></a>congress_year_map <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb514-329"><a href="#cb514-329" aria-hidden="true" tabindex="-1"></a>  <span class="at">congress =</span> <span class="fu">c</span>(<span class="dv">115</span>, <span class="dv">116</span>, <span class="dv">117</span>, <span class="dv">118</span>),</span>
<span id="cb514-330"><a href="#cb514-330" aria-hidden="true" tabindex="-1"></a>  <span class="at">congress_start_year =</span> <span class="fu">c</span>(<span class="dv">2017</span>, <span class="dv">2019</span>, <span class="dv">2021</span>, <span class="dv">2023</span>)</span>
<span id="cb514-331"><a href="#cb514-331" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-332"><a href="#cb514-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-333"><a href="#cb514-333" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Compute ages ------</span></span>
<span id="cb514-334"><a href="#cb514-334" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-335"><a href="#cb514-335" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Join start year info</span></span>
<span id="cb514-336"><a href="#cb514-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(congress_year_map, <span class="at">by =</span> <span class="st">"congress"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-337"><a href="#cb514-337" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-338"><a href="#cb514-338" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compute age</span></span>
<span id="cb514-339"><a href="#cb514-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-340"><a href="#cb514-340" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_to_date =</span> <span class="dv">2025</span> <span class="sc">-</span> birth_year,</span>
<span id="cb514-341"><a href="#cb514-341" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_to_congress =</span> congress_start_year <span class="sc">-</span> birth_year,</span>
<span id="cb514-342"><a href="#cb514-342" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-343"><a href="#cb514-343" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle missing birth_year</span></span>
<span id="cb514-344"><a href="#cb514-344" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_to_date =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(birth_year), age_to_date, <span class="cn">NA_real_</span>),</span>
<span id="cb514-345"><a href="#cb514-345" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_to_congress =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(birth_year) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(congress_start_year),</span>
<span id="cb514-346"><a href="#cb514-346" aria-hidden="true" tabindex="-1"></a>                              age_to_congress, <span class="cn">NA_real_</span>)</span>
<span id="cb514-347"><a href="#cb514-347" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-348"><a href="#cb514-348" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">" Age calculation completed.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-349"><a href="#cb514-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-350"><a href="#cb514-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-351"><a href="#cb514-351" aria-hidden="true" tabindex="-1"></a><span class="fu">### 1.3.2 name cleansing legis_sum and special patches</span></span>
<span id="cb514-352"><a href="#cb514-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-353"><a href="#cb514-353" aria-hidden="true" tabindex="-1"></a>main database name extracting</span>
<span id="cb514-354"><a href="#cb514-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-357"><a href="#cb514-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-358"><a href="#cb514-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: name extracting</span></span>
<span id="cb514-359"><a href="#cb514-359" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-360"><a href="#cb514-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-361"><a href="#cb514-361" aria-hidden="true" tabindex="-1"></a>legis_sum0 <span class="ot">&lt;-</span> legis_sum <span class="sc">%&gt;%</span></span>
<span id="cb514-362"><a href="#cb514-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-363"><a href="#cb514-363" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_no_title =</span> <span class="fu">str_remove</span>(full_name, <span class="st">"^</span><span class="sc">\\</span><span class="st">s*(Sen</span><span class="sc">\\</span><span class="st">.|Rep</span><span class="sc">\\</span><span class="st">.|Del</span><span class="sc">\\</span><span class="st">.)</span><span class="sc">\\</span><span class="st">s*"</span>),</span>
<span id="cb514-364"><a href="#cb514-364" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_clean =</span> <span class="fu">str_remove</span>(name_no_title, <span class="st">"</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">[.*</span><span class="sc">\\</span><span class="st">]"</span>) <span class="sc">%&gt;%</span> <span class="fu">str_squish</span>(),</span>
<span id="cb514-365"><a href="#cb514-365" aria-hidden="true" tabindex="-1"></a>    <span class="at">eng_name =</span> <span class="fu">str_replace</span>(name_clean, <span class="st">"^([^,]+),</span><span class="sc">\\</span><span class="st">s*(.+)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">2 </span><span class="sc">\\</span><span class="st">1"</span>)</span>
<span id="cb514-366"><a href="#cb514-366" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-367"><a href="#cb514-367" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>name_no_title, <span class="sc">-</span>name_clean)</span>
<span id="cb514-368"><a href="#cb514-368" aria-hidden="true" tabindex="-1"></a>legis_sum0<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.character</span>(legis_sum0<span class="sc">$</span>congress)</span>
<span id="cb514-369"><a href="#cb514-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-370"><a href="#cb514-370" aria-hidden="true" tabindex="-1"></a><span class="co"># matching variable name in congress_basic</span></span>
<span id="cb514-371"><a href="#cb514-371" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">eng_name =</span> direct_order_name)</span>
<span id="cb514-372"><a href="#cb514-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-373"><a href="#cb514-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-374"><a href="#cb514-374" aria-hidden="true" tabindex="-1"></a><span class="fu">#### \* special patches</span></span>
<span id="cb514-375"><a href="#cb514-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-376"><a href="#cb514-376" aria-hidden="true" tabindex="-1"></a>The database has a override problem with some congress members. For example, Sen. Blunt Rochester, Lisa <span class="sc">\[</span>D-DE<span class="sc">\]</span> was elected as senator in 119th congress, but the database mistakebly override her information before as senator, while she was a representative. Those who are identified will be corrected as a special path in this chuck.</span>
<span id="cb514-377"><a href="#cb514-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-378"><a href="#cb514-378" aria-hidden="true" tabindex="-1"></a>special patch1: patch for "Sen. Blunt Rochester, Lisa <span class="sc">\[</span>D-DE<span class="sc">\]</span>"</span>
<span id="cb514-379"><a href="#cb514-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-382"><a href="#cb514-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-383"><a href="#cb514-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: patch_blunt_rochester</span></span>
<span id="cb514-384"><a href="#cb514-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-385"><a href="#cb514-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-386"><a href="#cb514-386" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-387"><a href="#cb514-387" aria-hidden="true" tabindex="-1"></a>patch_name <span class="ot">&lt;-</span> <span class="st">"Sen. Blunt Rochester, Lisa [D-DE]"</span></span>
<span id="cb514-388"><a href="#cb514-388" aria-hidden="true" tabindex="-1"></a>patch_congress <span class="ot">&lt;-</span> <span class="dv">118</span>  <span class="co"># </span></span>
<span id="cb514-389"><a href="#cb514-389" aria-hidden="true" tabindex="-1"></a>new_chamber <span class="ot">&lt;-</span> <span class="st">"House of Representatives"</span></span>
<span id="cb514-390"><a href="#cb514-390" aria-hidden="true" tabindex="-1"></a>new_district <span class="ot">&lt;-</span> <span class="st">"At Large"</span></span>
<span id="cb514-391"><a href="#cb514-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-392"><a href="#cb514-392" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Step 1:  ----</span></span>
<span id="cb514-393"><a href="#cb514-393" aria-hidden="true" tabindex="-1"></a>target_legis <span class="ot">&lt;-</span> legis_sum0 <span class="sc">%&gt;%</span></span>
<span id="cb514-394"><a href="#cb514-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(full_name <span class="sc">==</span> patch_name) <span class="sc">%&gt;%</span></span>
<span id="cb514-395"><a href="#cb514-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(full_name, congress)</span>
<span id="cb514-396"><a href="#cb514-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-397"><a href="#cb514-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-398"><a href="#cb514-398" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Step 2:  ----</span></span>
<span id="cb514-399"><a href="#cb514-399" aria-hidden="true" tabindex="-1"></a>safe_patch <span class="ot">&lt;-</span> <span class="cf">function</span>(df, name, <span class="at">congress =</span> <span class="cn">NULL</span>, new_chamber, new_district) {</span>
<span id="cb514-400"><a href="#cb514-400" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb514-401"><a href="#cb514-401" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-402"><a href="#cb514-402" aria-hidden="true" tabindex="-1"></a>      <span class="at">chamber =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-403"><a href="#cb514-403" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span><span class="fu">is.na</span>(full_name) <span class="sc">&amp;</span></span>
<span id="cb514-404"><a href="#cb514-404" aria-hidden="true" tabindex="-1"></a>          full_name <span class="sc">==</span> name <span class="sc">&amp;</span></span>
<span id="cb514-405"><a href="#cb514-405" aria-hidden="true" tabindex="-1"></a>          (<span class="fu">is.null</span>(congress) <span class="sc">|</span> .data<span class="sc">$</span>congress <span class="sc">==</span> congress) <span class="sc">~</span> new_chamber,</span>
<span id="cb514-406"><a href="#cb514-406" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> chamber</span>
<span id="cb514-407"><a href="#cb514-407" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb514-408"><a href="#cb514-408" aria-hidden="true" tabindex="-1"></a>      <span class="at">district =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-409"><a href="#cb514-409" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span><span class="fu">is.na</span>(full_name) <span class="sc">&amp;</span></span>
<span id="cb514-410"><a href="#cb514-410" aria-hidden="true" tabindex="-1"></a>          full_name <span class="sc">==</span> name <span class="sc">&amp;</span></span>
<span id="cb514-411"><a href="#cb514-411" aria-hidden="true" tabindex="-1"></a>          (<span class="fu">is.null</span>(congress) <span class="sc">|</span> .data<span class="sc">$</span>congress <span class="sc">==</span> congress) <span class="sc">~</span> new_district,</span>
<span id="cb514-412"><a href="#cb514-412" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> district</span>
<span id="cb514-413"><a href="#cb514-413" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-414"><a href="#cb514-414" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-415"><a href="#cb514-415" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-416"><a href="#cb514-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-417"><a href="#cb514-417" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Step 3:  ----</span></span>
<span id="cb514-418"><a href="#cb514-418" aria-hidden="true" tabindex="-1"></a>legis_sum0 <span class="ot">&lt;-</span> <span class="fu">safe_patch</span>(legis_sum0, patch_name, patch_congress, new_chamber, new_district)</span>
<span id="cb514-419"><a href="#cb514-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-420"><a href="#cb514-420" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Step 4:  ----</span></span>
<span id="cb514-421"><a href="#cb514-421" aria-hidden="true" tabindex="-1"></a>legis_sum0 <span class="sc">%&gt;%</span> </span>
<span id="cb514-422"><a href="#cb514-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(full_name <span class="sc">==</span> patch_name) <span class="sc">%&gt;%</span></span>
<span id="cb514-423"><a href="#cb514-423" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(full_name, congress, chamber, district)</span>
<span id="cb514-424"><a href="#cb514-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-425"><a href="#cb514-425" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-426"><a href="#cb514-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-427"><a href="#cb514-427" aria-hidden="true" tabindex="-1"></a>special patch2: for congressmen "Sen. Menendez, Robert <span class="sc">\[</span>D-NJ<span class="sc">\]</span>" and "Rep. Menendez, Robert <span class="sc">\[</span>D-NJ-8<span class="sc">\]</span>", since they have different eng_name but extracting from full_name cannot automatically discern the difference</span>
<span id="cb514-428"><a href="#cb514-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-431"><a href="#cb514-431" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-432"><a href="#cb514-432" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: special_clean_menendez</span></span>
<span id="cb514-433"><a href="#cb514-433" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-434"><a href="#cb514-434" aria-hidden="true" tabindex="-1"></a>special_clean_menendez <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb514-435"><a href="#cb514-435" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-436"><a href="#cb514-436" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-437"><a href="#cb514-437" aria-hidden="true" tabindex="-1"></a>      <span class="at">eng_name =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-438"><a href="#cb514-438" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Senator Robert Menendez (NJ, district 99 or 0)</span></span>
<span id="cb514-439"><a href="#cb514-439" aria-hidden="true" tabindex="-1"></a>        full_name <span class="sc">==</span> <span class="st">"Sen. Menendez, Robert [D-NJ]"</span> <span class="sc">|</span></span>
<span id="cb514-440"><a href="#cb514-440" aria-hidden="true" tabindex="-1"></a>        (state_code <span class="sc">==</span> <span class="st">"NJ"</span> <span class="sc">&amp;</span> district <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">99</span>, <span class="dv">0</span>) <span class="sc">&amp;</span> <span class="fu">str_detect</span>(full_name, <span class="st">"Menendez"</span>)) <span class="sc">~</span> <span class="st">"Bob Menendez"</span>,</span>
<span id="cb514-441"><a href="#cb514-441" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb514-442"><a href="#cb514-442" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Representative Robert Menendez (NJ-8)</span></span>
<span id="cb514-443"><a href="#cb514-443" aria-hidden="true" tabindex="-1"></a>        full_name <span class="sc">==</span> <span class="st">"Rep. Menendez, Robert [D-NJ-8]"</span> <span class="sc">|</span></span>
<span id="cb514-444"><a href="#cb514-444" aria-hidden="true" tabindex="-1"></a>        (state_code <span class="sc">==</span> <span class="st">"NJ"</span> <span class="sc">&amp;</span> district <span class="sc">==</span> <span class="dv">8</span> <span class="sc">&amp;</span> <span class="fu">str_detect</span>(full_name, <span class="st">"Menendez"</span>)) <span class="sc">~</span> <span class="st">"Rob Menendez"</span>,</span>
<span id="cb514-445"><a href="#cb514-445" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb514-446"><a href="#cb514-446" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> eng_name</span>
<span id="cb514-447"><a href="#cb514-447" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-448"><a href="#cb514-448" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-449"><a href="#cb514-449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb514-450"><a href="#cb514-450" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-451"><a href="#cb514-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-452"><a href="#cb514-452" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the special cleaning function</span></span>
<span id="cb514-453"><a href="#cb514-453" aria-hidden="true" tabindex="-1"></a>congress_basic <span class="ot">&lt;-</span> <span class="fu">special_clean_menendez</span>(congress_basic)</span>
<span id="cb514-454"><a href="#cb514-454" aria-hidden="true" tabindex="-1"></a>legis_sum0 <span class="ot">&lt;-</span> <span class="fu">special_clean_menendez</span>(legis_sum0)</span>
<span id="cb514-455"><a href="#cb514-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-456"><a href="#cb514-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-457"><a href="#cb514-457" aria-hidden="true" tabindex="-1"></a><span class="fu">### 1.3.3 name mapping</span></span>
<span id="cb514-458"><a href="#cb514-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-461"><a href="#cb514-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-462"><a href="#cb514-462" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: check name missing in main data</span></span>
<span id="cb514-463"><a href="#cb514-463" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-464"><a href="#cb514-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-465"><a href="#cb514-465" aria-hidden="true" tabindex="-1"></a><span class="co"># try to use congress+party+chamber+state_code+district as mapping key</span></span>
<span id="cb514-466"><a href="#cb514-466" aria-hidden="true" tabindex="-1"></a>legis_name_check <span class="ot">&lt;-</span> legis_sum0 <span class="sc">%&gt;%</span></span>
<span id="cb514-467"><a href="#cb514-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(full_name)) <span class="sc">%&gt;%</span></span>
<span id="cb514-468"><a href="#cb514-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, party, chamber, state_code, district) <span class="sc">%&gt;%</span></span>
<span id="cb514-469"><a href="#cb514-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-470"><a href="#cb514-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="co"># missing == 0, clean</span></span>
<span id="cb514-471"><a href="#cb514-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-472"><a href="#cb514-472" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-473"><a href="#cb514-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-474"><a href="#cb514-474" aria-hidden="true" tabindex="-1"></a>define name matching function</span>
<span id="cb514-475"><a href="#cb514-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-478"><a href="#cb514-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-479"><a href="#cb514-479" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: match_bioguide</span></span>
<span id="cb514-480"><a href="#cb514-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-481"><a href="#cb514-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-482"><a href="#cb514-482" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Function: Match bioguide_id based on name and district info ------</span></span>
<span id="cb514-483"><a href="#cb514-483" aria-hidden="true" tabindex="-1"></a>normalize_name <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb514-484"><a href="#cb514-484" aria-hidden="true" tabindex="-1"></a>  name <span class="sc">%&gt;%</span></span>
<span id="cb514-485"><a href="#cb514-485" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-486"><a href="#cb514-486" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span>     <span class="co"># </span></span>
<span id="cb514-487"><a href="#cb514-487" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-488"><a href="#cb514-488" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">" "</span>)       <span class="co"># </span></span>
<span id="cb514-489"><a href="#cb514-489" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-490"><a href="#cb514-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-491"><a href="#cb514-491" aria-hidden="true" tabindex="-1"></a><span class="co"># ----  +  ----</span></span>
<span id="cb514-492"><a href="#cb514-492" aria-hidden="true" tabindex="-1"></a>remove_middle_name <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb514-493"><a href="#cb514-493" aria-hidden="true" tabindex="-1"></a>  name <span class="sc">%&gt;%</span></span>
<span id="cb514-494"><a href="#cb514-494" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-495"><a href="#cb514-495" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split_fixed</span>(<span class="st">" "</span>, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-496"><a href="#cb514-496" aria-hidden="true" tabindex="-1"></a>    .[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb514-497"><a href="#cb514-497" aria-hidden="true" tabindex="-1"></a>    <span class="fu">apply</span>(<span class="dv">1</span>, <span class="cf">function</span>(x) <span class="fu">paste</span>(<span class="fu">na.omit</span>(x), <span class="at">collapse =</span> <span class="st">" "</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-498"><a href="#cb514-498" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb514-499"><a href="#cb514-499" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-500"><a href="#cb514-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-501"><a href="#cb514-501" aria-hidden="true" tabindex="-1"></a><span class="co"># ----  ----</span></span>
<span id="cb514-502"><a href="#cb514-502" aria-hidden="true" tabindex="-1"></a>match_bioguide_id <span class="ot">&lt;-</span> <span class="cf">function</span>(main_df, congress_basic, </span>
<span id="cb514-503"><a href="#cb514-503" aria-hidden="true" tabindex="-1"></a>                              <span class="at">use_step3 =</span> <span class="cn">TRUE</span>, </span>
<span id="cb514-504"><a href="#cb514-504" aria-hidden="true" tabindex="-1"></a>                              <span class="at">use_step4 =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-505"><a href="#cb514-505" aria-hidden="true" tabindex="-1"></a>                              <span class="at">verbose =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb514-506"><a href="#cb514-506" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-507"><a href="#cb514-507" aria-hidden="true" tabindex="-1"></a>  total_n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(main_df)</span>
<span id="cb514-508"><a href="#cb514-508" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-509"><a href="#cb514-509" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 0:  bioguide_id ----</span></span>
<span id="cb514-510"><a href="#cb514-510" aria-hidden="true" tabindex="-1"></a>  main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span> </span>
<span id="cb514-511"><a href="#cb514-511" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">bioguide_id =</span> <span class="cn">NA_character_</span>)</span>
<span id="cb514-512"><a href="#cb514-512" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-513"><a href="#cb514-513" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 1: full_name + congress  ----</span></span>
<span id="cb514-514"><a href="#cb514-514" aria-hidden="true" tabindex="-1"></a>  tmp1 <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-515"><a href="#cb514-515" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(full_name, congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-516"><a href="#cb514-516" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-517"><a href="#cb514-517" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-518"><a href="#cb514-518" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(full_name, congress, <span class="at">bioguide_id1 =</span> bioguide_id)</span>
<span id="cb514-519"><a href="#cb514-519" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-520"><a href="#cb514-520" aria-hidden="true" tabindex="-1"></a>  main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span></span>
<span id="cb514-521"><a href="#cb514-521" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(tmp1, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"full_name"</span>, <span class="st">"congress"</span> <span class="ot">=</span> <span class="st">"congress"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-522"><a href="#cb514-522" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">bioguide_id =</span> <span class="fu">coalesce</span>(bioguide_id, bioguide_id1)) <span class="sc">%&gt;%</span></span>
<span id="cb514-523"><a href="#cb514-523" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>bioguide_id1)</span>
<span id="cb514-524"><a href="#cb514-524" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-525"><a href="#cb514-525" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (verbose) <span class="fu">cat</span>(<span class="st">"Step 1 matched:"</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(main_df<span class="sc">$</span>bioguide_id)), <span class="st">"/"</span>, total_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-526"><a href="#cb514-526" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-527"><a href="#cb514-527" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 2: eng_name + congress  ----</span></span>
<span id="cb514-528"><a href="#cb514-528" aria-hidden="true" tabindex="-1"></a>  tmp2 <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-529"><a href="#cb514-529" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(eng_name, congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-530"><a href="#cb514-530" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-531"><a href="#cb514-531" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-532"><a href="#cb514-532" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(eng_name, congress, <span class="at">bioguide_id2 =</span> bioguide_id)</span>
<span id="cb514-533"><a href="#cb514-533" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-534"><a href="#cb514-534" aria-hidden="true" tabindex="-1"></a>  main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span></span>
<span id="cb514-535"><a href="#cb514-535" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(tmp2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"eng_name"</span>, <span class="st">"congress"</span> <span class="ot">=</span> <span class="st">"congress"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-536"><a href="#cb514-536" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">bioguide_id =</span> <span class="fu">coalesce</span>(bioguide_id, bioguide_id2)) <span class="sc">%&gt;%</span></span>
<span id="cb514-537"><a href="#cb514-537" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>bioguide_id2)</span>
<span id="cb514-538"><a href="#cb514-538" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-539"><a href="#cb514-539" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (verbose) <span class="fu">cat</span>(<span class="st">"Step 2 matched:"</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(main_df<span class="sc">$</span>bioguide_id)), <span class="st">"/"</span>, total_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-540"><a href="#cb514-540" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-541"><a href="#cb514-541" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 3:  key  bioguide_id ----</span></span>
<span id="cb514-542"><a href="#cb514-542" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (use_step3) {</span>
<span id="cb514-543"><a href="#cb514-543" aria-hidden="true" tabindex="-1"></a>    main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span></span>
<span id="cb514-544"><a href="#cb514-544" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">id_key =</span> <span class="fu">paste</span>(congress, party, chamber, state_code, district, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb514-545"><a href="#cb514-545" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-546"><a href="#cb514-546" aria-hidden="true" tabindex="-1"></a>    congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-547"><a href="#cb514-547" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">id_key =</span> <span class="fu">paste</span>(congress, party, chamber, state_code, district, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb514-548"><a href="#cb514-548" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-549"><a href="#cb514-549" aria-hidden="true" tabindex="-1"></a>    tmp3 <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-550"><a href="#cb514-550" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(id_key) <span class="sc">%&gt;%</span></span>
<span id="cb514-551"><a href="#cb514-551" aria-hidden="true" tabindex="-1"></a>      <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-552"><a href="#cb514-552" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-553"><a href="#cb514-553" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(id_key, <span class="at">bioguide_id3 =</span> bioguide_id, <span class="at">full_name3 =</span> full_name)</span>
<span id="cb514-554"><a href="#cb514-554" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-555"><a href="#cb514-555" aria-hidden="true" tabindex="-1"></a>    n_before <span class="ot">&lt;-</span> <span class="fu">nrow</span>(main_df)</span>
<span id="cb514-556"><a href="#cb514-556" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-557"><a href="#cb514-557" aria-hidden="true" tabindex="-1"></a>    main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span></span>
<span id="cb514-558"><a href="#cb514-558" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(tmp3, <span class="at">by =</span> <span class="st">"id_key"</span>, <span class="at">relationship =</span> <span class="st">"many-to-one"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-559"><a href="#cb514-559" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb514-560"><a href="#cb514-560" aria-hidden="true" tabindex="-1"></a>        <span class="at">bioguide_id =</span> <span class="fu">coalesce</span>(bioguide_id, bioguide_id3),</span>
<span id="cb514-561"><a href="#cb514-561" aria-hidden="true" tabindex="-1"></a>        <span class="at">full_name   =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(bioguide_id3), full_name3, full_name)</span>
<span id="cb514-562"><a href="#cb514-562" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb514-563"><a href="#cb514-563" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>bioguide_id3, <span class="sc">-</span>full_name3, <span class="sc">-</span>id_key)</span>
<span id="cb514-564"><a href="#cb514-564" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-565"><a href="#cb514-565" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">nrow</span>(main_df) <span class="sc">==</span> n_before)</span>
<span id="cb514-566"><a href="#cb514-566" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-567"><a href="#cb514-567" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (verbose) <span class="fu">cat</span>(<span class="st">"Step 3 (stable key) matched:"</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(main_df<span class="sc">$</span>bioguide_id)), <span class="st">"/"</span>, total_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-568"><a href="#cb514-568" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-569"><a href="#cb514-569" aria-hidden="true" tabindex="-1"></a>    dupli_keys <span class="ot">&lt;-</span> tmp3 <span class="sc">%&gt;%</span> <span class="fu">count</span>(id_key) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-570"><a href="#cb514-570" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nrow</span>(dupli_keys) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb514-571"><a href="#cb514-571" aria-hidden="true" tabindex="-1"></a>      <span class="fu">warning</span>(<span class="st">" Warning: duplicate id_key found in congress_basic, may cause ambiguous match."</span>)</span>
<span id="cb514-572"><a href="#cb514-572" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-573"><a href="#cb514-573" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-574"><a href="#cb514-574" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-575"><a href="#cb514-575" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 4: eng_name only (normalize + ) ----</span></span>
<span id="cb514-576"><a href="#cb514-576" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (use_step4) {</span>
<span id="cb514-577"><a href="#cb514-577" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-578"><a href="#cb514-578" aria-hidden="true" tabindex="-1"></a>    congress_basic <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-579"><a href="#cb514-579" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">eng_name_clean =</span> <span class="fu">normalize_name</span>(eng_name) <span class="sc">%&gt;%</span> <span class="fu">remove_middle_name</span>())</span>
<span id="cb514-580"><a href="#cb514-580" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-581"><a href="#cb514-581" aria-hidden="true" tabindex="-1"></a>    main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span></span>
<span id="cb514-582"><a href="#cb514-582" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">eng_name_clean =</span> <span class="fu">normalize_name</span>(eng_name) <span class="sc">%&gt;%</span> <span class="fu">remove_middle_name</span>())</span>
<span id="cb514-583"><a href="#cb514-583" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-584"><a href="#cb514-584" aria-hidden="true" tabindex="-1"></a>    tmp4 <span class="ot">&lt;-</span> congress_basic <span class="sc">%&gt;%</span></span>
<span id="cb514-585"><a href="#cb514-585" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(eng_name_clean) <span class="sc">%&gt;%</span></span>
<span id="cb514-586"><a href="#cb514-586" aria-hidden="true" tabindex="-1"></a>      <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-587"><a href="#cb514-587" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-588"><a href="#cb514-588" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(eng_name_clean, <span class="at">full_name4 =</span> full_name, <span class="at">bioguide_id4 =</span> bioguide_id)</span>
<span id="cb514-589"><a href="#cb514-589" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-590"><a href="#cb514-590" aria-hidden="true" tabindex="-1"></a>    main_df <span class="ot">&lt;-</span> main_df <span class="sc">%&gt;%</span></span>
<span id="cb514-591"><a href="#cb514-591" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(tmp4, <span class="at">by =</span> <span class="st">"eng_name_clean"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-592"><a href="#cb514-592" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb514-593"><a href="#cb514-593" aria-hidden="true" tabindex="-1"></a>        <span class="at">bioguide_id =</span> <span class="fu">coalesce</span>(bioguide_id, bioguide_id4),</span>
<span id="cb514-594"><a href="#cb514-594" aria-hidden="true" tabindex="-1"></a>        <span class="at">full_name   =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(bioguide_id4), full_name4, full_name)</span>
<span id="cb514-595"><a href="#cb514-595" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb514-596"><a href="#cb514-596" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>bioguide_id4, <span class="sc">-</span>full_name4, <span class="sc">-</span>eng_name_clean)</span>
<span id="cb514-597"><a href="#cb514-597" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-598"><a href="#cb514-598" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (verbose) <span class="fu">cat</span>(<span class="st">"Step 4 (normalized + middle name removed) matched:"</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(main_df<span class="sc">$</span>bioguide_id)), <span class="st">"/"</span>, total_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-599"><a href="#cb514-599" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-600"><a href="#cb514-600" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-601"><a href="#cb514-601" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 5:  ----</span></span>
<span id="cb514-602"><a href="#cb514-602" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (verbose) {</span>
<span id="cb514-603"><a href="#cb514-603" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">" Bioguide ID matching complete.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-604"><a href="#cb514-604" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Remaining NA bioguide_id:"</span>, <span class="fu">sum</span>(<span class="fu">is.na</span>(main_df<span class="sc">$</span>bioguide_id)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-605"><a href="#cb514-605" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-606"><a href="#cb514-606" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-607"><a href="#cb514-607" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(main_df)</span>
<span id="cb514-608"><a href="#cb514-608" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-609"><a href="#cb514-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-610"><a href="#cb514-610" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Apply function to datasets ------</span></span>
<span id="cb514-611"><a href="#cb514-611" aria-hidden="true" tabindex="-1"></a>congress_basic<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.character</span>(congress_basic<span class="sc">$</span>congress)</span>
<span id="cb514-612"><a href="#cb514-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-613"><a href="#cb514-613" aria-hidden="true" tabindex="-1"></a>legis_sum1 <span class="ot">&lt;-</span> <span class="fu">match_bioguide_id</span>(legis_sum0, congress_basic, <span class="at">use_step3 =</span> <span class="cn">FALSE</span>, <span class="at">use_step4 =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-614"><a href="#cb514-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-615"><a href="#cb514-615" aria-hidden="true" tabindex="-1"></a><span class="co"># Update final datasets</span></span>
<span id="cb514-616"><a href="#cb514-616" aria-hidden="true" tabindex="-1"></a><span class="co"># legis_sum &lt;- legis_sum1</span></span>
<span id="cb514-617"><a href="#cb514-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-618"><a href="#cb514-618" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-619"><a href="#cb514-619" aria-hidden="true" tabindex="-1"></a>legis_missing <span class="ot">&lt;-</span> legis_sum1 <span class="sc">%&gt;%</span> </span>
<span id="cb514-620"><a href="#cb514-620" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(bioguide_id)) <span class="sc">%&gt;%</span></span>
<span id="cb514-621"><a href="#cb514-621" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(full_name, <span class="at">.keep_all =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-622"><a href="#cb514-622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(full_name)</span>
<span id="cb514-623"><a href="#cb514-623" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_missing_fullname_list.csv"</span>, <span class="at">data =</span> legis_missing)</span>
<span id="cb514-624"><a href="#cb514-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-625"><a href="#cb514-625" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-626"><a href="#cb514-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-629"><a href="#cb514-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-630"><a href="#cb514-630" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: further addressing missing bioguide</span></span>
<span id="cb514-631"><a href="#cb514-631" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-632"><a href="#cb514-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-633"><a href="#cb514-633" aria-hidden="true" tabindex="-1"></a>bioguide_map <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb514-634"><a href="#cb514-634" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(</span>
<span id="cb514-635"><a href="#cb514-635" aria-hidden="true" tabindex="-1"></a>    <span class="st">"David Joyce"</span>,</span>
<span id="cb514-636"><a href="#cb514-636" aria-hidden="true" tabindex="-1"></a>    <span class="st">"J. Hill"</span>,</span>
<span id="cb514-637"><a href="#cb514-637" aria-hidden="true" tabindex="-1"></a>    <span class="st">"John Reed"</span>,</span>
<span id="cb514-638"><a href="#cb514-638" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Marjorie Greene"</span>,</span>
<span id="cb514-639"><a href="#cb514-639" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Bishop, Sanford D., Jr. [D-GA-2]"</span>,</span>
<span id="cb514-640"><a href="#cb514-640" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Conyers, John, Jr. [D-MI-13]"</span>,</span>
<span id="cb514-641"><a href="#cb514-641" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Garcia, Jesus G. </span><span class="sc">\"</span><span class="st">Chuy</span><span class="sc">\"</span><span class="st"> [D-IL-4]"</span>,</span>
<span id="cb514-642"><a href="#cb514-642" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Kennedy, Joseph P., III [D-MA-4]"</span>,</span>
<span id="cb514-643"><a href="#cb514-643" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Pallone, Frank, Jr. [D-NJ-6]"</span>,</span>
<span id="cb514-644"><a href="#cb514-644" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Pascrell, Bill, Jr. [D-NJ-9]"</span>,</span>
<span id="cb514-645"><a href="#cb514-645" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Payne, Donald M., Jr. [D-NJ-10]"</span>,</span>
<span id="cb514-646"><a href="#cb514-646" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Sensenbrenner, F. James, Jr. [R-WI-5]"</span>,</span>
<span id="cb514-647"><a href="#cb514-647" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Weber, Randy K., Sr. [R-TX-14]"</span>,</span>
<span id="cb514-648"><a href="#cb514-648" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Richard Shelby"</span>,</span>
<span id="cb514-649"><a href="#cb514-649" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sen. Manchin, Joe, III [D-WV]"</span>,</span>
<span id="cb514-650"><a href="#cb514-650" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Ryan, Paul [R-WI-1]"</span></span>
<span id="cb514-651"><a href="#cb514-651" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-652"><a href="#cb514-652" aria-hidden="true" tabindex="-1"></a>  <span class="at">bioguide_id =</span> <span class="fu">c</span>(</span>
<span id="cb514-653"><a href="#cb514-653" aria-hidden="true" tabindex="-1"></a>    <span class="st">"J000295"</span>,  <span class="co"># David Joyce</span></span>
<span id="cb514-654"><a href="#cb514-654" aria-hidden="true" tabindex="-1"></a>    <span class="st">"H001072"</span>,  <span class="co"># French Hill</span></span>
<span id="cb514-655"><a href="#cb514-655" aria-hidden="true" tabindex="-1"></a>    <span class="st">"R000122"</span>,  <span class="co"># Jack (John F.) Reed</span></span>
<span id="cb514-656"><a href="#cb514-656" aria-hidden="true" tabindex="-1"></a>    <span class="st">"G000596"</span>,  <span class="co"># Marjorie Taylor Greene</span></span>
<span id="cb514-657"><a href="#cb514-657" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B000490"</span>,  <span class="co"># Sanford D. Bishop Jr.</span></span>
<span id="cb514-658"><a href="#cb514-658" aria-hidden="true" tabindex="-1"></a>    <span class="st">"C000714"</span>,  <span class="co"># John Conyers, Jr.</span></span>
<span id="cb514-659"><a href="#cb514-659" aria-hidden="true" tabindex="-1"></a>    <span class="st">"G000586"</span>,  <span class="co"># Jess G. "Chuy" Garca</span></span>
<span id="cb514-660"><a href="#cb514-660" aria-hidden="true" tabindex="-1"></a>    <span class="st">"K000379"</span>,  <span class="co"># Joseph P. Kennedy III</span></span>
<span id="cb514-661"><a href="#cb514-661" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P000034"</span>,  <span class="co"># Frank Pallone Jr.</span></span>
<span id="cb514-662"><a href="#cb514-662" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P000096"</span>,  <span class="co"># Bill Pascrell Jr.</span></span>
<span id="cb514-663"><a href="#cb514-663" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P000604"</span>,  <span class="co"># Donald M. Payne Jr.</span></span>
<span id="cb514-664"><a href="#cb514-664" aria-hidden="true" tabindex="-1"></a>    <span class="st">"S000244"</span>,  <span class="co"># F. James Sensenbrenner</span></span>
<span id="cb514-665"><a href="#cb514-665" aria-hidden="true" tabindex="-1"></a>    <span class="st">"W000814"</span>,  <span class="co"># Randy K. Weber</span></span>
<span id="cb514-666"><a href="#cb514-666" aria-hidden="true" tabindex="-1"></a>    <span class="st">"S000320"</span>,  <span class="co"># Richard C. Shelby</span></span>
<span id="cb514-667"><a href="#cb514-667" aria-hidden="true" tabindex="-1"></a>    <span class="st">"M001183"</span>,  <span class="co"># Joe Manchin</span></span>
<span id="cb514-668"><a href="#cb514-668" aria-hidden="true" tabindex="-1"></a>    <span class="st">"R000570"</span>   <span class="co"># Paul Ryan</span></span>
<span id="cb514-669"><a href="#cb514-669" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-670"><a href="#cb514-670" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-671"><a href="#cb514-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-672"><a href="#cb514-672" aria-hidden="true" tabindex="-1"></a>legis_sum1 <span class="ot">&lt;-</span> legis_sum1 <span class="sc">%&gt;%</span></span>
<span id="cb514-673"><a href="#cb514-673" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  bioguide_id  new_bioguide</span></span>
<span id="cb514-674"><a href="#cb514-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(bioguide_map <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">map_name =</span> name, <span class="at">map_bioguide =</span> bioguide_id),</span>
<span id="cb514-675"><a href="#cb514-675" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"full_name"</span> <span class="ot">=</span> <span class="st">"map_name"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-676"><a href="#cb514-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-677"><a href="#cb514-677" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  bioguide_id</span></span>
<span id="cb514-678"><a href="#cb514-678" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-679"><a href="#cb514-679" aria-hidden="true" tabindex="-1"></a>    <span class="at">bioguide_id =</span> <span class="fu">coalesce</span>(bioguide_id, map_bioguide)</span>
<span id="cb514-680"><a href="#cb514-680" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-681"><a href="#cb514-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-682"><a href="#cb514-682" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-683"><a href="#cb514-683" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>map_bioguide)</span>
<span id="cb514-684"><a href="#cb514-684" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-685"><a href="#cb514-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-686"><a href="#cb514-686" aria-hidden="true" tabindex="-1"></a>address missing name issues</span>
<span id="cb514-687"><a href="#cb514-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-690"><a href="#cb514-690" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-691"><a href="#cb514-691" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: missing name solution_before</span></span>
<span id="cb514-692"><a href="#cb514-692" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-693"><a href="#cb514-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-694"><a href="#cb514-694" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ old_full_name -&gt; new_full_name ------ </span></span>
<span id="cb514-695"><a href="#cb514-695" aria-hidden="true" tabindex="-1"></a><span class="co"># name_map &lt;- data.frame(</span></span>
<span id="cb514-696"><a href="#cb514-696" aria-hidden="true" tabindex="-1"></a><span class="co">#  old_full_name = c(</span></span>
<span id="cb514-697"><a href="#cb514-697" aria-hidden="true" tabindex="-1"></a><span class="co">#    "David Joyce",</span></span>
<span id="cb514-698"><a href="#cb514-698" aria-hidden="true" tabindex="-1"></a><span class="co">#    "J. Hill",</span></span>
<span id="cb514-699"><a href="#cb514-699" aria-hidden="true" tabindex="-1"></a><span class="co">#    "John Reed",</span></span>
<span id="cb514-700"><a href="#cb514-700" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Marjorie Greene",</span></span>
<span id="cb514-701"><a href="#cb514-701" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Richard Shelby"</span></span>
<span id="cb514-702"><a href="#cb514-702" aria-hidden="true" tabindex="-1"></a><span class="co">#  ),</span></span>
<span id="cb514-703"><a href="#cb514-703" aria-hidden="true" tabindex="-1"></a><span class="co">#  new_full_name = c(</span></span>
<span id="cb514-704"><a href="#cb514-704" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Rep. Joyce, David P. [R-OH-14]",</span></span>
<span id="cb514-705"><a href="#cb514-705" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Rep. Hill, J. French [R-AR-2]",</span></span>
<span id="cb514-706"><a href="#cb514-706" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Sen. Reed, Jack [D-RI]",</span></span>
<span id="cb514-707"><a href="#cb514-707" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Rep. Greene, Marjorie Taylor [R-GA-14]",</span></span>
<span id="cb514-708"><a href="#cb514-708" aria-hidden="true" tabindex="-1"></a><span class="co">#    "Sen. Shelby, Richard C. [R-AL]"</span></span>
<span id="cb514-709"><a href="#cb514-709" aria-hidden="true" tabindex="-1"></a><span class="co">#  ),</span></span>
<span id="cb514-710"><a href="#cb514-710" aria-hidden="true" tabindex="-1"></a><span class="co">#  stringsAsFactors = FALSE</span></span>
<span id="cb514-711"><a href="#cb514-711" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb514-712"><a href="#cb514-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-713"><a href="#cb514-713" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ clean full_name ------ </span></span>
<span id="cb514-714"><a href="#cb514-714" aria-hidden="true" tabindex="-1"></a><span class="co">#clean_names &lt;- function(x) {</span></span>
<span id="cb514-715"><a href="#cb514-715" aria-hidden="true" tabindex="-1"></a><span class="co">#  x %&gt;%</span></span>
<span id="cb514-716"><a href="#cb514-716" aria-hidden="true" tabindex="-1"></a><span class="co">#    str_replace_all("\\p{Zs}+", " ") %&gt;%  # </span></span>
<span id="cb514-717"><a href="#cb514-717" aria-hidden="true" tabindex="-1"></a><span class="co">#    str_squish() %&gt;%                      # </span></span>
<span id="cb514-718"><a href="#cb514-718" aria-hidden="true" tabindex="-1"></a><span class="co">#    str_trim() %&gt;%</span></span>
<span id="cb514-719"><a href="#cb514-719" aria-hidden="true" tabindex="-1"></a><span class="co">#    str_to_lower()</span></span>
<span id="cb514-720"><a href="#cb514-720" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span>
<span id="cb514-721"><a href="#cb514-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-722"><a href="#cb514-722" aria-hidden="true" tabindex="-1"></a><span class="co">#legis_sum2 &lt;- legis_sum1 %&gt;%</span></span>
<span id="cb514-723"><a href="#cb514-723" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(full_name_clean = clean_names(full_name))</span></span>
<span id="cb514-724"><a href="#cb514-724" aria-hidden="true" tabindex="-1"></a><span class="co">#name_map &lt;- name_map %&gt;%</span></span>
<span id="cb514-725"><a href="#cb514-725" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(old_full_name_clean = clean_names(old_full_name))</span></span>
<span id="cb514-726"><a href="#cb514-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-727"><a href="#cb514-727" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ update full_name ------ </span></span>
<span id="cb514-728"><a href="#cb514-728" aria-hidden="true" tabindex="-1"></a><span class="co">#legis_sum2 &lt;- legis_sum2 %&gt;%</span></span>
<span id="cb514-729"><a href="#cb514-729" aria-hidden="true" tabindex="-1"></a><span class="co">#  left_join(name_map, by = c("full_name" = "old_full_name")) %&gt;%</span></span>
<span id="cb514-730"><a href="#cb514-730" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(</span></span>
<span id="cb514-731"><a href="#cb514-731" aria-hidden="true" tabindex="-1"></a><span class="co">#    full_name = coalesce(new_full_name, full_name),</span></span>
<span id="cb514-732"><a href="#cb514-732" aria-hidden="true" tabindex="-1"></a><span class="co">#   updated_flag = !is.na(new_full_name)  # flage updated rows</span></span>
<span id="cb514-733"><a href="#cb514-733" aria-hidden="true" tabindex="-1"></a><span class="co">#  ) %&gt;%</span></span>
<span id="cb514-734"><a href="#cb514-734" aria-hidden="true" tabindex="-1"></a><span class="co">#  dplyr::select(-new_full_name)</span></span>
<span id="cb514-735"><a href="#cb514-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-736"><a href="#cb514-736" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ bioguide match ------</span></span>
<span id="cb514-737"><a href="#cb514-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-738"><a href="#cb514-738" aria-hidden="true" tabindex="-1"></a><span class="co">#update_rows &lt;- which(legis_sum2$updated_flag &amp; is.na(legis_sum2$bioguide_id))</span></span>
<span id="cb514-739"><a href="#cb514-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-740"><a href="#cb514-740" aria-hidden="true" tabindex="-1"></a><span class="co"># full_name + congress as only key</span></span>
<span id="cb514-741"><a href="#cb514-741" aria-hidden="true" tabindex="-1"></a><span class="co">#legis_sum2$key &lt;- paste0(legis_sum2$full_name, "_", legis_sum2$congress)</span></span>
<span id="cb514-742"><a href="#cb514-742" aria-hidden="true" tabindex="-1"></a><span class="co">#congress_basic$key &lt;- paste0(congress_basic$full_name, "_", congress_basic$congress)</span></span>
<span id="cb514-743"><a href="#cb514-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-744"><a href="#cb514-744" aria-hidden="true" tabindex="-1"></a><span class="co">#matched_ids &lt;- congress_basic$bioguide_id[match(legis_sum2$key[update_rows], #congress_basic$key)]</span></span>
<span id="cb514-745"><a href="#cb514-745" aria-hidden="true" tabindex="-1"></a><span class="co">#legis_sum2$bioguide_id[update_rows] &lt;- matched_ids</span></span>
<span id="cb514-746"><a href="#cb514-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-747"><a href="#cb514-747" aria-hidden="true" tabindex="-1"></a><span class="co">#legis_sum1 &lt;- legis_sum2 %&gt;% dplyr::select(-key, -full_name_clean, -old_full_name_clean, #-updated_flag)</span></span>
<span id="cb514-748"><a href="#cb514-748" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-749"><a href="#cb514-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-750"><a href="#cb514-750" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1.4 ideology update</span></span>
<span id="cb514-751"><a href="#cb514-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-752"><a href="#cb514-752" aria-hidden="true" tabindex="-1"></a>The original ideology data in the main database is standardized. We use ideology data at <span class="sc">\[</span>GovTrack<span class="sc">\]</span>(<span class="ot">&lt;https://www.govtrack.us/about/analysis#ideology&gt;</span>) to replace them. ref: <span class="co">[</span><span class="ot">Tauberer, Joshua</span><span class="co">](http://razor.occams.info/)</span>. 2012. Observing the Unobservables in the U.S. Congress, presented at Law Via the Internet 2012, Cornell Law School, October 2012.</span>
<span id="cb514-753"><a href="#cb514-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-754"><a href="#cb514-754" aria-hidden="true" tabindex="-1"></a>ideology cleansing</span>
<span id="cb514-755"><a href="#cb514-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-758"><a href="#cb514-758" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-759"><a href="#cb514-759" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ideology-cleansing</span></span>
<span id="cb514-760"><a href="#cb514-760" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-761"><a href="#cb514-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-762"><a href="#cb514-762" aria-hidden="true" tabindex="-1"></a>ideology_115_house <span class="ot">&lt;-</span> ideology_115_house <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">115</span>, <span class="at">chamber =</span> <span class="st">"House of Representatives"</span>)</span>
<span id="cb514-763"><a href="#cb514-763" aria-hidden="true" tabindex="-1"></a>ideology_116_house <span class="ot">&lt;-</span> ideology_116_house <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">116</span>, <span class="at">chamber =</span> <span class="st">"House of Representatives"</span>)</span>
<span id="cb514-764"><a href="#cb514-764" aria-hidden="true" tabindex="-1"></a>ideology_117_house <span class="ot">&lt;-</span> ideology_117_house <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">117</span>, <span class="at">chamber =</span> <span class="st">"House of Representatives"</span>)</span>
<span id="cb514-765"><a href="#cb514-765" aria-hidden="true" tabindex="-1"></a>ideology_118_house <span class="ot">&lt;-</span> ideology_118_house <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">118</span>, <span class="at">chamber =</span> <span class="st">"House of Representatives"</span>)</span>
<span id="cb514-766"><a href="#cb514-766" aria-hidden="true" tabindex="-1"></a>ideology_115_senate <span class="ot">&lt;-</span> ideology_115_senate <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">115</span>, <span class="at">chamber =</span> <span class="st">"Senate"</span>)</span>
<span id="cb514-767"><a href="#cb514-767" aria-hidden="true" tabindex="-1"></a>ideology_116_senate <span class="ot">&lt;-</span> ideology_116_senate <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">116</span>, <span class="at">chamber =</span> <span class="st">"Senate"</span>)</span>
<span id="cb514-768"><a href="#cb514-768" aria-hidden="true" tabindex="-1"></a>ideology_117_senate <span class="ot">&lt;-</span> ideology_117_senate <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">117</span>, <span class="at">chamber =</span> <span class="st">"Senate"</span>)</span>
<span id="cb514-769"><a href="#cb514-769" aria-hidden="true" tabindex="-1"></a>ideology_118_senate <span class="ot">&lt;-</span> ideology_118_senate <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="dv">118</span>, <span class="at">chamber =</span> <span class="st">"Senate"</span>)</span>
<span id="cb514-770"><a href="#cb514-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-771"><a href="#cb514-771" aria-hidden="true" tabindex="-1"></a>chamber_ideology <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb514-772"><a href="#cb514-772" aria-hidden="true" tabindex="-1"></a>  ideology_115_house,</span>
<span id="cb514-773"><a href="#cb514-773" aria-hidden="true" tabindex="-1"></a>  ideology_116_house,</span>
<span id="cb514-774"><a href="#cb514-774" aria-hidden="true" tabindex="-1"></a>  ideology_117_house,</span>
<span id="cb514-775"><a href="#cb514-775" aria-hidden="true" tabindex="-1"></a>  ideology_118_house,</span>
<span id="cb514-776"><a href="#cb514-776" aria-hidden="true" tabindex="-1"></a>  ideology_115_senate,</span>
<span id="cb514-777"><a href="#cb514-777" aria-hidden="true" tabindex="-1"></a>  ideology_116_senate,</span>
<span id="cb514-778"><a href="#cb514-778" aria-hidden="true" tabindex="-1"></a>  ideology_117_senate,</span>
<span id="cb514-779"><a href="#cb514-779" aria-hidden="true" tabindex="-1"></a>  ideology_118_senate)</span>
<span id="cb514-780"><a href="#cb514-780" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(chamber_ideology<span class="sc">$</span>congress)</span>
<span id="cb514-781"><a href="#cb514-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-782"><a href="#cb514-782" aria-hidden="true" tabindex="-1"></a>chamber_ideology<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.character</span>(chamber_ideology<span class="sc">$</span>congress)</span>
<span id="cb514-783"><a href="#cb514-783" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-784"><a href="#cb514-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-785"><a href="#cb514-785" aria-hidden="true" tabindex="-1"></a>ideology merge</span>
<span id="cb514-786"><a href="#cb514-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-789"><a href="#cb514-789" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-790"><a href="#cb514-790" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ideology-merge</span></span>
<span id="cb514-791"><a href="#cb514-791" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-792"><a href="#cb514-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-793"><a href="#cb514-793" aria-hidden="true" tabindex="-1"></a>merge_ideology <span class="ot">&lt;-</span> <span class="cf">function</span>(df, ideology_df, <span class="at">verbose =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb514-794"><a href="#cb514-794" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-795"><a href="#cb514-795" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-796"><a href="#cb514-796" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-797"><a href="#cb514-797" aria-hidden="true" tabindex="-1"></a>      <span class="at">bioguide_id =</span> <span class="fu">toupper</span>(stringr<span class="sc">::</span><span class="fu">str_trim</span>(bioguide_id)),</span>
<span id="cb514-798"><a href="#cb514-798" aria-hidden="true" tabindex="-1"></a>      <span class="at">congress    =</span> <span class="fu">as.character</span>(congress),</span>
<span id="cb514-799"><a href="#cb514-799" aria-hidden="true" tabindex="-1"></a>      <span class="at">chamber     =</span> <span class="fu">tolower</span>(stringr<span class="sc">::</span><span class="fu">str_trim</span>(chamber))</span>
<span id="cb514-800"><a href="#cb514-800" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-801"><a href="#cb514-801" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-802"><a href="#cb514-802" aria-hidden="true" tabindex="-1"></a>  ideology_df <span class="ot">&lt;-</span> ideology_df <span class="sc">%&gt;%</span></span>
<span id="cb514-803"><a href="#cb514-803" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-804"><a href="#cb514-804" aria-hidden="true" tabindex="-1"></a>      <span class="at">bioguide_id =</span> <span class="fu">toupper</span>(stringr<span class="sc">::</span><span class="fu">str_trim</span>(bioguide_id)),</span>
<span id="cb514-805"><a href="#cb514-805" aria-hidden="true" tabindex="-1"></a>      <span class="at">congress    =</span> <span class="fu">as.character</span>(congress),</span>
<span id="cb514-806"><a href="#cb514-806" aria-hidden="true" tabindex="-1"></a>      <span class="at">chamber     =</span> <span class="fu">tolower</span>(stringr<span class="sc">::</span><span class="fu">str_trim</span>(chamber))</span>
<span id="cb514-807"><a href="#cb514-807" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-808"><a href="#cb514-808" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(bioguide_id, congress, chamber) <span class="sc">%&gt;%</span></span>
<span id="cb514-809"><a href="#cb514-809" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-810"><a href="#cb514-810" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-811"><a href="#cb514-811" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, congress, chamber, ideology) <span class="sc">%&gt;%</span></span>
<span id="cb514-812"><a href="#cb514-812" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">ideology_new =</span> ideology)</span>
<span id="cb514-813"><a href="#cb514-813" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-814"><a href="#cb514-814" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-815"><a href="#cb514-815" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(ideology_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"bioguide_id"</span>, <span class="st">"congress"</span>, <span class="st">"chamber"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-816"><a href="#cb514-816" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-817"><a href="#cb514-817" aria-hidden="true" tabindex="-1"></a>      <span class="at">ideology =</span> ideology_new,</span>
<span id="cb514-818"><a href="#cb514-818" aria-hidden="true" tabindex="-1"></a>      <span class="at">matched  =</span> <span class="sc">!</span><span class="fu">is.na</span>(ideology_new)</span>
<span id="cb514-819"><a href="#cb514-819" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-820"><a href="#cb514-820" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>ideology_new)</span>
<span id="cb514-821"><a href="#cb514-821" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-822"><a href="#cb514-822" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (verbose) {</span>
<span id="cb514-823"><a href="#cb514-823" aria-hidden="true" tabindex="-1"></a>    n_missing <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>ideology))</span>
<span id="cb514-824"><a href="#cb514-824" aria-hidden="true" tabindex="-1"></a>    n_matched <span class="ot">&lt;-</span> <span class="fu">sum</span>(df<span class="sc">$</span>matched)</span>
<span id="cb514-825"><a href="#cb514-825" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">" Merge complete.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-826"><a href="#cb514-826" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"   Matched:"</span>, n_matched, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-827"><a href="#cb514-827" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"   Remaining NA ideology:"</span>, n_missing, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-828"><a href="#cb514-828" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-829"><a href="#cb514-829" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-830"><a href="#cb514-830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb514-831"><a href="#cb514-831" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-832"><a href="#cb514-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-833"><a href="#cb514-833" aria-hidden="true" tabindex="-1"></a>legis_sum1 <span class="ot">&lt;-</span> <span class="fu">merge_ideology</span>(legis_sum1, chamber_ideology)</span>
<span id="cb514-834"><a href="#cb514-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-835"><a href="#cb514-835" aria-hidden="true" tabindex="-1"></a><span class="co"># save legis_sum1</span></span>
<span id="cb514-836"><a href="#cb514-836" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_sum1.csv"</span>, <span class="at">data =</span> legis_sum1)</span>
<span id="cb514-837"><a href="#cb514-837" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-838"><a href="#cb514-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-839"><a href="#cb514-839" aria-hidden="true" tabindex="-1"></a>ideology missing distribution: missing at random</span>
<span id="cb514-840"><a href="#cb514-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-843"><a href="#cb514-843" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-844"><a href="#cb514-844" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ideology-missing</span></span>
<span id="cb514-845"><a href="#cb514-845" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-846"><a href="#cb514-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-847"><a href="#cb514-847" aria-hidden="true" tabindex="-1"></a>check_missing_ideology <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">df_name =</span> <span class="st">"dataset"</span>) {</span>
<span id="cb514-848"><a href="#cb514-848" aria-hidden="true" tabindex="-1"></a>  missing_df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(ideology))</span>
<span id="cb514-849"><a href="#cb514-849" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-850"><a href="#cb514-850" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">""</span>, df_name, <span class="st">"total missing:"</span>, <span class="fu">nrow</span>(missing_df), <span class="st">"/"</span>, <span class="fu">nrow</span>(df), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb514-851"><a href="#cb514-851" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-852"><a href="#cb514-852" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Missing by party</span></span>
<span id="cb514-853"><a href="#cb514-853" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Missing by party:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-854"><a href="#cb514-854" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(missing_df<span class="sc">$</span>party))</span>
<span id="cb514-855"><a href="#cb514-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-856"><a href="#cb514-856" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-857"><a href="#cb514-857" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Missing by state</span></span>
<span id="cb514-858"><a href="#cb514-858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Missing by state:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-859"><a href="#cb514-859" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(missing_df<span class="sc">$</span>state_code))</span>
<span id="cb514-860"><a href="#cb514-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-861"><a href="#cb514-861" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-862"><a href="#cb514-862" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Missing by chamber</span></span>
<span id="cb514-863"><a href="#cb514-863" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Missing by chamber:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-864"><a href="#cb514-864" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(missing_df<span class="sc">$</span>chamber))</span>
<span id="cb514-865"><a href="#cb514-865" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-866"><a href="#cb514-866" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-867"><a href="#cb514-867" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Cross-tab: party x chamber</span></span>
<span id="cb514-868"><a href="#cb514-868" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Missing by party x chamber:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-869"><a href="#cb514-869" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(missing_df<span class="sc">$</span>party, missing_df<span class="sc">$</span>chamber))</span>
<span id="cb514-870"><a href="#cb514-870" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-871"><a href="#cb514-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-872"><a href="#cb514-872" aria-hidden="true" tabindex="-1"></a><span class="fu">check_missing_ideology</span>(legis_sum1, <span class="st">"legis_sum1"</span>)</span>
<span id="cb514-873"><a href="#cb514-873" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-874"><a href="#cb514-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-875"><a href="#cb514-875" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. data aggregation and generation</span></span>
<span id="cb514-876"><a href="#cb514-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-877"><a href="#cb514-877" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.1 individual level aggregation</span></span>
<span id="cb514-878"><a href="#cb514-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-879"><a href="#cb514-879" aria-hidden="true" tabindex="-1"></a>generate function: generate_decision_with_traits()</span>
<span id="cb514-880"><a href="#cb514-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-881"><a href="#cb514-881" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; This function aggregates prediction and importance metrics for each legislator across different datasets, such as train, test,or merged. It computes the relative importance of 3 behavioral modes - intl, dom, and prof, and assigns each legislator a dominant decision category based on their most prominent behavior. It finally merges these aggregated results with demographic and institutional traits like gender, party, and ideology.</span></span>
<span id="cb514-882"><a href="#cb514-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-885"><a href="#cb514-885" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-886"><a href="#cb514-886" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: generate-decision-with-traits</span></span>
<span id="cb514-887"><a href="#cb514-887" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-888"><a href="#cb514-888" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Function: generate_decision_with_traits ----</span></span>
<span id="cb514-889"><a href="#cb514-889" aria-hidden="true" tabindex="-1"></a>generate_decision_with_traits <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">mode =</span> <span class="st">"all"</span>) {</span>
<span id="cb514-890"><a href="#cb514-890" aria-hidden="true" tabindex="-1"></a>  <span class="co"># parameter validation</span></span>
<span id="cb514-891"><a href="#cb514-891" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>mode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"all"</span>, <span class="st">"train"</span>, <span class="st">"test"</span>, <span class="st">"merged"</span>)) {</span>
<span id="cb514-892"><a href="#cb514-892" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"mode must be 'all', 'train', 'test', or 'merged'"</span>)</span>
<span id="cb514-893"><a href="#cb514-893" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-894"><a href="#cb514-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-895"><a href="#cb514-895" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- step 1: data filtering ----</span></span>
<span id="cb514-896"><a href="#cb514-896" aria-hidden="true" tabindex="-1"></a>  df_subset <span class="ot">&lt;-</span> <span class="cf">if</span> (mode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"all"</span>, <span class="st">"merged"</span>)) df <span class="cf">else</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dataset <span class="sc">==</span> mode)</span>
<span id="cb514-897"><a href="#cb514-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-898"><a href="#cb514-898" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- step 2: data aggregation ----</span></span>
<span id="cb514-899"><a href="#cb514-899" aria-hidden="true" tabindex="-1"></a>  group_vars <span class="ot">&lt;-</span> <span class="cf">if</span> (mode <span class="sc">==</span> <span class="st">"merged"</span>) {</span>
<span id="cb514-900"><a href="#cb514-900" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"full_name"</span>, <span class="st">"congress"</span>)</span>
<span id="cb514-901"><a href="#cb514-901" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb514-902"><a href="#cb514-902" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"full_name"</span>, <span class="st">"congress"</span>, <span class="st">"dataset"</span>)</span>
<span id="cb514-903"><a href="#cb514-903" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-904"><a href="#cb514-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-905"><a href="#cb514-905" aria-hidden="true" tabindex="-1"></a>  df_clean <span class="ot">&lt;-</span> df_subset <span class="sc">%&gt;%</span></span>
<span id="cb514-906"><a href="#cb514-906" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(group_vars))) <span class="sc">%&gt;%</span></span>
<span id="cb514-907"><a href="#cb514-907" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb514-908"><a href="#cb514-908" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_intl =</span> <span class="fu">sum</span>(importance_intl, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-909"><a href="#cb514-909" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_dom  =</span> <span class="fu">sum</span>(importance_dom,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-910"><a href="#cb514-910" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_prof =</span> <span class="fu">sum</span>(importance_prof, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-911"><a href="#cb514-911" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_all  =</span> <span class="fu">sum</span>(importance_all,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-912"><a href="#cb514-912" aria-hidden="true" tabindex="-1"></a>      <span class="at">pred =</span> <span class="fu">mean</span>(pred, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-913"><a href="#cb514-913" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb514-914"><a href="#cb514-914" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-915"><a href="#cb514-915" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-916"><a href="#cb514-916" aria-hidden="true" tabindex="-1"></a>      <span class="at">intl_percentage =</span> <span class="fu">ifelse</span>(importance_all <span class="sc">&gt;</span> <span class="dv">0</span>, importance_intl <span class="sc">/</span> importance_all, <span class="cn">NA_real_</span>),</span>
<span id="cb514-917"><a href="#cb514-917" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom_percentage  =</span> <span class="fu">ifelse</span>(importance_all <span class="sc">&gt;</span> <span class="dv">0</span>, importance_dom  <span class="sc">/</span> importance_all, <span class="cn">NA_real_</span>),</span>
<span id="cb514-918"><a href="#cb514-918" aria-hidden="true" tabindex="-1"></a>      <span class="at">prof_percentage =</span> <span class="fu">ifelse</span>(importance_all <span class="sc">&gt;</span> <span class="dv">0</span>, importance_prof <span class="sc">/</span> importance_all, <span class="cn">NA_real_</span>),</span>
<span id="cb514-919"><a href="#cb514-919" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_val =</span> <span class="fu">pmax</span>(intl_percentage, dom_percentage, prof_percentage, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-920"><a href="#cb514-920" aria-hidden="true" tabindex="-1"></a>      <span class="at">decision =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-921"><a href="#cb514-921" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(max_val) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb514-922"><a href="#cb514-922" aria-hidden="true" tabindex="-1"></a>        intl_percentage <span class="sc">==</span> max_val <span class="sc">&amp;</span> dom_percentage <span class="sc">!=</span> max_val <span class="sc">&amp;</span> prof_percentage <span class="sc">!=</span> max_val <span class="sc">~</span> <span class="st">"intl"</span>,</span>
<span id="cb514-923"><a href="#cb514-923" aria-hidden="true" tabindex="-1"></a>        dom_percentage  <span class="sc">==</span> max_val <span class="sc">&amp;</span> intl_percentage <span class="sc">!=</span> max_val <span class="sc">&amp;</span> prof_percentage <span class="sc">!=</span> max_val <span class="sc">~</span> <span class="st">"dom"</span>,</span>
<span id="cb514-924"><a href="#cb514-924" aria-hidden="true" tabindex="-1"></a>        prof_percentage <span class="sc">==</span> max_val <span class="sc">&amp;</span> intl_percentage <span class="sc">!=</span> max_val <span class="sc">&amp;</span> dom_percentage <span class="sc">!=</span> max_val <span class="sc">~</span> <span class="st">"prof"</span>,</span>
<span id="cb514-925"><a href="#cb514-925" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"tie"</span></span>
<span id="cb514-926"><a href="#cb514-926" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-927"><a href="#cb514-927" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-928"><a href="#cb514-928" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>max_val, <span class="sc">-</span>importance_all)</span>
<span id="cb514-929"><a href="#cb514-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-930"><a href="#cb514-930" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- step3: trait merging ----</span></span>
<span id="cb514-931"><a href="#cb514-931" aria-hidden="true" tabindex="-1"></a>  traits <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-932"><a href="#cb514-932" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(full_name, congress, dataset, party, chamber, committee_el,</span>
<span id="cb514-933"><a href="#cb514-933" aria-hidden="true" tabindex="-1"></a>           gender, age, seniority, ideology, district, state_code, bioguide_id) <span class="sc">%&gt;%</span></span>
<span id="cb514-934"><a href="#cb514-934" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>()</span>
<span id="cb514-935"><a href="#cb514-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-936"><a href="#cb514-936" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">==</span> <span class="st">"merged"</span>) {</span>
<span id="cb514-937"><a href="#cb514-937" aria-hidden="true" tabindex="-1"></a>    traits <span class="ot">&lt;-</span> traits <span class="sc">%&gt;%</span></span>
<span id="cb514-938"><a href="#cb514-938" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(full_name, congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-939"><a href="#cb514-939" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(</span>
<span id="cb514-940"><a href="#cb514-940" aria-hidden="true" tabindex="-1"></a>        <span class="at">party =</span> <span class="fu">first</span>(party),</span>
<span id="cb514-941"><a href="#cb514-941" aria-hidden="true" tabindex="-1"></a>        <span class="at">chamber =</span> <span class="fu">first</span>(chamber),</span>
<span id="cb514-942"><a href="#cb514-942" aria-hidden="true" tabindex="-1"></a>        <span class="at">committee_el =</span> <span class="fu">first</span>(<span class="fu">na.omit</span>(committee_el)),</span>
<span id="cb514-943"><a href="#cb514-943" aria-hidden="true" tabindex="-1"></a>        <span class="at">gender =</span> <span class="fu">first</span>(gender),</span>
<span id="cb514-944"><a href="#cb514-944" aria-hidden="true" tabindex="-1"></a>        <span class="at">age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-945"><a href="#cb514-945" aria-hidden="true" tabindex="-1"></a>        <span class="at">seniority =</span> <span class="fu">mean</span>(seniority, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-946"><a href="#cb514-946" aria-hidden="true" tabindex="-1"></a>        <span class="at">ideology =</span> <span class="fu">mean</span>(ideology, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-947"><a href="#cb514-947" aria-hidden="true" tabindex="-1"></a>        <span class="at">district =</span> <span class="fu">first</span>(district),</span>
<span id="cb514-948"><a href="#cb514-948" aria-hidden="true" tabindex="-1"></a>        <span class="at">state_code =</span> <span class="fu">first</span>(state_code),</span>
<span id="cb514-949"><a href="#cb514-949" aria-hidden="true" tabindex="-1"></a>        <span class="at">bioguide_id =</span> <span class="fu">first</span>(bioguide_id),</span>
<span id="cb514-950"><a href="#cb514-950" aria-hidden="true" tabindex="-1"></a>        <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb514-951"><a href="#cb514-951" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-952"><a href="#cb514-952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-953"><a href="#cb514-953" aria-hidden="true" tabindex="-1"></a>    df_final <span class="ot">&lt;-</span> df_clean <span class="sc">%&gt;%</span></span>
<span id="cb514-954"><a href="#cb514-954" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(traits, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"full_name"</span>, <span class="st">"congress"</span>))</span>
<span id="cb514-955"><a href="#cb514-955" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb514-956"><a href="#cb514-956" aria-hidden="true" tabindex="-1"></a>    df_final <span class="ot">&lt;-</span> df_clean <span class="sc">%&gt;%</span></span>
<span id="cb514-957"><a href="#cb514-957" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(traits, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"full_name"</span>, <span class="st">"congress"</span>, <span class="st">"dataset"</span>))</span>
<span id="cb514-958"><a href="#cb514-958" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-959"><a href="#cb514-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-960"><a href="#cb514-960" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- step 4: join and label formatting ----</span></span>
<span id="cb514-961"><a href="#cb514-961" aria-hidden="true" tabindex="-1"></a>  df_final <span class="ot">&lt;-</span> df_final <span class="sc">%&gt;%</span></span>
<span id="cb514-962"><a href="#cb514-962" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>)))</span>
<span id="cb514-963"><a href="#cb514-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-964"><a href="#cb514-964" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df_final)</span>
<span id="cb514-965"><a href="#cb514-965" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-966"><a href="#cb514-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-967"><a href="#cb514-967" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- application ----</span></span>
<span id="cb514-968"><a href="#cb514-968" aria-hidden="true" tabindex="-1"></a><span class="co">#df_train &lt;- generate_decision_with_traits_dual(df, mode = "train")</span></span>
<span id="cb514-969"><a href="#cb514-969" aria-hidden="true" tabindex="-1"></a><span class="co">#df_test &lt;- generate_decision_with_traits_dual(df, mode = "test")</span></span>
<span id="cb514-970"><a href="#cb514-970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-971"><a href="#cb514-971" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-972"><a href="#cb514-972" aria-hidden="true" tabindex="-1"></a>legis_cg <span class="ot">&lt;-</span> <span class="fu">generate_decision_with_traits</span>(legis_sum1, <span class="at">mode =</span> <span class="st">"merged"</span>)</span>
<span id="cb514-973"><a href="#cb514-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-974"><a href="#cb514-974" aria-hidden="true" tabindex="-1"></a><span class="co"># save</span></span>
<span id="cb514-975"><a href="#cb514-975" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_cg.csv"</span>, <span class="at">data =</span> legis_cg)</span>
<span id="cb514-976"><a href="#cb514-976" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-977"><a href="#cb514-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-978"><a href="#cb514-978" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.2 topic level aggregation</span></span>
<span id="cb514-979"><a href="#cb514-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-980"><a href="#cb514-980" aria-hidden="true" tabindex="-1"></a>generate function: generate_decision_with_issue()</span>
<span id="cb514-981"><a href="#cb514-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-982"><a href="#cb514-982" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; This function processes legislative data to summarize each legislator's issue-level decision pattern (international, domestic, or professional). It groups the data by legislator, Congress session, and issue, aggregates importance scores, and calculates the dominant decision type for each group.</span></span>
<span id="cb514-983"><a href="#cb514-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-986"><a href="#cb514-986" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-987"><a href="#cb514-987" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: generate decision with issues</span></span>
<span id="cb514-988"><a href="#cb514-988" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-989"><a href="#cb514-989" aria-hidden="true" tabindex="-1"></a>generate_decision_with_issues <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">set_name =</span> <span class="st">"all"</span>) {</span>
<span id="cb514-990"><a href="#cb514-990" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 1: Optional filter by dataset (train/test)</span></span>
<span id="cb514-991"><a href="#cb514-991" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (set_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"train"</span>, <span class="st">"test"</span>)) {</span>
<span id="cb514-992"><a href="#cb514-992" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dataset <span class="sc">==</span> set_name)</span>
<span id="cb514-993"><a href="#cb514-993" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-994"><a href="#cb514-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-995"><a href="#cb514-995" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 2: Group by issue-congress level and summarize</span></span>
<span id="cb514-996"><a href="#cb514-996" aria-hidden="true" tabindex="-1"></a>  df_clean <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-997"><a href="#cb514-997" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(issue, congress, committee_el, party) <span class="sc">%&gt;%</span>  <span class="co">#  dataset </span></span>
<span id="cb514-998"><a href="#cb514-998" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb514-999"><a href="#cb514-999" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="fu">sum</span>(label, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1000"><a href="#cb514-1000" aria-hidden="true" tabindex="-1"></a>      <span class="at">pred =</span> <span class="fu">mean</span>(pred, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1001"><a href="#cb514-1001" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_intl =</span> <span class="fu">sum</span>(importance_intl, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1002"><a href="#cb514-1002" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_dom =</span> <span class="fu">sum</span>(importance_dom, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1003"><a href="#cb514-1003" aria-hidden="true" tabindex="-1"></a>      <span class="at">importance_prof =</span> <span class="fu">sum</span>(importance_prof, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1004"><a href="#cb514-1004" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">'drop'</span></span>
<span id="cb514-1005"><a href="#cb514-1005" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1006"><a href="#cb514-1006" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-1007"><a href="#cb514-1007" aria-hidden="true" tabindex="-1"></a>      <span class="at">total =</span> importance_intl <span class="sc">+</span> importance_dom <span class="sc">+</span> importance_prof,</span>
<span id="cb514-1008"><a href="#cb514-1008" aria-hidden="true" tabindex="-1"></a>      <span class="at">intl_percentage =</span> <span class="fu">ifelse</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, importance_intl <span class="sc">/</span> total, <span class="cn">NA_real_</span>),</span>
<span id="cb514-1009"><a href="#cb514-1009" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom_percentage  =</span> <span class="fu">ifelse</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, importance_dom  <span class="sc">/</span> total, <span class="cn">NA_real_</span>),</span>
<span id="cb514-1010"><a href="#cb514-1010" aria-hidden="true" tabindex="-1"></a>      <span class="at">prof_percentage =</span> <span class="fu">ifelse</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, importance_prof <span class="sc">/</span> total, <span class="cn">NA_real_</span>),</span>
<span id="cb514-1011"><a href="#cb514-1011" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_val =</span> <span class="fu">pmax</span>(intl_percentage, dom_percentage, prof_percentage, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1012"><a href="#cb514-1012" aria-hidden="true" tabindex="-1"></a>      <span class="at">decision =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-1013"><a href="#cb514-1013" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(max_val) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb514-1014"><a href="#cb514-1014" aria-hidden="true" tabindex="-1"></a>        intl_percentage <span class="sc">==</span> max_val <span class="sc">&amp;</span> dom_percentage <span class="sc">!=</span> max_val <span class="sc">&amp;</span> prof_percentage <span class="sc">!=</span> max_val <span class="sc">~</span> <span class="st">"intl"</span>,</span>
<span id="cb514-1015"><a href="#cb514-1015" aria-hidden="true" tabindex="-1"></a>        dom_percentage  <span class="sc">==</span> max_val <span class="sc">&amp;</span> intl_percentage <span class="sc">!=</span> max_val <span class="sc">&amp;</span> prof_percentage <span class="sc">!=</span> max_val <span class="sc">~</span> <span class="st">"dom"</span>,</span>
<span id="cb514-1016"><a href="#cb514-1016" aria-hidden="true" tabindex="-1"></a>        prof_percentage <span class="sc">==</span> max_val <span class="sc">&amp;</span> intl_percentage <span class="sc">!=</span> max_val <span class="sc">&amp;</span> dom_percentage  <span class="sc">!=</span> max_val <span class="sc">~</span> <span class="st">"prof"</span>,</span>
<span id="cb514-1017"><a href="#cb514-1017" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"tie"</span></span>
<span id="cb514-1018"><a href="#cb514-1018" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-1019"><a href="#cb514-1019" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1020"><a href="#cb514-1020" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>max_val, <span class="sc">-</span>total)</span>
<span id="cb514-1021"><a href="#cb514-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1022"><a href="#cb514-1022" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df_clean)</span>
<span id="cb514-1023"><a href="#cb514-1023" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-1024"><a href="#cb514-1024" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1025"><a href="#cb514-1025" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- application ----</span></span>
<span id="cb514-1026"><a href="#cb514-1026" aria-hidden="true" tabindex="-1"></a>legis_tp <span class="ot">&lt;-</span> <span class="fu">generate_decision_with_issues</span>(legis_sum)</span>
<span id="cb514-1027"><a href="#cb514-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1028"><a href="#cb514-1028" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_tp.csv"</span>, <span class="at">data =</span> legis_tp)</span>
<span id="cb514-1029"><a href="#cb514-1029" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1030"><a href="#cb514-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1031"><a href="#cb514-1031" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3. overall descriptive analysis for individual</span></span>
<span id="cb514-1032"><a href="#cb514-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1033"><a href="#cb514-1033" aria-hidden="true" tabindex="-1"></a>This block visualizes the distribution of legislators' decision types (intl/dom/prof) in legis datasets. It includes overall bar plots and congress-specific facet plots. Additionally, it inspects label distributions across congress, party, chamber, gender, and committee.</span>
<span id="cb514-1034"><a href="#cb514-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1035"><a href="#cb514-1035" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.1 distribution plots</span></span>
<span id="cb514-1036"><a href="#cb514-1036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1037"><a href="#cb514-1037" aria-hidden="true" tabindex="-1"></a>overall</span>
<span id="cb514-1038"><a href="#cb514-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1041"><a href="#cb514-1041" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1042"><a href="#cb514-1042" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: overall barplot</span></span>
<span id="cb514-1043"><a href="#cb514-1043" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1044"><a href="#cb514-1044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1045"><a href="#cb514-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1046"><a href="#cb514-1046" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(legis_cg, <span class="fu">aes</span>(<span class="at">x =</span> decision, <span class="at">fill =</span> decision)) <span class="sc">+</span></span>
<span id="cb514-1047"><a href="#cb514-1047" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb514-1048"><a href="#cb514-1048" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb514-1049"><a href="#cb514-1049" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"intl"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"dom"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, <span class="st">"prof"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>)</span>
<span id="cb514-1050"><a href="#cb514-1050" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1051"><a href="#cb514-1051" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat=</span><span class="st">'count'</span>, <span class="fu">aes</span>(<span class="at">label=</span>..count..), <span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.8</span>, <span class="at">size=</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb514-1052"><a href="#cb514-1052" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"decision mode by congressmen legis"</span>,</span>
<span id="cb514-1053"><a href="#cb514-1053" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"decision mode"</span>,</span>
<span id="cb514-1054"><a href="#cb514-1054" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"number"</span>) <span class="sc">+</span></span>
<span id="cb514-1055"><a href="#cb514-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-1056"><a href="#cb514-1056" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1057"><a href="#cb514-1057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1058"><a href="#cb514-1058" aria-hidden="true" tabindex="-1"></a>by congress</span>
<span id="cb514-1059"><a href="#cb514-1059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1062"><a href="#cb514-1062" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1063"><a href="#cb514-1063" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: overall barplot by congress</span></span>
<span id="cb514-1064"><a href="#cb514-1064" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1065"><a href="#cb514-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1066"><a href="#cb514-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1067"><a href="#cb514-1067" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(legis_cg, <span class="fu">aes</span>(<span class="at">x =</span> decision, <span class="at">fill =</span> decision)) <span class="sc">+</span></span>
<span id="cb514-1068"><a href="#cb514-1068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb514-1069"><a href="#cb514-1069" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(count)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb514-1070"><a href="#cb514-1070" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb514-1071"><a href="#cb514-1071" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"intl"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"dom"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, <span class="st">"prof"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>)</span>
<span id="cb514-1072"><a href="#cb514-1072" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1073"><a href="#cb514-1073" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> congress, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb514-1074"><a href="#cb514-1074" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"decision mode by congressmen legis"</span>,</span>
<span id="cb514-1075"><a href="#cb514-1075" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Decision Mode"</span>,</span>
<span id="cb514-1076"><a href="#cb514-1076" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number"</span>) <span class="sc">+</span></span>
<span id="cb514-1077"><a href="#cb514-1077" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span>
<span id="cb514-1078"><a href="#cb514-1078" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1079"><a href="#cb514-1079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1080"><a href="#cb514-1080" aria-hidden="true" tabindex="-1"></a>seats change each congress</span>
<span id="cb514-1081"><a href="#cb514-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1084"><a href="#cb514-1084" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1085"><a href="#cb514-1085" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: legislators yaml clean</span></span>
<span id="cb514-1086"><a href="#cb514-1086" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1087"><a href="#cb514-1087" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1088"><a href="#cb514-1088" aria-hidden="true" tabindex="-1"></a><span class="co"># find yaml</span></span>
<span id="cb514-1089"><a href="#cb514-1089" aria-hidden="true" tabindex="-1"></a>yaml_dir <span class="ot">&lt;-</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/legislators list yaml"</span>  </span>
<span id="cb514-1090"><a href="#cb514-1090" aria-hidden="true" tabindex="-1"></a>yaml_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(yaml_dir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.yaml$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-1091"><a href="#cb514-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1092"><a href="#cb514-1092" aria-hidden="true" tabindex="-1"></a><span class="co"># clean yaml</span></span>
<span id="cb514-1093"><a href="#cb514-1093" aria-hidden="true" tabindex="-1"></a>read_yaml_to_df <span class="ot">&lt;-</span> <span class="cf">function</span>(file) {</span>
<span id="cb514-1094"><a href="#cb514-1094" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  YAML</span></span>
<span id="cb514-1095"><a href="#cb514-1095" aria-hidden="true" tabindex="-1"></a>  yaml_data <span class="ot">&lt;-</span> yaml<span class="sc">::</span><span class="fu">read_yaml</span>(file)</span>
<span id="cb514-1096"><a href="#cb514-1096" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1097"><a href="#cb514-1097" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  legislators-current117.yaml  117</span></span>
<span id="cb514-1098"><a href="#cb514-1098" aria-hidden="true" tabindex="-1"></a>  congress_num <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(<span class="fu">basename</span>(file), <span class="st">"</span><span class="sc">\\</span><span class="st">d{3}"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.integer</span>()</span>
<span id="cb514-1099"><a href="#cb514-1099" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1100"><a href="#cb514-1100" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-1101"><a href="#cb514-1101" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(yaml_data, <span class="cf">function</span>(x) {</span>
<span id="cb514-1102"><a href="#cb514-1102" aria-hidden="true" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">as_tibble</span>(x<span class="sc">$</span>id)</span>
<span id="cb514-1103"><a href="#cb514-1103" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb514-1104"><a href="#cb514-1104" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1105"><a href="#cb514-1105" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  congress </span></span>
<span id="cb514-1106"><a href="#cb514-1106" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">congress =</span> congress_num)</span>
<span id="cb514-1107"><a href="#cb514-1107" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1108"><a href="#cb514-1108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb514-1109"><a href="#cb514-1109" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-1110"><a href="#cb514-1110" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1111"><a href="#cb514-1111" aria-hidden="true" tabindex="-1"></a><span class="co">#  YAML </span></span>
<span id="cb514-1112"><a href="#cb514-1112" aria-hidden="true" tabindex="-1"></a>legislators115_118 <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(yaml_files, read_yaml_to_df)</span>
<span id="cb514-1113"><a href="#cb514-1113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1114"><a href="#cb514-1114" aria-hidden="true" tabindex="-1"></a><span class="co"># match bioguide </span></span>
<span id="cb514-1115"><a href="#cb514-1115" aria-hidden="true" tabindex="-1"></a><span class="co">#  key </span></span>
<span id="cb514-1116"><a href="#cb514-1116" aria-hidden="true" tabindex="-1"></a>bioguide_meta <span class="ot">&lt;-</span> bioguide <span class="sc">%&gt;%</span></span>
<span id="cb514-1117"><a href="#cb514-1117" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, full_name, congress, party, gender, chamber) <span class="sc">%&gt;%</span></span>
<span id="cb514-1118"><a href="#cb514-1118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(bioguide_id, congress, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-1119"><a href="#cb514-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1120"><a href="#cb514-1120" aria-hidden="true" tabindex="-1"></a>legislators115_118<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.character</span>(legislators115_118<span class="sc">$</span>congress)</span>
<span id="cb514-1121"><a href="#cb514-1121" aria-hidden="true" tabindex="-1"></a>bioguide_meta<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.character</span>(bioguide_meta<span class="sc">$</span>congress)</span>
<span id="cb514-1122"><a href="#cb514-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1123"><a href="#cb514-1123" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-1124"><a href="#cb514-1124" aria-hidden="true" tabindex="-1"></a>legislators_cleaned <span class="ot">&lt;-</span> legislators115_118 <span class="sc">%&gt;%</span></span>
<span id="cb514-1125"><a href="#cb514-1125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-1126"><a href="#cb514-1126" aria-hidden="true" tabindex="-1"></a>    bioguide_meta <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, full_name, congress, party, gender, chamber),</span>
<span id="cb514-1127"><a href="#cb514-1127" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"bioguide"</span> <span class="ot">=</span> <span class="st">"bioguide_id"</span>, <span class="st">"congress"</span> <span class="ot">=</span> <span class="st">"congress"</span>)</span>
<span id="cb514-1128"><a href="#cb514-1128" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1129"><a href="#cb514-1129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1130"><a href="#cb514-1130" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-1131"><a href="#cb514-1131" aria-hidden="true" tabindex="-1"></a>members <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb514-1132"><a href="#cb514-1132" aria-hidden="true" tabindex="-1"></a>  <span class="at">bioguide_id =</span> <span class="fu">c</span>(<span class="st">"S001219"</span>,<span class="st">"S001204"</span>,<span class="st">"S001177"</span>,<span class="st">"R000600"</span>,<span class="st">"P000610"</span>,<span class="st">"M001219"</span>,<span class="st">"L000605"</span>,<span class="st">"J000303"</span>,<span class="st">"B001245"</span>),</span>
<span id="cb514-1133"><a href="#cb514-1133" aria-hidden="true" tabindex="-1"></a>  <span class="at">full_name   =</span> <span class="fu">c</span>(</span>
<span id="cb514-1134"><a href="#cb514-1134" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Sempolinski, Joseph [R-NY-23]"</span>,</span>
<span id="cb514-1135"><a href="#cb514-1135" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. San Nicolas, Michael F. Q. [D-GU-At-Large]"</span>,</span>
<span id="cb514-1136"><a href="#cb514-1136" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. Sablan, Gregorio Kilili Camacho [D-MP-At-Large]"</span>,</span>
<span id="cb514-1137"><a href="#cb514-1137" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. Radewagen, Aumua Amata Coleman [R-AS-At-Large]"</span>,</span>
<span id="cb514-1138"><a href="#cb514-1138" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. Plaskett, Stacey E. [D-VI-At-Large]"</span>,</span>
<span id="cb514-1139"><a href="#cb514-1139" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. Moylan, James [R-GU-At-Large]"</span>,</span>
<span id="cb514-1140"><a href="#cb514-1140" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rep. Lee Carter, Erica [D-TX-18]"</span>,</span>
<span id="cb514-1141"><a href="#cb514-1141" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. Jones, Brenda [D-MI-At-Large]"</span>,</span>
<span id="cb514-1142"><a href="#cb514-1142" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Del. Bordallo, Madeleine [D-GU-At-Large]"</span></span>
<span id="cb514-1143"><a href="#cb514-1143" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-1144"><a href="#cb514-1144" aria-hidden="true" tabindex="-1"></a>  <span class="at">party       =</span> <span class="fu">c</span>(<span class="st">"Republican"</span>,<span class="st">"Democratic"</span>,<span class="st">"Democratic"</span>,<span class="st">"Republican"</span>,<span class="st">"Democratic"</span>,<span class="st">"Republican"</span>,<span class="st">"Democratic"</span>,<span class="st">"Democratic"</span>,<span class="st">"Democratic"</span>),</span>
<span id="cb514-1145"><a href="#cb514-1145" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender      =</span> <span class="fu">c</span>(<span class="st">"M"</span>,<span class="st">"M"</span>,<span class="st">"M"</span>,<span class="st">"F"</span>,<span class="st">"F"</span>,<span class="st">"M"</span>,<span class="st">"F"</span>,<span class="st">"F"</span>,<span class="st">"F"</span>),</span>
<span id="cb514-1146"><a href="#cb514-1146" aria-hidden="true" tabindex="-1"></a>  <span class="at">chamber     =</span> <span class="fu">c</span>(</span>
<span id="cb514-1147"><a href="#cb514-1147" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1148"><a href="#cb514-1148" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1149"><a href="#cb514-1149" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1150"><a href="#cb514-1150" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1151"><a href="#cb514-1151" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1152"><a href="#cb514-1152" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1153"><a href="#cb514-1153" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1154"><a href="#cb514-1154" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span>,</span>
<span id="cb514-1155"><a href="#cb514-1155" aria-hidden="true" tabindex="-1"></a>    <span class="st">"House of Representatives"</span></span>
<span id="cb514-1156"><a href="#cb514-1156" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-1157"><a href="#cb514-1157" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb514-1158"><a href="#cb514-1158" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-1159"><a href="#cb514-1159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1160"><a href="#cb514-1160" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-1161"><a href="#cb514-1161" aria-hidden="true" tabindex="-1"></a>legislators_cleaned <span class="ot">&lt;-</span> legislators_cleaned <span class="sc">%&gt;%</span></span>
<span id="cb514-1162"><a href="#cb514-1162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-1163"><a href="#cb514-1163" aria-hidden="true" tabindex="-1"></a>    members <span class="sc">%&gt;%</span></span>
<span id="cb514-1164"><a href="#cb514-1164" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, <span class="at">party_fix =</span> party, <span class="at">gender_fix =</span> gender, <span class="at">chamber_fix =</span> chamber),</span>
<span id="cb514-1165"><a href="#cb514-1165" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"bioguide"</span> <span class="ot">=</span> <span class="st">"bioguide_id"</span>)</span>
<span id="cb514-1166"><a href="#cb514-1166" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1167"><a href="#cb514-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-1168"><a href="#cb514-1168" aria-hidden="true" tabindex="-1"></a>    <span class="at">party   =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(party) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(party_fix), party_fix, party),</span>
<span id="cb514-1169"><a href="#cb514-1169" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender  =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(gender) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gender_fix), gender_fix, gender),</span>
<span id="cb514-1170"><a href="#cb514-1170" aria-hidden="true" tabindex="-1"></a>    <span class="at">chamber =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(chamber) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(chamber_fix), chamber_fix, chamber)</span>
<span id="cb514-1171"><a href="#cb514-1171" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1172"><a href="#cb514-1172" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>party_fix, <span class="sc">-</span>gender_fix, <span class="sc">-</span>chamber_fix)  <span class="co"># </span></span>
<span id="cb514-1173"><a href="#cb514-1173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1174"><a href="#cb514-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1175"><a href="#cb514-1175" aria-hidden="true" tabindex="-1"></a><span class="fu">#### waiting for cleaning (code)</span></span>
<span id="cb514-1176"><a href="#cb514-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1179"><a href="#cb514-1179" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1180"><a href="#cb514-1180" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: seats change each congress</span></span>
<span id="cb514-1181"><a href="#cb514-1181" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1182"><a href="#cb514-1182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1183"><a href="#cb514-1183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1184"><a href="#cb514-1184" aria-hidden="true" tabindex="-1"></a><span class="co"># 1)  distinct bioguide</span></span>
<span id="cb514-1185"><a href="#cb514-1185" aria-hidden="true" tabindex="-1"></a>party_seat_trend <span class="ot">&lt;-</span> legislators_cleaned <span class="sc">%&gt;%</span></span>
<span id="cb514-1186"><a href="#cb514-1186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-1187"><a href="#cb514-1187" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> <span class="fu">as.character</span>(party),</span>
<span id="cb514-1188"><a href="#cb514-1188" aria-hidden="true" tabindex="-1"></a>    <span class="at">congress =</span> <span class="fu">as.numeric</span>(congress),</span>
<span id="cb514-1189"><a href="#cb514-1189" aria-hidden="true" tabindex="-1"></a>    <span class="at">chamber =</span> <span class="fu">as.character</span>(chamber)</span>
<span id="cb514-1190"><a href="#cb514-1190" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1191"><a href="#cb514-1191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(party), <span class="sc">!</span><span class="fu">is.na</span>(bioguide), <span class="sc">!</span><span class="fu">is.na</span>(chamber)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1192"><a href="#cb514-1192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, chamber, party) <span class="sc">%&gt;%</span></span>
<span id="cb514-1193"><a href="#cb514-1193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">seat_count =</span> <span class="fu">n_distinct</span>(bioguide), <span class="at">.groups =</span> <span class="st">"drop"</span>) </span>
<span id="cb514-1194"><a href="#cb514-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1195"><a href="#cb514-1195" aria-hidden="true" tabindex="-1"></a><span class="co"># 2)  (chamber, party, congress)  lag </span></span>
<span id="cb514-1196"><a href="#cb514-1196" aria-hidden="true" tabindex="-1"></a>all_congress <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(party_seat_trend<span class="sc">$</span>congress))</span>
<span id="cb514-1197"><a href="#cb514-1197" aria-hidden="true" tabindex="-1"></a>all_chamber  <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(party_seat_trend<span class="sc">$</span>chamber))</span>
<span id="cb514-1198"><a href="#cb514-1198" aria-hidden="true" tabindex="-1"></a>all_party    <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(party_seat_trend<span class="sc">$</span>party))</span>
<span id="cb514-1199"><a href="#cb514-1199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1200"><a href="#cb514-1200" aria-hidden="true" tabindex="-1"></a>party_seat_trend <span class="ot">&lt;-</span> party_seat_trend <span class="sc">%&gt;%</span></span>
<span id="cb514-1201"><a href="#cb514-1201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(<span class="at">chamber =</span> all_chamber, <span class="at">party =</span> all_party, <span class="at">congress =</span> all_congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-1202"><a href="#cb514-1202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(chamber, party, congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-1203"><a href="#cb514-1203" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  seat_count  NA  0 0</span></span>
<span id="cb514-1204"><a href="#cb514-1204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">seat_count =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(seat_count), <span class="cn">NA_integer_</span>, seat_count))</span>
<span id="cb514-1205"><a href="#cb514-1205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1206"><a href="#cb514-1206" aria-hidden="true" tabindex="-1"></a><span class="co"># 3)  prev_seat, seat_change order_by </span></span>
<span id="cb514-1207"><a href="#cb514-1207" aria-hidden="true" tabindex="-1"></a>party_seat_trend <span class="ot">&lt;-</span> party_seat_trend <span class="sc">%&gt;%</span></span>
<span id="cb514-1208"><a href="#cb514-1208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(chamber, party) <span class="sc">%&gt;%</span></span>
<span id="cb514-1209"><a href="#cb514-1209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(congress, <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-1210"><a href="#cb514-1210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-1211"><a href="#cb514-1211" aria-hidden="true" tabindex="-1"></a>    <span class="at">prev_seat =</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(seat_count, <span class="at">order_by =</span> congress),</span>
<span id="cb514-1212"><a href="#cb514-1212" aria-hidden="true" tabindex="-1"></a>    <span class="at">seat_change =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(prev_seat), <span class="cn">NA_integer_</span>, seat_count <span class="sc">-</span> prev_seat),</span>
<span id="cb514-1213"><a href="#cb514-1213" aria-hidden="true" tabindex="-1"></a>    <span class="at">seat_change_pct =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(prev_seat) <span class="sc">&amp;</span> prev_seat <span class="sc">!=</span> <span class="dv">0</span>,</span>
<span id="cb514-1214"><a href="#cb514-1214" aria-hidden="true" tabindex="-1"></a>                             (seat_count <span class="sc">-</span> prev_seat) <span class="sc">/</span> prev_seat <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb514-1215"><a href="#cb514-1215" aria-hidden="true" tabindex="-1"></a>                             <span class="cn">NA_real_</span>),</span>
<span id="cb514-1216"><a href="#cb514-1216" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-1217"><a href="#cb514-1217" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(seat_change) <span class="sc">~</span> <span class="st">""</span>,</span>
<span id="cb514-1218"><a href="#cb514-1218" aria-hidden="true" tabindex="-1"></a>      seat_change <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">""</span>,</span>
<span id="cb514-1219"><a href="#cb514-1219" aria-hidden="true" tabindex="-1"></a>      seat_change <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">""</span>,</span>
<span id="cb514-1220"><a href="#cb514-1220" aria-hidden="true" tabindex="-1"></a>      seat_change <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb514-1221"><a href="#cb514-1221" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-1222"><a href="#cb514-1222" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1223"><a href="#cb514-1223" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb514-1224"><a href="#cb514-1224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1225"><a href="#cb514-1225" aria-hidden="true" tabindex="-1"></a><span class="co"># 4)  (chamber, party)  prev_seat </span></span>
<span id="cb514-1226"><a href="#cb514-1226" aria-hidden="true" tabindex="-1"></a>debug_check <span class="ot">&lt;-</span> party_seat_trend <span class="sc">%&gt;%</span></span>
<span id="cb514-1227"><a href="#cb514-1227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(seat_count)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1228"><a href="#cb514-1228" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(chamber, party, congress)</span>
<span id="cb514-1229"><a href="#cb514-1229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1230"><a href="#cb514-1230" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(debug_check)</span>
<span id="cb514-1231"><a href="#cb514-1231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1232"><a href="#cb514-1232" aria-hidden="true" tabindex="-1"></a><span class="co"># 5)  +  + </span></span>
<span id="cb514-1233"><a href="#cb514-1233" aria-hidden="true" tabindex="-1"></a>seg_data <span class="ot">&lt;-</span> party_seat_trend <span class="sc">%&gt;%</span></span>
<span id="cb514-1234"><a href="#cb514-1234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(prev_seat) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(seat_count)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1235"><a href="#cb514-1235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prev_congress =</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(congress, <span class="at">order_by =</span> congress)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1236"><a href="#cb514-1236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(prev_congress)) <span class="co"># </span></span>
<span id="cb514-1237"><a href="#cb514-1237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1238"><a href="#cb514-1238" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(party_seat_trend, <span class="fu">aes</span>(<span class="at">x =</span> congress, <span class="at">y =</span> seat_count, <span class="at">color =</span> party, <span class="at">group =</span> party)) <span class="sc">+</span></span>
<span id="cb514-1239"><a href="#cb514-1239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb514-1240"><a href="#cb514-1240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb514-1241"><a href="#cb514-1241" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-1242"><a href="#cb514-1242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb514-1243"><a href="#cb514-1243" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(seat_count), <span class="st">""</span>, seat_count)),</span>
<span id="cb514-1244"><a href="#cb514-1244" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">3.8</span>,</span>
<span id="cb514-1245"><a href="#cb514-1245" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb514-1246"><a href="#cb514-1246" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="dv">5</span>,</span>
<span id="cb514-1247"><a href="#cb514-1247" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb514-1248"><a href="#cb514-1248" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1249"><a href="#cb514-1249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> chamber, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb514-1250"><a href="#cb514-1250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb514-1251"><a href="#cb514-1251" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Democratic"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"Republican"</span> <span class="ot">=</span> <span class="st">"#d62728"</span>),</span>
<span id="cb514-1252"><a href="#cb514-1252" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span></span>
<span id="cb514-1253"><a href="#cb514-1253" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1254"><a href="#cb514-1254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> all_congress) <span class="sc">+</span></span>
<span id="cb514-1255"><a href="#cb514-1255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb514-1256"><a href="#cb514-1256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-1257"><a href="#cb514-1257" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Party Seat Counts Across Congress Sessions by Chamber"</span>,</span>
<span id="cb514-1258"><a href="#cb514-1258" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Congress"</span>,</span>
<span id="cb514-1259"><a href="#cb514-1259" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Members"</span>,</span>
<span id="cb514-1260"><a href="#cb514-1260" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Party"</span></span>
<span id="cb514-1261"><a href="#cb514-1261" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1262"><a href="#cb514-1262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb514-1263"><a href="#cb514-1263" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb514-1264"><a href="#cb514-1264" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb514-1265"><a href="#cb514-1265" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1266"><a href="#cb514-1266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1267"><a href="#cb514-1267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1268"><a href="#cb514-1268" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.2 distribution map</span></span>
<span id="cb514-1269"><a href="#cb514-1269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1270"><a href="#cb514-1270" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.1 map dataset generation and cleansing</span></span>
<span id="cb514-1271"><a href="#cb514-1271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1274"><a href="#cb514-1274" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1275"><a href="#cb514-1275" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: mapdata preparation</span></span>
<span id="cb514-1276"><a href="#cb514-1276" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1277"><a href="#cb514-1277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1278"><a href="#cb514-1278" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- mapdata for house ----</span></span>
<span id="cb514-1279"><a href="#cb514-1279" aria-hidden="true" tabindex="-1"></a>legis_cg_heatmap <span class="ot">&lt;-</span> legis_cg <span class="sc">%&gt;%</span></span>
<span id="cb514-1280"><a href="#cb514-1280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"house of representatives"</span>)</span>
<span id="cb514-1281"><a href="#cb514-1281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1282"><a href="#cb514-1282" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- mapdata for senate ----</span></span>
<span id="cb514-1283"><a href="#cb514-1283" aria-hidden="true" tabindex="-1"></a>legis_cg_heatmap1 <span class="ot">&lt;-</span> legis_cg <span class="sc">%&gt;%</span></span>
<span id="cb514-1284"><a href="#cb514-1284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"senate"</span>)</span>
<span id="cb514-1285"><a href="#cb514-1285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1286"><a href="#cb514-1286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1287"><a href="#cb514-1287" aria-hidden="true" tabindex="-1"></a>district cleansing</span>
<span id="cb514-1288"><a href="#cb514-1288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1291"><a href="#cb514-1291" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1292"><a href="#cb514-1292" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district cleansing for mapdata</span></span>
<span id="cb514-1293"><a href="#cb514-1293" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1294"><a href="#cb514-1294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1295"><a href="#cb514-1295" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(legis_cg_heatmap<span class="sc">$</span>district[<span class="fu">is.na</span>(<span class="fu">as.integer</span>(legis_cg_heatmap<span class="sc">$</span>district))]) <span class="co"># debug district data issue</span></span>
<span id="cb514-1296"><a href="#cb514-1296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1297"><a href="#cb514-1297" aria-hidden="true" tabindex="-1"></a>legis_cg_heatmap  <span class="ot">&lt;-</span> legis_cg_heatmap  <span class="sc">%&gt;%</span></span>
<span id="cb514-1298"><a href="#cb514-1298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-1299"><a href="#cb514-1299" aria-hidden="true" tabindex="-1"></a>    <span class="at">district_clean =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-1300"><a href="#cb514-1300" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"At Large"</span>, district, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"00"</span>,</span>
<span id="cb514-1301"><a href="#cb514-1301" aria-hidden="true" tabindex="-1"></a>      state_code <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DC"</span>, <span class="st">"AS"</span>, <span class="st">"GU"</span>, <span class="st">"MP"</span>, <span class="st">"PR"</span>, <span class="st">"VI"</span>) <span class="sc">~</span> <span class="st">"98"</span>,</span>
<span id="cb514-1302"><a href="#cb514-1302" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"^[0-9]+$"</span>, district) <span class="sc">~</span> <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, <span class="fu">as.integer</span>(district)),</span>
<span id="cb514-1303"><a href="#cb514-1303" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"^[0-9]+(st|nd|rd|th)$"</span>, district, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="fu">sprintf</span>(</span>
<span id="cb514-1304"><a href="#cb514-1304" aria-hidden="true" tabindex="-1"></a>        <span class="st">"%02d"</span>, <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(district, <span class="st">"^[0-9]+"</span>))</span>
<span id="cb514-1305"><a href="#cb514-1305" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb514-1306"><a href="#cb514-1306" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>  </span>
<span id="cb514-1307"><a href="#cb514-1307" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb514-1308"><a href="#cb514-1308" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_district =</span> <span class="fu">paste0</span>(state_code, <span class="st">"-"</span>, district_clean)</span>
<span id="cb514-1309"><a href="#cb514-1309" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1310"><a href="#cb514-1310" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(legis_cg_heatmap<span class="sc">$</span>district_clean[<span class="fu">is.na</span>(<span class="fu">as.integer</span>(legis_cg_heatmap<span class="sc">$</span>district_clean))]) </span>
<span id="cb514-1311"><a href="#cb514-1311" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1312"><a href="#cb514-1312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1313"><a href="#cb514-1313" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.2 flip-key construction</span></span>
<span id="cb514-1314"><a href="#cb514-1314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1317"><a href="#cb514-1317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1318"><a href="#cb514-1318" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: state flip key</span></span>
<span id="cb514-1319"><a href="#cb514-1319" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1320"><a href="#cb514-1320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1321"><a href="#cb514-1321" aria-hidden="true" tabindex="-1"></a><span class="co"># fips-state</span></span>
<span id="cb514-1322"><a href="#cb514-1322" aria-hidden="true" tabindex="-1"></a>fips_state_map <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb514-1323"><a href="#cb514-1323" aria-hidden="true" tabindex="-1"></a>  <span class="at">fips =</span> <span class="fu">c</span>(</span>
<span id="cb514-1324"><a href="#cb514-1324" aria-hidden="true" tabindex="-1"></a>    <span class="st">"01"</span>,<span class="st">"02"</span>,<span class="st">"04"</span>,<span class="st">"05"</span>,<span class="st">"06"</span>,<span class="st">"08"</span>,<span class="st">"09"</span>,<span class="st">"10"</span>,<span class="st">"12"</span>,<span class="st">"13"</span>,<span class="st">"15"</span>,<span class="st">"16"</span>,<span class="st">"17"</span>,<span class="st">"18"</span>,<span class="st">"19"</span>,</span>
<span id="cb514-1325"><a href="#cb514-1325" aria-hidden="true" tabindex="-1"></a>    <span class="st">"20"</span>,<span class="st">"21"</span>,<span class="st">"22"</span>,<span class="st">"23"</span>,<span class="st">"24"</span>,<span class="st">"25"</span>,<span class="st">"26"</span>,<span class="st">"27"</span>,<span class="st">"28"</span>,<span class="st">"29"</span>,<span class="st">"30"</span>,<span class="st">"31"</span>,<span class="st">"32"</span>,<span class="st">"33"</span>,<span class="st">"34"</span>,</span>
<span id="cb514-1326"><a href="#cb514-1326" aria-hidden="true" tabindex="-1"></a>    <span class="st">"35"</span>,<span class="st">"36"</span>,<span class="st">"37"</span>,<span class="st">"38"</span>,<span class="st">"39"</span>,<span class="st">"40"</span>,<span class="st">"41"</span>,<span class="st">"42"</span>,<span class="st">"44"</span>,<span class="st">"45"</span>,<span class="st">"46"</span>,<span class="st">"47"</span>,<span class="st">"48"</span>,<span class="st">"49"</span>,<span class="st">"50"</span>,</span>
<span id="cb514-1327"><a href="#cb514-1327" aria-hidden="true" tabindex="-1"></a>    <span class="st">"51"</span>,<span class="st">"53"</span>,<span class="st">"54"</span>,<span class="st">"55"</span>,<span class="st">"56"</span>,<span class="st">"11"</span>,<span class="st">"60"</span>,<span class="st">"66"</span>,<span class="st">"69"</span>,<span class="st">"72"</span>,<span class="st">"78"</span></span>
<span id="cb514-1328"><a href="#cb514-1328" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-1329"><a href="#cb514-1329" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="fu">c</span>(</span>
<span id="cb514-1330"><a href="#cb514-1330" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AL"</span>,<span class="st">"AK"</span>,<span class="st">"AZ"</span>,<span class="st">"AR"</span>,<span class="st">"CA"</span>,<span class="st">"CO"</span>,<span class="st">"CT"</span>,<span class="st">"DE"</span>,<span class="st">"FL"</span>,<span class="st">"GA"</span>,<span class="st">"HI"</span>,<span class="st">"ID"</span>,<span class="st">"IL"</span>,<span class="st">"IN"</span>,<span class="st">"IA"</span>,</span>
<span id="cb514-1331"><a href="#cb514-1331" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KS"</span>,<span class="st">"KY"</span>,<span class="st">"LA"</span>,<span class="st">"ME"</span>,<span class="st">"MD"</span>,<span class="st">"MA"</span>,<span class="st">"MI"</span>,<span class="st">"MN"</span>,<span class="st">"MS"</span>,<span class="st">"MO"</span>,<span class="st">"MT"</span>,<span class="st">"NE"</span>,<span class="st">"NV"</span>,<span class="st">"NH"</span>,<span class="st">"NJ"</span>,</span>
<span id="cb514-1332"><a href="#cb514-1332" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NM"</span>,<span class="st">"NY"</span>,<span class="st">"NC"</span>,<span class="st">"ND"</span>,<span class="st">"OH"</span>,<span class="st">"OK"</span>,<span class="st">"OR"</span>,<span class="st">"PA"</span>,<span class="st">"RI"</span>,<span class="st">"SC"</span>,<span class="st">"SD"</span>,<span class="st">"TN"</span>,<span class="st">"TX"</span>,<span class="st">"UT"</span>,<span class="st">"VT"</span>,</span>
<span id="cb514-1333"><a href="#cb514-1333" aria-hidden="true" tabindex="-1"></a>    <span class="st">"VA"</span>,<span class="st">"WA"</span>,<span class="st">"WV"</span>,<span class="st">"WI"</span>,<span class="st">"WY"</span>,<span class="st">"DC"</span>,<span class="st">"AS"</span>,<span class="st">"GU"</span>,<span class="st">"MP"</span>,<span class="st">"PR"</span>,<span class="st">"VI"</span></span>
<span id="cb514-1334"><a href="#cb514-1334" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-1335"><a href="#cb514-1335" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb514-1336"><a href="#cb514-1336" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-1337"><a href="#cb514-1337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1338"><a href="#cb514-1338" aria-hidden="true" tabindex="-1"></a><span class="co"># custom transformers</span></span>
<span id="cb514-1339"><a href="#cb514-1339" aria-hidden="true" tabindex="-1"></a>state_to_fips <span class="ot">&lt;-</span> <span class="cf">function</span>(state_code) {</span>
<span id="cb514-1340"><a href="#cb514-1340" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> fips_state_map<span class="sc">$</span>fips[<span class="fu">match</span>(state_code, fips_state_map<span class="sc">$</span>state)]</span>
<span id="cb514-1341"><a href="#cb514-1341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb514-1342"><a href="#cb514-1342" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-1343"><a href="#cb514-1343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1344"><a href="#cb514-1344" aria-hidden="true" tabindex="-1"></a>fips_to_state <span class="ot">&lt;-</span> <span class="cf">function</span>(fips_code) {</span>
<span id="cb514-1345"><a href="#cb514-1345" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make sure fips_code is character</span></span>
<span id="cb514-1346"><a href="#cb514-1346" aria-hidden="true" tabindex="-1"></a>  fips_code <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%02s"</span>, <span class="fu">as.character</span>(fips_code))</span>
<span id="cb514-1347"><a href="#cb514-1347" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> fips_state_map<span class="sc">$</span>state[<span class="fu">match</span>(fips_code, fips_state_map<span class="sc">$</span>fips)]</span>
<span id="cb514-1348"><a href="#cb514-1348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb514-1349"><a href="#cb514-1349" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-1350"><a href="#cb514-1350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1351"><a href="#cb514-1351" aria-hidden="true" tabindex="-1"></a><span class="co"># test</span></span>
<span id="cb514-1352"><a href="#cb514-1352" aria-hidden="true" tabindex="-1"></a><span class="fu">fips_to_state</span>(<span class="st">"01"</span>)  <span class="co"># shoule be "AL"</span></span>
<span id="cb514-1353"><a href="#cb514-1353" aria-hidden="true" tabindex="-1"></a><span class="fu">fips_to_state</span>(<span class="dv">9</span>)     <span class="co"># shoule be "CT"</span></span>
<span id="cb514-1354"><a href="#cb514-1354" aria-hidden="true" tabindex="-1"></a><span class="fu">fips_to_state</span>(<span class="dv">23</span>)   <span class="co"># shoule be ME</span></span>
<span id="cb514-1355"><a href="#cb514-1355" aria-hidden="true" tabindex="-1"></a><span class="fu">fips_to_state</span>(<span class="dv">44</span>)   <span class="co"># shoule be RI</span></span>
<span id="cb514-1356"><a href="#cb514-1356" aria-hidden="true" tabindex="-1"></a><span class="fu">fips_to_state</span>(<span class="dv">6</span>)   <span class="co"># shoule be CA</span></span>
<span id="cb514-1357"><a href="#cb514-1357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1358"><a href="#cb514-1358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1359"><a href="#cb514-1359" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.3 house map generation function</span></span>
<span id="cb514-1360"><a href="#cb514-1360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1363"><a href="#cb514-1363" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1364"><a href="#cb514-1364" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: map function</span></span>
<span id="cb514-1365"><a href="#cb514-1365" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1366"><a href="#cb514-1366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1367"><a href="#cb514-1367" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------ house map function ------------------</span></span>
<span id="cb514-1368"><a href="#cb514-1368" aria-hidden="true" tabindex="-1"></a>plot_decision_map_by_congress <span class="ot">&lt;-</span> <span class="cf">function</span>(congress_num,</span>
<span id="cb514-1369"><a href="#cb514-1369" aria-hidden="true" tabindex="-1"></a>                                          decision_data,</span>
<span id="cb514-1370"><a href="#cb514-1370" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">model_type =</span> <span class="fu">c</span>(<span class="st">"adver"</span>, <span class="st">"legis"</span>),</span>
<span id="cb514-1371"><a href="#cb514-1371" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">save_path =</span> <span class="cn">NULL</span>,</span>
<span id="cb514-1372"><a href="#cb514-1372" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">save_width =</span> <span class="dv">10</span>,</span>
<span id="cb514-1373"><a href="#cb514-1373" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">save_height =</span> <span class="dv">7</span>) {</span>
<span id="cb514-1374"><a href="#cb514-1374" aria-hidden="true" tabindex="-1"></a>  model_type <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(model_type)</span>
<span id="cb514-1375"><a href="#cb514-1375" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1376"><a href="#cb514-1376" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- congress match ----</span></span>
<span id="cb514-1377"><a href="#cb514-1377" aria-hidden="true" tabindex="-1"></a>  map_year <span class="ot">&lt;-</span> <span class="cf">switch</span>(</span>
<span id="cb514-1378"><a href="#cb514-1378" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>(congress_num),</span>
<span id="cb514-1379"><a href="#cb514-1379" aria-hidden="true" tabindex="-1"></a>    <span class="st">"115"</span> <span class="ot">=</span> <span class="dv">2016</span>,</span>
<span id="cb514-1380"><a href="#cb514-1380" aria-hidden="true" tabindex="-1"></a>    <span class="st">"116"</span> <span class="ot">=</span> <span class="dv">2020</span>,</span>
<span id="cb514-1381"><a href="#cb514-1381" aria-hidden="true" tabindex="-1"></a>    <span class="st">"117"</span> <span class="ot">=</span> <span class="dv">2020</span>,</span>
<span id="cb514-1382"><a href="#cb514-1382" aria-hidden="true" tabindex="-1"></a>    <span class="st">"118"</span> <span class="ot">=</span> <span class="dv">2022</span>,</span>
<span id="cb514-1383"><a href="#cb514-1383" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Unsupported congress number."</span>)</span>
<span id="cb514-1384"><a href="#cb514-1384" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1385"><a href="#cb514-1385" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1386"><a href="#cb514-1386" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- district match ----</span></span>
<span id="cb514-1387"><a href="#cb514-1387" aria-hidden="true" tabindex="-1"></a>  district_col <span class="ot">&lt;-</span> <span class="cf">switch</span>(</span>
<span id="cb514-1388"><a href="#cb514-1388" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>(congress_num),</span>
<span id="cb514-1389"><a href="#cb514-1389" aria-hidden="true" tabindex="-1"></a>    <span class="st">"115"</span> <span class="ot">=</span> <span class="st">"CD115FP"</span>,</span>
<span id="cb514-1390"><a href="#cb514-1390" aria-hidden="true" tabindex="-1"></a>    <span class="st">"116"</span> <span class="ot">=</span> <span class="st">"CD116FP"</span>,</span>
<span id="cb514-1391"><a href="#cb514-1391" aria-hidden="true" tabindex="-1"></a>    <span class="st">"117"</span> <span class="ot">=</span> <span class="st">"CD116FP"</span>,</span>
<span id="cb514-1392"><a href="#cb514-1392" aria-hidden="true" tabindex="-1"></a>    <span class="st">"118"</span> <span class="ot">=</span> <span class="st">"CD118FP"</span>,</span>
<span id="cb514-1393"><a href="#cb514-1393" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Unsupported congress number."</span>)</span>
<span id="cb514-1394"><a href="#cb514-1394" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1395"><a href="#cb514-1395" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1396"><a href="#cb514-1396" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- local fallback paths ----</span></span>
<span id="cb514-1397"><a href="#cb514-1397" aria-hidden="true" tabindex="-1"></a>  local_paths <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-1398"><a href="#cb514-1398" aria-hidden="true" tabindex="-1"></a>    <span class="st">"115"</span> <span class="ot">=</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/map data from us census/cb_2016_us_cd115_500k/cb_2016_us_cd115_500k.shp"</span>,</span>
<span id="cb514-1399"><a href="#cb514-1399" aria-hidden="true" tabindex="-1"></a>    <span class="st">"116"</span> <span class="ot">=</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/map data from us census/tl_2020_us_cd116/tl_2020_us_cd116.shp"</span>,</span>
<span id="cb514-1400"><a href="#cb514-1400" aria-hidden="true" tabindex="-1"></a>    <span class="st">"117"</span> <span class="ot">=</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/map data from us census/tl_2020_us_cd116/tl_2020_us_cd116.shp"</span>, <span class="co"># same as 116</span></span>
<span id="cb514-1401"><a href="#cb514-1401" aria-hidden="true" tabindex="-1"></a>    <span class="st">"118"</span> <span class="ot">=</span> <span class="st">"/Users/kunyazhan/Documents/GitHub/decodeCompetition/data/analysis_raw/map data from us census/cb_2022_us_cd118_20m/cb_2022_us_cd118_20m.shp"</span></span>
<span id="cb514-1402"><a href="#cb514-1402" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1403"><a href="#cb514-1403" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1404"><a href="#cb514-1404" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- load map data ----</span></span>
<span id="cb514-1405"><a href="#cb514-1405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">" Loading congressional district map for "</span>, congress_num, <span class="st">"th Congress..."</span>)</span>
<span id="cb514-1406"><a href="#cb514-1406" aria-hidden="true" tabindex="-1"></a>  cd_map <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>(</span>
<span id="cb514-1407"><a href="#cb514-1407" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb514-1408"><a href="#cb514-1408" aria-hidden="true" tabindex="-1"></a>      tigris<span class="sc">::</span><span class="fu">congressional_districts</span>(<span class="at">cb =</span> <span class="cn">TRUE</span>, <span class="at">year =</span> map_year)</span>
<span id="cb514-1409"><a href="#cb514-1409" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb514-1410"><a href="#cb514-1410" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb514-1411"><a href="#cb514-1411" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">" Cloud download failed. Loading from local file instead..."</span>)</span>
<span id="cb514-1412"><a href="#cb514-1412" aria-hidden="true" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_read</span>(local_paths[[<span class="fu">as.character</span>(congress_num)]], <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-1413"><a href="#cb514-1413" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-1414"><a href="#cb514-1414" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1415"><a href="#cb514-1415" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1416"><a href="#cb514-1416" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- map data cleaning ----</span></span>
<span id="cb514-1417"><a href="#cb514-1417" aria-hidden="true" tabindex="-1"></a>  cd_map <span class="ot">&lt;-</span> cd_map <span class="sc">%&gt;%</span></span>
<span id="cb514-1418"><a href="#cb514-1418" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-1419"><a href="#cb514-1419" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_code =</span> <span class="fu">fips_to_state</span>(STATEFP),</span>
<span id="cb514-1420"><a href="#cb514-1420" aria-hidden="true" tabindex="-1"></a>      <span class="at">district_code =</span> <span class="fu">as.character</span>(<span class="sc">!!</span>rlang<span class="sc">::</span><span class="fu">sym</span>(district_col)),</span>
<span id="cb514-1421"><a href="#cb514-1421" aria-hidden="true" tabindex="-1"></a>      <span class="at">district_clean =</span> <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, <span class="fu">as.integer</span>(district_code)),</span>
<span id="cb514-1422"><a href="#cb514-1422" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_district =</span> stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="fu">paste0</span>(state_code, <span class="st">"-"</span>, district_clean))</span>
<span id="cb514-1423"><a href="#cb514-1423" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-1424"><a href="#cb514-1424" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1425"><a href="#cb514-1425" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- decision data preparing ----</span></span>
<span id="cb514-1426"><a href="#cb514-1426" aria-hidden="true" tabindex="-1"></a>  decision_df <span class="ot">&lt;-</span> decision_data <span class="sc">%&gt;%</span></span>
<span id="cb514-1427"><a href="#cb514-1427" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="fu">as.character</span>(congress_num)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1428"><a href="#cb514-1428" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-1429"><a href="#cb514-1429" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_district =</span> stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="fu">as.character</span>(state_district)),</span>
<span id="cb514-1430"><a href="#cb514-1430" aria-hidden="true" tabindex="-1"></a>      <span class="at">party =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-1431"><a href="#cb514-1431" aria-hidden="true" tabindex="-1"></a>        party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"R"</span>, <span class="st">"Republican"</span>, <span class="st">"REP"</span>) <span class="sc">~</span> <span class="st">"R"</span>,</span>
<span id="cb514-1432"><a href="#cb514-1432" aria-hidden="true" tabindex="-1"></a>        party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"D"</span>, <span class="st">"Democratic"</span>, <span class="st">"DEM"</span>) <span class="sc">~</span> <span class="st">"D"</span>,</span>
<span id="cb514-1433"><a href="#cb514-1433" aria-hidden="true" tabindex="-1"></a>        party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"I"</span>, <span class="st">"Independent"</span>, <span class="st">"IND"</span>) <span class="sc">~</span> <span class="st">"I"</span>,</span>
<span id="cb514-1434"><a href="#cb514-1434" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb514-1435"><a href="#cb514-1435" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb514-1436"><a href="#cb514-1436" aria-hidden="true" tabindex="-1"></a>      <span class="at">decision =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-1437"><a href="#cb514-1437" aria-hidden="true" tabindex="-1"></a>        decision <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"intl"</span>, <span class="st">"international"</span>) <span class="sc">~</span> <span class="st">"intl"</span>,</span>
<span id="cb514-1438"><a href="#cb514-1438" aria-hidden="true" tabindex="-1"></a>        decision <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"dom"</span>, <span class="st">"domestic"</span>) <span class="sc">~</span> <span class="st">"dom"</span>,</span>
<span id="cb514-1439"><a href="#cb514-1439" aria-hidden="true" tabindex="-1"></a>        decision <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"prof"</span>, <span class="st">"professional"</span>) <span class="sc">~</span> <span class="st">"prof"</span>,</span>
<span id="cb514-1440"><a href="#cb514-1440" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb514-1441"><a href="#cb514-1441" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-1442"><a href="#cb514-1442" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-1443"><a href="#cb514-1443" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1444"><a href="#cb514-1444" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- join map ----</span></span>
<span id="cb514-1445"><a href="#cb514-1445" aria-hidden="true" tabindex="-1"></a>  plot_df <span class="ot">&lt;-</span> cd_map <span class="sc">%&gt;%</span></span>
<span id="cb514-1446"><a href="#cb514-1446" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(decision_df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(state_district, decision, party),</span>
<span id="cb514-1447"><a href="#cb514-1447" aria-hidden="true" tabindex="-1"></a>              <span class="at">by =</span> <span class="st">"state_district"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-1448"><a href="#cb514-1448" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-1449"><a href="#cb514-1449" aria-hidden="true" tabindex="-1"></a>      <span class="at">group_var =</span> <span class="fu">ifelse</span>(</span>
<span id="cb514-1450"><a href="#cb514-1450" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(party) <span class="sc">|</span> <span class="fu">is.na</span>(decision) <span class="sc">|</span> party <span class="sc">==</span> <span class="st">""</span> <span class="sc">|</span> decision <span class="sc">==</span> <span class="st">""</span>,</span>
<span id="cb514-1451"><a href="#cb514-1451" aria-hidden="true" tabindex="-1"></a>        <span class="st">"missing"</span>,</span>
<span id="cb514-1452"><a href="#cb514-1452" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(party, <span class="st">"_"</span>, decision)</span>
<span id="cb514-1453"><a href="#cb514-1453" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-1454"><a href="#cb514-1454" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-1455"><a href="#cb514-1455" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1456"><a href="#cb514-1456" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- color scheme ----</span></span>
<span id="cb514-1457"><a href="#cb514-1457" aria-hidden="true" tabindex="-1"></a>  pal_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb514-1458"><a href="#cb514-1458" aria-hidden="true" tabindex="-1"></a>    <span class="st">"R_intl"</span> <span class="ot">=</span> <span class="st">"#ef8a62"</span>, <span class="st">"R_dom"</span> <span class="ot">=</span> <span class="st">"#b2182b"</span>, <span class="st">"R_prof"</span> <span class="ot">=</span> <span class="st">"#fddbc7"</span>,</span>
<span id="cb514-1459"><a href="#cb514-1459" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I_intl"</span> <span class="ot">=</span> <span class="st">"#9e9ac8"</span>, <span class="st">"I_dom"</span> <span class="ot">=</span> <span class="st">"#756bb1"</span>, <span class="st">"I_prof"</span> <span class="ot">=</span> <span class="st">"#dadaeb"</span>,</span>
<span id="cb514-1460"><a href="#cb514-1460" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D_intl"</span> <span class="ot">=</span> <span class="st">"#67a9cf"</span>, <span class="st">"D_dom"</span> <span class="ot">=</span> <span class="st">"#2166ac"</span>, <span class="st">"D_prof"</span> <span class="ot">=</span> <span class="st">"#d1e5f0"</span>,</span>
<span id="cb514-1461"><a href="#cb514-1461" aria-hidden="true" tabindex="-1"></a>    <span class="st">"missing"</span> <span class="ot">=</span> <span class="st">"grey80"</span></span>
<span id="cb514-1462"><a href="#cb514-1462" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1463"><a href="#cb514-1463" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1464"><a href="#cb514-1464" aria-hidden="true" tabindex="-1"></a>  all_levels <span class="ot">&lt;-</span> <span class="fu">names</span>(pal_vec)</span>
<span id="cb514-1465"><a href="#cb514-1465" aria-hidden="true" tabindex="-1"></a>  plot_df <span class="ot">&lt;-</span> plot_df <span class="sc">%&gt;%</span></span>
<span id="cb514-1466"><a href="#cb514-1466" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">group_var =</span> <span class="fu">factor</span>(group_var, <span class="at">levels =</span> all_levels))</span>
<span id="cb514-1467"><a href="#cb514-1467" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1468"><a href="#cb514-1468" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- main map ----</span></span>
<span id="cb514-1469"><a href="#cb514-1469" aria-hidden="true" tabindex="-1"></a>  main_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plot_df) <span class="sc">+</span></span>
<span id="cb514-1470"><a href="#cb514-1470" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> group_var), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb514-1471"><a href="#cb514-1471" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal_vec, <span class="at">drop =</span> <span class="cn">FALSE</span>, <span class="at">name =</span> <span class="st">"Party + Decision"</span>) <span class="sc">+</span></span>
<span id="cb514-1472"><a href="#cb514-1472" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb514-1473"><a href="#cb514-1473" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">paste0</span>(</span>
<span id="cb514-1474"><a href="#cb514-1474" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ifelse</span>(model_type <span class="sc">==</span> <span class="st">"adver"</span>, <span class="st">"Adver"</span>, <span class="st">"Legis"</span>),</span>
<span id="cb514-1475"><a href="#cb514-1475" aria-hidden="true" tabindex="-1"></a>        <span class="st">" Decision Mode by District ("</span>, congress_num, <span class="st">"th Congress)"</span></span>
<span id="cb514-1476"><a href="#cb514-1476" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-1477"><a href="#cb514-1477" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-1478"><a href="#cb514-1478" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb514-1479"><a href="#cb514-1479" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb514-1480"><a href="#cb514-1480" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">125</span>, <span class="sc">-</span><span class="dv">65</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">50</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span>
<span id="cb514-1481"><a href="#cb514-1481" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1482"><a href="#cb514-1482" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Alaska &amp; Hawaii ----</span></span>
<span id="cb514-1483"><a href="#cb514-1483" aria-hidden="true" tabindex="-1"></a>  alaska_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(plot_df, state_code <span class="sc">==</span> <span class="st">"AK"</span>)) <span class="sc">+</span></span>
<span id="cb514-1484"><a href="#cb514-1484" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> group_var), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb514-1485"><a href="#cb514-1485" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal_vec, <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb514-1486"><a href="#cb514-1486" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">180</span>, <span class="sc">-</span><span class="dv">130</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">72</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb514-1487"><a href="#cb514-1487" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span>
<span id="cb514-1488"><a href="#cb514-1488" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1489"><a href="#cb514-1489" aria-hidden="true" tabindex="-1"></a>  hawaii_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(plot_df, state_code <span class="sc">==</span> <span class="st">"HI"</span>)) <span class="sc">+</span></span>
<span id="cb514-1490"><a href="#cb514-1490" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> group_var), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb514-1491"><a href="#cb514-1491" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal_vec, <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb514-1492"><a href="#cb514-1492" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">161</span>, <span class="sc">-</span><span class="dv">154</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">23</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb514-1493"><a href="#cb514-1493" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span>
<span id="cb514-1494"><a href="#cb514-1494" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1495"><a href="#cb514-1495" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- combine ----</span></span>
<span id="cb514-1496"><a href="#cb514-1496" aria-hidden="true" tabindex="-1"></a>  final_map <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">ggdraw</span>() <span class="sc">+</span></span>
<span id="cb514-1497"><a href="#cb514-1497" aria-hidden="true" tabindex="-1"></a>    cowplot<span class="sc">::</span><span class="fu">draw_plot</span>(main_map, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb514-1498"><a href="#cb514-1498" aria-hidden="true" tabindex="-1"></a>    cowplot<span class="sc">::</span><span class="fu">draw_plot</span>(alaska_map, <span class="at">x =</span> <span class="fl">0.03</span>, <span class="at">y =</span> <span class="fl">0.15</span>, <span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">height =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb514-1499"><a href="#cb514-1499" aria-hidden="true" tabindex="-1"></a>    cowplot<span class="sc">::</span><span class="fu">draw_plot</span>(hawaii_map, <span class="at">x =</span> <span class="fl">0.20</span>, <span class="at">y =</span> <span class="fl">0.15</span>, <span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">height =</span> <span class="fl">0.25</span>)</span>
<span id="cb514-1500"><a href="#cb514-1500" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1501"><a href="#cb514-1501" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(save_path)) {</span>
<span id="cb514-1502"><a href="#cb514-1502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save_to_output</span>(</span>
<span id="cb514-1503"><a href="#cb514-1503" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> save_path,</span>
<span id="cb514-1504"><a href="#cb514-1504" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot =</span> final_map,</span>
<span id="cb514-1505"><a href="#cb514-1505" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> save_width,</span>
<span id="cb514-1506"><a href="#cb514-1506" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> save_height</span>
<span id="cb514-1507"><a href="#cb514-1507" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1508"><a href="#cb514-1508" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-1509"><a href="#cb514-1509" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1510"><a href="#cb514-1510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(final_map)</span>
<span id="cb514-1511"><a href="#cb514-1511" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-1512"><a href="#cb514-1512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1513"><a href="#cb514-1513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1516"><a href="#cb514-1516" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1517"><a href="#cb514-1517" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: map function application</span></span>
<span id="cb514-1518"><a href="#cb514-1518" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1519"><a href="#cb514-1519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1520"><a href="#cb514-1520" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-1521"><a href="#cb514-1521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1522"><a href="#cb514-1522" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_decision_map_by_congress</span>(<span class="dv">115</span>, legis_cg_heatmap, <span class="at">model_type =</span> <span class="st">"legis"</span>,</span>
<span id="cb514-1523"><a href="#cb514-1523" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save_path =</span> <span class="st">"maps/legis_115_map.png"</span>)</span>
<span id="cb514-1524"><a href="#cb514-1524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1525"><a href="#cb514-1525" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_decision_map_by_congress</span>(<span class="dv">116</span>, legis_cg_heatmap, <span class="at">model_type =</span> <span class="st">"legis"</span>,</span>
<span id="cb514-1526"><a href="#cb514-1526" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save_path =</span> <span class="st">"maps/legis_116_map.png"</span>)</span>
<span id="cb514-1527"><a href="#cb514-1527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1528"><a href="#cb514-1528" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_decision_map_by_congress</span>(<span class="dv">117</span>, legis_cg_heatmap, <span class="at">model_type =</span> <span class="st">"legis"</span>,</span>
<span id="cb514-1529"><a href="#cb514-1529" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save_path =</span> <span class="st">"maps/legis_117_map.png"</span>)</span>
<span id="cb514-1530"><a href="#cb514-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1531"><a href="#cb514-1531" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_decision_map_by_congress</span>(<span class="dv">118</span>, legis_cg_heatmap, <span class="at">model_type =</span> <span class="st">"legis"</span>,</span>
<span id="cb514-1532"><a href="#cb514-1532" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save_path =</span> <span class="st">"maps/legis_118_map.png"</span>)</span>
<span id="cb514-1533"><a href="#cb514-1533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1534"><a href="#cb514-1534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1535"><a href="#cb514-1535" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3.2.4 senate map function (need further debug)</span></span>
<span id="cb514-1536"><a href="#cb514-1536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1539"><a href="#cb514-1539" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1540"><a href="#cb514-1540" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: senate map function</span></span>
<span id="cb514-1541"><a href="#cb514-1541" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1542"><a href="#cb514-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1543"><a href="#cb514-1543" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------ senate map functionneeds further debug ------------------</span></span>
<span id="cb514-1544"><a href="#cb514-1544" aria-hidden="true" tabindex="-1"></a><span class="co">#plot_decision_map_by_congress_senate_debug &lt;- function(congress_num,</span></span>
<span id="cb514-1545"><a href="#cb514-1545" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                       decision_data,</span></span>
<span id="cb514-1546"><a href="#cb514-1546" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                       model_type = c("adver", "legis"),</span></span>
<span id="cb514-1547"><a href="#cb514-1547" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                       save_path = NULL,</span></span>
<span id="cb514-1548"><a href="#cb514-1548" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                       save_width = 10,</span></span>
<span id="cb514-1549"><a href="#cb514-1549" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                       save_height = 7,</span></span>
<span id="cb514-1550"><a href="#cb514-1550" aria-hidden="true" tabindex="-1"></a><span class="co">#                                                       shapefile_path = #"cb_2020_us_state_20m/cb_2020_us_state_20m.shp") {</span></span>
<span id="cb514-1551"><a href="#cb514-1551" aria-hidden="true" tabindex="-1"></a><span class="co">#  library(dplyr)</span></span>
<span id="cb514-1552"><a href="#cb514-1552" aria-hidden="true" tabindex="-1"></a><span class="co">#  library(sf)</span></span>
<span id="cb514-1553"><a href="#cb514-1553" aria-hidden="true" tabindex="-1"></a><span class="co">#  library(ggplot2)</span></span>
<span id="cb514-1554"><a href="#cb514-1554" aria-hidden="true" tabindex="-1"></a><span class="co">#  library(stringr)</span></span>
<span id="cb514-1555"><a href="#cb514-1555" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1556"><a href="#cb514-1556" aria-hidden="true" tabindex="-1"></a><span class="co">#  model_type &lt;- match.arg(model_type)</span></span>
<span id="cb514-1557"><a href="#cb514-1557" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1558"><a href="#cb514-1558" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat("???? ...\n")</span></span>
<span id="cb514-1559"><a href="#cb514-1559" aria-hidden="true" tabindex="-1"></a><span class="co">#  states_map &lt;- sf::st_read(shapefile_path, quiet = TRUE) %&gt;%</span></span>
<span id="cb514-1560"><a href="#cb514-1560" aria-hidden="true" tabindex="-1"></a><span class="co">#    filter(!STUSPS %in% c("PR", "VI", "GU", "MP", "AS")) %&gt;%</span></span>
<span id="cb514-1561"><a href="#cb514-1561" aria-hidden="true" tabindex="-1"></a><span class="co">#    mutate(state_code = toupper(STUSPS))</span></span>
<span id="cb514-1562"><a href="#cb514-1562" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1563"><a href="#cb514-1563" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat(":\n")</span></span>
<span id="cb514-1564"><a href="#cb514-1564" aria-hidden="true" tabindex="-1"></a><span class="co">#  print(head(states_map %&gt;% st_drop_geometry() %&gt;% select(STATEFP, STUSPS, state_code)))</span></span>
<span id="cb514-1565"><a href="#cb514-1565" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1566"><a href="#cb514-1566" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat("???? ...\n")</span></span>
<span id="cb514-1567"><a href="#cb514-1567" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1568"><a href="#cb514-1568" aria-hidden="true" tabindex="-1"></a><span class="co">#  decision_df &lt;- decision_data %&gt;%</span></span>
<span id="cb514-1569"><a href="#cb514-1569" aria-hidden="true" tabindex="-1"></a><span class="co">#    filter(congress == as.character(congress_num)) %&gt;%</span></span>
<span id="cb514-1570"><a href="#cb514-1570" aria-hidden="true" tabindex="-1"></a><span class="co">#    mutate(</span></span>
<span id="cb514-1571"><a href="#cb514-1571" aria-hidden="true" tabindex="-1"></a><span class="co">#      state_code = toupper(str_trim(as.character(state_code))),</span></span>
<span id="cb514-1572"><a href="#cb514-1572" aria-hidden="true" tabindex="-1"></a><span class="co">#      party = as.character(party),</span></span>
<span id="cb514-1573"><a href="#cb514-1573" aria-hidden="true" tabindex="-1"></a><span class="co">#      decision = as.character(decision)</span></span>
<span id="cb514-1574"><a href="#cb514-1574" aria-hidden="true" tabindex="-1"></a><span class="co">#    ) %&gt;%</span></span>
<span id="cb514-1575"><a href="#cb514-1575" aria-hidden="true" tabindex="-1"></a><span class="co">#    group_by(state_code) %&gt;%</span></span>
<span id="cb514-1576"><a href="#cb514-1576" aria-hidden="true" tabindex="-1"></a><span class="co">#    summarize(</span></span>
<span id="cb514-1577"><a href="#cb514-1577" aria-hidden="true" tabindex="-1"></a><span class="co">#      party = first(na.omit(party)),</span></span>
<span id="cb514-1578"><a href="#cb514-1578" aria-hidden="true" tabindex="-1"></a><span class="co">#      decision = first(na.omit(decision)),</span></span>
<span id="cb514-1579"><a href="#cb514-1579" aria-hidden="true" tabindex="-1"></a><span class="co">#      group_var = ifelse(</span></span>
<span id="cb514-1580"><a href="#cb514-1580" aria-hidden="true" tabindex="-1"></a><span class="co">#        is.na(party) | is.na(decision) | party == "" | decision == "",</span></span>
<span id="cb514-1581"><a href="#cb514-1581" aria-hidden="true" tabindex="-1"></a><span class="co">#        "missing",</span></span>
<span id="cb514-1582"><a href="#cb514-1582" aria-hidden="true" tabindex="-1"></a><span class="co">#        paste0(party, "_", decision)</span></span>
<span id="cb514-1583"><a href="#cb514-1583" aria-hidden="true" tabindex="-1"></a><span class="co">#      ),</span></span>
<span id="cb514-1584"><a href="#cb514-1584" aria-hidden="true" tabindex="-1"></a><span class="co">#      .groups = "drop"</span></span>
<span id="cb514-1585"><a href="#cb514-1585" aria-hidden="true" tabindex="-1"></a><span class="co">#    )</span></span>
<span id="cb514-1586"><a href="#cb514-1586" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1587"><a href="#cb514-1587" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat(":\n")</span></span>
<span id="cb514-1588"><a href="#cb514-1588" aria-hidden="true" tabindex="-1"></a><span class="co">#  print(head(decision_df))</span></span>
<span id="cb514-1589"><a href="#cb514-1589" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1590"><a href="#cb514-1590" aria-hidden="true" tabindex="-1"></a><span class="co">#  missing_states &lt;- setdiff(decision_df$state_code, states_map$state_code)</span></span>
<span id="cb514-1591"><a href="#cb514-1591" aria-hidden="true" tabindex="-1"></a><span class="co">#  if (length(missing_states) &gt; 0) {</span></span>
<span id="cb514-1592"><a href="#cb514-1592" aria-hidden="true" tabindex="-1"></a><span class="co">#    warning(" state_code : ", paste(missing_states, collapse = ", #"))</span></span>
<span id="cb514-1593"><a href="#cb514-1593" aria-hidden="true" tabindex="-1"></a><span class="co">#  } else {</span></span>
<span id="cb514-1594"><a href="#cb514-1594" aria-hidden="true" tabindex="-1"></a><span class="co">#    cat("???  state_code \n")</span></span>
<span id="cb514-1595"><a href="#cb514-1595" aria-hidden="true" tabindex="-1"></a><span class="co">#  }</span></span>
<span id="cb514-1596"><a href="#cb514-1596" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1597"><a href="#cb514-1597" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat("???? ...\n")</span></span>
<span id="cb514-1598"><a href="#cb514-1598" aria-hidden="true" tabindex="-1"></a><span class="co">#  state_centroids &lt;- states_map %&gt;%</span></span>
<span id="cb514-1599"><a href="#cb514-1599" aria-hidden="true" tabindex="-1"></a><span class="co">#    st_centroid() %&gt;%</span></span>
<span id="cb514-1600"><a href="#cb514-1600" aria-hidden="true" tabindex="-1"></a><span class="co">#    st_coordinates() %&gt;%</span></span>
<span id="cb514-1601"><a href="#cb514-1601" aria-hidden="true" tabindex="-1"></a><span class="co">#    as.data.frame() %&gt;%</span></span>
<span id="cb514-1602"><a href="#cb514-1602" aria-hidden="true" tabindex="-1"></a><span class="co">#    mutate(state_code = states_map$state_code)</span></span>
<span id="cb514-1603"><a href="#cb514-1603" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1604"><a href="#cb514-1604" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat(":\n")</span></span>
<span id="cb514-1605"><a href="#cb514-1605" aria-hidden="true" tabindex="-1"></a><span class="co">#  print(head(state_centroids))</span></span>
<span id="cb514-1606"><a href="#cb514-1606" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1607"><a href="#cb514-1607" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat("???? ...\n")</span></span>
<span id="cb514-1608"><a href="#cb514-1608" aria-hidden="true" tabindex="-1"></a><span class="co">#  plot_points &lt;- decision_df %&gt;%</span></span>
<span id="cb514-1609"><a href="#cb514-1609" aria-hidden="true" tabindex="-1"></a><span class="co">#    left_join(state_centroids, by = "state_code")</span></span>
<span id="cb514-1610"><a href="#cb514-1610" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1611"><a href="#cb514-1611" aria-hidden="true" tabindex="-1"></a><span class="co">#  cat(":\n")</span></span>
<span id="cb514-1612"><a href="#cb514-1612" aria-hidden="true" tabindex="-1"></a><span class="co">#  print(head(plot_points))</span></span>
<span id="cb514-1613"><a href="#cb514-1613" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1614"><a href="#cb514-1614" aria-hidden="true" tabindex="-1"></a><span class="co">#  if (nrow(plot_points) == 0) {</span></span>
<span id="cb514-1615"><a href="#cb514-1615" aria-hidden="true" tabindex="-1"></a><span class="co">#    stop("???  state_code ")</span></span>
<span id="cb514-1616"><a href="#cb514-1616" aria-hidden="true" tabindex="-1"></a><span class="co">#  }</span></span>
<span id="cb514-1617"><a href="#cb514-1617" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1618"><a href="#cb514-1618" aria-hidden="true" tabindex="-1"></a><span class="co">#  plot_points &lt;- plot_points %&gt;%</span></span>
<span id="cb514-1619"><a href="#cb514-1619" aria-hidden="true" tabindex="-1"></a><span class="co">#    group_by(state_code) %&gt;%</span></span>
<span id="cb514-1620"><a href="#cb514-1620" aria-hidden="true" tabindex="-1"></a><span class="co">#    mutate(</span></span>
<span id="cb514-1621"><a href="#cb514-1621" aria-hidden="true" tabindex="-1"></a><span class="co">#      X = X + runif(n(), -0.3, 0.3),</span></span>
<span id="cb514-1622"><a href="#cb514-1622" aria-hidden="true" tabindex="-1"></a><span class="co">#      Y = Y + runif(n(), -0.3, 0.3)</span></span>
<span id="cb514-1623"><a href="#cb514-1623" aria-hidden="true" tabindex="-1"></a><span class="co">#    ) %&gt;%</span></span>
<span id="cb514-1624"><a href="#cb514-1624" aria-hidden="true" tabindex="-1"></a><span class="co">#    ungroup()</span></span>
<span id="cb514-1625"><a href="#cb514-1625" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1626"><a href="#cb514-1626" aria-hidden="true" tabindex="-1"></a><span class="co">#  pal_vec &lt;- c(</span></span>
<span id="cb514-1627"><a href="#cb514-1627" aria-hidden="true" tabindex="-1"></a><span class="co">#    "R_intl"  = "#b2182b", "R_dom"   = "#ef8a62", "R_prof"  = "#fddbc7",</span></span>
<span id="cb514-1628"><a href="#cb514-1628" aria-hidden="true" tabindex="-1"></a><span class="co">#    "I_intl"  = "#756bb1", "I_dom"   = "#9e9ac8", "I_prof"  = "#dadaeb",</span></span>
<span id="cb514-1629"><a href="#cb514-1629" aria-hidden="true" tabindex="-1"></a><span class="co">#    "D_intl"  = "#2166ac", "D_dom"   = "#67a9cf", "D_prof"  = "#d1e5f0",</span></span>
<span id="cb514-1630"><a href="#cb514-1630" aria-hidden="true" tabindex="-1"></a><span class="co">#    "missing" = "grey80"</span></span>
<span id="cb514-1631"><a href="#cb514-1631" aria-hidden="true" tabindex="-1"></a><span class="co">#  )</span></span>
<span id="cb514-1632"><a href="#cb514-1632" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1633"><a href="#cb514-1633" aria-hidden="true" tabindex="-1"></a><span class="co">#  all_levels &lt;- c("R_intl","R_dom","R_prof",</span></span>
<span id="cb514-1634"><a href="#cb514-1634" aria-hidden="true" tabindex="-1"></a><span class="co">#                  "I_intl","I_dom","I_prof",</span></span>
<span id="cb514-1635"><a href="#cb514-1635" aria-hidden="true" tabindex="-1"></a><span class="co">#                  "D_intl","D_dom","D_prof",</span></span>
<span id="cb514-1636"><a href="#cb514-1636" aria-hidden="true" tabindex="-1"></a><span class="co">#                  "missing")</span></span>
<span id="cb514-1637"><a href="#cb514-1637" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1638"><a href="#cb514-1638" aria-hidden="true" tabindex="-1"></a><span class="co">#  plot_points &lt;- plot_points %&gt;%</span></span>
<span id="cb514-1639"><a href="#cb514-1639" aria-hidden="true" tabindex="-1"></a><span class="co">#    mutate(group_var = factor(group_var, levels = all_levels))</span></span>
<span id="cb514-1640"><a href="#cb514-1640" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1641"><a href="#cb514-1641" aria-hidden="true" tabindex="-1"></a><span class="co">#  pal_vec &lt;- pal_vec[names(pal_vec) %in% levels(plot_points$group_var)]</span></span>
<span id="cb514-1642"><a href="#cb514-1642" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1643"><a href="#cb514-1643" aria-hidden="true" tabindex="-1"></a><span class="co">#  main_map &lt;- ggplot() +</span></span>
<span id="cb514-1644"><a href="#cb514-1644" aria-hidden="true" tabindex="-1"></a><span class="co">#    geom_sf(data = states_map, fill = "white", color = "black", size = 0.2) +</span></span>
<span id="cb514-1645"><a href="#cb514-1645" aria-hidden="true" tabindex="-1"></a><span class="co">#    geom_point(data = plot_points,</span></span>
<span id="cb514-1646"><a href="#cb514-1646" aria-hidden="true" tabindex="-1"></a><span class="co">#               aes(x = X, y = Y, fill = group_var),</span></span>
<span id="cb514-1647"><a href="#cb514-1647" aria-hidden="true" tabindex="-1"></a><span class="co">#               shape = 21, size = 3, color = "black") +</span></span>
<span id="cb514-1648"><a href="#cb514-1648" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_manual(values = pal_vec, drop = FALSE, name = "Party + Decision") +</span></span>
<span id="cb514-1649"><a href="#cb514-1649" aria-hidden="true" tabindex="-1"></a><span class="co">#    labs(</span></span>
<span id="cb514-1650"><a href="#cb514-1650" aria-hidden="true" tabindex="-1"></a><span class="co">#      title = paste0(ifelse(model_type == "adver", "Adver", "Legis"),</span></span>
<span id="cb514-1651"><a href="#cb514-1651" aria-hidden="true" tabindex="-1"></a><span class="co">#                     " Senate Decision Mode by State (", congress_num, "th)")</span></span>
<span id="cb514-1652"><a href="#cb514-1652" aria-hidden="true" tabindex="-1"></a><span class="co">#    ) +</span></span>
<span id="cb514-1653"><a href="#cb514-1653" aria-hidden="true" tabindex="-1"></a><span class="co">#    theme_minimal(base_size = 14) +</span></span>
<span id="cb514-1654"><a href="#cb514-1654" aria-hidden="true" tabindex="-1"></a><span class="co">#    theme(legend.position = "bottom") +</span></span>
<span id="cb514-1655"><a href="#cb514-1655" aria-hidden="true" tabindex="-1"></a><span class="co">#    coord_sf(xlim = c(-125, -65), ylim = c(24, 50), expand = FALSE)</span></span>
<span id="cb514-1656"><a href="#cb514-1656" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1657"><a href="#cb514-1657" aria-hidden="true" tabindex="-1"></a><span class="co">#  if (!is.null(save_path)) {</span></span>
<span id="cb514-1658"><a href="#cb514-1658" aria-hidden="true" tabindex="-1"></a><span class="co">#    save_to_output(filename = save_path, plot = main_map, width = save_width, height = #save_height)</span></span>
<span id="cb514-1659"><a href="#cb514-1659" aria-hidden="true" tabindex="-1"></a><span class="co">#  }</span></span>
<span id="cb514-1660"><a href="#cb514-1660" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-1661"><a href="#cb514-1661" aria-hidden="true" tabindex="-1"></a><span class="co">#  return(list(</span></span>
<span id="cb514-1662"><a href="#cb514-1662" aria-hidden="true" tabindex="-1"></a><span class="co">#    plot = main_map,</span></span>
<span id="cb514-1663"><a href="#cb514-1663" aria-hidden="true" tabindex="-1"></a><span class="co">#    states_map = states_map,</span></span>
<span id="cb514-1664"><a href="#cb514-1664" aria-hidden="true" tabindex="-1"></a><span class="co">#    decision_df = decision_df,</span></span>
<span id="cb514-1665"><a href="#cb514-1665" aria-hidden="true" tabindex="-1"></a><span class="co">#    state_centroids = state_centroids,</span></span>
<span id="cb514-1666"><a href="#cb514-1666" aria-hidden="true" tabindex="-1"></a><span class="co">#    plot_points = plot_points</span></span>
<span id="cb514-1667"><a href="#cb514-1667" aria-hidden="true" tabindex="-1"></a><span class="co">#  ))</span></span>
<span id="cb514-1668"><a href="#cb514-1668" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span>
<span id="cb514-1669"><a href="#cb514-1669" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1670"><a href="#cb514-1670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1673"><a href="#cb514-1673" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1674"><a href="#cb514-1674" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: senate map debug</span></span>
<span id="cb514-1675"><a href="#cb514-1675" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1676"><a href="#cb514-1676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1677"><a href="#cb514-1677" aria-hidden="true" tabindex="-1"></a><span class="co"># plot_decision_map_by_congress_senate_debug(</span></span>
<span id="cb514-1678"><a href="#cb514-1678" aria-hidden="true" tabindex="-1"></a><span class="co">#  115,</span></span>
<span id="cb514-1679"><a href="#cb514-1679" aria-hidden="true" tabindex="-1"></a><span class="co">#  adver_cg_heatmap1,</span></span>
<span id="cb514-1680"><a href="#cb514-1680" aria-hidden="true" tabindex="-1"></a><span class="co">#  model_type = "adver",</span></span>
<span id="cb514-1681"><a href="#cb514-1681" aria-hidden="true" tabindex="-1"></a><span class="co">#  save_path = "adver_115_map_state.png",</span></span>
<span id="cb514-1682"><a href="#cb514-1682" aria-hidden="true" tabindex="-1"></a><span class="co">#  shapefile_path = "cb_2020_us_state_20m/cb_2020_us_state_20m.shp"</span></span>
<span id="cb514-1683"><a href="#cb514-1683" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb514-1684"><a href="#cb514-1684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1685"><a href="#cb514-1685" aria-hidden="true" tabindex="-1"></a><span class="co">#unique(states_map$state_code)</span></span>
<span id="cb514-1686"><a href="#cb514-1686" aria-hidden="true" tabindex="-1"></a><span class="co">#unique(adver_cg_heatmap1$state_code)</span></span>
<span id="cb514-1687"><a href="#cb514-1687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1688"><a href="#cb514-1688" aria-hidden="true" tabindex="-1"></a><span class="co"># map cleansing ----</span></span>
<span id="cb514-1689"><a href="#cb514-1689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1690"><a href="#cb514-1690" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.  shapefile</span></span>
<span id="cb514-1691"><a href="#cb514-1691" aria-hidden="true" tabindex="-1"></a><span class="co">#states_map &lt;- st_read("cb_2020_us_state_20m/cb_2020_us_state_20m.shp")</span></span>
<span id="cb514-1692"><a href="#cb514-1692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1693"><a href="#cb514-1693" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. </span></span>
<span id="cb514-1694"><a href="#cb514-1694" aria-hidden="true" tabindex="-1"></a><span class="co">#states_map &lt;- states_map %&gt;% </span></span>
<span id="cb514-1695"><a href="#cb514-1695" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(!STUSPS %in% c("PR", "VI", "GU", "MP", "AS"))</span></span>
<span id="cb514-1696"><a href="#cb514-1696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1697"><a href="#cb514-1697" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.  STUSPS  state_code</span></span>
<span id="cb514-1698"><a href="#cb514-1698" aria-hidden="true" tabindex="-1"></a><span class="co">#states_map &lt;- states_map %&gt;%</span></span>
<span id="cb514-1699"><a href="#cb514-1699" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(state_code = STUSPS)</span></span>
<span id="cb514-1700"><a href="#cb514-1700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1701"><a href="#cb514-1701" aria-hidden="true" tabindex="-1"></a><span class="co"># 4.  shapefile </span></span>
<span id="cb514-1702"><a href="#cb514-1702" aria-hidden="true" tabindex="-1"></a><span class="co">#plot_df &lt;- states_map %&gt;%</span></span>
<span id="cb514-1703"><a href="#cb514-1703" aria-hidden="true" tabindex="-1"></a><span class="co">#  left_join(adver_cg_heatmap1 %&gt;% </span></span>
<span id="cb514-1704"><a href="#cb514-1704" aria-hidden="true" tabindex="-1"></a><span class="co">#              select(state_code, decision, party),</span></span>
<span id="cb514-1705"><a href="#cb514-1705" aria-hidden="true" tabindex="-1"></a><span class="co">#            by = "state_code") %&gt;%</span></span>
<span id="cb514-1706"><a href="#cb514-1706" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(</span></span>
<span id="cb514-1707"><a href="#cb514-1707" aria-hidden="true" tabindex="-1"></a><span class="co">#    party = as.character(party),</span></span>
<span id="cb514-1708"><a href="#cb514-1708" aria-hidden="true" tabindex="-1"></a><span class="co">#    decision = as.character(decision),</span></span>
<span id="cb514-1709"><a href="#cb514-1709" aria-hidden="true" tabindex="-1"></a><span class="co">#    group_var = ifelse(</span></span>
<span id="cb514-1710"><a href="#cb514-1710" aria-hidden="true" tabindex="-1"></a><span class="co">#      is.na(party) | is.na(decision) | party == "" | decision == "",</span></span>
<span id="cb514-1711"><a href="#cb514-1711" aria-hidden="true" tabindex="-1"></a><span class="co">#      "missing",</span></span>
<span id="cb514-1712"><a href="#cb514-1712" aria-hidden="true" tabindex="-1"></a><span class="co">#      paste0(party, "_", decision)</span></span>
<span id="cb514-1713"><a href="#cb514-1713" aria-hidden="true" tabindex="-1"></a><span class="co">#    )</span></span>
<span id="cb514-1714"><a href="#cb514-1714" aria-hidden="true" tabindex="-1"></a><span class="co">#  )</span></span>
<span id="cb514-1715"><a href="#cb514-1715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1716"><a href="#cb514-1716" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1717"><a href="#cb514-1717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1718"><a href="#cb514-1718" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4. overall descriptive analysis for issues</span></span>
<span id="cb514-1719"><a href="#cb514-1719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1720"><a href="#cb514-1720" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4.1 analysis based on bills data</span></span>
<span id="cb514-1721"><a href="#cb514-1721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1722"><a href="#cb514-1722" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4.1.1 bills data cleansing</span></span>
<span id="cb514-1723"><a href="#cb514-1723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1726"><a href="#cb514-1726" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1727"><a href="#cb514-1727" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: bills data cleansing</span></span>
<span id="cb514-1728"><a href="#cb514-1728" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1729"><a href="#cb514-1729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1730"><a href="#cb514-1730" aria-hidden="true" tabindex="-1"></a>bills_data_aug <span class="ot">&lt;-</span> bills_data <span class="sc">%&gt;%</span></span>
<span id="cb514-1731"><a href="#cb514-1731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="fu">as.integer</span>(congress)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1732"><a href="#cb514-1732" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-1733"><a href="#cb514-1733" aria-hidden="true" tabindex="-1"></a>    bioguide <span class="sc">%&gt;%</span></span>
<span id="cb514-1734"><a href="#cb514-1734" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="fu">as.integer</span>(congress)) <span class="sc">%&gt;%</span> </span>
<span id="cb514-1735"><a href="#cb514-1735" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, congress, chamber, gender, party),</span>
<span id="cb514-1736"><a href="#cb514-1736" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"bioguide_id"</span> <span class="ot">=</span> <span class="st">"bioguide_id"</span>, <span class="st">"congress"</span> <span class="ot">=</span> <span class="st">"congress"</span>)</span>
<span id="cb514-1737"><a href="#cb514-1737" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1738"><a href="#cb514-1738" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">!=</span> <span class="dv">119</span>) </span>
<span id="cb514-1739"><a href="#cb514-1739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1740"><a href="#cb514-1740" aria-hidden="true" tabindex="-1"></a>bills_data_aug <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-1741"><a href="#cb514-1741" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-1742"><a href="#cb514-1742" aria-hidden="true" tabindex="-1"></a>    legis_cg <span class="sc">%&gt;%</span></span>
<span id="cb514-1743"><a href="#cb514-1743" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">congress =</span> <span class="fu">as.integer</span>(congress)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1744"><a href="#cb514-1744" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(bioguide_id, congress, decision, intl_percentage, prof_percentage, dom_percentage),</span>
<span id="cb514-1745"><a href="#cb514-1745" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"bioguide_id"</span> <span class="ot">=</span> <span class="st">"bioguide_id"</span>, <span class="st">"congress"</span> <span class="ot">=</span> <span class="st">"congress"</span>)</span>
<span id="cb514-1746"><a href="#cb514-1746" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1747"><a href="#cb514-1747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1748"><a href="#cb514-1748" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bills_data_aug)</span>
<span id="cb514-1749"><a href="#cb514-1749" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(bills_data_aug<span class="sc">$</span>party))</span>
<span id="cb514-1750"><a href="#cb514-1750" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1751"><a href="#cb514-1751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1752"><a href="#cb514-1752" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4.1.2 issues have major change on bills data from 115th to 118th congress</span></span>
<span id="cb514-1753"><a href="#cb514-1753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1756"><a href="#cb514-1756" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1757"><a href="#cb514-1757" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: issues bills dramatic change</span></span>
<span id="cb514-1758"><a href="#cb514-1758" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1759"><a href="#cb514-1759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1760"><a href="#cb514-1760" aria-hidden="true" tabindex="-1"></a>issue_trend <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-1761"><a href="#cb514-1761" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1762"><a href="#cb514-1762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">news_count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1763"><a href="#cb514-1763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1764"><a href="#cb514-1764" aria-hidden="true" tabindex="-1"></a>issue_trend<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(issue_trend<span class="sc">$</span>congress)</span>
<span id="cb514-1765"><a href="#cb514-1765" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(issue_trend<span class="sc">$</span>congress)</span>
<span id="cb514-1766"><a href="#cb514-1766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1767"><a href="#cb514-1767" aria-hidden="true" tabindex="-1"></a><span class="co"># -----  -----</span></span>
<span id="cb514-1768"><a href="#cb514-1768" aria-hidden="true" tabindex="-1"></a>issue_trend_change <span class="ot">&lt;-</span> issue_trend <span class="sc">%&gt;%</span></span>
<span id="cb514-1769"><a href="#cb514-1769" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1770"><a href="#cb514-1770" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb514-1771"><a href="#cb514-1771" aria-hidden="true" tabindex="-1"></a>    <span class="at">change =</span> (news_count[congress <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">as.numeric</span>(congress))] <span class="sc">-</span> news_count[congress <span class="sc">==</span> <span class="fu">min</span>(<span class="fu">as.numeric</span>(congress))]) <span class="sc">/</span></span>
<span id="cb514-1772"><a href="#cb514-1772" aria-hidden="true" tabindex="-1"></a>             news_count[congress <span class="sc">==</span> <span class="fu">min</span>(<span class="fu">as.numeric</span>(congress))],</span>
<span id="cb514-1773"><a href="#cb514-1773" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb514-1774"><a href="#cb514-1774" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1775"><a href="#cb514-1775" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(change)))  <span class="co"># </span></span>
<span id="cb514-1776"><a href="#cb514-1776" aria-hidden="true" tabindex="-1"></a>top_issues <span class="ot">&lt;-</span> issue_trend_change <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(issue)</span>
<span id="cb514-1777"><a href="#cb514-1777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1778"><a href="#cb514-1778" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- plot -----</span></span>
<span id="cb514-1779"><a href="#cb514-1779" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(issue_trend <span class="sc">%&gt;%</span> <span class="fu">filter</span>(issue <span class="sc">%in%</span> top_issues),</span>
<span id="cb514-1780"><a href="#cb514-1780" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.numeric</span>(congress), <span class="at">y =</span> news_count, <span class="at">color =</span> issue)) <span class="sc">+</span></span>
<span id="cb514-1781"><a href="#cb514-1781" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb514-1782"><a href="#cb514-1782" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb514-1783"><a href="#cb514-1783" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-1784"><a href="#cb514-1784" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top Issues Trend Across Congress 115118"</span>,</span>
<span id="cb514-1785"><a href="#cb514-1785" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Congress"</span>,</span>
<span id="cb514-1786"><a href="#cb514-1786" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"bills number"</span>,</span>
<span id="cb514-1787"><a href="#cb514-1787" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"issue"</span></span>
<span id="cb514-1788"><a href="#cb514-1788" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1789"><a href="#cb514-1789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-1790"><a href="#cb514-1790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Paired"</span>) <span class="sc">+</span></span>
<span id="cb514-1791"><a href="#cb514-1791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb514-1792"><a href="#cb514-1792" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb514-1793"><a href="#cb514-1793" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)</span>
<span id="cb514-1794"><a href="#cb514-1794" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1795"><a href="#cb514-1795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1796"><a href="#cb514-1796" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"issue change most 115118_bills.png"</span>, <span class="at">plot =</span> p, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-1797"><a href="#cb514-1797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1798"><a href="#cb514-1798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1799"><a href="#cb514-1799" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4.1.3 bills trends plot for all issues</span></span>
<span id="cb514-1800"><a href="#cb514-1800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1803"><a href="#cb514-1803" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1804"><a href="#cb514-1804" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: issues bills all trend</span></span>
<span id="cb514-1805"><a href="#cb514-1805" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1806"><a href="#cb514-1806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1807"><a href="#cb514-1807" aria-hidden="true" tabindex="-1"></a>issue_trend_pct <span class="ot">&lt;-</span> issue_trend <span class="sc">%&gt;%</span></span>
<span id="cb514-1808"><a href="#cb514-1808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">&lt;=</span> <span class="dv">118</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb514-1809"><a href="#cb514-1809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-1810"><a href="#cb514-1810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb514-1811"><a href="#cb514-1811" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_news =</span> <span class="fu">sum</span>(news_count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-1812"><a href="#cb514-1812" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct =</span> (news_count <span class="sc">/</span> total_news) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb514-1813"><a href="#cb514-1813" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb514-1814"><a href="#cb514-1814" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb514-1815"><a href="#cb514-1815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1816"><a href="#cb514-1816" aria-hidden="true" tabindex="-1"></a>issue_trend_last <span class="ot">&lt;-</span> issue_trend_pct <span class="sc">%&gt;%</span></span>
<span id="cb514-1817"><a href="#cb514-1817" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1818"><a href="#cb514-1818" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="fu">max</span>(congress)) <span class="sc">%&gt;%</span></span>
<span id="cb514-1819"><a href="#cb514-1819" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb514-1820"><a href="#cb514-1820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1821"><a href="#cb514-1821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1822"><a href="#cb514-1822" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-1823"><a href="#cb514-1823" aria-hidden="true" tabindex="-1"></a>n_colors <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(issue_trend_pct<span class="sc">$</span>issue))</span>
<span id="cb514-1824"><a href="#cb514-1824" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb514-1825"><a href="#cb514-1825" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomcoloR)</span>
<span id="cb514-1826"><a href="#cb514-1826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1827"><a href="#cb514-1827" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb514-1828"><a href="#cb514-1828" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pal_npg</span>(<span class="st">"nrc"</span>)(<span class="dv">10</span>),</span>
<span id="cb514-1829"><a href="#cb514-1829" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pal_d3</span>(<span class="st">"category20"</span>)(<span class="dv">20</span>),</span>
<span id="cb514-1830"><a href="#cb514-1830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinctColorPalette</span>(n_colors)</span>
<span id="cb514-1831"><a href="#cb514-1831" aria-hidden="true" tabindex="-1"></a>)[<span class="dv">1</span><span class="sc">:</span>n_colors]</span>
<span id="cb514-1832"><a href="#cb514-1832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1833"><a href="#cb514-1833" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(issue_trend_pct, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.numeric</span>(congress), <span class="at">y =</span> pct, <span class="at">color =</span> issue)) <span class="sc">+</span></span>
<span id="cb514-1834"><a href="#cb514-1834" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb514-1835"><a href="#cb514-1835" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb514-1836"><a href="#cb514-1836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb514-1837"><a href="#cb514-1837" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> issue_trend_last,</span>
<span id="cb514-1838"><a href="#cb514-1838" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> issue),</span>
<span id="cb514-1839"><a href="#cb514-1839" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb514-1840"><a href="#cb514-1840" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="dv">1</span>,</span>
<span id="cb514-1841"><a href="#cb514-1841" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">"y"</span>,</span>
<span id="cb514-1842"><a href="#cb514-1842" aria-hidden="true" tabindex="-1"></a>    <span class="at">segment.size =</span> <span class="fl">0.2</span>,</span>
<span id="cb514-1843"><a href="#cb514-1843" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb514-1844"><a href="#cb514-1844" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1845"><a href="#cb514-1845" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-1846"><a href="#cb514-1846" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Issue Share per Congress (as % of total bills)"</span>,</span>
<span id="cb514-1847"><a href="#cb514-1847" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Congress"</span>,</span>
<span id="cb514-1848"><a href="#cb514-1848" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Share (%)"</span></span>
<span id="cb514-1849"><a href="#cb514-1849" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1850"><a href="#cb514-1850" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">115</span><span class="sc">:</span><span class="dv">118</span>) <span class="sc">+</span>  <span class="co">#  115118</span></span>
<span id="cb514-1851"><a href="#cb514-1851" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb514-1852"><a href="#cb514-1852" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-1853"><a href="#cb514-1853" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> colors) <span class="sc">+</span></span>
<span id="cb514-1854"><a href="#cb514-1854" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb514-1855"><a href="#cb514-1855" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb514-1856"><a href="#cb514-1856" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb514-1857"><a href="#cb514-1857" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb514-1858"><a href="#cb514-1858" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1859"><a href="#cb514-1859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1860"><a href="#cb514-1860" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb514-1861"><a href="#cb514-1861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1862"><a href="#cb514-1862" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"issue_share_per_congress_115118_bills.png"</span>, <span class="at">plot =</span> p, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">8</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-1863"><a href="#cb514-1863" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1864"><a href="#cb514-1864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1867"><a href="#cb514-1867" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1868"><a href="#cb514-1868" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: chamber party bills issue attention</span></span>
<span id="cb514-1869"><a href="#cb514-1869" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1870"><a href="#cb514-1870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1871"><a href="#cb514-1871" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-1872"><a href="#cb514-1872" aria-hidden="true" tabindex="-1"></a>issue_counts_mid <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-1873"><a href="#cb514-1873" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, chamber, party, bioguide_id, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1874"><a href="#cb514-1874" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_issue_mentions =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1875"><a href="#cb514-1875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1876"><a href="#cb514-1876" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.  chamber  party </span></span>
<span id="cb514-1877"><a href="#cb514-1877" aria-hidden="true" tabindex="-1"></a>issue_counts_chamber_party <span class="ot">&lt;-</span> issue_counts_mid <span class="sc">%&gt;%</span></span>
<span id="cb514-1878"><a href="#cb514-1878" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, chamber, party, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1879"><a href="#cb514-1879" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_mentions =</span> <span class="fu">sum</span>(n_issue_mentions), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1880"><a href="#cb514-1880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1881"><a href="#cb514-1881" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.  chamber  party  Top 1 </span></span>
<span id="cb514-1882"><a href="#cb514-1882" aria-hidden="true" tabindex="-1"></a>top_issues_chamber_party <span class="ot">&lt;-</span> issue_counts_chamber_party <span class="sc">%&gt;%</span></span>
<span id="cb514-1883"><a href="#cb514-1883" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, chamber, party) <span class="sc">%&gt;%</span></span>
<span id="cb514-1884"><a href="#cb514-1884" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> total_mentions, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-1885"><a href="#cb514-1885" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(congress, chamber, party, <span class="fu">desc</span>(total_mentions))</span>
<span id="cb514-1886"><a href="#cb514-1886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1887"><a href="#cb514-1887" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-1888"><a href="#cb514-1888" aria-hidden="true" tabindex="-1"></a>top_issues_chamber_party</span>
<span id="cb514-1889"><a href="#cb514-1889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1890"><a href="#cb514-1890" aria-hidden="true" tabindex="-1"></a><span class="co">#  CSV</span></span>
<span id="cb514-1891"><a href="#cb514-1891" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"top_issues_chamber_party_bills.csv"</span>, <span class="at">data =</span> top_issues_chamber_party)</span>
<span id="cb514-1892"><a href="#cb514-1892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1893"><a href="#cb514-1893" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1894"><a href="#cb514-1894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1897"><a href="#cb514-1897" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1898"><a href="#cb514-1898" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: congress issue attention bills</span></span>
<span id="cb514-1899"><a href="#cb514-1899" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1900"><a href="#cb514-1900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1901"><a href="#cb514-1901" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-1902"><a href="#cb514-1902" aria-hidden="true" tabindex="-1"></a>issue_counts_mid <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-1903"><a href="#cb514-1903" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, chamber, party, bioguide_id, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1904"><a href="#cb514-1904" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_issue_mentions =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1905"><a href="#cb514-1905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1906"><a href="#cb514-1906" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.  chamber  party </span></span>
<span id="cb514-1907"><a href="#cb514-1907" aria-hidden="true" tabindex="-1"></a>top_issues_congress <span class="ot">&lt;-</span> issue_counts_mid <span class="sc">%&gt;%</span></span>
<span id="cb514-1908"><a href="#cb514-1908" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1909"><a href="#cb514-1909" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_mentions =</span> <span class="fu">sum</span>(n_issue_mentions), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1910"><a href="#cb514-1910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1911"><a href="#cb514-1911" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.  chamber  party  Top 1 </span></span>
<span id="cb514-1912"><a href="#cb514-1912" aria-hidden="true" tabindex="-1"></a>top_issues_congress <span class="ot">&lt;-</span> top_issues_congress <span class="sc">%&gt;%</span></span>
<span id="cb514-1913"><a href="#cb514-1913" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-1914"><a href="#cb514-1914" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> total_mentions, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb514-1915"><a href="#cb514-1915" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb514-1916"><a href="#cb514-1916" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(congress, <span class="fu">desc</span>(total_mentions))</span>
<span id="cb514-1917"><a href="#cb514-1917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1918"><a href="#cb514-1918" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_issues_congress, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(issue, total_mentions), <span class="at">y =</span> total_mentions, <span class="at">fill =</span> <span class="fu">as.factor</span>(congress))) <span class="sc">+</span></span>
<span id="cb514-1919"><a href="#cb514-1919" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb514-1920"><a href="#cb514-1920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-1921"><a href="#cb514-1921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"115"</span><span class="ot">=</span><span class="st">"#FFD700"</span>,<span class="st">"116"</span><span class="ot">=</span><span class="st">"#2E74C0"</span>,<span class="st">"117"</span><span class="ot">=</span><span class="st">"#CB454A"</span>,<span class="st">"118"</span><span class="ot">=</span><span class="st">"#009966"</span>)) <span class="sc">+</span></span>
<span id="cb514-1922"><a href="#cb514-1922" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-1923"><a href="#cb514-1923" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-1924"><a href="#cb514-1924" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top Issue Mentions by Congress"</span>,</span>
<span id="cb514-1925"><a href="#cb514-1925" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Issue"</span>,</span>
<span id="cb514-1926"><a href="#cb514-1926" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Total Mentions"</span>,</span>
<span id="cb514-1927"><a href="#cb514-1927" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Congress"</span></span>
<span id="cb514-1928"><a href="#cb514-1928" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1929"><a href="#cb514-1929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1930"><a href="#cb514-1930" aria-hidden="true" tabindex="-1"></a><span class="co">#  CSV</span></span>
<span id="cb514-1931"><a href="#cb514-1931" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"top_issues_congress_bills.csv"</span>, <span class="at">data =</span> top_issues_congress)</span>
<span id="cb514-1932"><a href="#cb514-1932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1933"><a href="#cb514-1933" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1934"><a href="#cb514-1934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1937"><a href="#cb514-1937" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1938"><a href="#cb514-1938" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: party issue attention bills</span></span>
<span id="cb514-1939"><a href="#cb514-1939" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1940"><a href="#cb514-1940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1941"><a href="#cb514-1941" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-1942"><a href="#cb514-1942" aria-hidden="true" tabindex="-1"></a>issue_counts_mid <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-1943"><a href="#cb514-1943" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(party, bioguide_id, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1944"><a href="#cb514-1944" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_issue_mentions =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1945"><a href="#cb514-1945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1946"><a href="#cb514-1946" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.   party </span></span>
<span id="cb514-1947"><a href="#cb514-1947" aria-hidden="true" tabindex="-1"></a>issue_counts_party <span class="ot">&lt;-</span> issue_counts_mid <span class="sc">%&gt;%</span></span>
<span id="cb514-1948"><a href="#cb514-1948" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(party, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-1949"><a href="#cb514-1949" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_mentions =</span> <span class="fu">sum</span>(n_issue_mentions), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-1950"><a href="#cb514-1950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1951"><a href="#cb514-1951" aria-hidden="true" tabindex="-1"></a>issue_counts_party <span class="ot">&lt;-</span> issue_counts_party <span class="sc">%&gt;%</span></span>
<span id="cb514-1952"><a href="#cb514-1952" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Independent"</span>, <span class="st">"I"</span>)) </span>
<span id="cb514-1953"><a href="#cb514-1953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1954"><a href="#cb514-1954" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-1955"><a href="#cb514-1955" aria-hidden="true" tabindex="-1"></a>issue_counts_party <span class="ot">&lt;-</span> issue_counts_party <span class="sc">%&gt;%</span></span>
<span id="cb514-1956"><a href="#cb514-1956" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(party) <span class="sc">%&gt;%</span></span>
<span id="cb514-1957"><a href="#cb514-1957" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">issue =</span> <span class="fu">reorder_within</span>(issue, total_mentions, party))</span>
<span id="cb514-1958"><a href="#cb514-1958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1959"><a href="#cb514-1959" aria-hidden="true" tabindex="-1"></a><span class="co">#  CSV</span></span>
<span id="cb514-1960"><a href="#cb514-1960" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"top_issues_party_news.csv"</span>, <span class="at">data =</span> issue_counts_party)</span>
<span id="cb514-1961"><a href="#cb514-1961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1962"><a href="#cb514-1962" aria-hidden="true" tabindex="-1"></a><span class="co"># visualization</span></span>
<span id="cb514-1963"><a href="#cb514-1963" aria-hidden="true" tabindex="-1"></a>p_issue_party_split <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(issue_counts_party, <span class="fu">aes</span>(</span>
<span id="cb514-1964"><a href="#cb514-1964" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">reorder</span>(issue, total_mentions),</span>
<span id="cb514-1965"><a href="#cb514-1965" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> total_mentions,</span>
<span id="cb514-1966"><a href="#cb514-1966" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill =</span> party</span>
<span id="cb514-1967"><a href="#cb514-1967" aria-hidden="true" tabindex="-1"></a>)) <span class="sc">+</span></span>
<span id="cb514-1968"><a href="#cb514-1968" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb514-1969"><a href="#cb514-1969" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-1970"><a href="#cb514-1970" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_reordered</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">gsub</span>(<span class="st">"___.*$"</span>, <span class="st">""</span>, x)) <span class="sc">+</span> </span>
<span id="cb514-1971"><a href="#cb514-1971" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Democratic"</span> <span class="ot">=</span> <span class="st">"#2E74C0"</span>, <span class="st">"Republican"</span> <span class="ot">=</span> <span class="st">"#CB454A"</span>)) <span class="sc">+</span></span>
<span id="cb514-1972"><a href="#cb514-1972" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-1973"><a href="#cb514-1973" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Bills Mentions by Issue (Separated by Party)"</span>,</span>
<span id="cb514-1974"><a href="#cb514-1974" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Issue"</span>,</span>
<span id="cb514-1975"><a href="#cb514-1975" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Bills Mentions"</span></span>
<span id="cb514-1976"><a href="#cb514-1976" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-1977"><a href="#cb514-1977" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> party, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span>  <span class="co"># </span></span>
<span id="cb514-1978"><a href="#cb514-1978" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb514-1979"><a href="#cb514-1979" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb514-1980"><a href="#cb514-1980" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb514-1981"><a href="#cb514-1981" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb514-1982"><a href="#cb514-1982" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-1983"><a href="#cb514-1983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1984"><a href="#cb514-1984" aria-hidden="true" tabindex="-1"></a>p_issue_party_split</span>
<span id="cb514-1985"><a href="#cb514-1985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1986"><a href="#cb514-1986" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-1987"><a href="#cb514-1987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1990"><a href="#cb514-1990" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-1991"><a href="#cb514-1991" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: congress issue attention bills party</span></span>
<span id="cb514-1992"><a href="#cb514-1992" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-1993"><a href="#cb514-1993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1994"><a href="#cb514-1994" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- 1.  ----</span></span>
<span id="cb514-1995"><a href="#cb514-1995" aria-hidden="true" tabindex="-1"></a>bills_clean <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-1996"><a href="#cb514-1996" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(issue) <span class="sc">&amp;</span> issue <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">%&gt;%</span>          <span class="co"># </span></span>
<span id="cb514-1997"><a href="#cb514-1997" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Independent"</span>, <span class="st">"I"</span>))        <span class="co"># </span></span>
<span id="cb514-1998"><a href="#cb514-1998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-1999"><a href="#cb514-1999" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- 2.  ----</span></span>
<span id="cb514-2000"><a href="#cb514-2000" aria-hidden="true" tabindex="-1"></a>bills_count <span class="ot">&lt;-</span> bills_clean <span class="sc">%&gt;%</span></span>
<span id="cb514-2001"><a href="#cb514-2001" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress, party, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-2002"><a href="#cb514-2002" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb514-2003"><a href="#cb514-2003" aria-hidden="true" tabindex="-1"></a>    <span class="at">bill_count =</span> <span class="fu">n</span>(),      <span class="co"># </span></span>
<span id="cb514-2004"><a href="#cb514-2004" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb514-2005"><a href="#cb514-2005" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-2006"><a href="#cb514-2006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2007"><a href="#cb514-2007" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- 3.  ----</span></span>
<span id="cb514-2008"><a href="#cb514-2008" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb514-2009"><a href="#cb514-2009" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb514-2010"><a href="#cb514-2010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2011"><a href="#cb514-2011" aria-hidden="true" tabindex="-1"></a>plot_bill_count <span class="ot">&lt;-</span> <span class="cf">function</span>(data, congress_num) {</span>
<span id="cb514-2012"><a href="#cb514-2012" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb514-2013"><a href="#cb514-2013" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(congress <span class="sc">==</span> congress_num) <span class="sc">%&gt;%</span></span>
<span id="cb514-2014"><a href="#cb514-2014" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(issue, bill_count), <span class="at">y =</span> bill_count, <span class="at">fill =</span> party)) <span class="sc">+</span></span>
<span id="cb514-2015"><a href="#cb514-2015" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb514-2016"><a href="#cb514-2016" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-2017"><a href="#cb514-2017" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb514-2018"><a href="#cb514-2018" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb514-2019"><a href="#cb514-2019" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Democratic"</span> <span class="ot">=</span> <span class="st">"#2E74C0"</span>,  <span class="co"># </span></span>
<span id="cb514-2020"><a href="#cb514-2020" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Republican"</span> <span class="ot">=</span> <span class="st">"#CB454A"</span>   <span class="co"># </span></span>
<span id="cb514-2021"><a href="#cb514-2021" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-2022"><a href="#cb514-2022" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-2023"><a href="#cb514-2023" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb514-2024"><a href="#cb514-2024" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Number of Bills by Party  "</span>, congress_num, <span class="st">"th Congress"</span>),</span>
<span id="cb514-2025"><a href="#cb514-2025" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Issue"</span>,</span>
<span id="cb514-2026"><a href="#cb514-2026" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Number of Bills"</span></span>
<span id="cb514-2027"><a href="#cb514-2027" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-2028"><a href="#cb514-2028" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb514-2029"><a href="#cb514-2029" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb514-2030"><a href="#cb514-2030" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb514-2031"><a href="#cb514-2031" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"top"</span></span>
<span id="cb514-2032"><a href="#cb514-2032" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-2033"><a href="#cb514-2033" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2034"><a href="#cb514-2034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2035"><a href="#cb514-2035" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- 4.  ----</span></span>
<span id="cb514-2036"><a href="#cb514-2036" aria-hidden="true" tabindex="-1"></a>p115 <span class="ot">&lt;-</span> <span class="fu">plot_bill_count</span>(bills_count, <span class="dv">115</span>)</span>
<span id="cb514-2037"><a href="#cb514-2037" aria-hidden="true" tabindex="-1"></a>p116 <span class="ot">&lt;-</span> <span class="fu">plot_bill_count</span>(bills_count, <span class="dv">116</span>)</span>
<span id="cb514-2038"><a href="#cb514-2038" aria-hidden="true" tabindex="-1"></a>p117 <span class="ot">&lt;-</span> <span class="fu">plot_bill_count</span>(bills_count, <span class="dv">117</span>)</span>
<span id="cb514-2039"><a href="#cb514-2039" aria-hidden="true" tabindex="-1"></a>p118 <span class="ot">&lt;-</span> <span class="fu">plot_bill_count</span>(bills_count, <span class="dv">118</span>)</span>
<span id="cb514-2040"><a href="#cb514-2040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2041"><a href="#cb514-2041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2042"><a href="#cb514-2042" aria-hidden="true" tabindex="-1"></a>p115</span>
<span id="cb514-2043"><a href="#cb514-2043" aria-hidden="true" tabindex="-1"></a>p116</span>
<span id="cb514-2044"><a href="#cb514-2044" aria-hidden="true" tabindex="-1"></a>p117</span>
<span id="cb514-2045"><a href="#cb514-2045" aria-hidden="true" tabindex="-1"></a>p118</span>
<span id="cb514-2046"><a href="#cb514-2046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2047"><a href="#cb514-2047" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2048"><a href="#cb514-2048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2049"><a href="#cb514-2049" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4.1.4 calculating shanon-entropy for bills news</span></span>
<span id="cb514-2050"><a href="#cb514-2050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2053"><a href="#cb514-2053" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2054"><a href="#cb514-2054" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: issues shanon entropy bills</span></span>
<span id="cb514-2055"><a href="#cb514-2055" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2056"><a href="#cb514-2056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2057"><a href="#cb514-2057" aria-hidden="true" tabindex="-1"></a><span class="co">#  congress  issue </span></span>
<span id="cb514-2058"><a href="#cb514-2058" aria-hidden="true" tabindex="-1"></a>issue_dist <span class="ot">&lt;-</span> bills_data_aug <span class="sc">%&gt;%</span></span>
<span id="cb514-2059"><a href="#cb514-2059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(bioguide_id), <span class="sc">!</span><span class="fu">is.na</span>(issue), <span class="sc">!</span><span class="fu">is.na</span>(congress)) <span class="sc">%&gt;%</span></span>
<span id="cb514-2060"><a href="#cb514-2060" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(bioguide_id, congress, issue, gender, chamber, party) <span class="sc">%&gt;%</span></span>
<span id="cb514-2061"><a href="#cb514-2061" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-2062"><a href="#cb514-2062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2063"><a href="#cb514-2063" aria-hidden="true" tabindex="-1"></a><span class="co">#  congress </span></span>
<span id="cb514-2064"><a href="#cb514-2064" aria-hidden="true" tabindex="-1"></a>issue_total <span class="ot">&lt;-</span> issue_dist <span class="sc">%&gt;%</span></span>
<span id="cb514-2065"><a href="#cb514-2065" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(bioguide_id, congress, gender, chamber, party) <span class="sc">%&gt;%</span></span>
<span id="cb514-2066"><a href="#cb514-2066" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(n), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-2067"><a href="#cb514-2067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2068"><a href="#cb514-2068" aria-hidden="true" tabindex="-1"></a><span class="co">#  p_k</span></span>
<span id="cb514-2069"><a href="#cb514-2069" aria-hidden="true" tabindex="-1"></a>issue_prob <span class="ot">&lt;-</span> issue_dist <span class="sc">%&gt;%</span></span>
<span id="cb514-2070"><a href="#cb514-2070" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(issue_total,</span>
<span id="cb514-2071"><a href="#cb514-2071" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"bioguide_id"</span>, <span class="st">"congress"</span>, <span class="st">"gender"</span>, <span class="st">"chamber"</span>, <span class="st">"party"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-2072"><a href="#cb514-2072" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span> total)</span>
<span id="cb514-2073"><a href="#cb514-2073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2074"><a href="#cb514-2074" aria-hidden="true" tabindex="-1"></a><span class="co">#  Shannon entropy</span></span>
<span id="cb514-2075"><a href="#cb514-2075" aria-hidden="true" tabindex="-1"></a>entropy_bills <span class="ot">&lt;-</span> issue_prob <span class="sc">%&gt;%</span></span>
<span id="cb514-2076"><a href="#cb514-2076" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(bioguide_id, congress, gender, chamber, party) <span class="sc">%&gt;%</span></span>
<span id="cb514-2077"><a href="#cb514-2077" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb514-2078"><a href="#cb514-2078" aria-hidden="true" tabindex="-1"></a>    <span class="at">shannon_entropy =</span> <span class="sc">-</span><span class="fu">sum</span>(p <span class="sc">*</span> <span class="fu">log</span>(p)),   <span class="co"># </span></span>
<span id="cb514-2079"><a href="#cb514-2079" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_issues =</span> <span class="fu">n_distinct</span>(issue),</span>
<span id="cb514-2080"><a href="#cb514-2080" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_news =</span> <span class="fu">sum</span>(n),</span>
<span id="cb514-2081"><a href="#cb514-2081" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb514-2082"><a href="#cb514-2082" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-2083"><a href="#cb514-2083" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(entropy_bills)</span>
<span id="cb514-2084"><a href="#cb514-2084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2085"><a href="#cb514-2085" aria-hidden="true" tabindex="-1"></a><span class="co"># violin plot</span></span>
<span id="cb514-2086"><a href="#cb514-2086" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(entropy_bills, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(congress), <span class="at">y =</span> shannon_entropy)) <span class="sc">+</span></span>
<span id="cb514-2087"><a href="#cb514-2087" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb514-2088"><a href="#cb514-2088" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">outlier.size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb514-2089"><a href="#cb514-2089" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-2090"><a href="#cb514-2090" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Congress"</span>, <span class="at">y =</span> <span class="st">"Shannon Entropy"</span>,</span>
<span id="cb514-2091"><a href="#cb514-2091" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Distribution of Attention Diversity per Congress"</span>)</span>
<span id="cb514-2092"><a href="#cb514-2092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2093"><a href="#cb514-2093" aria-hidden="true" tabindex="-1"></a><span class="co"># line graph</span></span>
<span id="cb514-2094"><a href="#cb514-2094" aria-hidden="true" tabindex="-1"></a>entropy_summary <span class="ot">&lt;-</span> entropy_bills <span class="sc">%&gt;%</span></span>
<span id="cb514-2095"><a href="#cb514-2095" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-2096"><a href="#cb514-2096" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_entropy =</span> <span class="fu">mean</span>(shannon_entropy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-2097"><a href="#cb514-2097" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_entropy =</span> <span class="fu">median</span>(shannon_entropy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb514-2098"><a href="#cb514-2098" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(entropy_summary, <span class="fu">aes</span>(<span class="at">x =</span> congress, <span class="at">y =</span> mean_entropy)) <span class="sc">+</span></span>
<span id="cb514-2099"><a href="#cb514-2099" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb514-2100"><a href="#cb514-2100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb514-2101"><a href="#cb514-2101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-2102"><a href="#cb514-2102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Congress"</span>, <span class="at">y =</span> <span class="st">"Mean Shannon Entropy"</span>,</span>
<span id="cb514-2103"><a href="#cb514-2103" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Bills Average Attention Diversity by Congress"</span>)</span>
<span id="cb514-2104"><a href="#cb514-2104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2105"><a href="#cb514-2105" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"Average Attention Diversity by Congress-bills.png"</span>, <span class="at">plot =</span> p, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-2106"><a href="#cb514-2106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2107"><a href="#cb514-2107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2108"><a href="#cb514-2108" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4.2 issue analysis using legis_tp</span></span>
<span id="cb514-2109"><a href="#cb514-2109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2110"><a href="#cb514-2110" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4.2.1 issue heatmap by congress</span></span>
<span id="cb514-2111"><a href="#cb514-2111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2114"><a href="#cb514-2114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2115"><a href="#cb514-2115" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: issue heatmap by congress</span></span>
<span id="cb514-2116"><a href="#cb514-2116" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2117"><a href="#cb514-2117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2118"><a href="#cb514-2118" aria-hidden="true" tabindex="-1"></a>plot_decision_mode_heatmap <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">title =</span> <span class="st">"Decision Mode by Issue and Congress"</span>, <span class="at">save_path =</span> <span class="cn">NULL</span>) {</span>
<span id="cb514-2119"><a href="#cb514-2119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2120"><a href="#cb514-2120" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2121"><a href="#cb514-2121" aria-hidden="true" tabindex="-1"></a>  required_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"issue"</span>, <span class="st">"congress"</span>, <span class="st">"decision"</span>)</span>
<span id="cb514-2122"><a href="#cb514-2122" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">all</span>(required_vars <span class="sc">%in%</span> <span class="fu">names</span>(df))) {</span>
<span id="cb514-2123"><a href="#cb514-2123" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input dataframe must contain columns: issue, congress, decision."</span>)</span>
<span id="cb514-2124"><a href="#cb514-2124" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2125"><a href="#cb514-2125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2126"><a href="#cb514-2126" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2127"><a href="#cb514-2127" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-2128"><a href="#cb514-2128" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb514-2129"><a href="#cb514-2129" aria-hidden="true" tabindex="-1"></a>      <span class="at">decision =</span> <span class="fu">factor</span>(decision, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"intl"</span>, <span class="st">"dom"</span>, <span class="st">"prof"</span>)),</span>
<span id="cb514-2130"><a href="#cb514-2130" aria-hidden="true" tabindex="-1"></a>      <span class="at">congress =</span> <span class="fu">as.factor</span>(congress)</span>
<span id="cb514-2131"><a href="#cb514-2131" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-2132"><a href="#cb514-2132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2133"><a href="#cb514-2133" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2134"><a href="#cb514-2134" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> congress, <span class="at">y =</span> <span class="fu">reorder</span>(issue, <span class="fu">desc</span>(issue)), <span class="at">fill =</span> decision)) <span class="sc">+</span></span>
<span id="cb514-2135"><a href="#cb514-2135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb514-2136"><a href="#cb514-2136" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb514-2137"><a href="#cb514-2137" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"intl"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"dom"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, <span class="st">"prof"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>),</span>
<span id="cb514-2138"><a href="#cb514-2138" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.value =</span> <span class="st">"grey90"</span></span>
<span id="cb514-2139"><a href="#cb514-2139" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-2140"><a href="#cb514-2140" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb514-2141"><a href="#cb514-2141" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> title,</span>
<span id="cb514-2142"><a href="#cb514-2142" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Congress"</span>,</span>
<span id="cb514-2143"><a href="#cb514-2143" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Issue"</span>,</span>
<span id="cb514-2144"><a href="#cb514-2144" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"Decision Mode"</span></span>
<span id="cb514-2145"><a href="#cb514-2145" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-2146"><a href="#cb514-2146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb514-2147"><a href="#cb514-2147" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb514-2148"><a href="#cb514-2148" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb514-2149"><a href="#cb514-2149" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb514-2150"><a href="#cb514-2150" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-2151"><a href="#cb514-2151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2152"><a href="#cb514-2152" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2153"><a href="#cb514-2153" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(save_path)) {</span>
<span id="cb514-2154"><a href="#cb514-2154" aria-hidden="true" tabindex="-1"></a>    <span class="fu">save_to_output</span>(<span class="at">filename =</span> save_path, <span class="at">plot =</span> p, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-2155"><a href="#cb514-2155" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2156"><a href="#cb514-2156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2157"><a href="#cb514-2157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb514-2158"><a href="#cb514-2158" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2159"><a href="#cb514-2159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2160"><a href="#cb514-2160" aria-hidden="true" tabindex="-1"></a><span class="co"># use of function plot_decision_mode_heatmap()</span></span>
<span id="cb514-2161"><a href="#cb514-2161" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_decision_mode_heatmap</span>(legis_tp, <span class="at">title =</span> <span class="st">"Legislative Decision Mode by Issue and Congress"</span>, <span class="at">save_path =</span> <span class="st">"legis_mode.png"</span>)</span>
<span id="cb514-2162"><a href="#cb514-2162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2163"><a href="#cb514-2163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2164"><a href="#cb514-2164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2165"><a href="#cb514-2165" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4.2.2 focal issue of each congress</span></span>
<span id="cb514-2166"><a href="#cb514-2166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2169"><a href="#cb514-2169" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2170"><a href="#cb514-2170" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: congress focal issue</span></span>
<span id="cb514-2171"><a href="#cb514-2171" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2172"><a href="#cb514-2172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2173"><a href="#cb514-2173" aria-hidden="true" tabindex="-1"></a>plot_issue_trend_by_congress <span class="ot">&lt;-</span> <span class="cf">function</span>(df, </span>
<span id="cb514-2174"><a href="#cb514-2174" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">save_path =</span> <span class="cn">NULL</span>, </span>
<span id="cb514-2175"><a href="#cb514-2175" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">file_name =</span> <span class="st">"issue_trend_heatmap.png"</span>,</span>
<span id="cb514-2176"><a href="#cb514-2176" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">width =</span> <span class="dv">10</span>, </span>
<span id="cb514-2177"><a href="#cb514-2177" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">height =</span> <span class="dv">8</span>, </span>
<span id="cb514-2178"><a href="#cb514-2178" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">dpi =</span> <span class="dv">300</span>,</span>
<span id="cb514-2179"><a href="#cb514-2179" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">scale_type =</span> <span class="fu">c</span>(<span class="st">"raw"</span>, <span class="st">"normalized"</span>, <span class="st">"log"</span>)) {</span>
<span id="cb514-2180"><a href="#cb514-2180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2181"><a href="#cb514-2181" aria-hidden="true" tabindex="-1"></a>  scale_type <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(scale_type)</span>
<span id="cb514-2182"><a href="#cb514-2182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2183"><a href="#cb514-2183" aria-hidden="true" tabindex="-1"></a>  issue_congress_label <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-2184"><a href="#cb514-2184" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(issue), <span class="sc">!</span><span class="fu">is.na</span>(congress), <span class="sc">!</span><span class="fu">is.na</span>(label)) <span class="sc">%&gt;%</span></span>
<span id="cb514-2185"><a href="#cb514-2185" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(congress, issue) <span class="sc">%&gt;%</span></span>
<span id="cb514-2186"><a href="#cb514-2186" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">total_label =</span> <span class="fu">sum</span>(label, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb514-2187"><a href="#cb514-2187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2188"><a href="#cb514-2188" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply scale transformation</span></span>
<span id="cb514-2189"><a href="#cb514-2189" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (scale_type <span class="sc">==</span> <span class="st">"normalized"</span>) {</span>
<span id="cb514-2190"><a href="#cb514-2190" aria-hidden="true" tabindex="-1"></a>    issue_congress_label <span class="ot">&lt;-</span> issue_congress_label <span class="sc">%&gt;%</span></span>
<span id="cb514-2191"><a href="#cb514-2191" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(congress) <span class="sc">%&gt;%</span></span>
<span id="cb514-2192"><a href="#cb514-2192" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">scaled_label =</span> total_label <span class="sc">/</span> <span class="fu">sum</span>(total_label, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb514-2193"><a href="#cb514-2193" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb514-2194"><a href="#cb514-2194" aria-hidden="true" tabindex="-1"></a>    fill_col <span class="ot">&lt;-</span> <span class="st">"scaled_label"</span></span>
<span id="cb514-2195"><a href="#cb514-2195" aria-hidden="true" tabindex="-1"></a>    fill_title <span class="ot">&lt;-</span> <span class="st">"Normalized</span><span class="sc">\n</span><span class="st">Proportion"</span></span>
<span id="cb514-2196"><a href="#cb514-2196" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (scale_type <span class="sc">==</span> <span class="st">"log"</span>) {</span>
<span id="cb514-2197"><a href="#cb514-2197" aria-hidden="true" tabindex="-1"></a>    issue_congress_label <span class="ot">&lt;-</span> issue_congress_label <span class="sc">%&gt;%</span></span>
<span id="cb514-2198"><a href="#cb514-2198" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">scaled_label =</span> <span class="fu">log1p</span>(total_label))  <span class="co"># log(1 + x)</span></span>
<span id="cb514-2199"><a href="#cb514-2199" aria-hidden="true" tabindex="-1"></a>    fill_col <span class="ot">&lt;-</span> <span class="st">"scaled_label"</span></span>
<span id="cb514-2200"><a href="#cb514-2200" aria-hidden="true" tabindex="-1"></a>    fill_title <span class="ot">&lt;-</span> <span class="st">"Log(Label + 1)"</span></span>
<span id="cb514-2201"><a href="#cb514-2201" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb514-2202"><a href="#cb514-2202" aria-hidden="true" tabindex="-1"></a>    fill_col <span class="ot">&lt;-</span> <span class="st">"total_label"</span></span>
<span id="cb514-2203"><a href="#cb514-2203" aria-hidden="true" tabindex="-1"></a>    fill_title <span class="ot">&lt;-</span> <span class="st">"Label Count"</span></span>
<span id="cb514-2204"><a href="#cb514-2204" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2205"><a href="#cb514-2205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2206"><a href="#cb514-2206" aria-hidden="true" tabindex="-1"></a>  heatmap_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(issue_congress_label, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(congress), <span class="at">y =</span> <span class="fu">reorder</span>(issue, <span class="fu">desc</span>(issue)), <span class="at">fill =</span> .data[[fill_col]])) <span class="sc">+</span></span>
<span id="cb514-2207"><a href="#cb514-2207" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb514-2208"><a href="#cb514-2208" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#fee8c8"</span>, <span class="at">high =</span> <span class="st">"#e34a33"</span>) <span class="sc">+</span></span>
<span id="cb514-2209"><a href="#cb514-2209" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb514-2210"><a href="#cb514-2210" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Most Discussed Issues by Congress"</span>,</span>
<span id="cb514-2211"><a href="#cb514-2211" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Congress"</span>,</span>
<span id="cb514-2212"><a href="#cb514-2212" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Issue"</span>,</span>
<span id="cb514-2213"><a href="#cb514-2213" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> fill_title</span>
<span id="cb514-2214"><a href="#cb514-2214" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-2215"><a href="#cb514-2215" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb514-2216"><a href="#cb514-2216" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb514-2217"><a href="#cb514-2217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2218"><a href="#cb514-2218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(heatmap_plot)</span>
<span id="cb514-2219"><a href="#cb514-2219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2220"><a href="#cb514-2220" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(save_path)) {</span>
<span id="cb514-2221"><a href="#cb514-2221" aria-hidden="true" tabindex="-1"></a>    <span class="fu">save_to_output</span>(<span class="at">filename =</span> save_path, <span class="at">plot =</span> heatmap_plot, <span class="at">width =</span> width, <span class="at">height =</span> height, <span class="at">dpi =</span> dpi)</span>
<span id="cb514-2222"><a href="#cb514-2222" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2223"><a href="#cb514-2223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2224"><a href="#cb514-2224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">invisible</span>(heatmap_plot))</span>
<span id="cb514-2225"><a href="#cb514-2225" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2226"><a href="#cb514-2226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2227"><a href="#cb514-2227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2228"><a href="#cb514-2228" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_issue_trend_by_congress</span>(legis_tp, <span class="at">save_path =</span><span class="st">"legis_issue_trend.png"</span>, <span class="at">scale_type =</span> <span class="st">"normalized"</span>)</span>
<span id="cb514-2229"><a href="#cb514-2229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2230"><a href="#cb514-2230" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2231"><a href="#cb514-2231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2232"><a href="#cb514-2232" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5. lgbm features importance analysis</span></span>
<span id="cb514-2233"><a href="#cb514-2233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2234"><a href="#cb514-2234" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6. key characteristics analysis</span></span>
<span id="cb514-2235"><a href="#cb514-2235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2236"><a href="#cb514-2236" aria-hidden="true" tabindex="-1"></a>this part will use regression and logistic model to see the key relationship between legislators' personal characteristics and decision mode</span>
<span id="cb514-2237"><a href="#cb514-2237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2238"><a href="#cb514-2238" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.0 preparing</span></span>
<span id="cb514-2239"><a href="#cb514-2239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2240"><a href="#cb514-2240" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.0.1 data cleansing</span></span>
<span id="cb514-2241"><a href="#cb514-2241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2244"><a href="#cb514-2244" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2245"><a href="#cb514-2245" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: data cleansing</span></span>
<span id="cb514-2246"><a href="#cb514-2246" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2247"><a href="#cb514-2247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2248"><a href="#cb514-2248" aria-hidden="true" tabindex="-1"></a><span class="co"># turn decision into is.dom</span></span>
<span id="cb514-2249"><a href="#cb514-2249" aria-hidden="true" tabindex="-1"></a>legis_cg <span class="ot">&lt;-</span> legis_cg <span class="sc">%&gt;%</span></span>
<span id="cb514-2250"><a href="#cb514-2250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is.dom =</span> <span class="fu">ifelse</span>(decision <span class="sc">==</span> <span class="st">"dom"</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb514-2251"><a href="#cb514-2251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2252"><a href="#cb514-2252" aria-hidden="true" tabindex="-1"></a>legis_cg <span class="ot">&lt;-</span> legis_cg <span class="sc">%&gt;%</span></span>
<span id="cb514-2253"><a href="#cb514-2253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is.prof =</span> <span class="fu">ifelse</span>(decision <span class="sc">==</span> <span class="st">"prof"</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb514-2254"><a href="#cb514-2254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2255"><a href="#cb514-2255" aria-hidden="true" tabindex="-1"></a><span class="co"># turn party into is.republican</span></span>
<span id="cb514-2256"><a href="#cb514-2256" aria-hidden="true" tabindex="-1"></a>legis_cg <span class="ot">&lt;-</span> legis_cg <span class="sc">%&gt;%</span> </span>
<span id="cb514-2257"><a href="#cb514-2257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is.republican =</span> <span class="fu">ifelse</span>(party <span class="sc">==</span> <span class="st">"Republican"</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb514-2258"><a href="#cb514-2258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2259"><a href="#cb514-2259" aria-hidden="true" tabindex="-1"></a><span class="co"># turn categorical vector into numeric </span></span>
<span id="cb514-2260"><a href="#cb514-2260" aria-hidden="true" tabindex="-1"></a>legis_cg<span class="sc">$</span>gender_numeric <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(legis_cg<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"Male"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb514-2261"><a href="#cb514-2261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2262"><a href="#cb514-2262" aria-hidden="true" tabindex="-1"></a>legis_cg<span class="sc">$</span>chamber_numeric <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(legis_cg<span class="sc">$</span>chamber <span class="sc">==</span> <span class="st">"Senate"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb514-2263"><a href="#cb514-2263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2264"><a href="#cb514-2264" aria-hidden="true" tabindex="-1"></a><span class="co"># add district data into legis_cg</span></span>
<span id="cb514-2265"><a href="#cb514-2265" aria-hidden="true" tabindex="-1"></a>district_data<span class="sc">$</span>congress <span class="ot">&lt;-</span> <span class="fu">as.character</span>(district_data<span class="sc">$</span>congress)</span>
<span id="cb514-2266"><a href="#cb514-2266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2267"><a href="#cb514-2267" aria-hidden="true" tabindex="-1"></a>legis_merged <span class="ot">&lt;-</span> legis_cg <span class="sc">%&gt;%</span></span>
<span id="cb514-2268"><a href="#cb514-2268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb514-2269"><a href="#cb514-2269" aria-hidden="true" tabindex="-1"></a>    district_data,</span>
<span id="cb514-2270"><a href="#cb514-2270" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"congress"</span>, <span class="st">"state_code"</span>, <span class="st">"district"</span>)</span>
<span id="cb514-2271"><a href="#cb514-2271" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-2272"><a href="#cb514-2272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2273"><a href="#cb514-2273" aria-hidden="true" tabindex="-1"></a><span class="co"># set vars_to_check </span></span>
<span id="cb514-2274"><a href="#cb514-2274" aria-hidden="true" tabindex="-1"></a>vars_to_check <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb514-2275"><a href="#cb514-2275" aria-hidden="true" tabindex="-1"></a>  <span class="st">"high_edu_share"</span>,</span>
<span id="cb514-2276"><a href="#cb514-2276" aria-hidden="true" tabindex="-1"></a>  <span class="st">"foreign_born_ratio"</span>,</span>
<span id="cb514-2277"><a href="#cb514-2277" aria-hidden="true" tabindex="-1"></a>  <span class="st">"white_ratio"</span>,</span>
<span id="cb514-2278"><a href="#cb514-2278" aria-hidden="true" tabindex="-1"></a>  <span class="st">"black_or_african_american_ratio"</span>,</span>
<span id="cb514-2279"><a href="#cb514-2279" aria-hidden="true" tabindex="-1"></a>  <span class="st">"asian_ratio"</span>,</span>
<span id="cb514-2280"><a href="#cb514-2280" aria-hidden="true" tabindex="-1"></a>  <span class="st">"american_indian_and_alaska_native_ratio"</span>,</span>
<span id="cb514-2281"><a href="#cb514-2281" aria-hidden="true" tabindex="-1"></a>  <span class="st">"native_hawaiian_and_other_pacific_islander_ratio"</span>,</span>
<span id="cb514-2282"><a href="#cb514-2282" aria-hidden="true" tabindex="-1"></a>  <span class="st">"white_collar_share"</span>,</span>
<span id="cb514-2283"><a href="#cb514-2283" aria-hidden="true" tabindex="-1"></a>  <span class="st">"blue_collar_share"</span>,</span>
<span id="cb514-2284"><a href="#cb514-2284" aria-hidden="true" tabindex="-1"></a>  <span class="st">"agriculture_share"</span>,</span>
<span id="cb514-2285"><a href="#cb514-2285" aria-hidden="true" tabindex="-1"></a>  <span class="st">"median_household_income_that_year"</span>,</span>
<span id="cb514-2286"><a href="#cb514-2286" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age"</span>, <span class="st">"seniority"</span>, <span class="st">"ideology"</span>, <span class="st">"is.republican"</span>, <span class="st">"chamber"</span>, <span class="st">"gender"</span></span>
<span id="cb514-2287"><a href="#cb514-2287" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-2288"><a href="#cb514-2288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2289"><a href="#cb514-2289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2292"><a href="#cb514-2292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2293"><a href="#cb514-2293" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district group analysis data preparing</span></span>
<span id="cb514-2294"><a href="#cb514-2294" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2295"><a href="#cb514-2295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2296"><a href="#cb514-2296" aria-hidden="true" tabindex="-1"></a><span class="co"># filter different level data</span></span>
<span id="cb514-2297"><a href="#cb514-2297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2298"><a href="#cb514-2298" aria-hidden="true" tabindex="-1"></a>dem_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2299"><a href="#cb514-2299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"Democratic"</span>)</span>
<span id="cb514-2300"><a href="#cb514-2300" aria-hidden="true" tabindex="-1"></a>rep_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2301"><a href="#cb514-2301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"Republican"</span>)</span>
<span id="cb514-2302"><a href="#cb514-2302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2303"><a href="#cb514-2303" aria-hidden="true" tabindex="-1"></a>hosue_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2304"><a href="#cb514-2304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"house of representatives"</span>)</span>
<span id="cb514-2305"><a href="#cb514-2305" aria-hidden="true" tabindex="-1"></a>senate_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2306"><a href="#cb514-2306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"senate"</span>)</span>
<span id="cb514-2307"><a href="#cb514-2307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2308"><a href="#cb514-2308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2309"><a href="#cb514-2309" aria-hidden="true" tabindex="-1"></a>legis_115 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2310"><a href="#cb514-2310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"115"</span>)</span>
<span id="cb514-2311"><a href="#cb514-2311" aria-hidden="true" tabindex="-1"></a>legis_116 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2312"><a href="#cb514-2312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"116"</span>)</span>
<span id="cb514-2313"><a href="#cb514-2313" aria-hidden="true" tabindex="-1"></a>legis_117 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2314"><a href="#cb514-2314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"117"</span>)</span>
<span id="cb514-2315"><a href="#cb514-2315" aria-hidden="true" tabindex="-1"></a>legis_118 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-2316"><a href="#cb514-2316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"118"</span>)</span>
<span id="cb514-2317"><a href="#cb514-2317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2318"><a href="#cb514-2318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2319"><a href="#cb514-2319" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2320"><a href="#cb514-2320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2321"><a href="#cb514-2321" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.0.2 co-linerality check</span></span>
<span id="cb514-2322"><a href="#cb514-2322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2325"><a href="#cb514-2325" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2326"><a href="#cb514-2326" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: co-linerality check function</span></span>
<span id="cb514-2327"><a href="#cb514-2327" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2328"><a href="#cb514-2328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2329"><a href="#cb514-2329" aria-hidden="true" tabindex="-1"></a>check_collinearity <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">vars =</span> <span class="cn">NULL</span>, <span class="at">show_plot =</span> <span class="cn">TRUE</span>, <span class="at">max_name_length =</span> <span class="dv">12</span>) {</span>
<span id="cb514-2330"><a href="#cb514-2330" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 1.  ----</span></span>
<span id="cb514-2331"><a href="#cb514-2331" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(vars)) vars <span class="ot">&lt;-</span> <span class="fu">names</span>(data)</span>
<span id="cb514-2332"><a href="#cb514-2332" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(data, dplyr<span class="sc">::</span><span class="fu">all_of</span>(vars))</span>
<span id="cb514-2333"><a href="#cb514-2333" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2334"><a href="#cb514-2334" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 2.  ----</span></span>
<span id="cb514-2335"><a href="#cb514-2335" aria-hidden="true" tabindex="-1"></a>  var_types <span class="ot">&lt;-</span> <span class="fu">sapply</span>(df, <span class="cf">function</span>(x) {</span>
<span id="cb514-2336"><a href="#cb514-2336" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.numeric</span>(x)) <span class="st">"numeric"</span> <span class="cf">else</span> <span class="st">"categorical"</span></span>
<span id="cb514-2337"><a href="#cb514-2337" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb514-2338"><a href="#cb514-2338" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2339"><a href="#cb514-2339" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 3.  ----</span></span>
<span id="cb514-2340"><a href="#cb514-2340" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-2341"><a href="#cb514-2341" aria-hidden="true" tabindex="-1"></a>    <span class="at">numeric_numeric =</span> <span class="cn">NULL</span>,</span>
<span id="cb514-2342"><a href="#cb514-2342" aria-hidden="true" tabindex="-1"></a>    <span class="at">categorical_numeric =</span> <span class="cn">NULL</span>,</span>
<span id="cb514-2343"><a href="#cb514-2343" aria-hidden="true" tabindex="-1"></a>    <span class="at">categorical_categorical =</span> <span class="cn">NULL</span></span>
<span id="cb514-2344"><a href="#cb514-2344" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-2345"><a href="#cb514-2345" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2346"><a href="#cb514-2346" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 4. - +  ----</span></span>
<span id="cb514-2347"><a href="#cb514-2347" aria-hidden="true" tabindex="-1"></a>  num_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(var_types[var_types <span class="sc">==</span> <span class="st">"numeric"</span>])</span>
<span id="cb514-2348"><a href="#cb514-2348" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(num_vars) <span class="sc">&gt;=</span> <span class="dv">2</span>) {</span>
<span id="cb514-2349"><a href="#cb514-2349" aria-hidden="true" tabindex="-1"></a>    num_df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-2350"><a href="#cb514-2350" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(dplyr<span class="sc">::</span><span class="fu">all_of</span>(num_vars)) <span class="sc">%&gt;%</span></span>
<span id="cb514-2351"><a href="#cb514-2351" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">everything</span>(), as.numeric))</span>
<span id="cb514-2352"><a href="#cb514-2352" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-2353"><a href="#cb514-2353" aria-hidden="true" tabindex="-1"></a>    cor_mat <span class="ot">&lt;-</span> <span class="fu">cor</span>(num_df, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>)</span>
<span id="cb514-2354"><a href="#cb514-2354" aria-hidden="true" tabindex="-1"></a>    results<span class="sc">$</span>numeric_numeric <span class="ot">&lt;-</span> cor_mat</span>
<span id="cb514-2355"><a href="#cb514-2355" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-2356"><a href="#cb514-2356" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (show_plot) {</span>
<span id="cb514-2357"><a href="#cb514-2357" aria-hidden="true" tabindex="-1"></a>      <span class="co"># </span></span>
<span id="cb514-2358"><a href="#cb514-2358" aria-hidden="true" tabindex="-1"></a>      short_names <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">colnames</span>(cor_mat), <span class="dv">1</span>, max_name_length)</span>
<span id="cb514-2359"><a href="#cb514-2359" aria-hidden="true" tabindex="-1"></a>      <span class="fu">colnames</span>(cor_mat) <span class="ot">&lt;-</span> short_names</span>
<span id="cb514-2360"><a href="#cb514-2360" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rownames</span>(cor_mat) <span class="ot">&lt;-</span> short_names</span>
<span id="cb514-2361"><a href="#cb514-2361" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb514-2362"><a href="#cb514-2362" aria-hidden="true" tabindex="-1"></a>      <span class="co"># </span></span>
<span id="cb514-2363"><a href="#cb514-2363" aria-hidden="true" tabindex="-1"></a>      corrplot<span class="sc">::</span><span class="fu">corrplot</span>(</span>
<span id="cb514-2364"><a href="#cb514-2364" aria-hidden="true" tabindex="-1"></a>        cor_mat,</span>
<span id="cb514-2365"><a href="#cb514-2365" aria-hidden="true" tabindex="-1"></a>        <span class="at">method =</span> <span class="st">"color"</span>,</span>
<span id="cb514-2366"><a href="#cb514-2366" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">"full"</span>,     <span class="co"># full </span></span>
<span id="cb514-2367"><a href="#cb514-2367" aria-hidden="true" tabindex="-1"></a>        <span class="at">tl.cex =</span> <span class="fl">0.7</span>,      <span class="co"># </span></span>
<span id="cb514-2368"><a href="#cb514-2368" aria-hidden="true" tabindex="-1"></a>        <span class="at">tl.col =</span> <span class="st">"black"</span>,  <span class="co"># </span></span>
<span id="cb514-2369"><a href="#cb514-2369" aria-hidden="true" tabindex="-1"></a>        <span class="at">number.cex =</span> <span class="fl">0.6</span>,  <span class="co"># </span></span>
<span id="cb514-2370"><a href="#cb514-2370" aria-hidden="true" tabindex="-1"></a>        <span class="at">diag =</span> <span class="cn">TRUE</span>,       <span class="co"># </span></span>
<span id="cb514-2371"><a href="#cb514-2371" aria-hidden="true" tabindex="-1"></a>        <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb514-2372"><a href="#cb514-2372" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-2373"><a href="#cb514-2373" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-2374"><a href="#cb514-2374" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2375"><a href="#cb514-2375" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2376"><a href="#cb514-2376" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 5. -ANOVA ----</span></span>
<span id="cb514-2377"><a href="#cb514-2377" aria-hidden="true" tabindex="-1"></a>  cat_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(var_types[var_types <span class="sc">==</span> <span class="st">"categorical"</span>])</span>
<span id="cb514-2378"><a href="#cb514-2378" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(cat_vars) <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(num_vars) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb514-2379"><a href="#cb514-2379" aria-hidden="true" tabindex="-1"></a>    cat_num_tests <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">numeric =</span> num_vars, <span class="at">categorical =</span> cat_vars, </span>
<span id="cb514-2380"><a href="#cb514-2380" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb514-2381"><a href="#cb514-2381" aria-hidden="true" tabindex="-1"></a>    results<span class="sc">$</span>categorical_numeric <span class="ot">&lt;-</span> cat_num_tests <span class="sc">%&gt;%</span></span>
<span id="cb514-2382"><a href="#cb514-2382" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb514-2383"><a href="#cb514-2383" aria-hidden="true" tabindex="-1"></a>        <span class="at">p_value =</span> purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(numeric, categorical, <span class="cf">function</span>(num, cat) {</span>
<span id="cb514-2384"><a href="#cb514-2384" aria-hidden="true" tabindex="-1"></a>          formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(num, <span class="st">"~"</span>, cat))</span>
<span id="cb514-2385"><a href="#cb514-2385" aria-hidden="true" tabindex="-1"></a>          <span class="fu">tryCatch</span>({</span>
<span id="cb514-2386"><a href="#cb514-2386" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summary</span>(<span class="fu">aov</span>(formula, <span class="at">data =</span> df))[[<span class="dv">1</span>]][[<span class="st">"Pr(&gt;F)"</span>]][<span class="dv">1</span>]</span>
<span id="cb514-2387"><a href="#cb514-2387" aria-hidden="true" tabindex="-1"></a>          }, <span class="at">error =</span> <span class="cf">function</span>(e) <span class="cn">NA</span>)</span>
<span id="cb514-2388"><a href="#cb514-2388" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb514-2389"><a href="#cb514-2389" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-2390"><a href="#cb514-2390" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2391"><a href="#cb514-2391" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2392"><a href="#cb514-2392" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 6. - ----</span></span>
<span id="cb514-2393"><a href="#cb514-2393" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(cat_vars) <span class="sc">&gt;=</span> <span class="dv">2</span>) {</span>
<span id="cb514-2394"><a href="#cb514-2394" aria-hidden="true" tabindex="-1"></a>    cat_tests <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">var1 =</span> cat_vars, <span class="at">var2 =</span> cat_vars, </span>
<span id="cb514-2395"><a href="#cb514-2395" aria-hidden="true" tabindex="-1"></a>                             <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb514-2396"><a href="#cb514-2396" aria-hidden="true" tabindex="-1"></a>    cat_tests <span class="ot">&lt;-</span> cat_tests[cat_tests<span class="sc">$</span>var1 <span class="sc">!=</span> cat_tests<span class="sc">$</span>var2, ]</span>
<span id="cb514-2397"><a href="#cb514-2397" aria-hidden="true" tabindex="-1"></a>    results<span class="sc">$</span>categorical_categorical <span class="ot">&lt;-</span> cat_tests <span class="sc">%&gt;%</span></span>
<span id="cb514-2398"><a href="#cb514-2398" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb514-2399"><a href="#cb514-2399" aria-hidden="true" tabindex="-1"></a>        <span class="at">p_value =</span> purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(var1, var2, <span class="cf">function</span>(v1, v2) {</span>
<span id="cb514-2400"><a href="#cb514-2400" aria-hidden="true" tabindex="-1"></a>          tbl <span class="ot">&lt;-</span> <span class="fu">table</span>(df[[v1]], df[[v2]])</span>
<span id="cb514-2401"><a href="#cb514-2401" aria-hidden="true" tabindex="-1"></a>          <span class="fu">tryCatch</span>(<span class="fu">chisq.test</span>(tbl)<span class="sc">$</span>p.value, <span class="at">error =</span> <span class="cf">function</span>(e) <span class="cn">NA</span>)</span>
<span id="cb514-2402"><a href="#cb514-2402" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb514-2403"><a href="#cb514-2403" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-2404"><a href="#cb514-2404" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2405"><a href="#cb514-2405" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2406"><a href="#cb514-2406" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ---- Step 7.  ----</span></span>
<span id="cb514-2407"><a href="#cb514-2407" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">" Collinearity check completed."</span>)</span>
<span id="cb514-2408"><a href="#cb514-2408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb514-2409"><a href="#cb514-2409" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2410"><a href="#cb514-2410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2411"><a href="#cb514-2411" aria-hidden="true" tabindex="-1"></a><span class="co">#  *p</span></span>
<span id="cb514-2412"><a href="#cb514-2412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2413"><a href="#cb514-2413" aria-hidden="true" tabindex="-1"></a>check_numeric_pvalues_star <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">vars =</span> <span class="cn">NULL</span>) {</span>
<span id="cb514-2414"><a href="#cb514-2414" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(vars)) vars <span class="ot">&lt;-</span> <span class="fu">names</span>(data)</span>
<span id="cb514-2415"><a href="#cb514-2415" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> data[, vars]</span>
<span id="cb514-2416"><a href="#cb514-2416" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2417"><a href="#cb514-2417" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2418"><a href="#cb514-2418" aria-hidden="true" tabindex="-1"></a>  num_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(df)[<span class="fu">sapply</span>(df, is.numeric)]</span>
<span id="cb514-2419"><a href="#cb514-2419" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(num_vars)</span>
<span id="cb514-2420"><a href="#cb514-2420" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2421"><a href="#cb514-2421" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="fu">stop</span>(<span class="st">" 2 "</span>)</span>
<span id="cb514-2422"><a href="#cb514-2422" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2423"><a href="#cb514-2423" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2424"><a href="#cb514-2424" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb514-2425"><a href="#cb514-2425" aria-hidden="true" tabindex="-1"></a>    <span class="at">var1 =</span> <span class="fu">character</span>(),</span>
<span id="cb514-2426"><a href="#cb514-2426" aria-hidden="true" tabindex="-1"></a>    <span class="at">var2 =</span> <span class="fu">character</span>(),</span>
<span id="cb514-2427"><a href="#cb514-2427" aria-hidden="true" tabindex="-1"></a>    <span class="at">correlation =</span> <span class="fu">numeric</span>(),</span>
<span id="cb514-2428"><a href="#cb514-2428" aria-hidden="true" tabindex="-1"></a>    <span class="at">p_value =</span> <span class="fu">numeric</span>(),</span>
<span id="cb514-2429"><a href="#cb514-2429" aria-hidden="true" tabindex="-1"></a>    <span class="at">significance =</span> <span class="fu">character</span>(),</span>
<span id="cb514-2430"><a href="#cb514-2430" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb514-2431"><a href="#cb514-2431" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-2432"><a href="#cb514-2432" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2433"><a href="#cb514-2433" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  p </span></span>
<span id="cb514-2434"><a href="#cb514-2434" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(n<span class="dv">-1</span>)) {</span>
<span id="cb514-2435"><a href="#cb514-2435" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> (i<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>n) {</span>
<span id="cb514-2436"><a href="#cb514-2436" aria-hidden="true" tabindex="-1"></a>      x <span class="ot">&lt;-</span> df[[num_vars[i]]]</span>
<span id="cb514-2437"><a href="#cb514-2437" aria-hidden="true" tabindex="-1"></a>      y <span class="ot">&lt;-</span> df[[num_vars[j]]]</span>
<span id="cb514-2438"><a href="#cb514-2438" aria-hidden="true" tabindex="-1"></a>      <span class="co">#  NA </span></span>
<span id="cb514-2439"><a href="#cb514-2439" aria-hidden="true" tabindex="-1"></a>      valid <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(x, y)</span>
<span id="cb514-2440"><a href="#cb514-2440" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">sum</span>(valid) <span class="sc">&lt;</span> <span class="dv">3</span>) {</span>
<span id="cb514-2441"><a href="#cb514-2441" aria-hidden="true" tabindex="-1"></a>        cor_val <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb514-2442"><a href="#cb514-2442" aria-hidden="true" tabindex="-1"></a>        p_val <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb514-2443"><a href="#cb514-2443" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb514-2444"><a href="#cb514-2444" aria-hidden="true" tabindex="-1"></a>        test <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(x[valid], y[valid])</span>
<span id="cb514-2445"><a href="#cb514-2445" aria-hidden="true" tabindex="-1"></a>        cor_val <span class="ot">&lt;-</span> test<span class="sc">$</span>estimate</span>
<span id="cb514-2446"><a href="#cb514-2446" aria-hidden="true" tabindex="-1"></a>        p_val <span class="ot">&lt;-</span> test<span class="sc">$</span>p.value</span>
<span id="cb514-2447"><a href="#cb514-2447" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb514-2448"><a href="#cb514-2448" aria-hidden="true" tabindex="-1"></a>      <span class="co">#  p </span></span>
<span id="cb514-2449"><a href="#cb514-2449" aria-hidden="true" tabindex="-1"></a>      sig <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">is.na</span>(p_val)) <span class="st">""</span> <span class="cf">else</span> <span class="cf">if</span> (p_val <span class="sc">&lt;</span> <span class="fl">0.001</span>) <span class="st">"***"</span> <span class="cf">else</span> <span class="cf">if</span> (p_val <span class="sc">&lt;</span> <span class="fl">0.01</span>) <span class="st">"**"</span> <span class="cf">else</span> <span class="cf">if</span> (p_val <span class="sc">&lt;</span> <span class="fl">0.05</span>) <span class="st">"*"</span> <span class="cf">else</span> <span class="st">""</span></span>
<span id="cb514-2450"><a href="#cb514-2450" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb514-2451"><a href="#cb514-2451" aria-hidden="true" tabindex="-1"></a>      res <span class="ot">&lt;-</span> <span class="fu">rbind</span>(res, <span class="fu">data.frame</span>(</span>
<span id="cb514-2452"><a href="#cb514-2452" aria-hidden="true" tabindex="-1"></a>        <span class="at">var1 =</span> num_vars[i],</span>
<span id="cb514-2453"><a href="#cb514-2453" aria-hidden="true" tabindex="-1"></a>        <span class="at">var2 =</span> num_vars[j],</span>
<span id="cb514-2454"><a href="#cb514-2454" aria-hidden="true" tabindex="-1"></a>        <span class="at">correlation =</span> cor_val,</span>
<span id="cb514-2455"><a href="#cb514-2455" aria-hidden="true" tabindex="-1"></a>        <span class="at">p_value =</span> p_val,</span>
<span id="cb514-2456"><a href="#cb514-2456" aria-hidden="true" tabindex="-1"></a>        <span class="at">significance =</span> sig,</span>
<span id="cb514-2457"><a href="#cb514-2457" aria-hidden="true" tabindex="-1"></a>        <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb514-2458"><a href="#cb514-2458" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb514-2459"><a href="#cb514-2459" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-2460"><a href="#cb514-2460" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2461"><a href="#cb514-2461" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2462"><a href="#cb514-2462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb514-2463"><a href="#cb514-2463" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2464"><a href="#cb514-2464" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2465"><a href="#cb514-2465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2468"><a href="#cb514-2468" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2469"><a href="#cb514-2469" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: co-linerality check </span></span>
<span id="cb514-2470"><a href="#cb514-2470" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2471"><a href="#cb514-2471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2472"><a href="#cb514-2472" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-2473"><a href="#cb514-2473" aria-hidden="true" tabindex="-1"></a>collinearity_result1 <span class="ot">&lt;-</span> <span class="fu">check_collinearity</span>(legis_merged, vars_to_check, <span class="at">show_plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-2474"><a href="#cb514-2474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2475"><a href="#cb514-2475" aria-hidden="true" tabindex="-1"></a>collinearity_result1<span class="sc">$</span>numeric_numeric</span>
<span id="cb514-2476"><a href="#cb514-2476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2477"><a href="#cb514-2477" aria-hidden="true" tabindex="-1"></a><span class="co"># p</span></span>
<span id="cb514-2478"><a href="#cb514-2478" aria-hidden="true" tabindex="-1"></a>numeric_results1 <span class="ot">&lt;-</span> <span class="fu">check_numeric_pvalues_star</span>(legis_merged, vars_to_check)</span>
<span id="cb514-2479"><a href="#cb514-2479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2480"><a href="#cb514-2480" aria-hidden="true" tabindex="-1"></a><span class="co">#  vs   ANOVA </span></span>
<span id="cb514-2481"><a href="#cb514-2481" aria-hidden="true" tabindex="-1"></a>collinearity_result1<span class="sc">$</span>categorical_numeric <span class="sc">%&gt;%</span> </span>
<span id="cb514-2482"><a href="#cb514-2482" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span>
<span id="cb514-2483"><a href="#cb514-2483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2484"><a href="#cb514-2484" aria-hidden="true" tabindex="-1"></a><span class="co">#  vs  </span></span>
<span id="cb514-2485"><a href="#cb514-2485" aria-hidden="true" tabindex="-1"></a>collinearity_result1<span class="sc">$</span>categorical_categorical</span>
<span id="cb514-2486"><a href="#cb514-2486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2487"><a href="#cb514-2487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2490"><a href="#cb514-2490" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2491"><a href="#cb514-2491" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: co-linerality filter </span></span>
<span id="cb514-2492"><a href="#cb514-2492" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2493"><a href="#cb514-2493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2494"><a href="#cb514-2494" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-2495"><a href="#cb514-2495" aria-hidden="true" tabindex="-1"></a>filter_high_corr <span class="ot">&lt;-</span> <span class="cf">function</span>(results, <span class="at">cor_threshold =</span> <span class="fl">0.5</span>, <span class="at">sig_level =</span> <span class="fl">0.05</span>) {</span>
<span id="cb514-2496"><a href="#cb514-2496" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  p </span></span>
<span id="cb514-2497"><a href="#cb514-2497" aria-hidden="true" tabindex="-1"></a>  filtered <span class="ot">&lt;-</span> results <span class="sc">%&gt;%</span></span>
<span id="cb514-2498"><a href="#cb514-2498" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">abs</span>(correlation) <span class="sc">&gt;=</span> cor_threshold <span class="sc">&amp;</span> p_value <span class="sc">&lt;=</span> sig_level)</span>
<span id="cb514-2499"><a href="#cb514-2499" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2500"><a href="#cb514-2500" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2501"><a href="#cb514-2501" aria-hidden="true" tabindex="-1"></a>  filtered <span class="ot">&lt;-</span> filtered <span class="sc">%&gt;%</span></span>
<span id="cb514-2502"><a href="#cb514-2502" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(correlation)))</span>
<span id="cb514-2503"><a href="#cb514-2503" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2504"><a href="#cb514-2504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(filtered)</span>
<span id="cb514-2505"><a href="#cb514-2505" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2506"><a href="#cb514-2506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2507"><a href="#cb514-2507" aria-hidden="true" tabindex="-1"></a><span class="co">#  |r| &gt;= 0.5  p &lt; 0.05</span></span>
<span id="cb514-2508"><a href="#cb514-2508" aria-hidden="true" tabindex="-1"></a>high_corr_vars1 <span class="ot">&lt;-</span> <span class="fu">filter_high_corr</span>(numeric_results1, <span class="at">cor_threshold =</span> <span class="fl">0.5</span>, <span class="at">sig_level =</span> <span class="fl">0.05</span>)</span>
<span id="cb514-2509"><a href="#cb514-2509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2510"><a href="#cb514-2510" aria-hidden="true" tabindex="-1"></a>high_corr_vars1</span>
<span id="cb514-2511"><a href="#cb514-2511" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2512"><a href="#cb514-2512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2515"><a href="#cb514-2515" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2516"><a href="#cb514-2516" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: set preference</span></span>
<span id="cb514-2517"><a href="#cb514-2517" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2518"><a href="#cb514-2518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2519"><a href="#cb514-2519" aria-hidden="true" tabindex="-1"></a><span class="co"># set references</span></span>
<span id="cb514-2520"><a href="#cb514-2520" aria-hidden="true" tabindex="-1"></a>set_reference_levels <span class="ot">&lt;-</span> <span class="cf">function</span>(df,</span>
<span id="cb514-2521"><a href="#cb514-2521" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ref_party =</span> <span class="st">"democratic"</span>,</span>
<span id="cb514-2522"><a href="#cb514-2522" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ref_is.republican =</span> <span class="st">"0"</span>,</span>
<span id="cb514-2523"><a href="#cb514-2523" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ref_chamber =</span> <span class="st">"Senate"</span>) {</span>
<span id="cb514-2524"><a href="#cb514-2524" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2525"><a href="#cb514-2525" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">"party"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb514-2526"><a href="#cb514-2526" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>party <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>party)  <span class="co"># factor</span></span>
<span id="cb514-2527"><a href="#cb514-2527" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>party <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df<span class="sc">$</span>party, <span class="at">ref =</span> ref_party)  <span class="co"># reference level</span></span>
<span id="cb514-2528"><a href="#cb514-2528" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2529"><a href="#cb514-2529" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2530"><a href="#cb514-2530" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> (<span class="st">"party"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb514-2531"><a href="#cb514-2531" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>is.republican <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>is.republican)  <span class="co"># factor</span></span>
<span id="cb514-2532"><a href="#cb514-2532" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>is.republican <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df<span class="sc">$</span>is.republican, <span class="at">ref =</span> ref_is.republican)  <span class="co"># reference level</span></span>
<span id="cb514-2533"><a href="#cb514-2533" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2534"><a href="#cb514-2534" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2535"><a href="#cb514-2535" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">"chamber"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb514-2536"><a href="#cb514-2536" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>chamber <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>chamber)</span>
<span id="cb514-2537"><a href="#cb514-2537" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>chamber <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df<span class="sc">$</span>chamber, <span class="at">ref =</span> ref_chamber)</span>
<span id="cb514-2538"><a href="#cb514-2538" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2539"><a href="#cb514-2539" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2540"><a href="#cb514-2540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb514-2541"><a href="#cb514-2541" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2542"><a href="#cb514-2542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2543"><a href="#cb514-2543" aria-hidden="true" tabindex="-1"></a>legis_cg <span class="ot">&lt;-</span> <span class="fu">set_reference_levels</span>(legis_cg,</span>
<span id="cb514-2544"><a href="#cb514-2544" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ref_party =</span> <span class="st">"Democratic"</span>,</span>
<span id="cb514-2545"><a href="#cb514-2545" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ref_is.republican =</span> <span class="st">"0"</span>,</span>
<span id="cb514-2546"><a href="#cb514-2546" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ref_chamber =</span> <span class="st">"senate"</span>)</span>
<span id="cb514-2547"><a href="#cb514-2547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2548"><a href="#cb514-2548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2551"><a href="#cb514-2551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2552"><a href="#cb514-2552" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: lasso function</span></span>
<span id="cb514-2553"><a href="#cb514-2553" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2554"><a href="#cb514-2554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2555"><a href="#cb514-2555" aria-hidden="true" tabindex="-1"></a>run_glmnet_selection <span class="ot">&lt;-</span> <span class="cf">function</span>(data, formula, <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">family =</span> <span class="st">"binomial"</span>) {</span>
<span id="cb514-2556"><a href="#cb514-2556" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2557"><a href="#cb514-2557" aria-hidden="true" tabindex="-1"></a>  complete_data <span class="ot">&lt;-</span> <span class="fu">model.frame</span>(formula, <span class="at">data =</span> data, <span class="at">na.action =</span> na.omit)</span>
<span id="cb514-2558"><a href="#cb514-2558" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2559"><a href="#cb514-2559" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2560"><a href="#cb514-2560" aria-hidden="true" tabindex="-1"></a>  X <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(formula, <span class="at">data =</span> complete_data)[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb514-2561"><a href="#cb514-2561" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2562"><a href="#cb514-2562" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2563"><a href="#cb514-2563" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> complete_data[[<span class="fu">as.character</span>(formula[[<span class="dv">2</span>]])]]</span>
<span id="cb514-2564"><a href="#cb514-2564" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2565"><a href="#cb514-2565" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  lasso/ridge/elnet</span></span>
<span id="cb514-2566"><a href="#cb514-2566" aria-hidden="true" tabindex="-1"></a>  cv_fit <span class="ot">&lt;-</span> <span class="fu">cv.glmnet</span>(X, y, <span class="at">family =</span> family, <span class="at">alpha =</span> alpha)</span>
<span id="cb514-2567"><a href="#cb514-2567" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2568"><a href="#cb514-2568" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2569"><a href="#cb514-2569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(cv_fit, <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">"CV for alpha ="</span>, alpha, <span class="st">", family ="</span>, family))</span>
<span id="cb514-2570"><a href="#cb514-2570" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2571"><a href="#cb514-2571" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  lambda </span></span>
<span id="cb514-2572"><a href="#cb514-2572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Best lambda:"</span>, cv_fit<span class="sc">$</span>lambda.min, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-2573"><a href="#cb514-2573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">coef</span>(cv_fit, <span class="at">s =</span> <span class="st">"lambda.min"</span>))</span>
<span id="cb514-2574"><a href="#cb514-2574" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2575"><a href="#cb514-2575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(cv_fit)</span>
<span id="cb514-2576"><a href="#cb514-2576" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2577"><a href="#cb514-2577" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2578"><a href="#cb514-2578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2581"><a href="#cb514-2581" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2582"><a href="#cb514-2582" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: logit-analysis function</span></span>
<span id="cb514-2583"><a href="#cb514-2583" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2584"><a href="#cb514-2584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2585"><a href="#cb514-2585" aria-hidden="true" tabindex="-1"></a><span class="co"># analysis function</span></span>
<span id="cb514-2586"><a href="#cb514-2586" aria-hidden="true" tabindex="-1"></a>analyze_logit_model <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb514-2587"><a href="#cb514-2587" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(broom)</span>
<span id="cb514-2588"><a href="#cb514-2588" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2589"><a href="#cb514-2589" aria-hidden="true" tabindex="-1"></a>  tidy_model <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>(</span>
<span id="cb514-2590"><a href="#cb514-2590" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>(model, <span class="at">conf.int =</span> <span class="cn">TRUE</span>),</span>
<span id="cb514-2591"><a href="#cb514-2591" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb514-2592"><a href="#cb514-2592" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"Error in tidy(): "</span>, e<span class="sc">$</span>message)</span>
<span id="cb514-2593"><a href="#cb514-2593" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb514-2594"><a href="#cb514-2594" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-2595"><a href="#cb514-2595" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-2596"><a href="#cb514-2596" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2597"><a href="#cb514-2597" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(tidy_model)) <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb514-2598"><a href="#cb514-2598" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2599"><a href="#cb514-2599" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  conf.low  conf.high NA </span></span>
<span id="cb514-2600"><a href="#cb514-2600" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="st">"conf.low"</span> <span class="sc">%in%</span> <span class="fu">names</span>(tidy_model)) tidy_model<span class="sc">$</span>conf.low <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb514-2601"><a href="#cb514-2601" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="st">"conf.high"</span> <span class="sc">%in%</span> <span class="fu">names</span>(tidy_model)) tidy_model<span class="sc">$</span>conf.high <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb514-2602"><a href="#cb514-2602" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2603"><a href="#cb514-2603" aria-hidden="true" tabindex="-1"></a>  coefs <span class="ot">&lt;-</span> tidy_model <span class="sc">%&gt;%</span></span>
<span id="cb514-2604"><a href="#cb514-2604" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb514-2605"><a href="#cb514-2605" aria-hidden="true" tabindex="-1"></a>      <span class="at">odds_ratio =</span> <span class="fu">exp</span>(estimate),</span>
<span id="cb514-2606"><a href="#cb514-2606" aria-hidden="true" tabindex="-1"></a>      <span class="at">conf.low.or =</span> <span class="fu">exp</span>(conf.low),</span>
<span id="cb514-2607"><a href="#cb514-2607" aria-hidden="true" tabindex="-1"></a>      <span class="at">conf.high.or =</span> <span class="fu">exp</span>(conf.high),</span>
<span id="cb514-2608"><a href="#cb514-2608" aria-hidden="true" tabindex="-1"></a>      <span class="at">significance =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-2609"><a href="#cb514-2609" aria-hidden="true" tabindex="-1"></a>        p.value <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">"***"</span>,</span>
<span id="cb514-2610"><a href="#cb514-2610" aria-hidden="true" tabindex="-1"></a>        p.value <span class="sc">&lt;</span> <span class="fl">0.01</span>  <span class="sc">~</span> <span class="st">"**"</span>,</span>
<span id="cb514-2611"><a href="#cb514-2611" aria-hidden="true" tabindex="-1"></a>        p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>  <span class="sc">~</span> <span class="st">"*"</span>,</span>
<span id="cb514-2612"><a href="#cb514-2612" aria-hidden="true" tabindex="-1"></a>        p.value <span class="sc">&lt;</span> <span class="fl">0.1</span>   <span class="sc">~</span> <span class="st">"."</span>,</span>
<span id="cb514-2613"><a href="#cb514-2613" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb514-2614"><a href="#cb514-2614" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb514-2615"><a href="#cb514-2615" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb514-2616"><a href="#cb514-2616" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(term, estimate, odds_ratio, conf.low.or, conf.high.or,</span>
<span id="cb514-2617"><a href="#cb514-2617" aria-hidden="true" tabindex="-1"></a>           std.error, p.value, significance)</span>
<span id="cb514-2618"><a href="#cb514-2618" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2619"><a href="#cb514-2619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">summary</span>(model))</span>
<span id="cb514-2620"><a href="#cb514-2620" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(coefs)</span>
<span id="cb514-2621"><a href="#cb514-2621" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2622"><a href="#cb514-2622" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pseudo R-squared (McFadden)</span></span>
<span id="cb514-2623"><a href="#cb514-2623" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">requireNamespace</span>(<span class="st">"pscl"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb514-2624"><a href="#cb514-2624" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(pscl)</span>
<span id="cb514-2625"><a href="#cb514-2625" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Pseudo R-squared:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-2626"><a href="#cb514-2626" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(pscl<span class="sc">::</span><span class="fu">pR2</span>(model))</span>
<span id="cb514-2627"><a href="#cb514-2627" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb514-2628"><a href="#cb514-2628" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"Install 'pscl' package for pseudo R-squared calculation."</span>)</span>
<span id="cb514-2629"><a href="#cb514-2629" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2630"><a href="#cb514-2630" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2631"><a href="#cb514-2631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(coefs)</span>
<span id="cb514-2632"><a href="#cb514-2632" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2633"><a href="#cb514-2633" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2634"><a href="#cb514-2634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2637"><a href="#cb514-2637" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2638"><a href="#cb514-2638" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: residual check function</span></span>
<span id="cb514-2639"><a href="#cb514-2639" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2640"><a href="#cb514-2640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2641"><a href="#cb514-2641" aria-hidden="true" tabindex="-1"></a>plot_logit_residuals <span class="ot">&lt;-</span> <span class="cf">function</span>(model_list, data, </span>
<span id="cb514-2642"><a href="#cb514-2642" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">subfolder =</span> <span class="st">"logit_residual_plots"</span>, </span>
<span id="cb514-2643"><a href="#cb514-2643" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">n =</span> <span class="dv">1000</span>) {</span>
<span id="cb514-2644"><a href="#cb514-2644" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  output_dir </span></span>
<span id="cb514-2645"><a href="#cb514-2645" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"output_dir"</span>)) {</span>
<span id="cb514-2646"><a href="#cb514-2646" aria-hidden="true" tabindex="-1"></a>    output_dir <span class="ot">&lt;-</span> <span class="st">"output"</span></span>
<span id="cb514-2647"><a href="#cb514-2647" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2648"><a href="#cb514-2648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2649"><a href="#cb514-2649" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2650"><a href="#cb514-2650" aria-hidden="true" tabindex="-1"></a>  save_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(output_dir, subfolder)</span>
<span id="cb514-2651"><a href="#cb514-2651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2652"><a href="#cb514-2652" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2653"><a href="#cb514-2653" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(save_dir)) {</span>
<span id="cb514-2654"><a href="#cb514-2654" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(save_dir, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-2655"><a href="#cb514-2655" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2656"><a href="#cb514-2656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2657"><a href="#cb514-2657" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb514-2658"><a href="#cb514-2658" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_name <span class="cf">in</span> <span class="fu">names</span>(model_list)) {</span>
<span id="cb514-2659"><a href="#cb514-2659" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> model_list[[model_name]]</span>
<span id="cb514-2660"><a href="#cb514-2660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2661"><a href="#cb514-2661" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-2662"><a href="#cb514-2662" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">simulateResiduals</span>(<span class="at">fittedModel =</span> model, <span class="at">n =</span> n)</span>
<span id="cb514-2663"><a href="#cb514-2663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2664"><a href="#cb514-2664" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-2665"><a href="#cb514-2665" aria-hidden="true" tabindex="-1"></a>    predictors <span class="ot">&lt;-</span> <span class="fu">all.vars</span>(<span class="fu">formula</span>(model))[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb514-2666"><a href="#cb514-2666" aria-hidden="true" tabindex="-1"></a>    predictors <span class="ot">&lt;-</span> predictors[predictors <span class="sc">%in%</span> <span class="fu">colnames</span>(data)]  <span class="co"># </span></span>
<span id="cb514-2667"><a href="#cb514-2667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2668"><a href="#cb514-2668" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-2669"><a href="#cb514-2669" aria-hidden="true" tabindex="-1"></a>    file_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(save_dir, <span class="fu">paste0</span>(<span class="st">"residuals_"</span>, model_name, <span class="st">"_all.png"</span>))</span>
<span id="cb514-2670"><a href="#cb514-2670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2671"><a href="#cb514-2671" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-2672"><a href="#cb514-2672" aria-hidden="true" tabindex="-1"></a>    <span class="fu">png</span>(file_path, <span class="at">width =</span> <span class="dv">2400</span>, <span class="at">height =</span> <span class="dv">1600</span>, <span class="at">res =</span> <span class="dv">200</span>)</span>
<span id="cb514-2673"><a href="#cb514-2673" aria-hidden="true" tabindex="-1"></a>    n_pred <span class="ot">&lt;-</span> <span class="fu">length</span>(predictors)</span>
<span id="cb514-2674"><a href="#cb514-2674" aria-hidden="true" tabindex="-1"></a>    n_row <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(n_pred <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb514-2675"><a href="#cb514-2675" aria-hidden="true" tabindex="-1"></a>    <span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(n_row, <span class="dv">2</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>))</span>
<span id="cb514-2676"><a href="#cb514-2676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2677"><a href="#cb514-2677" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (var <span class="cf">in</span> predictors) {</span>
<span id="cb514-2678"><a href="#cb514-2678" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotResiduals</span>(res, <span class="at">predictor =</span> data[[var]],</span>
<span id="cb514-2679"><a href="#cb514-2679" aria-hidden="true" tabindex="-1"></a>                    <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">"Residuals vs"</span>, var, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>, model_name, <span class="st">")"</span>))</span>
<span id="cb514-2680"><a href="#cb514-2680" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-2681"><a href="#cb514-2681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2682"><a href="#cb514-2682" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dev.off</span>()</span>
<span id="cb514-2683"><a href="#cb514-2683" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2684"><a href="#cb514-2684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2685"><a href="#cb514-2685" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">" All residual plots saved under:"</span>, save_dir, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-2686"><a href="#cb514-2686" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2687"><a href="#cb514-2687" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2688"><a href="#cb514-2688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2691"><a href="#cb514-2691" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2692"><a href="#cb514-2692" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: lm robust check function</span></span>
<span id="cb514-2693"><a href="#cb514-2693" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2694"><a href="#cb514-2694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2695"><a href="#cb514-2695" aria-hidden="true" tabindex="-1"></a>plot_lm_diagnostics <span class="ot">&lt;-</span> <span class="cf">function</span>(model_list, <span class="at">output_dir =</span> <span class="st">"lm_diagnostics_plots"</span>) {</span>
<span id="cb514-2696"><a href="#cb514-2696" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb514-2697"><a href="#cb514-2697" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  output/ </span></span>
<span id="cb514-2698"><a href="#cb514-2698" aria-hidden="true" tabindex="-1"></a>  full_output_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"output"</span>, output_dir)</span>
<span id="cb514-2699"><a href="#cb514-2699" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(full_output_dir)) {</span>
<span id="cb514-2700"><a href="#cb514-2700" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(full_output_dir, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-2701"><a href="#cb514-2701" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2702"><a href="#cb514-2702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2703"><a href="#cb514-2703" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_name <span class="cf">in</span> <span class="fu">names</span>(model_list)) {</span>
<span id="cb514-2704"><a href="#cb514-2704" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> model_list[[model_name]]</span>
<span id="cb514-2705"><a href="#cb514-2705" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-2706"><a href="#cb514-2706" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. QQ Plot</span></span>
<span id="cb514-2707"><a href="#cb514-2707" aria-hidden="true" tabindex="-1"></a>    p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(model, <span class="fu">aes</span>(<span class="at">sample =</span> .stdresid)) <span class="sc">+</span></span>
<span id="cb514-2708"><a href="#cb514-2708" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stat_qq</span>() <span class="sc">+</span> <span class="fu">stat_qq_line</span>(<span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb514-2709"><a href="#cb514-2709" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"QQ Plot - "</span>, model_name),</span>
<span id="cb514-2710"><a href="#cb514-2710" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="st">"Standardized Residuals"</span>) <span class="sc">+</span></span>
<span id="cb514-2711"><a href="#cb514-2711" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb514-2712"><a href="#cb514-2712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2713"><a href="#cb514-2713" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2.  vs </span></span>
<span id="cb514-2714"><a href="#cb514-2714" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">augment</span>(model)</span>
<span id="cb514-2715"><a href="#cb514-2715" aria-hidden="true" tabindex="-1"></a>    p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(.fitted, .resid)) <span class="sc">+</span></span>
<span id="cb514-2716"><a href="#cb514-2716" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb514-2717"><a href="#cb514-2717" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb514-2718"><a href="#cb514-2718" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb514-2719"><a href="#cb514-2719" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Residuals vs Fitted - "</span>, model_name),</span>
<span id="cb514-2720"><a href="#cb514-2720" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">"Fitted values"</span>, <span class="at">y =</span> <span class="st">"Residuals"</span>) <span class="sc">+</span></span>
<span id="cb514-2721"><a href="#cb514-2721" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb514-2722"><a href="#cb514-2722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2723"><a href="#cb514-2723" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Cook's Distance</span></span>
<span id="cb514-2724"><a href="#cb514-2724" aria-hidden="true" tabindex="-1"></a>    p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="fu">seq_along</span>(.cooksd), .cooksd)) <span class="sc">+</span></span>
<span id="cb514-2725"><a href="#cb514-2725" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"tomato"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb514-2726"><a href="#cb514-2726" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Cook's Distance - "</span>, model_name),</span>
<span id="cb514-2727"><a href="#cb514-2727" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">"Observation"</span>, <span class="at">y =</span> <span class="st">"Cook's D"</span>) <span class="sc">+</span></span>
<span id="cb514-2728"><a href="#cb514-2728" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb514-2729"><a href="#cb514-2729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2730"><a href="#cb514-2730" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. </span></span>
<span id="cb514-2731"><a href="#cb514-2731" aria-hidden="true" tabindex="-1"></a>    p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(.hat, .std.resid)) <span class="sc">+</span></span>
<span id="cb514-2732"><a href="#cb514-2732" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb514-2733"><a href="#cb514-2733" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb514-2734"><a href="#cb514-2734" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Leverage vs Std Residuals - "</span>, model_name),</span>
<span id="cb514-2735"><a href="#cb514-2735" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">"Leverage"</span>, <span class="at">y =</span> <span class="st">"Standardized Residuals"</span>) <span class="sc">+</span></span>
<span id="cb514-2736"><a href="#cb514-2736" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb514-2737"><a href="#cb514-2737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2738"><a href="#cb514-2738" aria-hidden="true" tabindex="-1"></a>    combined_plot <span class="ot">&lt;-</span> (p1 <span class="sc">|</span> p2) <span class="sc">/</span> (p3 <span class="sc">|</span> p4)</span>
<span id="cb514-2739"><a href="#cb514-2739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2740"><a href="#cb514-2740" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save_to_output  "output" </span></span>
<span id="cb514-2741"><a href="#cb514-2741" aria-hidden="true" tabindex="-1"></a>    <span class="fu">save_to_output</span>(</span>
<span id="cb514-2742"><a href="#cb514-2742" aria-hidden="true" tabindex="-1"></a>      <span class="at">filename =</span> <span class="fu">file.path</span>(output_dir, <span class="fu">paste0</span>(<span class="st">"diagnostic_"</span>, model_name, <span class="st">".png"</span>)),</span>
<span id="cb514-2743"><a href="#cb514-2743" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot =</span> combined_plot,</span>
<span id="cb514-2744"><a href="#cb514-2744" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">12</span>, <span class="at">height =</span> <span class="dv">10</span>, <span class="at">dpi =</span> <span class="dv">300</span></span>
<span id="cb514-2745"><a href="#cb514-2745" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-2746"><a href="#cb514-2746" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb514-2747"><a href="#cb514-2747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2748"><a href="#cb514-2748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">" "</span>, full_output_dir, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb514-2749"><a href="#cb514-2749" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-2750"><a href="#cb514-2750" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2751"><a href="#cb514-2751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2752"><a href="#cb514-2752" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.1 dependent variable: is.dom</span></span>
<span id="cb514-2753"><a href="#cb514-2753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2754"><a href="#cb514-2754" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.1.1 multiple variables logit model</span></span>
<span id="cb514-2755"><a href="#cb514-2755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2756"><a href="#cb514-2756" aria-hidden="true" tabindex="-1"></a>lasso - demographic</span>
<span id="cb514-2757"><a href="#cb514-2757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2760"><a href="#cb514-2760" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2761"><a href="#cb514-2761" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom logit lasso1</span></span>
<span id="cb514-2762"><a href="#cb514-2762" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2763"><a href="#cb514-2763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2764"><a href="#cb514-2764" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-2765"><a href="#cb514-2765" aria-hidden="true" tabindex="-1"></a>cv_lasso_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, is.dom <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb514-2766"><a href="#cb514-2766" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb514-2767"><a href="#cb514-2767" aria-hidden="true" tabindex="-1"></a>cv_ridge_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, is.dom <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb514-2768"><a href="#cb514-2768" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb514-2769"><a href="#cb514-2769" aria-hidden="true" tabindex="-1"></a>cv_elnet_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, is.dom <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb514-2770"><a href="#cb514-2770" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb514-2771"><a href="#cb514-2771" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2772"><a href="#cb514-2772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2773"><a href="#cb514-2773" aria-hidden="true" tabindex="-1"></a>lasso - add district_data</span>
<span id="cb514-2774"><a href="#cb514-2774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2777"><a href="#cb514-2777" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2778"><a href="#cb514-2778" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom logit lasso2</span></span>
<span id="cb514-2779"><a href="#cb514-2779" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2780"><a href="#cb514-2780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2781"><a href="#cb514-2781" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-2782"><a href="#cb514-2782" aria-hidden="true" tabindex="-1"></a>cv_lasso_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_merged, is.dom <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb514-2783"><a href="#cb514-2783" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb514-2784"><a href="#cb514-2784" aria-hidden="true" tabindex="-1"></a>cv_ridge_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_merged, is.dom <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb514-2785"><a href="#cb514-2785" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb514-2786"><a href="#cb514-2786" aria-hidden="true" tabindex="-1"></a>cv_elnet_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_merged, is.dom <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb514-2787"><a href="#cb514-2787" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb514-2788"><a href="#cb514-2788" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2789"><a href="#cb514-2789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2790"><a href="#cb514-2790" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-2791"><a href="#cb514-2791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2794"><a href="#cb514-2794" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2795"><a href="#cb514-2795" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom logit mul3</span></span>
<span id="cb514-2796"><a href="#cb514-2796" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2797"><a href="#cb514-2797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2798"><a href="#cb514-2798" aria-hidden="true" tabindex="-1"></a><span class="co"># model 0</span></span>
<span id="cb514-2799"><a href="#cb514-2799" aria-hidden="true" tabindex="-1"></a>legis_logit0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> is.republican <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> seniority <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2800"><a href="#cb514-2800" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2801"><a href="#cb514-2801" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2802"><a href="#cb514-2802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2803"><a href="#cb514-2803" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted models</span></span>
<span id="cb514-2804"><a href="#cb514-2804" aria-hidden="true" tabindex="-1"></a>legis_logit1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span>  chamber <span class="sc">+</span> ideology <span class="sc">+</span>  gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2805"><a href="#cb514-2805" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2806"><a href="#cb514-2806" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2807"><a href="#cb514-2807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2808"><a href="#cb514-2808" aria-hidden="true" tabindex="-1"></a>legis_logit2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span>  chamber <span class="sc">+</span> is.republican <span class="sc">+</span>  gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2809"><a href="#cb514-2809" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2810"><a href="#cb514-2810" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2811"><a href="#cb514-2811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2812"><a href="#cb514-2812" aria-hidden="true" tabindex="-1"></a>legis_logit3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> seniority <span class="sc">+</span>  chamber <span class="sc">+</span> is.republican <span class="sc">+</span>  gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2813"><a href="#cb514-2813" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2814"><a href="#cb514-2814" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2815"><a href="#cb514-2815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2816"><a href="#cb514-2816" aria-hidden="true" tabindex="-1"></a>legis_logit4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> seniority <span class="sc">+</span>  chamber <span class="sc">+</span> ideology <span class="sc">+</span>  gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2817"><a href="#cb514-2817" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2818"><a href="#cb514-2818" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2819"><a href="#cb514-2819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2820"><a href="#cb514-2820" aria-hidden="true" tabindex="-1"></a><span class="co"># results</span></span>
<span id="cb514-2821"><a href="#cb514-2821" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-2822"><a href="#cb514-2822" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-2823"><a href="#cb514-2823" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis All"</span> <span class="ot">=</span> legis_logit0,</span>
<span id="cb514-2824"><a href="#cb514-2824" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_logit1,</span>
<span id="cb514-2825"><a href="#cb514-2825" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_logit2,</span>
<span id="cb514-2826"><a href="#cb514-2826" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_logit3,</span>
<span id="cb514-2827"><a href="#cb514-2827" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_logit4</span>
<span id="cb514-2828"><a href="#cb514-2828" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-2829"><a href="#cb514-2829" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-2830"><a href="#cb514-2830" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-2831"><a href="#cb514-2831" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"logitmodel_legis_isdom.html"</span>),</span>
<span id="cb514-2832"><a href="#cb514-2832" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb514-2833"><a href="#cb514-2833" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_omit =</span> <span class="st">"AIC|BIC"</span></span>
<span id="cb514-2834"><a href="#cb514-2834" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-2835"><a href="#cb514-2835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2836"><a href="#cb514-2836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2837"><a href="#cb514-2837" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- vif check ----</span></span>
<span id="cb514-2838"><a href="#cb514-2838" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit0)</span>
<span id="cb514-2839"><a href="#cb514-2839" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit1)</span>
<span id="cb514-2840"><a href="#cb514-2840" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit2)</span>
<span id="cb514-2841"><a href="#cb514-2841" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit3)</span>
<span id="cb514-2842"><a href="#cb514-2842" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit4)</span>
<span id="cb514-2843"><a href="#cb514-2843" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2844"><a href="#cb514-2844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2847"><a href="#cb514-2847" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2848"><a href="#cb514-2848" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom logit district1</span></span>
<span id="cb514-2849"><a href="#cb514-2849" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2850"><a href="#cb514-2850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2851"><a href="#cb514-2851" aria-hidden="true" tabindex="-1"></a>legis_logit_district0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2852"><a href="#cb514-2852" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged, </span>
<span id="cb514-2853"><a href="#cb514-2853" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2854"><a href="#cb514-2854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2855"><a href="#cb514-2855" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted model</span></span>
<span id="cb514-2856"><a href="#cb514-2856" aria-hidden="true" tabindex="-1"></a><span class="co"># keep education</span></span>
<span id="cb514-2857"><a href="#cb514-2857" aria-hidden="true" tabindex="-1"></a>legis_logit_district1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span>  black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2858"><a href="#cb514-2858" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged, </span>
<span id="cb514-2859"><a href="#cb514-2859" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2860"><a href="#cb514-2860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2861"><a href="#cb514-2861" aria-hidden="true" tabindex="-1"></a><span class="co"># keep occupation (blue_collar) </span></span>
<span id="cb514-2862"><a href="#cb514-2862" aria-hidden="true" tabindex="-1"></a>legis_logit_district2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span>  black_or_african_american_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2863"><a href="#cb514-2863" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged, </span>
<span id="cb514-2864"><a href="#cb514-2864" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2865"><a href="#cb514-2865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2866"><a href="#cb514-2866" aria-hidden="true" tabindex="-1"></a>legis_logit_district3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> agriculture_share <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2867"><a href="#cb514-2867" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged, </span>
<span id="cb514-2868"><a href="#cb514-2868" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2869"><a href="#cb514-2869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2870"><a href="#cb514-2870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2871"><a href="#cb514-2871" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- vif check ----</span></span>
<span id="cb514-2872"><a href="#cb514-2872" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit_district0)</span>
<span id="cb514-2873"><a href="#cb514-2873" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit_district1)</span>
<span id="cb514-2874"><a href="#cb514-2874" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit_district2)</span>
<span id="cb514-2875"><a href="#cb514-2875" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_logit_district3)</span>
<span id="cb514-2876"><a href="#cb514-2876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2877"><a href="#cb514-2877" aria-hidden="true" tabindex="-1"></a><span class="co"># results</span></span>
<span id="cb514-2878"><a href="#cb514-2878" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-2879"><a href="#cb514-2879" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-2880"><a href="#cb514-2880" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis All"</span> <span class="ot">=</span> legis_logit_district0,</span>
<span id="cb514-2881"><a href="#cb514-2881" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_logit_district1,</span>
<span id="cb514-2882"><a href="#cb514-2882" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_logit_district2,</span>
<span id="cb514-2883"><a href="#cb514-2883" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_logit_district3</span>
<span id="cb514-2884"><a href="#cb514-2884" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-2885"><a href="#cb514-2885" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-2886"><a href="#cb514-2886" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-2887"><a href="#cb514-2887" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"logitmodel_legis_isdom_district.html"</span>),</span>
<span id="cb514-2888"><a href="#cb514-2888" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb514-2889"><a href="#cb514-2889" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_omit =</span> <span class="st">"AIC|BIC"</span></span>
<span id="cb514-2890"><a href="#cb514-2890" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-2891"><a href="#cb514-2891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2892"><a href="#cb514-2892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2893"><a href="#cb514-2893" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2894"><a href="#cb514-2894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2895"><a href="#cb514-2895" aria-hidden="true" tabindex="-1"></a><span class="fu">#### residual check for logit model</span></span>
<span id="cb514-2896"><a href="#cb514-2896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2899"><a href="#cb514-2899" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2900"><a href="#cb514-2900" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: logit model residual check</span></span>
<span id="cb514-2901"><a href="#cb514-2901" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2902"><a href="#cb514-2902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2903"><a href="#cb514-2903" aria-hidden="true" tabindex="-1"></a>model_list_legis_dom_logit <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-2904"><a href="#cb514-2904" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom_logit1"</span> <span class="ot">=</span> legis_logit1,</span>
<span id="cb514-2905"><a href="#cb514-2905" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom_logit2"</span> <span class="ot">=</span> legis_logit2,</span>
<span id="cb514-2906"><a href="#cb514-2906" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom_logit3"</span> <span class="ot">=</span> legis_logit3,</span>
<span id="cb514-2907"><a href="#cb514-2907" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom_logit4"</span> <span class="ot">=</span> legis_logit4</span>
<span id="cb514-2908"><a href="#cb514-2908" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-2909"><a href="#cb514-2909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2910"><a href="#cb514-2910" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_logit_residuals</span>(model_list_legis_dom_logit, legis_cg)</span>
<span id="cb514-2911"><a href="#cb514-2911" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2912"><a href="#cb514-2912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2913"><a href="#cb514-2913" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.1.2 single variable logit model</span></span>
<span id="cb514-2914"><a href="#cb514-2914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2915"><a href="#cb514-2915" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-2916"><a href="#cb514-2916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2919"><a href="#cb514-2919" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2920"><a href="#cb514-2920" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom logit sin2</span></span>
<span id="cb514-2921"><a href="#cb514-2921" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2922"><a href="#cb514-2922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2923"><a href="#cb514-2923" aria-hidden="true" tabindex="-1"></a>legis_logit_age <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2924"><a href="#cb514-2924" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2925"><a href="#cb514-2925" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2926"><a href="#cb514-2926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2927"><a href="#cb514-2927" aria-hidden="true" tabindex="-1"></a>legis_logit_ideology <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> ideology <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2928"><a href="#cb514-2928" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2929"><a href="#cb514-2929" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2930"><a href="#cb514-2930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2931"><a href="#cb514-2931" aria-hidden="true" tabindex="-1"></a>legis_logit_is.republican <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> is.republican <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2932"><a href="#cb514-2932" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2933"><a href="#cb514-2933" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2934"><a href="#cb514-2934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2935"><a href="#cb514-2935" aria-hidden="true" tabindex="-1"></a>legis_logit_gender <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2936"><a href="#cb514-2936" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2937"><a href="#cb514-2937" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2938"><a href="#cb514-2938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2939"><a href="#cb514-2939" aria-hidden="true" tabindex="-1"></a>legis_logit_chamber <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> chamber <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2940"><a href="#cb514-2940" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2941"><a href="#cb514-2941" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2942"><a href="#cb514-2942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2943"><a href="#cb514-2943" aria-hidden="true" tabindex="-1"></a>legis_logit_seniority <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-2944"><a href="#cb514-2944" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-2945"><a href="#cb514-2945" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2946"><a href="#cb514-2946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2947"><a href="#cb514-2947" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-2948"><a href="#cb514-2948" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-2949"><a href="#cb514-2949" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-2950"><a href="#cb514-2950" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_logit_age,</span>
<span id="cb514-2951"><a href="#cb514-2951" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_logit_ideology,</span>
<span id="cb514-2952"><a href="#cb514-2952" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_logit_is.republican,</span>
<span id="cb514-2953"><a href="#cb514-2953" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_logit_gender,</span>
<span id="cb514-2954"><a href="#cb514-2954" aria-hidden="true" tabindex="-1"></a>    <span class="st">"5"</span> <span class="ot">=</span> legis_logit_chamber,</span>
<span id="cb514-2955"><a href="#cb514-2955" aria-hidden="true" tabindex="-1"></a>    <span class="st">"6"</span> <span class="ot">=</span> legis_logit_seniority</span>
<span id="cb514-2956"><a href="#cb514-2956" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-2957"><a href="#cb514-2957" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-2958"><a href="#cb514-2958" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-2959"><a href="#cb514-2959" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"logitmodel_legis_seperated_isdom.html"</span>),</span>
<span id="cb514-2960"><a href="#cb514-2960" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb514-2961"><a href="#cb514-2961" aria-hidden="true" tabindex="-1"></a>  <span class="at">gof_omit =</span> <span class="st">"AIC|BIC"</span></span>
<span id="cb514-2962"><a href="#cb514-2962" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-2963"><a href="#cb514-2963" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-2964"><a href="#cb514-2964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2967"><a href="#cb514-2967" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-2968"><a href="#cb514-2968" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom logit sin district2</span></span>
<span id="cb514-2969"><a href="#cb514-2969" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-2970"><a href="#cb514-2970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2971"><a href="#cb514-2971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2972"><a href="#cb514-2972" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-2973"><a href="#cb514-2973" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb514-2974"><a href="#cb514-2974" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age"</span>, <span class="st">"party"</span>, <span class="st">"ideology"</span>, <span class="st">"chamber"</span>, <span class="st">"gender"</span>, <span class="st">"seniority"</span>,</span>
<span id="cb514-2975"><a href="#cb514-2975" aria-hidden="true" tabindex="-1"></a>  <span class="st">"high_edu_share"</span>, <span class="st">"foreign_born_ratio"</span>, <span class="st">"white_ratio"</span>, </span>
<span id="cb514-2976"><a href="#cb514-2976" aria-hidden="true" tabindex="-1"></a>  <span class="st">"black_or_african_american_ratio"</span>, <span class="st">"asian_ratio"</span>,</span>
<span id="cb514-2977"><a href="#cb514-2977" aria-hidden="true" tabindex="-1"></a>  <span class="st">"american_indian_and_alaska_native_ratio"</span>, </span>
<span id="cb514-2978"><a href="#cb514-2978" aria-hidden="true" tabindex="-1"></a>  <span class="st">"native_hawaiian_and_other_pacific_islander_ratio"</span>,</span>
<span id="cb514-2979"><a href="#cb514-2979" aria-hidden="true" tabindex="-1"></a>  <span class="st">"white_collar_share"</span>, <span class="st">"blue_collar_share"</span>, <span class="st">"agriculture_share"</span>,</span>
<span id="cb514-2980"><a href="#cb514-2980" aria-hidden="true" tabindex="-1"></a>  <span class="st">"median_household_income_that_year"</span></span>
<span id="cb514-2981"><a href="#cb514-2981" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-2982"><a href="#cb514-2982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2983"><a href="#cb514-2983" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="ot">&lt;-</span> vars <span class="sc">%&gt;%</span></span>
<span id="cb514-2984"><a href="#cb514-2984" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="cf">function</span>(v) {</span>
<span id="cb514-2985"><a href="#cb514-2985" aria-hidden="true" tabindex="-1"></a>    formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"is.dom ~ "</span>, v, <span class="st">" + as.factor(congress)"</span>)</span>
<span id="cb514-2986"><a href="#cb514-2986" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="fu">as.formula</span>(formula_str), <span class="at">data =</span> legis_merged, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-2987"><a href="#cb514-2987" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-2988"><a href="#cb514-2988" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>(m) <span class="sc">%&gt;%</span></span>
<span id="cb514-2989"><a href="#cb514-2989" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(term <span class="sc">==</span> v) <span class="sc">%&gt;%</span></span>
<span id="cb514-2990"><a href="#cb514-2990" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">var =</span> v,</span>
<span id="cb514-2991"><a href="#cb514-2991" aria-hidden="true" tabindex="-1"></a>             <span class="at">OR =</span> <span class="fu">exp</span>(estimate)) <span class="co"># odds ratio</span></span>
<span id="cb514-2992"><a href="#cb514-2992" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb514-2993"><a href="#cb514-2993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2994"><a href="#cb514-2994" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-2995"><a href="#cb514-2995" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="sc">%&gt;%</span></span>
<span id="cb514-2996"><a href="#cb514-2996" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value, OR) <span class="sc">%&gt;%</span></span>
<span id="cb514-2997"><a href="#cb514-2997" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-2998"><a href="#cb514-2998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-2999"><a href="#cb514-2999" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="sc">%&gt;%</span></span>
<span id="cb514-3000"><a href="#cb514-3000" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-3001"><a href="#cb514-3001" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">"***"</span>,</span>
<span id="cb514-3002"><a href="#cb514-3002" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.01</span> <span class="sc">~</span> <span class="st">"**"</span>,</span>
<span id="cb514-3003"><a href="#cb514-3003" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"*"</span>,</span>
<span id="cb514-3004"><a href="#cb514-3004" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.1</span> <span class="sc">~</span> <span class="st">"+"</span>,</span>
<span id="cb514-3005"><a href="#cb514-3005" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb514-3006"><a href="#cb514-3006" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb514-3007"><a href="#cb514-3007" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(var, estimate), <span class="at">y =</span> estimate, <span class="at">color =</span> p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)) <span class="sc">+</span></span>
<span id="cb514-3008"><a href="#cb514-3008" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb514-3009"><a href="#cb514-3009" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3010"><a href="#cb514-3010" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3011"><a href="#cb514-3011" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-3012"><a href="#cb514-3012" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-3013"><a href="#cb514-3013" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-3014"><a href="#cb514-3014" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variables"</span>, <span class="at">y =</span> <span class="st">"Logit Coefficient (is.dom)"</span>,</span>
<span id="cb514-3015"><a href="#cb514-3015" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Single-variable Logit Results (with Congress FE)"</span>)</span>
<span id="cb514-3016"><a href="#cb514-3016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3017"><a href="#cb514-3017" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3018"><a href="#cb514-3018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3019"><a href="#cb514-3019" aria-hidden="true" tabindex="-1"></a>coefficient plot</span>
<span id="cb514-3020"><a href="#cb514-3020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3023"><a href="#cb514-3023" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3024"><a href="#cb514-3024" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom coefficient plot</span></span>
<span id="cb514-3025"><a href="#cb514-3025" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3026"><a href="#cb514-3026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3027"><a href="#cb514-3027" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- model lists -----</span></span>
<span id="cb514-3028"><a href="#cb514-3028" aria-hidden="true" tabindex="-1"></a>legis_lm_models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3029"><a href="#cb514-3029" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> legis_logit_age,</span>
<span id="cb514-3030"><a href="#cb514-3030" aria-hidden="true" tabindex="-1"></a>  <span class="at">ideology =</span> legis_logit_ideology,</span>
<span id="cb514-3031"><a href="#cb514-3031" aria-hidden="true" tabindex="-1"></a>  <span class="at">is_republican =</span> legis_logit_is.republican,</span>
<span id="cb514-3032"><a href="#cb514-3032" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> legis_logit_gender,</span>
<span id="cb514-3033"><a href="#cb514-3033" aria-hidden="true" tabindex="-1"></a>  <span class="at">chamber =</span> legis_logit_chamber,</span>
<span id="cb514-3034"><a href="#cb514-3034" aria-hidden="true" tabindex="-1"></a>  <span class="at">seniority =</span> legis_logit_seniority</span>
<span id="cb514-3035"><a href="#cb514-3035" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3036"><a href="#cb514-3036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3037"><a href="#cb514-3037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3038"><a href="#cb514-3038" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- extract coefficient and clean -----</span></span>
<span id="cb514-3039"><a href="#cb514-3039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3040"><a href="#cb514-3040" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3041"><a href="#cb514-3041" aria-hidden="true" tabindex="-1"></a>coef_legis <span class="ot">&lt;-</span> <span class="fu">map_df</span>(<span class="fu">names</span>(legis_lm_models), <span class="cf">function</span>(name) {</span>
<span id="cb514-3042"><a href="#cb514-3042" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(legis_lm_models[[name]]) <span class="sc">%&gt;%</span></span>
<span id="cb514-3043"><a href="#cb514-3043" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">model =</span> name)</span>
<span id="cb514-3044"><a href="#cb514-3044" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb514-3045"><a href="#cb514-3045" aria-hidden="true" tabindex="-1"></a>coef_legis_clean <span class="ot">&lt;-</span> coef_legis <span class="sc">%&gt;%</span></span>
<span id="cb514-3046"><a href="#cb514-3046" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"Intercept|congress"</span>, term))</span>
<span id="cb514-3047"><a href="#cb514-3047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3048"><a href="#cb514-3048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3049"><a href="#cb514-3049" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- estimate and 95% CI -----</span></span>
<span id="cb514-3050"><a href="#cb514-3050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3051"><a href="#cb514-3051" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(coef_legis_clean, <span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> <span class="fu">reorder</span>(model, estimate))) <span class="sc">+</span></span>
<span id="cb514-3052"><a href="#cb514-3052" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3053"><a href="#cb514-3053" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3054"><a href="#cb514-3054" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xmax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3055"><a href="#cb514-3055" aria-hidden="true" tabindex="-1"></a>                 <span class="at">height =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3056"><a href="#cb514-3056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray40"</span>) <span class="sc">+</span></span>
<span id="cb514-3057"><a href="#cb514-3057" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb514-3058"><a href="#cb514-3058" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3059"><a href="#cb514-3059" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Coefficient Estimates Across Models"</span>,</span>
<span id="cb514-3060"><a href="#cb514-3060" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coefficient Estimate (with 95% CI)"</span>,</span>
<span id="cb514-3061"><a href="#cb514-3061" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predictor Variable"</span></span>
<span id="cb514-3062"><a href="#cb514-3062" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-3063"><a href="#cb514-3063" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_logit_single_coefficient.png"</span>, <span class="at">plot =</span> p2, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3064"><a href="#cb514-3064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3065"><a href="#cb514-3065" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3066"><a href="#cb514-3066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3067"><a href="#cb514-3067" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.2 dependent variable: dom_percentage</span></span>
<span id="cb514-3068"><a href="#cb514-3068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3069"><a href="#cb514-3069" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.2.1 multiple variables regression model</span></span>
<span id="cb514-3070"><a href="#cb514-3070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3071"><a href="#cb514-3071" aria-hidden="true" tabindex="-1"></a>lasso</span>
<span id="cb514-3072"><a href="#cb514-3072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3075"><a href="#cb514-3075" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3076"><a href="#cb514-3076" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage lm mul1</span></span>
<span id="cb514-3077"><a href="#cb514-3077" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3078"><a href="#cb514-3078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3079"><a href="#cb514-3079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3080"><a href="#cb514-3080" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3081"><a href="#cb514-3081" aria-hidden="true" tabindex="-1"></a>cv_lasso_legis1 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(</span>
<span id="cb514-3082"><a href="#cb514-3082" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> legis_cg,</span>
<span id="cb514-3083"><a href="#cb514-3083" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> dom_percentage <span class="sc">~</span> age <span class="sc">+</span> is.republican <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-3084"><a href="#cb514-3084" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb514-3085"><a href="#cb514-3085" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>  </span>
<span id="cb514-3086"><a href="#cb514-3086" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3087"><a href="#cb514-3087" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3088"><a href="#cb514-3088" aria-hidden="true" tabindex="-1"></a>cv_ridge_legis1 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(</span>
<span id="cb514-3089"><a href="#cb514-3089" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> legis_cg,</span>
<span id="cb514-3090"><a href="#cb514-3090" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> dom_percentage <span class="sc">~</span> age <span class="sc">+</span> is.republican <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-3091"><a href="#cb514-3091" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb514-3092"><a href="#cb514-3092" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>  </span>
<span id="cb514-3093"><a href="#cb514-3093" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3094"><a href="#cb514-3094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3095"><a href="#cb514-3095" aria-hidden="true" tabindex="-1"></a>cv_elnet_legis1 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(</span>
<span id="cb514-3096"><a href="#cb514-3096" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> legis_cg,</span>
<span id="cb514-3097"><a href="#cb514-3097" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> dom_percentage <span class="sc">~</span> age <span class="sc">+</span> is.republican <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-3098"><a href="#cb514-3098" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb514-3099"><a href="#cb514-3099" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>  </span>
<span id="cb514-3100"><a href="#cb514-3100" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3101"><a href="#cb514-3101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3102"><a href="#cb514-3102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3103"><a href="#cb514-3103" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-3104"><a href="#cb514-3104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3107"><a href="#cb514-3107" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3108"><a href="#cb514-3108" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage lm mul3</span></span>
<span id="cb514-3109"><a href="#cb514-3109" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3110"><a href="#cb514-3110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3111"><a href="#cb514-3111" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb514-3112"><a href="#cb514-3112" aria-hidden="true" tabindex="-1"></a>legis_lm0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3113"><a href="#cb514-3113" aria-hidden="true" tabindex="-1"></a>                     is.republican <span class="sc">+</span> ideology <span class="sc">+</span> seniority<span class="sc">+</span> </span>
<span id="cb514-3114"><a href="#cb514-3114" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span> </span>
<span id="cb514-3115"><a href="#cb514-3115" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3116"><a href="#cb514-3116" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3117"><a href="#cb514-3117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3118"><a href="#cb514-3118" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted</span></span>
<span id="cb514-3119"><a href="#cb514-3119" aria-hidden="true" tabindex="-1"></a>legis_lm1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3120"><a href="#cb514-3120" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span> is.republican </span>
<span id="cb514-3121"><a href="#cb514-3121" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">+</span> <span class="fu">as.factor</span>(congress),   <span class="at">data =</span> legis_cg )</span>
<span id="cb514-3122"><a href="#cb514-3122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3123"><a href="#cb514-3123" aria-hidden="true" tabindex="-1"></a>legis_lm2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3124"><a href="#cb514-3124" aria-hidden="true" tabindex="-1"></a>                     ideology <span class="sc">+</span> </span>
<span id="cb514-3125"><a href="#cb514-3125" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3126"><a href="#cb514-3126" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3127"><a href="#cb514-3127" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3128"><a href="#cb514-3128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3129"><a href="#cb514-3129" aria-hidden="true" tabindex="-1"></a>legis_lm3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> seniority <span class="sc">+</span> </span>
<span id="cb514-3130"><a href="#cb514-3130" aria-hidden="true" tabindex="-1"></a>                     ideology <span class="sc">+</span> </span>
<span id="cb514-3131"><a href="#cb514-3131" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3132"><a href="#cb514-3132" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3133"><a href="#cb514-3133" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3134"><a href="#cb514-3134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3135"><a href="#cb514-3135" aria-hidden="true" tabindex="-1"></a>legis_lm4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> seniority <span class="sc">+</span> </span>
<span id="cb514-3136"><a href="#cb514-3136" aria-hidden="true" tabindex="-1"></a>                     is.republican <span class="sc">+</span> </span>
<span id="cb514-3137"><a href="#cb514-3137" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3138"><a href="#cb514-3138" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3139"><a href="#cb514-3139" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3140"><a href="#cb514-3140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3141"><a href="#cb514-3141" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3142"><a href="#cb514-3142" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3143"><a href="#cb514-3143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3144"><a href="#cb514-3144" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis LM"</span> <span class="ot">=</span> legis_lm0,</span>
<span id="cb514-3145"><a href="#cb514-3145" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_lm1,</span>
<span id="cb514-3146"><a href="#cb514-3146" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_lm2,</span>
<span id="cb514-3147"><a href="#cb514-3147" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_lm3,</span>
<span id="cb514-3148"><a href="#cb514-3148" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_lm4</span>
<span id="cb514-3149"><a href="#cb514-3149" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3150"><a href="#cb514-3150" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3151"><a href="#cb514-3151" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3152"><a href="#cb514-3152" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodels_legis_dom.html"</span>),</span>
<span id="cb514-3153"><a href="#cb514-3153" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3154"><a href="#cb514-3154" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3155"><a href="#cb514-3155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3156"><a href="#cb514-3156" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- vif check ----</span></span>
<span id="cb514-3157"><a href="#cb514-3157" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm0)</span>
<span id="cb514-3158"><a href="#cb514-3158" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm1)</span>
<span id="cb514-3159"><a href="#cb514-3159" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm2)</span>
<span id="cb514-3160"><a href="#cb514-3160" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm3)</span>
<span id="cb514-3161"><a href="#cb514-3161" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm4)</span>
<span id="cb514-3162"><a href="#cb514-3162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3163"><a href="#cb514-3163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3164"><a href="#cb514-3164" aria-hidden="true" tabindex="-1"></a>legis_lm0 marginal effects</span>
<span id="cb514-3165"><a href="#cb514-3165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3168"><a href="#cb514-3168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3169"><a href="#cb514-3169" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage marginal effects legis</span></span>
<span id="cb514-3170"><a href="#cb514-3170" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3171"><a href="#cb514-3171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3172"><a href="#cb514-3172" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3173"><a href="#cb514-3173" aria-hidden="true" tabindex="-1"></a>eff_age1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"age"</span>)</span>
<span id="cb514-3174"><a href="#cb514-3174" aria-hidden="true" tabindex="-1"></a>eff_ideo1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"ideology"</span>)</span>
<span id="cb514-3175"><a href="#cb514-3175" aria-hidden="true" tabindex="-1"></a>eff_sen1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"seniority"</span>)</span>
<span id="cb514-3176"><a href="#cb514-3176" aria-hidden="true" tabindex="-1"></a>eff_gender1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"gender"</span>)</span>
<span id="cb514-3177"><a href="#cb514-3177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3178"><a href="#cb514-3178" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology</span></span>
<span id="cb514-3179"><a href="#cb514-3179" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(eff_ideo1, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> predicted)) <span class="sc">+</span></span>
<span id="cb514-3180"><a href="#cb514-3180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb514-3181"><a href="#cb514-3181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-3182"><a href="#cb514-3182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3183"><a href="#cb514-3183" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Ideology"</span>,</span>
<span id="cb514-3184"><a href="#cb514-3184" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Domestic Percentage"</span>,</span>
<span id="cb514-3185"><a href="#cb514-3185" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect of Ideology on Domestic Percentage Legis"</span></span>
<span id="cb514-3186"><a href="#cb514-3186" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-3187"><a href="#cb514-3187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-3188"><a href="#cb514-3188" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"ideology_marginal_effect_legis_dom.png"</span>, <span class="at">plot =</span> p2, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3189"><a href="#cb514-3189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3190"><a href="#cb514-3190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3191"><a href="#cb514-3191" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.2.2 single variable regression model</span></span>
<span id="cb514-3192"><a href="#cb514-3192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3193"><a href="#cb514-3193" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-3194"><a href="#cb514-3194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3197"><a href="#cb514-3197" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3198"><a href="#cb514-3198" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage lm sin2</span></span>
<span id="cb514-3199"><a href="#cb514-3199" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3200"><a href="#cb514-3200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3201"><a href="#cb514-3201" aria-hidden="true" tabindex="-1"></a>legis_cg_age1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span></span>
<span id="cb514-3202"><a href="#cb514-3202" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3203"><a href="#cb514-3203" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3204"><a href="#cb514-3204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3205"><a href="#cb514-3205" aria-hidden="true" tabindex="-1"></a>legis_cg_ideology1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> ideology <span class="sc">+</span></span>
<span id="cb514-3206"><a href="#cb514-3206" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3207"><a href="#cb514-3207" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3208"><a href="#cb514-3208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3209"><a href="#cb514-3209" aria-hidden="true" tabindex="-1"></a>legis_cg_is.republican1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> is.republican <span class="sc">+</span></span>
<span id="cb514-3210"><a href="#cb514-3210" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3211"><a href="#cb514-3211" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3212"><a href="#cb514-3212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3213"><a href="#cb514-3213" aria-hidden="true" tabindex="-1"></a>legis_cg_chamber1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> chamber <span class="sc">+</span></span>
<span id="cb514-3214"><a href="#cb514-3214" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3215"><a href="#cb514-3215" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3216"><a href="#cb514-3216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3217"><a href="#cb514-3217" aria-hidden="true" tabindex="-1"></a>legis_cg_gender1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> gender <span class="sc">+</span></span>
<span id="cb514-3218"><a href="#cb514-3218" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3219"><a href="#cb514-3219" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3220"><a href="#cb514-3220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3221"><a href="#cb514-3221" aria-hidden="true" tabindex="-1"></a>legis_cg_seniority1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> seniority <span class="sc">+</span></span>
<span id="cb514-3222"><a href="#cb514-3222" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3223"><a href="#cb514-3223" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3224"><a href="#cb514-3224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3225"><a href="#cb514-3225" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3226"><a href="#cb514-3226" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3227"><a href="#cb514-3227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3228"><a href="#cb514-3228" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_cg_age1,</span>
<span id="cb514-3229"><a href="#cb514-3229" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_cg_ideology1,</span>
<span id="cb514-3230"><a href="#cb514-3230" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_cg_is.republican1,</span>
<span id="cb514-3231"><a href="#cb514-3231" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_cg_gender1,</span>
<span id="cb514-3232"><a href="#cb514-3232" aria-hidden="true" tabindex="-1"></a>    <span class="st">"5"</span> <span class="ot">=</span> legis_cg_chamber1,</span>
<span id="cb514-3233"><a href="#cb514-3233" aria-hidden="true" tabindex="-1"></a>    <span class="st">"6"</span> <span class="ot">=</span> legis_cg_seniority1</span>
<span id="cb514-3234"><a href="#cb514-3234" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3235"><a href="#cb514-3235" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3236"><a href="#cb514-3236" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3237"><a href="#cb514-3237" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodel_legis_seperated_dom.html"</span>),</span>
<span id="cb514-3238"><a href="#cb514-3238" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3239"><a href="#cb514-3239" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3240"><a href="#cb514-3240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3241"><a href="#cb514-3241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3242"><a href="#cb514-3242" aria-hidden="true" tabindex="-1"></a>single variable model coefficient plot</span>
<span id="cb514-3243"><a href="#cb514-3243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3246"><a href="#cb514-3246" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3247"><a href="#cb514-3247" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage coefficient plot</span></span>
<span id="cb514-3248"><a href="#cb514-3248" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3249"><a href="#cb514-3249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3250"><a href="#cb514-3250" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- model lists -----</span></span>
<span id="cb514-3251"><a href="#cb514-3251" aria-hidden="true" tabindex="-1"></a>legis_lm_models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3252"><a href="#cb514-3252" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> legis_cg_age1,</span>
<span id="cb514-3253"><a href="#cb514-3253" aria-hidden="true" tabindex="-1"></a>  <span class="at">ideology =</span> legis_cg_ideology1,</span>
<span id="cb514-3254"><a href="#cb514-3254" aria-hidden="true" tabindex="-1"></a>  <span class="at">is_republican =</span> legis_cg_is.republican1,</span>
<span id="cb514-3255"><a href="#cb514-3255" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> legis_cg_gender1,</span>
<span id="cb514-3256"><a href="#cb514-3256" aria-hidden="true" tabindex="-1"></a>  <span class="at">chamber =</span> legis_cg_chamber1,</span>
<span id="cb514-3257"><a href="#cb514-3257" aria-hidden="true" tabindex="-1"></a>  <span class="at">seniority =</span> legis_cg_seniority1</span>
<span id="cb514-3258"><a href="#cb514-3258" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3259"><a href="#cb514-3259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3260"><a href="#cb514-3260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3261"><a href="#cb514-3261" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- extract coefficient and clean -----</span></span>
<span id="cb514-3262"><a href="#cb514-3262" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3263"><a href="#cb514-3263" aria-hidden="true" tabindex="-1"></a>coef_legis1 <span class="ot">&lt;-</span> <span class="fu">map_df</span>(<span class="fu">names</span>(legis_lm_models), <span class="cf">function</span>(name) {</span>
<span id="cb514-3264"><a href="#cb514-3264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(legis_lm_models[[name]]) <span class="sc">%&gt;%</span>  </span>
<span id="cb514-3265"><a href="#cb514-3265" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">model =</span> name)</span>
<span id="cb514-3266"><a href="#cb514-3266" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb514-3267"><a href="#cb514-3267" aria-hidden="true" tabindex="-1"></a>coef_legis_clean1 <span class="ot">&lt;-</span> coef_legis1 <span class="sc">%&gt;%</span></span>
<span id="cb514-3268"><a href="#cb514-3268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"Intercept|congress"</span>, term))</span>
<span id="cb514-3269"><a href="#cb514-3269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3270"><a href="#cb514-3270" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- estimate and 95% CI -----</span></span>
<span id="cb514-3271"><a href="#cb514-3271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3272"><a href="#cb514-3272" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(coef_legis_clean1, <span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> <span class="fu">reorder</span>(model, estimate))) <span class="sc">+</span></span>
<span id="cb514-3273"><a href="#cb514-3273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3274"><a href="#cb514-3274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3275"><a href="#cb514-3275" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xmax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3276"><a href="#cb514-3276" aria-hidden="true" tabindex="-1"></a>                 <span class="at">height =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3277"><a href="#cb514-3277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray40"</span>) <span class="sc">+</span></span>
<span id="cb514-3278"><a href="#cb514-3278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb514-3279"><a href="#cb514-3279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3280"><a href="#cb514-3280" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Coefficient Estimates Across Models"</span>,</span>
<span id="cb514-3281"><a href="#cb514-3281" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coefficient Estimate (with 95% CI)"</span>,</span>
<span id="cb514-3282"><a href="#cb514-3282" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predictor Variable"</span></span>
<span id="cb514-3283"><a href="#cb514-3283" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-3284"><a href="#cb514-3284" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_lm_single_coefficient_dom.png"</span>, <span class="at">plot =</span> p4, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3285"><a href="#cb514-3285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3286"><a href="#cb514-3286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3287"><a href="#cb514-3287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3288"><a href="#cb514-3288" aria-hidden="true" tabindex="-1"></a><span class="fu">### robustness check</span></span>
<span id="cb514-3289"><a href="#cb514-3289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3292"><a href="#cb514-3292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3293"><a href="#cb514-3293" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage robust check</span></span>
<span id="cb514-3294"><a href="#cb514-3294" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3295"><a href="#cb514-3295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3296"><a href="#cb514-3296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3297"><a href="#cb514-3297" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3298"><a href="#cb514-3298" aria-hidden="true" tabindex="-1"></a>model_legis_lm_dom_multiple <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3299"><a href="#cb514-3299" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom"</span> <span class="ot">=</span> legis_lm0,</span>
<span id="cb514-3300"><a href="#cb514-3300" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom1"</span> <span class="ot">=</span> legis_lm1,</span>
<span id="cb514-3301"><a href="#cb514-3301" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom2"</span> <span class="ot">=</span> legis_lm2,</span>
<span id="cb514-3302"><a href="#cb514-3302" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom3"</span> <span class="ot">=</span> legis_lm3,</span>
<span id="cb514-3303"><a href="#cb514-3303" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom4"</span> <span class="ot">=</span> legis_lm4</span>
<span id="cb514-3304"><a href="#cb514-3304" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3305"><a href="#cb514-3305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3306"><a href="#cb514-3306" aria-hidden="true" tabindex="-1"></a>models_legis_lm_dom <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3307"><a href="#cb514-3307" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_age_dom"</span> <span class="ot">=</span> legis_cg_age1,</span>
<span id="cb514-3308"><a href="#cb514-3308" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_ideology_dom"</span> <span class="ot">=</span> legis_cg_ideology1,</span>
<span id="cb514-3309"><a href="#cb514-3309" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_is.republican_dom"</span> <span class="ot">=</span> legis_cg_is.republican1,</span>
<span id="cb514-3310"><a href="#cb514-3310" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_gender_dom"</span> <span class="ot">=</span> legis_cg_gender1,</span>
<span id="cb514-3311"><a href="#cb514-3311" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_chamber_dom"</span> <span class="ot">=</span> legis_cg_chamber1,</span>
<span id="cb514-3312"><a href="#cb514-3312" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_seniority_dom"</span> <span class="ot">=</span> legis_cg_seniority1</span>
<span id="cb514-3313"><a href="#cb514-3313" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3314"><a href="#cb514-3314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3315"><a href="#cb514-3315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3316"><a href="#cb514-3316" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3317"><a href="#cb514-3317" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_lm_diagnostics</span>(model_legis_lm_dom_multiple)</span>
<span id="cb514-3318"><a href="#cb514-3318" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_lm_diagnostics</span>(models_legis_lm_dom)</span>
<span id="cb514-3319"><a href="#cb514-3319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3320"><a href="#cb514-3320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3321"><a href="#cb514-3321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3322"><a href="#cb514-3322" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.3 dependent variable: prof_percentage</span></span>
<span id="cb514-3323"><a href="#cb514-3323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3324"><a href="#cb514-3324" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.3.1 multiple variables regression model</span></span>
<span id="cb514-3325"><a href="#cb514-3325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3326"><a href="#cb514-3326" aria-hidden="true" tabindex="-1"></a>lasso</span>
<span id="cb514-3327"><a href="#cb514-3327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3330"><a href="#cb514-3330" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3331"><a href="#cb514-3331" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof_percentage lm lasso</span></span>
<span id="cb514-3332"><a href="#cb514-3332" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3333"><a href="#cb514-3333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3334"><a href="#cb514-3334" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3335"><a href="#cb514-3335" aria-hidden="true" tabindex="-1"></a>cv_lasso_legis2 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, prof_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb514-3336"><a href="#cb514-3336" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3337"><a href="#cb514-3337" aria-hidden="true" tabindex="-1"></a>cv_ridge_legis2 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, prof_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb514-3338"><a href="#cb514-3338" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3339"><a href="#cb514-3339" aria-hidden="true" tabindex="-1"></a>cv_elnet_legis2 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, prof_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb514-3340"><a href="#cb514-3340" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3341"><a href="#cb514-3341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3342"><a href="#cb514-3342" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3343"><a href="#cb514-3343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3346"><a href="#cb514-3346" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3347"><a href="#cb514-3347" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof_percentage lm lasso2</span></span>
<span id="cb514-3348"><a href="#cb514-3348" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3349"><a href="#cb514-3349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3350"><a href="#cb514-3350" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3351"><a href="#cb514-3351" aria-hidden="true" tabindex="-1"></a>cv_lasso_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_merged, prof_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb514-3352"><a href="#cb514-3352" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3353"><a href="#cb514-3353" aria-hidden="true" tabindex="-1"></a>cv_ridge_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_merged, prof_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb514-3354"><a href="#cb514-3354" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3355"><a href="#cb514-3355" aria-hidden="true" tabindex="-1"></a>cv_elnet_legis <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_merged, prof_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span> american_indian_and_alaska_native_ratio <span class="sc">+</span> native_hawaiian_and_other_pacific_islander_ratio <span class="sc">+</span> white_collar_share <span class="sc">+</span> blue_collar_share <span class="sc">+</span> agriculture_share <span class="sc">+</span> median_household_income_that_year <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb514-3356"><a href="#cb514-3356" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3357"><a href="#cb514-3357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3358"><a href="#cb514-3358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3359"><a href="#cb514-3359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3360"><a href="#cb514-3360" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-3361"><a href="#cb514-3361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3364"><a href="#cb514-3364" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3365"><a href="#cb514-3365" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage lm mul3</span></span>
<span id="cb514-3366"><a href="#cb514-3366" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3367"><a href="#cb514-3367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3368"><a href="#cb514-3368" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb514-3369"><a href="#cb514-3369" aria-hidden="true" tabindex="-1"></a>legis_lm01 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3370"><a href="#cb514-3370" aria-hidden="true" tabindex="-1"></a>                     is.republican <span class="sc">+</span> ideology <span class="sc">+</span> seniority<span class="sc">+</span> </span>
<span id="cb514-3371"><a href="#cb514-3371" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span> </span>
<span id="cb514-3372"><a href="#cb514-3372" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3373"><a href="#cb514-3373" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3374"><a href="#cb514-3374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3375"><a href="#cb514-3375" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted</span></span>
<span id="cb514-3376"><a href="#cb514-3376" aria-hidden="true" tabindex="-1"></a>legis_lm11 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3377"><a href="#cb514-3377" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span> is.republican </span>
<span id="cb514-3378"><a href="#cb514-3378" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">+</span> <span class="fu">as.factor</span>(congress),   <span class="at">data =</span> legis_cg )</span>
<span id="cb514-3379"><a href="#cb514-3379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3380"><a href="#cb514-3380" aria-hidden="true" tabindex="-1"></a>legis_lm21 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3381"><a href="#cb514-3381" aria-hidden="true" tabindex="-1"></a>                     ideology <span class="sc">+</span> </span>
<span id="cb514-3382"><a href="#cb514-3382" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3383"><a href="#cb514-3383" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3384"><a href="#cb514-3384" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3385"><a href="#cb514-3385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3386"><a href="#cb514-3386" aria-hidden="true" tabindex="-1"></a>legis_lm31 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> seniority <span class="sc">+</span> </span>
<span id="cb514-3387"><a href="#cb514-3387" aria-hidden="true" tabindex="-1"></a>                     ideology <span class="sc">+</span> </span>
<span id="cb514-3388"><a href="#cb514-3388" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3389"><a href="#cb514-3389" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3390"><a href="#cb514-3390" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3391"><a href="#cb514-3391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3392"><a href="#cb514-3392" aria-hidden="true" tabindex="-1"></a>legis_lm41 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> seniority <span class="sc">+</span> </span>
<span id="cb514-3393"><a href="#cb514-3393" aria-hidden="true" tabindex="-1"></a>                     is.republican <span class="sc">+</span> </span>
<span id="cb514-3394"><a href="#cb514-3394" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3395"><a href="#cb514-3395" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3396"><a href="#cb514-3396" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3397"><a href="#cb514-3397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3398"><a href="#cb514-3398" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3399"><a href="#cb514-3399" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3400"><a href="#cb514-3400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3401"><a href="#cb514-3401" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis LM"</span> <span class="ot">=</span> legis_lm01,</span>
<span id="cb514-3402"><a href="#cb514-3402" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_lm11,</span>
<span id="cb514-3403"><a href="#cb514-3403" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_lm21,</span>
<span id="cb514-3404"><a href="#cb514-3404" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_lm31,</span>
<span id="cb514-3405"><a href="#cb514-3405" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_lm41</span>
<span id="cb514-3406"><a href="#cb514-3406" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3407"><a href="#cb514-3407" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3408"><a href="#cb514-3408" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3409"><a href="#cb514-3409" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodels_legis_prof.html"</span>),</span>
<span id="cb514-3410"><a href="#cb514-3410" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3411"><a href="#cb514-3411" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3412"><a href="#cb514-3412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3413"><a href="#cb514-3413" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- vif check ----</span></span>
<span id="cb514-3414"><a href="#cb514-3414" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm0)</span>
<span id="cb514-3415"><a href="#cb514-3415" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm1)</span>
<span id="cb514-3416"><a href="#cb514-3416" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm2)</span>
<span id="cb514-3417"><a href="#cb514-3417" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm3)</span>
<span id="cb514-3418"><a href="#cb514-3418" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm4)</span>
<span id="cb514-3419"><a href="#cb514-3419" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3420"><a href="#cb514-3420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3423"><a href="#cb514-3423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3424"><a href="#cb514-3424" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof_and_dom_lmresult_summarize</span></span>
<span id="cb514-3425"><a href="#cb514-3425" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3426"><a href="#cb514-3426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3427"><a href="#cb514-3427" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3428"><a href="#cb514-3428" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3429"><a href="#cb514-3429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3430"><a href="#cb514-3430" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis_dom_is.republican"</span> <span class="ot">=</span> legis_lm21,</span>
<span id="cb514-3431"><a href="#cb514-3431" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis_dom_ideology"</span> <span class="ot">=</span> legis_lm31,</span>
<span id="cb514-3432"><a href="#cb514-3432" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis_prof_is.republican"</span> <span class="ot">=</span> legis_lm21,</span>
<span id="cb514-3433"><a href="#cb514-3433" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis_prof_ideology"</span> <span class="ot">=</span> legis_lm31</span>
<span id="cb514-3434"><a href="#cb514-3434" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3435"><a href="#cb514-3435" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3436"><a href="#cb514-3436" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3437"><a href="#cb514-3437" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodels_legis_all.html"</span>),</span>
<span id="cb514-3438"><a href="#cb514-3438" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3439"><a href="#cb514-3439" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3440"><a href="#cb514-3440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3441"><a href="#cb514-3441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3442"><a href="#cb514-3442" aria-hidden="true" tabindex="-1"></a>legis_lm0 marginal effects</span>
<span id="cb514-3443"><a href="#cb514-3443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3446"><a href="#cb514-3446" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3447"><a href="#cb514-3447" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage marginal effects legis</span></span>
<span id="cb514-3448"><a href="#cb514-3448" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3449"><a href="#cb514-3449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3450"><a href="#cb514-3450" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3451"><a href="#cb514-3451" aria-hidden="true" tabindex="-1"></a>eff_age1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"age"</span>)</span>
<span id="cb514-3452"><a href="#cb514-3452" aria-hidden="true" tabindex="-1"></a>eff_ideo1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"ideology"</span>)</span>
<span id="cb514-3453"><a href="#cb514-3453" aria-hidden="true" tabindex="-1"></a>eff_sen1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"seniority"</span>)</span>
<span id="cb514-3454"><a href="#cb514-3454" aria-hidden="true" tabindex="-1"></a>eff_gender1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"gender"</span>)</span>
<span id="cb514-3455"><a href="#cb514-3455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3456"><a href="#cb514-3456" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology</span></span>
<span id="cb514-3457"><a href="#cb514-3457" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(eff_ideo1, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> predicted)) <span class="sc">+</span></span>
<span id="cb514-3458"><a href="#cb514-3458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb514-3459"><a href="#cb514-3459" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-3460"><a href="#cb514-3460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3461"><a href="#cb514-3461" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Ideology"</span>,</span>
<span id="cb514-3462"><a href="#cb514-3462" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Professional Percentage"</span>,</span>
<span id="cb514-3463"><a href="#cb514-3463" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect of Ideology on Professional Percentage Legis"</span></span>
<span id="cb514-3464"><a href="#cb514-3464" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-3465"><a href="#cb514-3465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-3466"><a href="#cb514-3466" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"ideology_marginal_effect_legis_prof.png"</span>, <span class="at">plot =</span> p2, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3467"><a href="#cb514-3467" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3468"><a href="#cb514-3468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3469"><a href="#cb514-3469" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.3.2 single variable regression model</span></span>
<span id="cb514-3470"><a href="#cb514-3470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3471"><a href="#cb514-3471" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-3472"><a href="#cb514-3472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3475"><a href="#cb514-3475" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3476"><a href="#cb514-3476" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage lm sin2</span></span>
<span id="cb514-3477"><a href="#cb514-3477" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3478"><a href="#cb514-3478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3479"><a href="#cb514-3479" aria-hidden="true" tabindex="-1"></a>legis_cg_age1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span></span>
<span id="cb514-3480"><a href="#cb514-3480" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3481"><a href="#cb514-3481" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3482"><a href="#cb514-3482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3483"><a href="#cb514-3483" aria-hidden="true" tabindex="-1"></a>legis_cg_ideology1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> ideology <span class="sc">+</span></span>
<span id="cb514-3484"><a href="#cb514-3484" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3485"><a href="#cb514-3485" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3486"><a href="#cb514-3486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3487"><a href="#cb514-3487" aria-hidden="true" tabindex="-1"></a>legis_cg_is.republican1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> is.republican <span class="sc">+</span></span>
<span id="cb514-3488"><a href="#cb514-3488" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3489"><a href="#cb514-3489" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3490"><a href="#cb514-3490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3491"><a href="#cb514-3491" aria-hidden="true" tabindex="-1"></a>legis_cg_chamber1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> chamber <span class="sc">+</span></span>
<span id="cb514-3492"><a href="#cb514-3492" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3493"><a href="#cb514-3493" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3494"><a href="#cb514-3494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3495"><a href="#cb514-3495" aria-hidden="true" tabindex="-1"></a>legis_cg_gender1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> gender <span class="sc">+</span></span>
<span id="cb514-3496"><a href="#cb514-3496" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3497"><a href="#cb514-3497" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3498"><a href="#cb514-3498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3499"><a href="#cb514-3499" aria-hidden="true" tabindex="-1"></a>legis_cg_seniority1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> seniority <span class="sc">+</span></span>
<span id="cb514-3500"><a href="#cb514-3500" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3501"><a href="#cb514-3501" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3502"><a href="#cb514-3502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3503"><a href="#cb514-3503" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3504"><a href="#cb514-3504" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3505"><a href="#cb514-3505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3506"><a href="#cb514-3506" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_cg_age1,</span>
<span id="cb514-3507"><a href="#cb514-3507" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_cg_ideology1,</span>
<span id="cb514-3508"><a href="#cb514-3508" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_cg_is.republican1,</span>
<span id="cb514-3509"><a href="#cb514-3509" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_cg_gender1,</span>
<span id="cb514-3510"><a href="#cb514-3510" aria-hidden="true" tabindex="-1"></a>    <span class="st">"5"</span> <span class="ot">=</span> legis_cg_chamber1,</span>
<span id="cb514-3511"><a href="#cb514-3511" aria-hidden="true" tabindex="-1"></a>    <span class="st">"6"</span> <span class="ot">=</span> legis_cg_seniority1</span>
<span id="cb514-3512"><a href="#cb514-3512" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3513"><a href="#cb514-3513" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3514"><a href="#cb514-3514" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3515"><a href="#cb514-3515" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodel_legis_seperated_prof.html"</span>),</span>
<span id="cb514-3516"><a href="#cb514-3516" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3517"><a href="#cb514-3517" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3518"><a href="#cb514-3518" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3519"><a href="#cb514-3519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3522"><a href="#cb514-3522" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3523"><a href="#cb514-3523" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage lm sin district2</span></span>
<span id="cb514-3524"><a href="#cb514-3524" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3525"><a href="#cb514-3525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3526"><a href="#cb514-3526" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="ot">&lt;-</span> vars <span class="sc">%&gt;%</span></span>
<span id="cb514-3527"><a href="#cb514-3527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="cf">function</span>(v) {</span>
<span id="cb514-3528"><a href="#cb514-3528" aria-hidden="true" tabindex="-1"></a>    formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"prof_percentage ~ "</span>, v, <span class="st">" + as.factor(congress)"</span>)</span>
<span id="cb514-3529"><a href="#cb514-3529" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.formula</span>(formula_str), <span class="at">data =</span> legis_merged)</span>
<span id="cb514-3530"><a href="#cb514-3530" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-3531"><a href="#cb514-3531" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>(m) <span class="sc">%&gt;%</span></span>
<span id="cb514-3532"><a href="#cb514-3532" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(term <span class="sc">==</span> v) <span class="sc">%&gt;%</span></span>
<span id="cb514-3533"><a href="#cb514-3533" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">var =</span> v)</span>
<span id="cb514-3534"><a href="#cb514-3534" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb514-3535"><a href="#cb514-3535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3536"><a href="#cb514-3536" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3537"><a href="#cb514-3537" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="sc">%&gt;%</span></span>
<span id="cb514-3538"><a href="#cb514-3538" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-3539"><a href="#cb514-3539" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-3540"><a href="#cb514-3540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3541"><a href="#cb514-3541" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3542"><a href="#cb514-3542" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="sc">%&gt;%</span></span>
<span id="cb514-3543"><a href="#cb514-3543" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-3544"><a href="#cb514-3544" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">"***"</span>,</span>
<span id="cb514-3545"><a href="#cb514-3545" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.01</span> <span class="sc">~</span> <span class="st">"**"</span>,</span>
<span id="cb514-3546"><a href="#cb514-3546" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"*"</span>,</span>
<span id="cb514-3547"><a href="#cb514-3547" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.1</span> <span class="sc">~</span> <span class="st">"+"</span>,</span>
<span id="cb514-3548"><a href="#cb514-3548" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb514-3549"><a href="#cb514-3549" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb514-3550"><a href="#cb514-3550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(var, estimate), <span class="at">y =</span> estimate, <span class="at">color =</span> p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)) <span class="sc">+</span></span>
<span id="cb514-3551"><a href="#cb514-3551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb514-3552"><a href="#cb514-3552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3553"><a href="#cb514-3553" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3554"><a href="#cb514-3554" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-3555"><a href="#cb514-3555" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-3556"><a href="#cb514-3556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-3557"><a href="#cb514-3557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variables"</span>, </span>
<span id="cb514-3558"><a href="#cb514-3558" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Coefficient (prof_percentage)"</span>,</span>
<span id="cb514-3559"><a href="#cb514-3559" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Single-variable Linear Regression Results (with Congress FE)"</span>)</span>
<span id="cb514-3560"><a href="#cb514-3560" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3561"><a href="#cb514-3561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3562"><a href="#cb514-3562" aria-hidden="true" tabindex="-1"></a>single variable model coefficient plot</span>
<span id="cb514-3563"><a href="#cb514-3563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3566"><a href="#cb514-3566" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3567"><a href="#cb514-3567" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage coefficient plot</span></span>
<span id="cb514-3568"><a href="#cb514-3568" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3569"><a href="#cb514-3569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3570"><a href="#cb514-3570" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- model lists -----</span></span>
<span id="cb514-3571"><a href="#cb514-3571" aria-hidden="true" tabindex="-1"></a>legis_lm_models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3572"><a href="#cb514-3572" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> legis_cg_age1,</span>
<span id="cb514-3573"><a href="#cb514-3573" aria-hidden="true" tabindex="-1"></a>  <span class="at">ideology =</span> legis_cg_ideology1,</span>
<span id="cb514-3574"><a href="#cb514-3574" aria-hidden="true" tabindex="-1"></a>  <span class="at">is_republican =</span> legis_cg_is.republican1,</span>
<span id="cb514-3575"><a href="#cb514-3575" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> legis_cg_gender1,</span>
<span id="cb514-3576"><a href="#cb514-3576" aria-hidden="true" tabindex="-1"></a>  <span class="at">chamber =</span> legis_cg_chamber1,</span>
<span id="cb514-3577"><a href="#cb514-3577" aria-hidden="true" tabindex="-1"></a>  <span class="at">seniority =</span> legis_cg_seniority1</span>
<span id="cb514-3578"><a href="#cb514-3578" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3579"><a href="#cb514-3579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3580"><a href="#cb514-3580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3581"><a href="#cb514-3581" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- extract coefficient and clean -----</span></span>
<span id="cb514-3582"><a href="#cb514-3582" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3583"><a href="#cb514-3583" aria-hidden="true" tabindex="-1"></a>coef_legis1 <span class="ot">&lt;-</span> <span class="fu">map_df</span>(<span class="fu">names</span>(legis_lm_models), <span class="cf">function</span>(name) {</span>
<span id="cb514-3584"><a href="#cb514-3584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(legis_lm_models[[name]]) <span class="sc">%&gt;%</span>  </span>
<span id="cb514-3585"><a href="#cb514-3585" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">model =</span> name)</span>
<span id="cb514-3586"><a href="#cb514-3586" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb514-3587"><a href="#cb514-3587" aria-hidden="true" tabindex="-1"></a>coef_legis_clean1 <span class="ot">&lt;-</span> coef_legis1 <span class="sc">%&gt;%</span></span>
<span id="cb514-3588"><a href="#cb514-3588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"Intercept|congress"</span>, term))</span>
<span id="cb514-3589"><a href="#cb514-3589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3590"><a href="#cb514-3590" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- estimate and 95% CI -----</span></span>
<span id="cb514-3591"><a href="#cb514-3591" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(coef_legis_clean1, <span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> <span class="fu">reorder</span>(model, estimate))) <span class="sc">+</span></span>
<span id="cb514-3592"><a href="#cb514-3592" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3593"><a href="#cb514-3593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3594"><a href="#cb514-3594" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xmax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3595"><a href="#cb514-3595" aria-hidden="true" tabindex="-1"></a>                 <span class="at">height =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3596"><a href="#cb514-3596" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray40"</span>) <span class="sc">+</span></span>
<span id="cb514-3597"><a href="#cb514-3597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb514-3598"><a href="#cb514-3598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3599"><a href="#cb514-3599" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Coefficient Estimates Across Models"</span>,</span>
<span id="cb514-3600"><a href="#cb514-3600" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coefficient Estimate (with 95% CI)"</span>,</span>
<span id="cb514-3601"><a href="#cb514-3601" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predictor Variable"</span></span>
<span id="cb514-3602"><a href="#cb514-3602" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-3603"><a href="#cb514-3603" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_lm_single_coefficient_prof.png"</span>, <span class="at">plot =</span> p4, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3604"><a href="#cb514-3604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3605"><a href="#cb514-3605" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3606"><a href="#cb514-3606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3607"><a href="#cb514-3607" aria-hidden="true" tabindex="-1"></a><span class="fu">### robustness check</span></span>
<span id="cb514-3608"><a href="#cb514-3608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3611"><a href="#cb514-3611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3612"><a href="#cb514-3612" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage robust check</span></span>
<span id="cb514-3613"><a href="#cb514-3613" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3614"><a href="#cb514-3614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3615"><a href="#cb514-3615" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3616"><a href="#cb514-3616" aria-hidden="true" tabindex="-1"></a>model_legis_lm_dom_multiple <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3617"><a href="#cb514-3617" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom"</span> <span class="ot">=</span> legis_lm0,</span>
<span id="cb514-3618"><a href="#cb514-3618" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom1"</span> <span class="ot">=</span> legis_lm1,</span>
<span id="cb514-3619"><a href="#cb514-3619" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom2"</span> <span class="ot">=</span> legis_lm2,</span>
<span id="cb514-3620"><a href="#cb514-3620" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom3"</span> <span class="ot">=</span> legis_lm3,</span>
<span id="cb514-3621"><a href="#cb514-3621" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom4"</span> <span class="ot">=</span> legis_lm4</span>
<span id="cb514-3622"><a href="#cb514-3622" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3623"><a href="#cb514-3623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3624"><a href="#cb514-3624" aria-hidden="true" tabindex="-1"></a>models_legis_lm_dom <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3625"><a href="#cb514-3625" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_age_dom"</span> <span class="ot">=</span> legis_cg_age1,</span>
<span id="cb514-3626"><a href="#cb514-3626" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_ideology_dom"</span> <span class="ot">=</span> legis_cg_ideology1,</span>
<span id="cb514-3627"><a href="#cb514-3627" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_is.republican_dom"</span> <span class="ot">=</span> legis_cg_is.republican1,</span>
<span id="cb514-3628"><a href="#cb514-3628" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_gender_dom"</span> <span class="ot">=</span> legis_cg_gender1,</span>
<span id="cb514-3629"><a href="#cb514-3629" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_chamber_dom"</span> <span class="ot">=</span> legis_cg_chamber1,</span>
<span id="cb514-3630"><a href="#cb514-3630" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_seniority_dom"</span> <span class="ot">=</span> legis_cg_seniority1</span>
<span id="cb514-3631"><a href="#cb514-3631" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3632"><a href="#cb514-3632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3633"><a href="#cb514-3633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3634"><a href="#cb514-3634" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3635"><a href="#cb514-3635" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_lm_diagnostics</span>(model_legis_lm_dom_multiple)</span>
<span id="cb514-3636"><a href="#cb514-3636" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_lm_diagnostics</span>(models_legis_lm_dom)</span>
<span id="cb514-3637"><a href="#cb514-3637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3638"><a href="#cb514-3638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3639"><a href="#cb514-3639" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.4 dependent variable: intl_percentage</span></span>
<span id="cb514-3640"><a href="#cb514-3640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3641"><a href="#cb514-3641" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.4.1 multiple variables regression model</span></span>
<span id="cb514-3642"><a href="#cb514-3642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3643"><a href="#cb514-3643" aria-hidden="true" tabindex="-1"></a>lasso</span>
<span id="cb514-3644"><a href="#cb514-3644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3647"><a href="#cb514-3647" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3648"><a href="#cb514-3648" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl_percentage logit mul1</span></span>
<span id="cb514-3649"><a href="#cb514-3649" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3650"><a href="#cb514-3650" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3651"><a href="#cb514-3651" aria-hidden="true" tabindex="-1"></a>cv_lasso_legis3 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, intl_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb514-3652"><a href="#cb514-3652" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3653"><a href="#cb514-3653" aria-hidden="true" tabindex="-1"></a>cv_ridge_legis3 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, intl_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb514-3654"><a href="#cb514-3654" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3655"><a href="#cb514-3655" aria-hidden="true" tabindex="-1"></a>cv_elnet_legis3 <span class="ot">&lt;-</span> <span class="fu">run_glmnet_selection</span>(legis_cg, intl_percentage <span class="sc">~</span> age <span class="sc">+</span> party <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> gender <span class="sc">+</span> seniority <span class="sc">+</span> <span class="fu">as.factor</span>(congress), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb514-3656"><a href="#cb514-3656" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb514-3657"><a href="#cb514-3657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3658"><a href="#cb514-3658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3659"><a href="#cb514-3659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3660"><a href="#cb514-3660" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-3661"><a href="#cb514-3661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3664"><a href="#cb514-3664" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3665"><a href="#cb514-3665" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl.percentage lm mul3</span></span>
<span id="cb514-3666"><a href="#cb514-3666" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3667"><a href="#cb514-3667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3668"><a href="#cb514-3668" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb514-3669"><a href="#cb514-3669" aria-hidden="true" tabindex="-1"></a>legis_lm0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3670"><a href="#cb514-3670" aria-hidden="true" tabindex="-1"></a>                     is.republican <span class="sc">+</span> ideology <span class="sc">+</span> seniority<span class="sc">+</span> </span>
<span id="cb514-3671"><a href="#cb514-3671" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span> </span>
<span id="cb514-3672"><a href="#cb514-3672" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3673"><a href="#cb514-3673" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3674"><a href="#cb514-3674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3675"><a href="#cb514-3675" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted</span></span>
<span id="cb514-3676"><a href="#cb514-3676" aria-hidden="true" tabindex="-1"></a>legis_lm1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3677"><a href="#cb514-3677" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span> is.republican </span>
<span id="cb514-3678"><a href="#cb514-3678" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">+</span> <span class="fu">as.factor</span>(congress),   <span class="at">data =</span> legis_cg )</span>
<span id="cb514-3679"><a href="#cb514-3679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3680"><a href="#cb514-3680" aria-hidden="true" tabindex="-1"></a>legis_lm2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb514-3681"><a href="#cb514-3681" aria-hidden="true" tabindex="-1"></a>                     ideology <span class="sc">+</span> </span>
<span id="cb514-3682"><a href="#cb514-3682" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3683"><a href="#cb514-3683" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3684"><a href="#cb514-3684" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3685"><a href="#cb514-3685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3686"><a href="#cb514-3686" aria-hidden="true" tabindex="-1"></a>legis_lm3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> seniority <span class="sc">+</span> </span>
<span id="cb514-3687"><a href="#cb514-3687" aria-hidden="true" tabindex="-1"></a>                     ideology <span class="sc">+</span> </span>
<span id="cb514-3688"><a href="#cb514-3688" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3689"><a href="#cb514-3689" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3690"><a href="#cb514-3690" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3691"><a href="#cb514-3691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3692"><a href="#cb514-3692" aria-hidden="true" tabindex="-1"></a>legis_lm4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> seniority <span class="sc">+</span> </span>
<span id="cb514-3693"><a href="#cb514-3693" aria-hidden="true" tabindex="-1"></a>                     is.republican <span class="sc">+</span> </span>
<span id="cb514-3694"><a href="#cb514-3694" aria-hidden="true" tabindex="-1"></a>                     chamber <span class="sc">+</span> gender <span class="sc">+</span></span>
<span id="cb514-3695"><a href="#cb514-3695" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3696"><a href="#cb514-3696" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3697"><a href="#cb514-3697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3698"><a href="#cb514-3698" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3699"><a href="#cb514-3699" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3700"><a href="#cb514-3700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3701"><a href="#cb514-3701" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Legis LM"</span> <span class="ot">=</span> legis_lm0,</span>
<span id="cb514-3702"><a href="#cb514-3702" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_lm1,</span>
<span id="cb514-3703"><a href="#cb514-3703" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_lm2,</span>
<span id="cb514-3704"><a href="#cb514-3704" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_lm3,</span>
<span id="cb514-3705"><a href="#cb514-3705" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_lm4</span>
<span id="cb514-3706"><a href="#cb514-3706" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3707"><a href="#cb514-3707" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3708"><a href="#cb514-3708" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3709"><a href="#cb514-3709" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodels_legis_intl.html"</span>),</span>
<span id="cb514-3710"><a href="#cb514-3710" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3711"><a href="#cb514-3711" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3712"><a href="#cb514-3712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3713"><a href="#cb514-3713" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- vif check ----</span></span>
<span id="cb514-3714"><a href="#cb514-3714" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm0)</span>
<span id="cb514-3715"><a href="#cb514-3715" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm1)</span>
<span id="cb514-3716"><a href="#cb514-3716" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm2)</span>
<span id="cb514-3717"><a href="#cb514-3717" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm3)</span>
<span id="cb514-3718"><a href="#cb514-3718" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(legis_lm4)</span>
<span id="cb514-3719"><a href="#cb514-3719" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3720"><a href="#cb514-3720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3721"><a href="#cb514-3721" aria-hidden="true" tabindex="-1"></a>legis_lm0 marginal effects</span>
<span id="cb514-3722"><a href="#cb514-3722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3725"><a href="#cb514-3725" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3726"><a href="#cb514-3726" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl.percentage marginal effects legis</span></span>
<span id="cb514-3727"><a href="#cb514-3727" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3728"><a href="#cb514-3728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3729"><a href="#cb514-3729" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3730"><a href="#cb514-3730" aria-hidden="true" tabindex="-1"></a>eff_age1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"age"</span>)</span>
<span id="cb514-3731"><a href="#cb514-3731" aria-hidden="true" tabindex="-1"></a>eff_ideo1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"ideology"</span>)</span>
<span id="cb514-3732"><a href="#cb514-3732" aria-hidden="true" tabindex="-1"></a>eff_sen1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"seniority"</span>)</span>
<span id="cb514-3733"><a href="#cb514-3733" aria-hidden="true" tabindex="-1"></a>eff_gender1 <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(legis_lm0, <span class="at">terms =</span> <span class="st">"gender"</span>)</span>
<span id="cb514-3734"><a href="#cb514-3734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3735"><a href="#cb514-3735" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology</span></span>
<span id="cb514-3736"><a href="#cb514-3736" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(eff_ideo1, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> predicted)) <span class="sc">+</span></span>
<span id="cb514-3737"><a href="#cb514-3737" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb514-3738"><a href="#cb514-3738" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-3739"><a href="#cb514-3739" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3740"><a href="#cb514-3740" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Ideology"</span>,</span>
<span id="cb514-3741"><a href="#cb514-3741" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted International Percentage"</span>,</span>
<span id="cb514-3742"><a href="#cb514-3742" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect of Ideology on International Percentage Legis"</span></span>
<span id="cb514-3743"><a href="#cb514-3743" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-3744"><a href="#cb514-3744" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-3745"><a href="#cb514-3745" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"ideology_marginal_effect_legis_intl.png"</span>, <span class="at">plot =</span> p2, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3746"><a href="#cb514-3746" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3747"><a href="#cb514-3747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3748"><a href="#cb514-3748" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.4.2 single variable regression model</span></span>
<span id="cb514-3749"><a href="#cb514-3749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3750"><a href="#cb514-3750" aria-hidden="true" tabindex="-1"></a>models training - legis</span>
<span id="cb514-3751"><a href="#cb514-3751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3754"><a href="#cb514-3754" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3755"><a href="#cb514-3755" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl.percentage lm sin2</span></span>
<span id="cb514-3756"><a href="#cb514-3756" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3757"><a href="#cb514-3757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3758"><a href="#cb514-3758" aria-hidden="true" tabindex="-1"></a>legis_cg_age1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> age <span class="sc">+</span></span>
<span id="cb514-3759"><a href="#cb514-3759" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3760"><a href="#cb514-3760" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3761"><a href="#cb514-3761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3762"><a href="#cb514-3762" aria-hidden="true" tabindex="-1"></a>legis_cg_ideology1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> ideology <span class="sc">+</span></span>
<span id="cb514-3763"><a href="#cb514-3763" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3764"><a href="#cb514-3764" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3765"><a href="#cb514-3765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3766"><a href="#cb514-3766" aria-hidden="true" tabindex="-1"></a>legis_cg_is.republican1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> is.republican <span class="sc">+</span></span>
<span id="cb514-3767"><a href="#cb514-3767" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3768"><a href="#cb514-3768" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3769"><a href="#cb514-3769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3770"><a href="#cb514-3770" aria-hidden="true" tabindex="-1"></a>legis_cg_chamber1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> chamber <span class="sc">+</span></span>
<span id="cb514-3771"><a href="#cb514-3771" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3772"><a href="#cb514-3772" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3773"><a href="#cb514-3773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3774"><a href="#cb514-3774" aria-hidden="true" tabindex="-1"></a>legis_cg_gender1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> gender <span class="sc">+</span></span>
<span id="cb514-3775"><a href="#cb514-3775" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3776"><a href="#cb514-3776" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3777"><a href="#cb514-3777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3778"><a href="#cb514-3778" aria-hidden="true" tabindex="-1"></a>legis_cg_seniority1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(intl_percentage <span class="sc">~</span> seniority <span class="sc">+</span></span>
<span id="cb514-3779"><a href="#cb514-3779" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3780"><a href="#cb514-3780" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3781"><a href="#cb514-3781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3782"><a href="#cb514-3782" aria-hidden="true" tabindex="-1"></a><span class="co"># result</span></span>
<span id="cb514-3783"><a href="#cb514-3783" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-3784"><a href="#cb514-3784" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-3785"><a href="#cb514-3785" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="ot">=</span> legis_cg_age1,</span>
<span id="cb514-3786"><a href="#cb514-3786" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="ot">=</span> legis_cg_ideology1,</span>
<span id="cb514-3787"><a href="#cb514-3787" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="ot">=</span> legis_cg_is.republican1,</span>
<span id="cb514-3788"><a href="#cb514-3788" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="ot">=</span> legis_cg_gender1,</span>
<span id="cb514-3789"><a href="#cb514-3789" aria-hidden="true" tabindex="-1"></a>    <span class="st">"5"</span> <span class="ot">=</span> legis_cg_chamber1,</span>
<span id="cb514-3790"><a href="#cb514-3790" aria-hidden="true" tabindex="-1"></a>    <span class="st">"6"</span> <span class="ot">=</span> legis_cg_seniority1</span>
<span id="cb514-3791"><a href="#cb514-3791" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-3792"><a href="#cb514-3792" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-3793"><a href="#cb514-3793" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-3794"><a href="#cb514-3794" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"lmmodel_legis_seperated_intl.html"</span>),</span>
<span id="cb514-3795"><a href="#cb514-3795" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-3796"><a href="#cb514-3796" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3797"><a href="#cb514-3797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3798"><a href="#cb514-3798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3801"><a href="#cb514-3801" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3802"><a href="#cb514-3802" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl.percentage lm sin district2</span></span>
<span id="cb514-3803"><a href="#cb514-3803" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3804"><a href="#cb514-3804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3805"><a href="#cb514-3805" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="ot">&lt;-</span> vars <span class="sc">%&gt;%</span></span>
<span id="cb514-3806"><a href="#cb514-3806" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="cf">function</span>(v) {</span>
<span id="cb514-3807"><a href="#cb514-3807" aria-hidden="true" tabindex="-1"></a>    formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"intl_percentage ~ "</span>, v, <span class="st">" + as.factor(congress)"</span>)</span>
<span id="cb514-3808"><a href="#cb514-3808" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.formula</span>(formula_str), <span class="at">data =</span> legis_merged)</span>
<span id="cb514-3809"><a href="#cb514-3809" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-3810"><a href="#cb514-3810" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>(m) <span class="sc">%&gt;%</span></span>
<span id="cb514-3811"><a href="#cb514-3811" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(term <span class="sc">==</span> v) <span class="sc">%&gt;%</span></span>
<span id="cb514-3812"><a href="#cb514-3812" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">var =</span> v)</span>
<span id="cb514-3813"><a href="#cb514-3813" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb514-3814"><a href="#cb514-3814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3815"><a href="#cb514-3815" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3816"><a href="#cb514-3816" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="sc">%&gt;%</span></span>
<span id="cb514-3817"><a href="#cb514-3817" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-3818"><a href="#cb514-3818" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-3819"><a href="#cb514-3819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3820"><a href="#cb514-3820" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3821"><a href="#cb514-3821" aria-hidden="true" tabindex="-1"></a>legis_single_models <span class="sc">%&gt;%</span></span>
<span id="cb514-3822"><a href="#cb514-3822" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-3823"><a href="#cb514-3823" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">"***"</span>,</span>
<span id="cb514-3824"><a href="#cb514-3824" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.01</span> <span class="sc">~</span> <span class="st">"**"</span>,</span>
<span id="cb514-3825"><a href="#cb514-3825" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"*"</span>,</span>
<span id="cb514-3826"><a href="#cb514-3826" aria-hidden="true" tabindex="-1"></a>    p.value <span class="sc">&lt;</span> <span class="fl">0.1</span> <span class="sc">~</span> <span class="st">"+"</span>,</span>
<span id="cb514-3827"><a href="#cb514-3827" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb514-3828"><a href="#cb514-3828" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb514-3829"><a href="#cb514-3829" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(var, estimate), <span class="at">y =</span> estimate, <span class="at">color =</span> p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)) <span class="sc">+</span></span>
<span id="cb514-3830"><a href="#cb514-3830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb514-3831"><a href="#cb514-3831" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3832"><a href="#cb514-3832" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3833"><a href="#cb514-3833" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-3834"><a href="#cb514-3834" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-3835"><a href="#cb514-3835" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-3836"><a href="#cb514-3836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variables"</span>, </span>
<span id="cb514-3837"><a href="#cb514-3837" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Coefficient (prof_percentage)"</span>,</span>
<span id="cb514-3838"><a href="#cb514-3838" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Single-variable Linear Regression Results (with Congress FE)"</span>)</span>
<span id="cb514-3839"><a href="#cb514-3839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3840"><a href="#cb514-3840" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3841"><a href="#cb514-3841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3842"><a href="#cb514-3842" aria-hidden="true" tabindex="-1"></a>single variable model coefficient plot</span>
<span id="cb514-3843"><a href="#cb514-3843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3846"><a href="#cb514-3846" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3847"><a href="#cb514-3847" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl.percentage coefficient plot</span></span>
<span id="cb514-3848"><a href="#cb514-3848" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3849"><a href="#cb514-3849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3850"><a href="#cb514-3850" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- model lists -----</span></span>
<span id="cb514-3851"><a href="#cb514-3851" aria-hidden="true" tabindex="-1"></a>legis_lm_models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3852"><a href="#cb514-3852" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> legis_cg_age1,</span>
<span id="cb514-3853"><a href="#cb514-3853" aria-hidden="true" tabindex="-1"></a>  <span class="at">ideology =</span> legis_cg_ideology1,</span>
<span id="cb514-3854"><a href="#cb514-3854" aria-hidden="true" tabindex="-1"></a>  <span class="at">is_republican =</span> legis_cg_is.republican1,</span>
<span id="cb514-3855"><a href="#cb514-3855" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> legis_cg_gender1,</span>
<span id="cb514-3856"><a href="#cb514-3856" aria-hidden="true" tabindex="-1"></a>  <span class="at">chamber =</span> legis_cg_chamber1,</span>
<span id="cb514-3857"><a href="#cb514-3857" aria-hidden="true" tabindex="-1"></a>  <span class="at">seniority =</span> legis_cg_seniority1</span>
<span id="cb514-3858"><a href="#cb514-3858" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3859"><a href="#cb514-3859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3860"><a href="#cb514-3860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3861"><a href="#cb514-3861" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- extract coefficient and clean -----</span></span>
<span id="cb514-3862"><a href="#cb514-3862" aria-hidden="true" tabindex="-1"></a><span class="co"># legis</span></span>
<span id="cb514-3863"><a href="#cb514-3863" aria-hidden="true" tabindex="-1"></a>coef_legis1 <span class="ot">&lt;-</span> <span class="fu">map_df</span>(<span class="fu">names</span>(legis_lm_models), <span class="cf">function</span>(name) {</span>
<span id="cb514-3864"><a href="#cb514-3864" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(legis_lm_models[[name]]) <span class="sc">%&gt;%</span>  </span>
<span id="cb514-3865"><a href="#cb514-3865" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">model =</span> name)</span>
<span id="cb514-3866"><a href="#cb514-3866" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb514-3867"><a href="#cb514-3867" aria-hidden="true" tabindex="-1"></a>coef_legis_clean1 <span class="ot">&lt;-</span> coef_legis1 <span class="sc">%&gt;%</span></span>
<span id="cb514-3868"><a href="#cb514-3868" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"Intercept|congress"</span>, term))</span>
<span id="cb514-3869"><a href="#cb514-3869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3870"><a href="#cb514-3870" aria-hidden="true" tabindex="-1"></a><span class="co"># ----- estimate and 95% CI -----</span></span>
<span id="cb514-3871"><a href="#cb514-3871" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(coef_legis_clean1, <span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> <span class="fu">reorder</span>(model, estimate))) <span class="sc">+</span></span>
<span id="cb514-3872"><a href="#cb514-3872" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3873"><a href="#cb514-3873" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-3874"><a href="#cb514-3874" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xmax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-3875"><a href="#cb514-3875" aria-hidden="true" tabindex="-1"></a>                 <span class="at">height =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"#2c7fb8"</span>) <span class="sc">+</span></span>
<span id="cb514-3876"><a href="#cb514-3876" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray40"</span>) <span class="sc">+</span></span>
<span id="cb514-3877"><a href="#cb514-3877" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb514-3878"><a href="#cb514-3878" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-3879"><a href="#cb514-3879" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Coefficient Estimates Across Models"</span>,</span>
<span id="cb514-3880"><a href="#cb514-3880" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coefficient Estimate (with 95% CI)"</span>,</span>
<span id="cb514-3881"><a href="#cb514-3881" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predictor Variable"</span></span>
<span id="cb514-3882"><a href="#cb514-3882" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-3883"><a href="#cb514-3883" aria-hidden="true" tabindex="-1"></a><span class="fu">save_to_output</span>(<span class="st">"legis_lm_single_coefficient_intl.png"</span>, <span class="at">plot =</span> p4, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb514-3884"><a href="#cb514-3884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3885"><a href="#cb514-3885" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3886"><a href="#cb514-3886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3887"><a href="#cb514-3887" aria-hidden="true" tabindex="-1"></a><span class="fu">### robustness check</span></span>
<span id="cb514-3888"><a href="#cb514-3888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3891"><a href="#cb514-3891" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3892"><a href="#cb514-3892" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: intl.percentage robust check</span></span>
<span id="cb514-3893"><a href="#cb514-3893" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3894"><a href="#cb514-3894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3895"><a href="#cb514-3895" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3896"><a href="#cb514-3896" aria-hidden="true" tabindex="-1"></a>model_legis_lm_dom_multiple <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3897"><a href="#cb514-3897" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom"</span> <span class="ot">=</span> legis_lm0,</span>
<span id="cb514-3898"><a href="#cb514-3898" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom1"</span> <span class="ot">=</span> legis_lm1,</span>
<span id="cb514-3899"><a href="#cb514-3899" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom2"</span> <span class="ot">=</span> legis_lm2,</span>
<span id="cb514-3900"><a href="#cb514-3900" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom3"</span> <span class="ot">=</span> legis_lm3,</span>
<span id="cb514-3901"><a href="#cb514-3901" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_dom4"</span> <span class="ot">=</span> legis_lm4</span>
<span id="cb514-3902"><a href="#cb514-3902" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3903"><a href="#cb514-3903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3904"><a href="#cb514-3904" aria-hidden="true" tabindex="-1"></a>models_legis_lm_dom <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb514-3905"><a href="#cb514-3905" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_age_dom"</span> <span class="ot">=</span> legis_cg_age1,</span>
<span id="cb514-3906"><a href="#cb514-3906" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_ideology_dom"</span> <span class="ot">=</span> legis_cg_ideology1,</span>
<span id="cb514-3907"><a href="#cb514-3907" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_is.republican_dom"</span> <span class="ot">=</span> legis_cg_is.republican1,</span>
<span id="cb514-3908"><a href="#cb514-3908" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_gender_dom"</span> <span class="ot">=</span> legis_cg_gender1,</span>
<span id="cb514-3909"><a href="#cb514-3909" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_chamber_dom"</span> <span class="ot">=</span> legis_cg_chamber1,</span>
<span id="cb514-3910"><a href="#cb514-3910" aria-hidden="true" tabindex="-1"></a>  <span class="st">"legis_seniority_dom"</span> <span class="ot">=</span> legis_cg_seniority1</span>
<span id="cb514-3911"><a href="#cb514-3911" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-3912"><a href="#cb514-3912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3913"><a href="#cb514-3913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3914"><a href="#cb514-3914" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-3915"><a href="#cb514-3915" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_lm_diagnostics</span>(model_legis_lm_dom_multiple)</span>
<span id="cb514-3916"><a href="#cb514-3916" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_lm_diagnostics</span>(models_legis_lm_dom)</span>
<span id="cb514-3917"><a href="#cb514-3917" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3918"><a href="#cb514-3918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3919"><a href="#cb514-3919" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.5 interaction model</span></span>
<span id="cb514-3920"><a href="#cb514-3920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3921"><a href="#cb514-3921" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.5.1 dependent variable: is.dom</span></span>
<span id="cb514-3922"><a href="#cb514-3922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3923"><a href="#cb514-3923" aria-hidden="true" tabindex="-1"></a>legis</span>
<span id="cb514-3924"><a href="#cb514-3924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3927"><a href="#cb514-3927" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3928"><a href="#cb514-3928" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: is.dom interaction legis</span></span>
<span id="cb514-3929"><a href="#cb514-3929" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3930"><a href="#cb514-3930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3931"><a href="#cb514-3931" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology * gender</span></span>
<span id="cb514-3932"><a href="#cb514-3932" aria-hidden="true" tabindex="-1"></a>legis_inter1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> is.republican <span class="sc">+</span> chamber <span class="sc">+</span> ideology<span class="sc">*</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3933"><a href="#cb514-3933" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-3934"><a href="#cb514-3934" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-3935"><a href="#cb514-3935" aria-hidden="true" tabindex="-1"></a><span class="fu">analyze_logit_model</span>(legis_inter1)</span>
<span id="cb514-3936"><a href="#cb514-3936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3937"><a href="#cb514-3937" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology * chamber</span></span>
<span id="cb514-3938"><a href="#cb514-3938" aria-hidden="true" tabindex="-1"></a>legis_inter2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> is.republican<span class="sc">*</span>gender <span class="sc">+</span> chamber <span class="sc">+</span> ideology <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3939"><a href="#cb514-3939" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-3940"><a href="#cb514-3940" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-3941"><a href="#cb514-3941" aria-hidden="true" tabindex="-1"></a><span class="fu">analyze_logit_model</span>(legis_inter2)</span>
<span id="cb514-3942"><a href="#cb514-3942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3943"><a href="#cb514-3943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3944"><a href="#cb514-3944" aria-hidden="true" tabindex="-1"></a><span class="co"># is.republican * gender</span></span>
<span id="cb514-3945"><a href="#cb514-3945" aria-hidden="true" tabindex="-1"></a>legis_inter3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> is.republican<span class="sc">*</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3946"><a href="#cb514-3946" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-3947"><a href="#cb514-3947" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-3948"><a href="#cb514-3948" aria-hidden="true" tabindex="-1"></a><span class="fu">analyze_logit_model</span>(legis_inter3)</span>
<span id="cb514-3949"><a href="#cb514-3949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3950"><a href="#cb514-3950" aria-hidden="true" tabindex="-1"></a><span class="co"># is.republican * chamber</span></span>
<span id="cb514-3951"><a href="#cb514-3951" aria-hidden="true" tabindex="-1"></a>legis_inter4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> gender <span class="sc">+</span> is.republican<span class="sc">*</span>chamber <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3952"><a href="#cb514-3952" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg, </span>
<span id="cb514-3953"><a href="#cb514-3953" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb514-3954"><a href="#cb514-3954" aria-hidden="true" tabindex="-1"></a><span class="fu">analyze_logit_model</span>(legis_inter4)</span>
<span id="cb514-3955"><a href="#cb514-3955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3956"><a href="#cb514-3956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3957"><a href="#cb514-3957" aria-hidden="true" tabindex="-1"></a><span class="co"># effects</span></span>
<span id="cb514-3958"><a href="#cb514-3958" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_inter1, <span class="at">pred =</span> ideology, <span class="at">modx =</span> gender, <span class="at">interval =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-3959"><a href="#cb514-3959" aria-hidden="true" tabindex="-1"></a><span class="fu">sim_slopes</span>(legis_inter1, <span class="at">pred =</span> ideology, <span class="at">modx =</span> gender)</span>
<span id="cb514-3960"><a href="#cb514-3960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3961"><a href="#cb514-3961" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_inter2, <span class="at">pred =</span> ideology, <span class="at">modx =</span> chamber, <span class="at">interval =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-3962"><a href="#cb514-3962" aria-hidden="true" tabindex="-1"></a><span class="fu">sim_slopes</span>(legis_inter2, <span class="at">pred =</span> ideology, <span class="at">modx =</span> chamber)</span>
<span id="cb514-3963"><a href="#cb514-3963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3964"><a href="#cb514-3964" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_inter3, <span class="at">pred =</span> is.republican, <span class="at">modx =</span> gender, <span class="at">interval =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-3965"><a href="#cb514-3965" aria-hidden="true" tabindex="-1"></a><span class="fu">sim_slopes</span>(legis_inter3, <span class="at">pred =</span> is.republican, <span class="at">modx =</span> gender)</span>
<span id="cb514-3966"><a href="#cb514-3966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3967"><a href="#cb514-3967" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_inter4, <span class="at">pred =</span> is.republican, <span class="at">modx =</span> chamber, <span class="at">interval =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-3968"><a href="#cb514-3968" aria-hidden="true" tabindex="-1"></a><span class="fu">sim_slopes</span>(legis_inter4, <span class="at">pred =</span> is.republican, <span class="at">modx =</span> chamber)</span>
<span id="cb514-3969"><a href="#cb514-3969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3970"><a href="#cb514-3970" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-3971"><a href="#cb514-3971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3972"><a href="#cb514-3972" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.5.2 dependent variable: dom_percentage(demo)</span></span>
<span id="cb514-3973"><a href="#cb514-3973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3974"><a href="#cb514-3974" aria-hidden="true" tabindex="-1"></a>legis</span>
<span id="cb514-3975"><a href="#cb514-3975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3978"><a href="#cb514-3978" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-3979"><a href="#cb514-3979" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage interaction legis_demo</span></span>
<span id="cb514-3980"><a href="#cb514-3980" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-3981"><a href="#cb514-3981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3982"><a href="#cb514-3982" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology * gender</span></span>
<span id="cb514-3983"><a href="#cb514-3983" aria-hidden="true" tabindex="-1"></a>legis_lm_inter1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> chamber <span class="sc">+</span> is.republican <span class="sc">+</span> ideology<span class="sc">*</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-3984"><a href="#cb514-3984" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3985"><a href="#cb514-3985" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter1)</span>
<span id="cb514-3986"><a href="#cb514-3986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3987"><a href="#cb514-3987" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology * chamber</span></span>
<span id="cb514-3988"><a href="#cb514-3988" aria-hidden="true" tabindex="-1"></a>legis_lm_inter2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> ideology<span class="sc">*</span>chamber <span class="sc">+</span> is.republican <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-3989"><a href="#cb514-3989" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3990"><a href="#cb514-3990" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter2)</span>
<span id="cb514-3991"><a href="#cb514-3991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3992"><a href="#cb514-3992" aria-hidden="true" tabindex="-1"></a><span class="co"># is.republican * gender</span></span>
<span id="cb514-3993"><a href="#cb514-3993" aria-hidden="true" tabindex="-1"></a>legis_lm_inter3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> is.republican<span class="sc">*</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3994"><a href="#cb514-3994" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-3995"><a href="#cb514-3995" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter3)</span>
<span id="cb514-3996"><a href="#cb514-3996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3997"><a href="#cb514-3997" aria-hidden="true" tabindex="-1"></a><span class="co"># is.republican * chamber</span></span>
<span id="cb514-3998"><a href="#cb514-3998" aria-hidden="true" tabindex="-1"></a>legis_lm_inter4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(is.dom <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> gender <span class="sc">+</span> is.republican<span class="sc">*</span>chamber <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-3999"><a href="#cb514-3999" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_cg)</span>
<span id="cb514-4000"><a href="#cb514-4000" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter4)</span>
<span id="cb514-4001"><a href="#cb514-4001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4002"><a href="#cb514-4002" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- effect ----</span></span>
<span id="cb514-4003"><a href="#cb514-4003" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter1, <span class="at">pred =</span> ideology, <span class="at">modx =</span> gender, <span class="at">data =</span> legis_cg)</span>
<span id="cb514-4004"><a href="#cb514-4004" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter2, <span class="at">pred =</span> ideology, <span class="at">modx =</span> chamber, <span class="at">data =</span> legis_cg)</span>
<span id="cb514-4005"><a href="#cb514-4005" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter3, <span class="at">pred =</span> is.republican, <span class="at">modx =</span> gender, <span class="at">data =</span> legis_cg)</span>
<span id="cb514-4006"><a href="#cb514-4006" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter4, <span class="at">pred =</span> is.republican, <span class="at">modx =</span> chamber, <span class="at">data =</span> legis_cg)</span>
<span id="cb514-4007"><a href="#cb514-4007" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4008"><a href="#cb514-4008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4009"><a href="#cb514-4009" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.5.3 dependent variable: dom (district)</span></span>
<span id="cb514-4010"><a href="#cb514-4010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4013"><a href="#cb514-4013" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4014"><a href="#cb514-4014" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dom.percentage interaction legis_district</span></span>
<span id="cb514-4015"><a href="#cb514-4015" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4016"><a href="#cb514-4016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4017"><a href="#cb514-4017" aria-hidden="true" tabindex="-1"></a><span class="co"># high_edu_share * gender</span></span>
<span id="cb514-4018"><a href="#cb514-4018" aria-hidden="true" tabindex="-1"></a>legis_lm_inter1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> chamber <span class="sc">+</span> ideology <span class="sc">+</span> high_edu_share<span class="sc">*</span>party <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-4019"><a href="#cb514-4019" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4020"><a href="#cb514-4020" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter1)</span>
<span id="cb514-4021"><a href="#cb514-4021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4022"><a href="#cb514-4022" aria-hidden="true" tabindex="-1"></a><span class="co"># blue collar * party</span></span>
<span id="cb514-4023"><a href="#cb514-4023" aria-hidden="true" tabindex="-1"></a>legis_lm_inter2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> ideology <span class="sc">+</span> blue_collar_share<span class="sc">*</span>party <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-4024"><a href="#cb514-4024" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4025"><a href="#cb514-4025" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter2)</span>
<span id="cb514-4026"><a href="#cb514-4026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4027"><a href="#cb514-4027" aria-hidden="true" tabindex="-1"></a><span class="co"># white collar * party</span></span>
<span id="cb514-4028"><a href="#cb514-4028" aria-hidden="true" tabindex="-1"></a>legis_lm_inter3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> ideology <span class="sc">+</span> white_collar_share<span class="sc">*</span>party <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-4029"><a href="#cb514-4029" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4030"><a href="#cb514-4030" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter3)</span>
<span id="cb514-4031"><a href="#cb514-4031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4032"><a href="#cb514-4032" aria-hidden="true" tabindex="-1"></a><span class="co"># white_ratio * party</span></span>
<span id="cb514-4033"><a href="#cb514-4033" aria-hidden="true" tabindex="-1"></a>legis_lm_inter4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> white_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4034"><a href="#cb514-4034" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4035"><a href="#cb514-4035" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter4)</span>
<span id="cb514-4036"><a href="#cb514-4036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4037"><a href="#cb514-4037" aria-hidden="true" tabindex="-1"></a><span class="co"># asian_ratio * party</span></span>
<span id="cb514-4038"><a href="#cb514-4038" aria-hidden="true" tabindex="-1"></a>legis_lm_inter5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> asian_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4039"><a href="#cb514-4039" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4040"><a href="#cb514-4040" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter5)</span>
<span id="cb514-4041"><a href="#cb514-4041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4042"><a href="#cb514-4042" aria-hidden="true" tabindex="-1"></a><span class="co"># black_ratio * party</span></span>
<span id="cb514-4043"><a href="#cb514-4043" aria-hidden="true" tabindex="-1"></a>legis_lm_inter6 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> black_or_african_american_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4044"><a href="#cb514-4044" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4045"><a href="#cb514-4045" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter6)</span>
<span id="cb514-4046"><a href="#cb514-4046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4047"><a href="#cb514-4047" aria-hidden="true" tabindex="-1"></a><span class="co"># median_household_income * party</span></span>
<span id="cb514-4048"><a href="#cb514-4048" aria-hidden="true" tabindex="-1"></a>legis_lm_inter7 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> median_household_income_that_year<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4049"><a href="#cb514-4049" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4050"><a href="#cb514-4050" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter7)</span>
<span id="cb514-4051"><a href="#cb514-4051" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4052"><a href="#cb514-4052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4053"><a href="#cb514-4053" aria-hidden="true" tabindex="-1"></a><span class="co"># median_household_income * party</span></span>
<span id="cb514-4054"><a href="#cb514-4054" aria-hidden="true" tabindex="-1"></a>legis_lm_inter8 <span class="ot">&lt;-</span> <span class="fu">lm</span>(dom_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> foreign_born_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4055"><a href="#cb514-4055" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4056"><a href="#cb514-4056" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter8)</span>
<span id="cb514-4057"><a href="#cb514-4057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4058"><a href="#cb514-4058" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- effect ----</span></span>
<span id="cb514-4059"><a href="#cb514-4059" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter1, <span class="at">pred =</span> high_edu_share, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4060"><a href="#cb514-4060" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter2, <span class="at">pred =</span> blue_collar_share, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4061"><a href="#cb514-4061" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter3, <span class="at">pred =</span> white_collar_share, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4062"><a href="#cb514-4062" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter4, <span class="at">pred =</span> white_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4063"><a href="#cb514-4063" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter5, <span class="at">pred =</span> asian_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4064"><a href="#cb514-4064" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter6, <span class="at">pred =</span> black_or_african_american_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4065"><a href="#cb514-4065" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter7, <span class="at">pred =</span> median_household_income_that_year, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4066"><a href="#cb514-4066" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter8, <span class="at">pred =</span> foreign_born_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4067"><a href="#cb514-4067" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4068"><a href="#cb514-4068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4069"><a href="#cb514-4069" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.5.4 dependent variable: prof(district)</span></span>
<span id="cb514-4070"><a href="#cb514-4070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4071"><a href="#cb514-4071" aria-hidden="true" tabindex="-1"></a>district variable<span class="sc">\*</span>party and gender</span>
<span id="cb514-4072"><a href="#cb514-4072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4075"><a href="#cb514-4075" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4076"><a href="#cb514-4076" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: prof.percentage interaction legis</span></span>
<span id="cb514-4077"><a href="#cb514-4077" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4078"><a href="#cb514-4078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4079"><a href="#cb514-4079" aria-hidden="true" tabindex="-1"></a><span class="co"># high_edu_share * gender</span></span>
<span id="cb514-4080"><a href="#cb514-4080" aria-hidden="true" tabindex="-1"></a>legis_lm_inter1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> chamber <span class="sc">+</span> ideology <span class="sc">+</span> high_edu_share<span class="sc">*</span>party <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-4081"><a href="#cb514-4081" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4082"><a href="#cb514-4082" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter1)</span>
<span id="cb514-4083"><a href="#cb514-4083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4084"><a href="#cb514-4084" aria-hidden="true" tabindex="-1"></a><span class="co"># blue collar * party</span></span>
<span id="cb514-4085"><a href="#cb514-4085" aria-hidden="true" tabindex="-1"></a>legis_lm_inter2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> ideology <span class="sc">+</span> blue_collar_share<span class="sc">*</span>party <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-4086"><a href="#cb514-4086" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4087"><a href="#cb514-4087" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter2)</span>
<span id="cb514-4088"><a href="#cb514-4088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4089"><a href="#cb514-4089" aria-hidden="true" tabindex="-1"></a><span class="co"># white collar * party</span></span>
<span id="cb514-4090"><a href="#cb514-4090" aria-hidden="true" tabindex="-1"></a>legis_lm_inter3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> ideology <span class="sc">+</span> white_collar_share<span class="sc">*</span>party <span class="sc">+</span> gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress),</span>
<span id="cb514-4091"><a href="#cb514-4091" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4092"><a href="#cb514-4092" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter3)</span>
<span id="cb514-4093"><a href="#cb514-4093" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4094"><a href="#cb514-4094" aria-hidden="true" tabindex="-1"></a><span class="co"># white_ratio * party</span></span>
<span id="cb514-4095"><a href="#cb514-4095" aria-hidden="true" tabindex="-1"></a>legis_lm_inter4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> white_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4096"><a href="#cb514-4096" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4097"><a href="#cb514-4097" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter4)</span>
<span id="cb514-4098"><a href="#cb514-4098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4099"><a href="#cb514-4099" aria-hidden="true" tabindex="-1"></a><span class="co"># asian_ratio * party</span></span>
<span id="cb514-4100"><a href="#cb514-4100" aria-hidden="true" tabindex="-1"></a>legis_lm_inter5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> asian_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4101"><a href="#cb514-4101" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4102"><a href="#cb514-4102" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter5)</span>
<span id="cb514-4103"><a href="#cb514-4103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4104"><a href="#cb514-4104" aria-hidden="true" tabindex="-1"></a><span class="co"># black_ratio * party</span></span>
<span id="cb514-4105"><a href="#cb514-4105" aria-hidden="true" tabindex="-1"></a>legis_lm_inter6 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> black_or_african_american_ratio<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4106"><a href="#cb514-4106" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4107"><a href="#cb514-4107" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter6)</span>
<span id="cb514-4108"><a href="#cb514-4108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4109"><a href="#cb514-4109" aria-hidden="true" tabindex="-1"></a><span class="co"># median_household_income * party</span></span>
<span id="cb514-4110"><a href="#cb514-4110" aria-hidden="true" tabindex="-1"></a>legis_lm_inter7 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> median_household_income_that_year<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4111"><a href="#cb514-4111" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4112"><a href="#cb514-4112" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter7)</span>
<span id="cb514-4113"><a href="#cb514-4113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4114"><a href="#cb514-4114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4115"><a href="#cb514-4115" aria-hidden="true" tabindex="-1"></a><span class="co"># median_household_income * party</span></span>
<span id="cb514-4116"><a href="#cb514-4116" aria-hidden="true" tabindex="-1"></a>legis_lm_inter7 <span class="ot">&lt;-</span> <span class="fu">lm</span>(prof_percentage <span class="sc">~</span> age <span class="sc">+</span> seniority <span class="sc">+</span> ideology <span class="sc">+</span> chamber <span class="sc">+</span> median_household_income_that_year<span class="sc">*</span>party <span class="sc">+</span>gender <span class="sc">+</span> <span class="fu">as.factor</span>(congress), </span>
<span id="cb514-4117"><a href="#cb514-4117" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4118"><a href="#cb514-4118" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(legis_lm_inter7)</span>
<span id="cb514-4119"><a href="#cb514-4119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4120"><a href="#cb514-4120" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- effect ----</span></span>
<span id="cb514-4121"><a href="#cb514-4121" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter1, <span class="at">pred =</span> high_edu_share, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4122"><a href="#cb514-4122" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter2, <span class="at">pred =</span> blue_collar_share, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4123"><a href="#cb514-4123" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter3, <span class="at">pred =</span> white_collar_share, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4124"><a href="#cb514-4124" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter4, <span class="at">pred =</span> white_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4125"><a href="#cb514-4125" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter5, <span class="at">pred =</span> asian_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4126"><a href="#cb514-4126" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter6, <span class="at">pred =</span> black_or_african_american_ratio, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4127"><a href="#cb514-4127" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(legis_lm_inter7, <span class="at">pred =</span> median_household_income_that_year, <span class="at">modx =</span> party, <span class="at">data =</span> legis_merged)</span>
<span id="cb514-4128"><a href="#cb514-4128" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4129"><a href="#cb514-4129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4130"><a href="#cb514-4130" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.6 district data multilateral - liner regression</span></span>
<span id="cb514-4131"><a href="#cb514-4131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4132"><a href="#cb514-4132" aria-hidden="true" tabindex="-1"></a>define function</span>
<span id="cb514-4133"><a href="#cb514-4133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4136"><a href="#cb514-4136" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4137"><a href="#cb514-4137" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district data regression funtion</span></span>
<span id="cb514-4138"><a href="#cb514-4138" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4139"><a href="#cb514-4139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4140"><a href="#cb514-4140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4141"><a href="#cb514-4141" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4142"><a href="#cb514-4142" aria-hidden="true" tabindex="-1"></a>run_single_var_reg <span class="ot">&lt;-</span> <span class="cf">function</span>(dep_var, df, vars) {</span>
<span id="cb514-4143"><a href="#cb514-4143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(vars, <span class="cf">function</span>(v) {</span>
<span id="cb514-4144"><a href="#cb514-4144" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  NA</span></span>
<span id="cb514-4145"><a href="#cb514-4145" aria-hidden="true" tabindex="-1"></a>    df_sub <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb514-4146"><a href="#cb514-4146" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">c</span>(dep_var, v, <span class="st">"congress"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb514-4147"><a href="#cb514-4147" aria-hidden="true" tabindex="-1"></a>      <span class="fu">drop_na</span>()</span>
<span id="cb514-4148"><a href="#cb514-4148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-4149"><a href="#cb514-4149" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-4150"><a href="#cb514-4150" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">n_distinct</span>(df_sub[[v]]) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb514-4151"><a href="#cb514-4151" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">tibble</span>(<span class="at">var =</span> v, <span class="at">estimate =</span> <span class="cn">NA</span>, <span class="at">std.error =</span> <span class="cn">NA</span>, <span class="at">statistic =</span> <span class="cn">NA</span>, <span class="at">p.value =</span> <span class="cn">NA</span>))</span>
<span id="cb514-4152"><a href="#cb514-4152" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-4153"><a href="#cb514-4153" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-4154"><a href="#cb514-4154" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.factor</span>(df_sub[[v]]) <span class="sc">&amp;&amp;</span> <span class="fu">nlevels</span>(df_sub[[v]]) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb514-4155"><a href="#cb514-4155" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">tibble</span>(<span class="at">var =</span> v, <span class="at">estimate =</span> <span class="cn">NA</span>, <span class="at">std.error =</span> <span class="cn">NA</span>, <span class="at">statistic =</span> <span class="cn">NA</span>, <span class="at">p.value =</span> <span class="cn">NA</span>))</span>
<span id="cb514-4156"><a href="#cb514-4156" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-4157"><a href="#cb514-4157" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-4158"><a href="#cb514-4158" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  congress </span></span>
<span id="cb514-4159"><a href="#cb514-4159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="st">"congress"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df_sub) <span class="sc">&amp;&amp;</span> <span class="fu">n_distinct</span>(df_sub<span class="sc">$</span>congress) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb514-4160"><a href="#cb514-4160" aria-hidden="true" tabindex="-1"></a>      formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dep_var, <span class="st">" ~ "</span>, v, <span class="st">" + as.factor(congress)"</span>)</span>
<span id="cb514-4161"><a href="#cb514-4161" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb514-4162"><a href="#cb514-4162" aria-hidden="true" tabindex="-1"></a>      formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dep_var, <span class="st">" ~ "</span>, v)</span>
<span id="cb514-4163"><a href="#cb514-4163" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb514-4164"><a href="#cb514-4164" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-4165"><a href="#cb514-4165" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb514-4166"><a href="#cb514-4166" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.formula</span>(formula_str), <span class="at">data =</span> df_sub)</span>
<span id="cb514-4167"><a href="#cb514-4167" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb514-4168"><a href="#cb514-4168" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>(m) <span class="sc">%&gt;%</span></span>
<span id="cb514-4169"><a href="#cb514-4169" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(term <span class="sc">==</span> v) <span class="sc">%&gt;%</span></span>
<span id="cb514-4170"><a href="#cb514-4170" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">var =</span> v)</span>
<span id="cb514-4171"><a href="#cb514-4171" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb514-4172"><a href="#cb514-4172" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-4173"><a href="#cb514-4173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4174"><a href="#cb514-4174" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4175"><a href="#cb514-4175" aria-hidden="true" tabindex="-1"></a>plot_reg_results <span class="ot">&lt;-</span> <span class="cf">function</span>(df, dep_label, <span class="at">title_prefix =</span> <span class="st">"Adver Regression"</span>) {</span>
<span id="cb514-4176"><a href="#cb514-4176" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb514-4177"><a href="#cb514-4177" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">case_when</span>(</span>
<span id="cb514-4178"><a href="#cb514-4178" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">"***"</span>,</span>
<span id="cb514-4179"><a href="#cb514-4179" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.01</span>  <span class="sc">~</span> <span class="st">"**"</span>,</span>
<span id="cb514-4180"><a href="#cb514-4180" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>  <span class="sc">~</span> <span class="st">"*"</span>,</span>
<span id="cb514-4181"><a href="#cb514-4181" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.1</span>   <span class="sc">~</span> <span class="st">"+"</span>,</span>
<span id="cb514-4182"><a href="#cb514-4182" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb514-4183"><a href="#cb514-4183" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb514-4184"><a href="#cb514-4184" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(var, estimate), <span class="at">y =</span> estimate, <span class="at">color =</span> p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)) <span class="sc">+</span></span>
<span id="cb514-4185"><a href="#cb514-4185" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb514-4186"><a href="#cb514-4186" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error,</span>
<span id="cb514-4187"><a href="#cb514-4187" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ymax =</span> estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> std.error),</span>
<span id="cb514-4188"><a href="#cb514-4188" aria-hidden="true" tabindex="-1"></a>                  <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb514-4189"><a href="#cb514-4189" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb514-4190"><a href="#cb514-4190" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb514-4191"><a href="#cb514-4191" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb514-4192"><a href="#cb514-4192" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Variables"</span>,</span>
<span id="cb514-4193"><a href="#cb514-4193" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fu">paste0</span>(<span class="st">"Coefficient ("</span>, dep_label, <span class="st">")"</span>),</span>
<span id="cb514-4194"><a href="#cb514-4194" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">paste0</span>(title_prefix, <span class="st">"  "</span>, dep_label)</span>
<span id="cb514-4195"><a href="#cb514-4195" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb514-4196"><a href="#cb514-4196" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-4197"><a href="#cb514-4197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4198"><a href="#cb514-4198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4199"><a href="#cb514-4199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4200"><a href="#cb514-4200" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.6.1 party level</span></span>
<span id="cb514-4201"><a href="#cb514-4201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4204"><a href="#cb514-4204" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4205"><a href="#cb514-4205" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_party:democratics</span></span>
<span id="cb514-4206"><a href="#cb514-4206" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4207"><a href="#cb514-4207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4208"><a href="#cb514-4208" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4209"><a href="#cb514-4209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(dem_legis[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4210"><a href="#cb514-4210" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4211"><a href="#cb514-4211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4212"><a href="#cb514-4212" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4213"><a href="#cb514-4213" aria-hidden="true" tabindex="-1"></a>dem_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4214"><a href="#cb514-4214" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"Democratic"</span>)</span>
<span id="cb514-4215"><a href="#cb514-4215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4216"><a href="#cb514-4216" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4217"><a href="#cb514-4217" aria-hidden="true" tabindex="-1"></a>legis_dem_dom <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  dem_legis, valid_vars)</span>
<span id="cb514-4218"><a href="#cb514-4218" aria-hidden="true" tabindex="-1"></a>legis_dem_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, dem_legis, valid_vars)</span>
<span id="cb514-4219"><a href="#cb514-4219" aria-hidden="true" tabindex="-1"></a>legis_dem_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, dem_legis, valid_vars)</span>
<span id="cb514-4220"><a href="#cb514-4220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4221"><a href="#cb514-4221" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. </span></span>
<span id="cb514-4222"><a href="#cb514-4222" aria-hidden="true" tabindex="-1"></a>legis_dem_dom <span class="sc">%&gt;%</span></span>
<span id="cb514-4223"><a href="#cb514-4223" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4224"><a href="#cb514-4224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4225"><a href="#cb514-4225" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_dem_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4226"><a href="#cb514-4226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4227"><a href="#cb514-4227" aria-hidden="true" tabindex="-1"></a>legis_dem_prof <span class="sc">%&gt;%</span></span>
<span id="cb514-4228"><a href="#cb514-4228" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4229"><a href="#cb514-4229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4230"><a href="#cb514-4230" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_dem_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4231"><a href="#cb514-4231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4232"><a href="#cb514-4232" aria-hidden="true" tabindex="-1"></a>legis_dem_intl <span class="sc">%&gt;%</span></span>
<span id="cb514-4233"><a href="#cb514-4233" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4234"><a href="#cb514-4234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4235"><a href="#cb514-4235" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_dem_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4236"><a href="#cb514-4236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4237"><a href="#cb514-4237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4238"><a href="#cb514-4238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4241"><a href="#cb514-4241" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4242"><a href="#cb514-4242" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_party:republican</span></span>
<span id="cb514-4243"><a href="#cb514-4243" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4244"><a href="#cb514-4244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4245"><a href="#cb514-4245" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4246"><a href="#cb514-4246" aria-hidden="true" tabindex="-1"></a>rep_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4247"><a href="#cb514-4247" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"Republican"</span>)</span>
<span id="cb514-4248"><a href="#cb514-4248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4249"><a href="#cb514-4249" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4250"><a href="#cb514-4250" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4251"><a href="#cb514-4251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(rep_legis[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4252"><a href="#cb514-4252" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4253"><a href="#cb514-4253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4254"><a href="#cb514-4254" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4255"><a href="#cb514-4255" aria-hidden="true" tabindex="-1"></a>legis_rep_dom <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  rep_legis, valid_vars)</span>
<span id="cb514-4256"><a href="#cb514-4256" aria-hidden="true" tabindex="-1"></a>legis_rep_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, rep_legis, valid_vars)</span>
<span id="cb514-4257"><a href="#cb514-4257" aria-hidden="true" tabindex="-1"></a>legis_rep_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, rep_legis, valid_vars)</span>
<span id="cb514-4258"><a href="#cb514-4258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4259"><a href="#cb514-4259" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. </span></span>
<span id="cb514-4260"><a href="#cb514-4260" aria-hidden="true" tabindex="-1"></a>legis_rep_dom <span class="sc">%&gt;%</span></span>
<span id="cb514-4261"><a href="#cb514-4261" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4262"><a href="#cb514-4262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4263"><a href="#cb514-4263" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_rep_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4264"><a href="#cb514-4264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4265"><a href="#cb514-4265" aria-hidden="true" tabindex="-1"></a>legis_rep_prof <span class="sc">%&gt;%</span></span>
<span id="cb514-4266"><a href="#cb514-4266" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4267"><a href="#cb514-4267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4268"><a href="#cb514-4268" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_rep_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4269"><a href="#cb514-4269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4270"><a href="#cb514-4270" aria-hidden="true" tabindex="-1"></a>legis_rep_intl <span class="sc">%&gt;%</span></span>
<span id="cb514-4271"><a href="#cb514-4271" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4272"><a href="#cb514-4272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4273"><a href="#cb514-4273" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_rep_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4274"><a href="#cb514-4274" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4275"><a href="#cb514-4275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4276"><a href="#cb514-4276" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.6.2 chamber level</span></span>
<span id="cb514-4277"><a href="#cb514-4277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4280"><a href="#cb514-4280" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4281"><a href="#cb514-4281" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_chamber:house</span></span>
<span id="cb514-4282"><a href="#cb514-4282" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4283"><a href="#cb514-4283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4284"><a href="#cb514-4284" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 1.  ====</span></span>
<span id="cb514-4285"><a href="#cb514-4285" aria-hidden="true" tabindex="-1"></a>house_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4286"><a href="#cb514-4286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"house of representatives"</span>)</span>
<span id="cb514-4287"><a href="#cb514-4287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4288"><a href="#cb514-4288" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 2. 1 ====</span></span>
<span id="cb514-4289"><a href="#cb514-4289" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4290"><a href="#cb514-4290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(house_legis[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4291"><a href="#cb514-4291" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4292"><a href="#cb514-4292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4293"><a href="#cb514-4293" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 5.  ====</span></span>
<span id="cb514-4294"><a href="#cb514-4294" aria-hidden="true" tabindex="-1"></a>legis_house_dom  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  house_legis, valid_vars)</span>
<span id="cb514-4295"><a href="#cb514-4295" aria-hidden="true" tabindex="-1"></a>legis_house_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, house_legis, valid_vars)</span>
<span id="cb514-4296"><a href="#cb514-4296" aria-hidden="true" tabindex="-1"></a>legis_house_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, house_legis, valid_vars)</span>
<span id="cb514-4297"><a href="#cb514-4297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4298"><a href="#cb514-4298" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 6.  ====</span></span>
<span id="cb514-4299"><a href="#cb514-4299" aria-hidden="true" tabindex="-1"></a>legis_house_dom <span class="sc">%&gt;%</span></span>
<span id="cb514-4300"><a href="#cb514-4300" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4301"><a href="#cb514-4301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4302"><a href="#cb514-4302" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4303"><a href="#cb514-4303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4304"><a href="#cb514-4304" aria-hidden="true" tabindex="-1"></a>legis_house_prof <span class="sc">%&gt;%</span></span>
<span id="cb514-4305"><a href="#cb514-4305" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4306"><a href="#cb514-4306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4307"><a href="#cb514-4307" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4308"><a href="#cb514-4308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4309"><a href="#cb514-4309" aria-hidden="true" tabindex="-1"></a>legis_house_intl <span class="sc">%&gt;%</span></span>
<span id="cb514-4310"><a href="#cb514-4310" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4311"><a href="#cb514-4311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4312"><a href="#cb514-4312" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4313"><a href="#cb514-4313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4314"><a href="#cb514-4314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4315"><a href="#cb514-4315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4318"><a href="#cb514-4318" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4319"><a href="#cb514-4319" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_chamber:senate</span></span>
<span id="cb514-4320"><a href="#cb514-4320" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4321"><a href="#cb514-4321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4322"><a href="#cb514-4322" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 1.  ====</span></span>
<span id="cb514-4323"><a href="#cb514-4323" aria-hidden="true" tabindex="-1"></a>senate_legis <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4324"><a href="#cb514-4324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"senate"</span>)</span>
<span id="cb514-4325"><a href="#cb514-4325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4326"><a href="#cb514-4326" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 2. 1 ====</span></span>
<span id="cb514-4327"><a href="#cb514-4327" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4328"><a href="#cb514-4328" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(senate_legis[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4329"><a href="#cb514-4329" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4330"><a href="#cb514-4330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4331"><a href="#cb514-4331" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 5.  ====</span></span>
<span id="cb514-4332"><a href="#cb514-4332" aria-hidden="true" tabindex="-1"></a>legis_senate_dom  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  senate_legis, valid_vars)</span>
<span id="cb514-4333"><a href="#cb514-4333" aria-hidden="true" tabindex="-1"></a>legis_senate_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, senate_legis, valid_vars)</span>
<span id="cb514-4334"><a href="#cb514-4334" aria-hidden="true" tabindex="-1"></a>legis_senate_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, senate_legis, valid_vars)</span>
<span id="cb514-4335"><a href="#cb514-4335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4336"><a href="#cb514-4336" aria-hidden="true" tabindex="-1"></a><span class="co"># ==== 6.  ====</span></span>
<span id="cb514-4337"><a href="#cb514-4337" aria-hidden="true" tabindex="-1"></a>legis_senate_dom <span class="sc">%&gt;%</span></span>
<span id="cb514-4338"><a href="#cb514-4338" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4339"><a href="#cb514-4339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4340"><a href="#cb514-4340" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4341"><a href="#cb514-4341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4342"><a href="#cb514-4342" aria-hidden="true" tabindex="-1"></a>legis_senate_prof <span class="sc">%&gt;%</span></span>
<span id="cb514-4343"><a href="#cb514-4343" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4344"><a href="#cb514-4344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4345"><a href="#cb514-4345" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4346"><a href="#cb514-4346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4347"><a href="#cb514-4347" aria-hidden="true" tabindex="-1"></a>legis_senate_intl <span class="sc">%&gt;%</span></span>
<span id="cb514-4348"><a href="#cb514-4348" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4349"><a href="#cb514-4349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4350"><a href="#cb514-4350" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4351"><a href="#cb514-4351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4352"><a href="#cb514-4352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4353"><a href="#cb514-4353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4354"><a href="#cb514-4354" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.6.3 party+chamber</span></span>
<span id="cb514-4355"><a href="#cb514-4355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4358"><a href="#cb514-4358" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4359"><a href="#cb514-4359" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_chamber:senate_dem</span></span>
<span id="cb514-4360"><a href="#cb514-4360" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4361"><a href="#cb514-4361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4362"><a href="#cb514-4362" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4363"><a href="#cb514-4363" aria-hidden="true" tabindex="-1"></a>senate_legis_dem <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4364"><a href="#cb514-4364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"senate"</span>, party <span class="sc">==</span> <span class="st">"Democratic"</span>)</span>
<span id="cb514-4365"><a href="#cb514-4365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4366"><a href="#cb514-4366" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4367"><a href="#cb514-4367" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4368"><a href="#cb514-4368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(senate_legis_dem[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4369"><a href="#cb514-4369" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4370"><a href="#cb514-4370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4371"><a href="#cb514-4371" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4372"><a href="#cb514-4372" aria-hidden="true" tabindex="-1"></a>legis_senate_dom_dem  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  senate_legis_dem, valid_vars)</span>
<span id="cb514-4373"><a href="#cb514-4373" aria-hidden="true" tabindex="-1"></a>legis_senate_prof_dem <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, senate_legis_dem, valid_vars)</span>
<span id="cb514-4374"><a href="#cb514-4374" aria-hidden="true" tabindex="-1"></a>legis_senate_intl_dem <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, senate_legis_dem, valid_vars)</span>
<span id="cb514-4375"><a href="#cb514-4375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4376"><a href="#cb514-4376" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. </span></span>
<span id="cb514-4377"><a href="#cb514-4377" aria-hidden="true" tabindex="-1"></a>legis_senate_dom_dem <span class="sc">%&gt;%</span></span>
<span id="cb514-4378"><a href="#cb514-4378" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4379"><a href="#cb514-4379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4380"><a href="#cb514-4380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4381"><a href="#cb514-4381" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_dom_dem, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4382"><a href="#cb514-4382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4383"><a href="#cb514-4383" aria-hidden="true" tabindex="-1"></a>legis_senate_prof_dem <span class="sc">%&gt;%</span></span>
<span id="cb514-4384"><a href="#cb514-4384" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4385"><a href="#cb514-4385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4386"><a href="#cb514-4386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4387"><a href="#cb514-4387" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_prof_dem, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4388"><a href="#cb514-4388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4389"><a href="#cb514-4389" aria-hidden="true" tabindex="-1"></a>legis_senate_intl_dem <span class="sc">%&gt;%</span></span>
<span id="cb514-4390"><a href="#cb514-4390" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4391"><a href="#cb514-4391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4392"><a href="#cb514-4392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4393"><a href="#cb514-4393" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_intl_dem, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4394"><a href="#cb514-4394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4395"><a href="#cb514-4395" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4396"><a href="#cb514-4396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4399"><a href="#cb514-4399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4400"><a href="#cb514-4400" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_chamber:house_dem</span></span>
<span id="cb514-4401"><a href="#cb514-4401" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4402"><a href="#cb514-4402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4403"><a href="#cb514-4403" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4404"><a href="#cb514-4404" aria-hidden="true" tabindex="-1"></a>house_legis_dem <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4405"><a href="#cb514-4405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"house of representatives"</span>, party <span class="sc">==</span> <span class="st">"Democratic"</span>)</span>
<span id="cb514-4406"><a href="#cb514-4406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4407"><a href="#cb514-4407" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4408"><a href="#cb514-4408" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4409"><a href="#cb514-4409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(house_legis_dem[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4410"><a href="#cb514-4410" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4411"><a href="#cb514-4411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4412"><a href="#cb514-4412" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. </span></span>
<span id="cb514-4413"><a href="#cb514-4413" aria-hidden="true" tabindex="-1"></a>legis_house_dom_dem  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  house_legis_dem, valid_vars)</span>
<span id="cb514-4414"><a href="#cb514-4414" aria-hidden="true" tabindex="-1"></a>legis_house_prof_dem <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, house_legis_dem, valid_vars)</span>
<span id="cb514-4415"><a href="#cb514-4415" aria-hidden="true" tabindex="-1"></a>legis_house_intl_dem <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, house_legis_dem, valid_vars)</span>
<span id="cb514-4416"><a href="#cb514-4416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4417"><a href="#cb514-4417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4418"><a href="#cb514-4418" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4419"><a href="#cb514-4419" aria-hidden="true" tabindex="-1"></a>legis_house_dom_dem <span class="sc">%&gt;%</span></span>
<span id="cb514-4420"><a href="#cb514-4420" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4421"><a href="#cb514-4421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4422"><a href="#cb514-4422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4423"><a href="#cb514-4423" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_dom_dem, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4424"><a href="#cb514-4424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4425"><a href="#cb514-4425" aria-hidden="true" tabindex="-1"></a>legis_house_prof_dem <span class="sc">%&gt;%</span></span>
<span id="cb514-4426"><a href="#cb514-4426" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4427"><a href="#cb514-4427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4428"><a href="#cb514-4428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4429"><a href="#cb514-4429" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_prof_dem, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4430"><a href="#cb514-4430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4431"><a href="#cb514-4431" aria-hidden="true" tabindex="-1"></a>legis_house_intl_dem <span class="sc">%&gt;%</span></span>
<span id="cb514-4432"><a href="#cb514-4432" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4433"><a href="#cb514-4433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4434"><a href="#cb514-4434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4435"><a href="#cb514-4435" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_intl_dem, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4436"><a href="#cb514-4436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4437"><a href="#cb514-4437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4440"><a href="#cb514-4440" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4441"><a href="#cb514-4441" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_chamber:house_rep</span></span>
<span id="cb514-4442"><a href="#cb514-4442" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4443"><a href="#cb514-4443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4444"><a href="#cb514-4444" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4445"><a href="#cb514-4445" aria-hidden="true" tabindex="-1"></a>house_legis_rep <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4446"><a href="#cb514-4446" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"house of representatives"</span>, party <span class="sc">==</span> <span class="st">"Republican"</span>)</span>
<span id="cb514-4447"><a href="#cb514-4447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4448"><a href="#cb514-4448" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4449"><a href="#cb514-4449" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4450"><a href="#cb514-4450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(house_legis_rep[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4451"><a href="#cb514-4451" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4452"><a href="#cb514-4452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4453"><a href="#cb514-4453" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. </span></span>
<span id="cb514-4454"><a href="#cb514-4454" aria-hidden="true" tabindex="-1"></a>legis_house_dom_rep  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  house_legis_rep, valid_vars)</span>
<span id="cb514-4455"><a href="#cb514-4455" aria-hidden="true" tabindex="-1"></a>legis_house_prof_rep <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, house_legis_rep, valid_vars)</span>
<span id="cb514-4456"><a href="#cb514-4456" aria-hidden="true" tabindex="-1"></a>legis_house_intl_rep <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, house_legis_rep, valid_vars)</span>
<span id="cb514-4457"><a href="#cb514-4457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4458"><a href="#cb514-4458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4459"><a href="#cb514-4459" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4460"><a href="#cb514-4460" aria-hidden="true" tabindex="-1"></a>legis_house_dom_rep <span class="sc">%&gt;%</span></span>
<span id="cb514-4461"><a href="#cb514-4461" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4462"><a href="#cb514-4462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4463"><a href="#cb514-4463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4464"><a href="#cb514-4464" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_dom_rep, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4465"><a href="#cb514-4465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4466"><a href="#cb514-4466" aria-hidden="true" tabindex="-1"></a>legis_house_prof_rep <span class="sc">%&gt;%</span></span>
<span id="cb514-4467"><a href="#cb514-4467" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4468"><a href="#cb514-4468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4469"><a href="#cb514-4469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4470"><a href="#cb514-4470" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_prof_rep, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4471"><a href="#cb514-4471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4472"><a href="#cb514-4472" aria-hidden="true" tabindex="-1"></a>legis_house_intl_rep <span class="sc">%&gt;%</span></span>
<span id="cb514-4473"><a href="#cb514-4473" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4474"><a href="#cb514-4474" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4475"><a href="#cb514-4475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4476"><a href="#cb514-4476" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_house_intl_rep, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4477"><a href="#cb514-4477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4478"><a href="#cb514-4478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4481"><a href="#cb514-4481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4482"><a href="#cb514-4482" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_chamber:senate_rep</span></span>
<span id="cb514-4483"><a href="#cb514-4483" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4484"><a href="#cb514-4484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4485"><a href="#cb514-4485" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4486"><a href="#cb514-4486" aria-hidden="true" tabindex="-1"></a>senate_legis_rep <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4487"><a href="#cb514-4487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chamber <span class="sc">==</span> <span class="st">"senate"</span>, party <span class="sc">==</span> <span class="st">"Republican"</span>)</span>
<span id="cb514-4488"><a href="#cb514-4488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4489"><a href="#cb514-4489" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4490"><a href="#cb514-4490" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4491"><a href="#cb514-4491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(senate_legis_rep[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4492"><a href="#cb514-4492" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4493"><a href="#cb514-4493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4494"><a href="#cb514-4494" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. </span></span>
<span id="cb514-4495"><a href="#cb514-4495" aria-hidden="true" tabindex="-1"></a>legis_senate_dom_rep  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  senate_legis_rep, valid_vars)</span>
<span id="cb514-4496"><a href="#cb514-4496" aria-hidden="true" tabindex="-1"></a>legis_senate_prof_rep <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, senate_legis_rep, valid_vars)</span>
<span id="cb514-4497"><a href="#cb514-4497" aria-hidden="true" tabindex="-1"></a>legis_senate_intl_rep <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, senate_legis_rep, valid_vars)</span>
<span id="cb514-4498"><a href="#cb514-4498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4499"><a href="#cb514-4499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4500"><a href="#cb514-4500" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4501"><a href="#cb514-4501" aria-hidden="true" tabindex="-1"></a>legis_senate_dom_rep <span class="sc">%&gt;%</span></span>
<span id="cb514-4502"><a href="#cb514-4502" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4503"><a href="#cb514-4503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4504"><a href="#cb514-4504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4505"><a href="#cb514-4505" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_dom_rep, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4506"><a href="#cb514-4506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4507"><a href="#cb514-4507" aria-hidden="true" tabindex="-1"></a>legis_senate_prof_rep <span class="sc">%&gt;%</span></span>
<span id="cb514-4508"><a href="#cb514-4508" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4509"><a href="#cb514-4509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4510"><a href="#cb514-4510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4511"><a href="#cb514-4511" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_prof_rep, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4512"><a href="#cb514-4512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4513"><a href="#cb514-4513" aria-hidden="true" tabindex="-1"></a>legis_senate_intl_rep <span class="sc">%&gt;%</span></span>
<span id="cb514-4514"><a href="#cb514-4514" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(var, estimate, std.error, statistic, p.value) <span class="sc">%&gt;%</span></span>
<span id="cb514-4515"><a href="#cb514-4515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4516"><a href="#cb514-4516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4517"><a href="#cb514-4517" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_senate_intl_rep, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4518"><a href="#cb514-4518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4519"><a href="#cb514-4519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4520"><a href="#cb514-4520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4521"><a href="#cb514-4521" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.6.4 congress</span></span>
<span id="cb514-4522"><a href="#cb514-4522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4525"><a href="#cb514-4525" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4526"><a href="#cb514-4526" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_congress_115</span></span>
<span id="cb514-4527"><a href="#cb514-4527" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4528"><a href="#cb514-4528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4529"><a href="#cb514-4529" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.  116 </span></span>
<span id="cb514-4530"><a href="#cb514-4530" aria-hidden="true" tabindex="-1"></a>legis_115 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4531"><a href="#cb514-4531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"115"</span>)</span>
<span id="cb514-4532"><a href="#cb514-4532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4533"><a href="#cb514-4533" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4534"><a href="#cb514-4534" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4535"><a href="#cb514-4535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(legis_115[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4536"><a href="#cb514-4536" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4537"><a href="#cb514-4537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4538"><a href="#cb514-4538" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4539"><a href="#cb514-4539" aria-hidden="true" tabindex="-1"></a>legis_115_dom  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  legis_115, valid_vars)</span>
<span id="cb514-4540"><a href="#cb514-4540" aria-hidden="true" tabindex="-1"></a>legis_115_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, legis_115, valid_vars)</span>
<span id="cb514-4541"><a href="#cb514-4541" aria-hidden="true" tabindex="-1"></a>legis_115_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, legis_115, valid_vars)</span>
<span id="cb514-4542"><a href="#cb514-4542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4543"><a href="#cb514-4543" aria-hidden="true" tabindex="-1"></a><span class="co"># 5.  tidy  p </span></span>
<span id="cb514-4544"><a href="#cb514-4544" aria-hidden="true" tabindex="-1"></a>legis_115_dom <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4545"><a href="#cb514-4545" aria-hidden="true" tabindex="-1"></a>legis_115_prof <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4546"><a href="#cb514-4546" aria-hidden="true" tabindex="-1"></a>legis_115_intl <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4547"><a href="#cb514-4547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4548"><a href="#cb514-4548" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. </span></span>
<span id="cb514-4549"><a href="#cb514-4549" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_115_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4550"><a href="#cb514-4550" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_115_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4551"><a href="#cb514-4551" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_115_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4552"><a href="#cb514-4552" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4553"><a href="#cb514-4553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4556"><a href="#cb514-4556" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4557"><a href="#cb514-4557" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_congress_116</span></span>
<span id="cb514-4558"><a href="#cb514-4558" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4559"><a href="#cb514-4559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4560"><a href="#cb514-4560" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.  116 </span></span>
<span id="cb514-4561"><a href="#cb514-4561" aria-hidden="true" tabindex="-1"></a>legis_116 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4562"><a href="#cb514-4562" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"116"</span>)</span>
<span id="cb514-4563"><a href="#cb514-4563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4564"><a href="#cb514-4564" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4565"><a href="#cb514-4565" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4566"><a href="#cb514-4566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(legis_116[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4567"><a href="#cb514-4567" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4568"><a href="#cb514-4568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4569"><a href="#cb514-4569" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4570"><a href="#cb514-4570" aria-hidden="true" tabindex="-1"></a>legis_116_dom  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  legis_116, valid_vars)</span>
<span id="cb514-4571"><a href="#cb514-4571" aria-hidden="true" tabindex="-1"></a>legis_116_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, legis_116, valid_vars)</span>
<span id="cb514-4572"><a href="#cb514-4572" aria-hidden="true" tabindex="-1"></a>legis_116_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, legis_116, valid_vars)</span>
<span id="cb514-4573"><a href="#cb514-4573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4574"><a href="#cb514-4574" aria-hidden="true" tabindex="-1"></a><span class="co"># 5.  tidy  p </span></span>
<span id="cb514-4575"><a href="#cb514-4575" aria-hidden="true" tabindex="-1"></a>legis_116_dom <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4576"><a href="#cb514-4576" aria-hidden="true" tabindex="-1"></a>legis_116_prof <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4577"><a href="#cb514-4577" aria-hidden="true" tabindex="-1"></a>legis_116_intl <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4578"><a href="#cb514-4578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4579"><a href="#cb514-4579" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. </span></span>
<span id="cb514-4580"><a href="#cb514-4580" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_116_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4581"><a href="#cb514-4581" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_116_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4582"><a href="#cb514-4582" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_116_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4583"><a href="#cb514-4583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4584"><a href="#cb514-4584" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4585"><a href="#cb514-4585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4588"><a href="#cb514-4588" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4589"><a href="#cb514-4589" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_congress_117</span></span>
<span id="cb514-4590"><a href="#cb514-4590" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4591"><a href="#cb514-4591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4592"><a href="#cb514-4592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4593"><a href="#cb514-4593" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4594"><a href="#cb514-4594" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4595"><a href="#cb514-4595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(legis_117[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4596"><a href="#cb514-4596" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4597"><a href="#cb514-4597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4598"><a href="#cb514-4598" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4599"><a href="#cb514-4599" aria-hidden="true" tabindex="-1"></a>legis_117_dom  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  legis_117, valid_vars)</span>
<span id="cb514-4600"><a href="#cb514-4600" aria-hidden="true" tabindex="-1"></a>legis_117_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, legis_117, valid_vars)</span>
<span id="cb514-4601"><a href="#cb514-4601" aria-hidden="true" tabindex="-1"></a>legis_117_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, legis_117, valid_vars)</span>
<span id="cb514-4602"><a href="#cb514-4602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4603"><a href="#cb514-4603" aria-hidden="true" tabindex="-1"></a><span class="co"># 5.  tidy  p </span></span>
<span id="cb514-4604"><a href="#cb514-4604" aria-hidden="true" tabindex="-1"></a>legis_117_dom <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4605"><a href="#cb514-4605" aria-hidden="true" tabindex="-1"></a>legis_117_prof <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4606"><a href="#cb514-4606" aria-hidden="true" tabindex="-1"></a>legis_117_intl <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4607"><a href="#cb514-4607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4608"><a href="#cb514-4608" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. </span></span>
<span id="cb514-4609"><a href="#cb514-4609" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_117_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4610"><a href="#cb514-4610" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_117_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4611"><a href="#cb514-4611" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_117_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4612"><a href="#cb514-4612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4613"><a href="#cb514-4613" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4614"><a href="#cb514-4614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4617"><a href="#cb514-4617" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4618"><a href="#cb514-4618" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_data_analysis_legis_congress_118</span></span>
<span id="cb514-4619"><a href="#cb514-4619" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4620"><a href="#cb514-4620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4621"><a href="#cb514-4621" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.  116 </span></span>
<span id="cb514-4622"><a href="#cb514-4622" aria-hidden="true" tabindex="-1"></a>legis_118 <span class="ot">&lt;-</span> legis_merged <span class="sc">%&gt;%</span></span>
<span id="cb514-4623"><a href="#cb514-4623" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(congress <span class="sc">==</span> <span class="st">"118"</span>)</span>
<span id="cb514-4624"><a href="#cb514-4624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4625"><a href="#cb514-4625" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 1</span></span>
<span id="cb514-4626"><a href="#cb514-4626" aria-hidden="true" tabindex="-1"></a>valid_vars <span class="ot">&lt;-</span> vars_to_check[</span>
<span id="cb514-4627"><a href="#cb514-4627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_lgl</span>(vars_to_check, <span class="sc">~</span> <span class="fu">n_distinct</span>(legis_118[[.x]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb514-4628"><a href="#cb514-4628" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb514-4629"><a href="#cb514-4629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4630"><a href="#cb514-4630" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. </span></span>
<span id="cb514-4631"><a href="#cb514-4631" aria-hidden="true" tabindex="-1"></a>legis_118_dom  <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"dom_percentage"</span>,  legis_118, valid_vars)</span>
<span id="cb514-4632"><a href="#cb514-4632" aria-hidden="true" tabindex="-1"></a>legis_118_prof <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"prof_percentage"</span>, legis_118, valid_vars)</span>
<span id="cb514-4633"><a href="#cb514-4633" aria-hidden="true" tabindex="-1"></a>legis_118_intl <span class="ot">&lt;-</span> <span class="fu">run_single_var_reg</span>(<span class="st">"intl_percentage"</span>, legis_118, valid_vars)</span>
<span id="cb514-4634"><a href="#cb514-4634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4635"><a href="#cb514-4635" aria-hidden="true" tabindex="-1"></a><span class="co"># 5.  tidy  p </span></span>
<span id="cb514-4636"><a href="#cb514-4636" aria-hidden="true" tabindex="-1"></a>legis_118_dom <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4637"><a href="#cb514-4637" aria-hidden="true" tabindex="-1"></a>legis_118_prof <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4638"><a href="#cb514-4638" aria-hidden="true" tabindex="-1"></a>legis_118_intl <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span>
<span id="cb514-4639"><a href="#cb514-4639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4640"><a href="#cb514-4640" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. </span></span>
<span id="cb514-4641"><a href="#cb514-4641" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_118_dom, <span class="st">"dom_percentage"</span>)</span>
<span id="cb514-4642"><a href="#cb514-4642" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_118_prof, <span class="st">"prof_percentage"</span>)</span>
<span id="cb514-4643"><a href="#cb514-4643" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reg_results</span>(legis_118_intl, <span class="st">"intl_percentage"</span>)</span>
<span id="cb514-4644"><a href="#cb514-4644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4645"><a href="#cb514-4645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4646"><a href="#cb514-4646" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6.7 district analysis - logit regression</span></span>
<span id="cb514-4647"><a href="#cb514-4647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4648"><a href="#cb514-4648" aria-hidden="true" tabindex="-1"></a><span class="fu">### 6.7.1 focus on edu</span></span>
<span id="cb514-4649"><a href="#cb514-4649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4652"><a href="#cb514-4652" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4653"><a href="#cb514-4653" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_analysis_logit_legis_dem_edu</span></span>
<span id="cb514-4654"><a href="#cb514-4654" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4655"><a href="#cb514-4655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4656"><a href="#cb514-4656" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4657"><a href="#cb514-4657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4658"><a href="#cb514-4658" aria-hidden="true" tabindex="-1"></a>model11 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4659"><a href="#cb514-4659" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share,</span>
<span id="cb514-4660"><a href="#cb514-4660" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dem_legis,</span>
<span id="cb514-4661"><a href="#cb514-4661" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4662"><a href="#cb514-4662" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4663"><a href="#cb514-4663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4664"><a href="#cb514-4664" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4665"><a href="#cb514-4665" aria-hidden="true" tabindex="-1"></a>model21 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4666"><a href="#cb514-4666" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> </span>
<span id="cb514-4667"><a href="#cb514-4667" aria-hidden="true" tabindex="-1"></a>    median_household_income_that_year <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span></span>
<span id="cb514-4668"><a href="#cb514-4668" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share,</span>
<span id="cb514-4669"><a href="#cb514-4669" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dem_legis,</span>
<span id="cb514-4670"><a href="#cb514-4670" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4671"><a href="#cb514-4671" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4672"><a href="#cb514-4672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4673"><a href="#cb514-4673" aria-hidden="true" tabindex="-1"></a>model21a <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4674"><a href="#cb514-4674" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span></span>
<span id="cb514-4675"><a href="#cb514-4675" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share,</span>
<span id="cb514-4676"><a href="#cb514-4676" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dem_legis,</span>
<span id="cb514-4677"><a href="#cb514-4677" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4678"><a href="#cb514-4678" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4679"><a href="#cb514-4679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4680"><a href="#cb514-4680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4681"><a href="#cb514-4681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4682"><a href="#cb514-4682" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4683"><a href="#cb514-4683" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology</span></span>
<span id="cb514-4684"><a href="#cb514-4684" aria-hidden="true" tabindex="-1"></a>model31 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4685"><a href="#cb514-4685" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> </span>
<span id="cb514-4686"><a href="#cb514-4686" aria-hidden="true" tabindex="-1"></a>    median_household_income_that_year <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span></span>
<span id="cb514-4687"><a href="#cb514-4687" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share <span class="sc">+</span> </span>
<span id="cb514-4688"><a href="#cb514-4688" aria-hidden="true" tabindex="-1"></a>    ideology  <span class="sc">+</span> gender_numeric <span class="sc">+</span> age ,</span>
<span id="cb514-4689"><a href="#cb514-4689" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dem_legis,</span>
<span id="cb514-4690"><a href="#cb514-4690" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4691"><a href="#cb514-4691" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4692"><a href="#cb514-4692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4693"><a href="#cb514-4693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4694"><a href="#cb514-4694" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4695"><a href="#cb514-4695" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4696"><a href="#cb514-4696" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model21)</span>
<span id="cb514-4697"><a href="#cb514-4697" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model31)</span>
<span id="cb514-4698"><a href="#cb514-4698" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(dem_legis, high_edu_share, median_household_income_that_year, white_collar_share), <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span>
<span id="cb514-4699"><a href="#cb514-4699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4700"><a href="#cb514-4700" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. </span></span>
<span id="cb514-4701"><a href="#cb514-4701" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-4702"><a href="#cb514-4702" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-4703"><a href="#cb514-4703" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 1: Simple-education"</span> <span class="ot">=</span> model11,</span>
<span id="cb514-4704"><a href="#cb514-4704" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 2: District controls-edu"</span> <span class="ot">=</span> model21,</span>
<span id="cb514-4705"><a href="#cb514-4705" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 2a: District controls(!income)"</span> <span class="ot">=</span> model21a,</span>
<span id="cb514-4706"><a href="#cb514-4706" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 4: + Individual controls(ideo)"</span> <span class="ot">=</span> model31</span>
<span id="cb514-4707"><a href="#cb514-4707" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-4708"><a href="#cb514-4708" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-4709"><a href="#cb514-4709" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-4710"><a href="#cb514-4710" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"logit_legis_dem_district_edu.html"</span>),</span>
<span id="cb514-4711"><a href="#cb514-4711" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-4712"><a href="#cb514-4712" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4713"><a href="#cb514-4713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4714"><a href="#cb514-4714" aria-hidden="true" tabindex="-1"></a><span class="co"># Marginal Effects</span></span>
<span id="cb514-4715"><a href="#cb514-4715" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4716"><a href="#cb514-4716" aria-hidden="true" tabindex="-1"></a>edu_effect <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(model21, <span class="at">terms =</span> <span class="st">"high_edu_share [all]"</span>)</span>
<span id="cb514-4717"><a href="#cb514-4717" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(edu_effect) <span class="sc">+</span></span>
<span id="cb514-4718"><a href="#cb514-4718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-4719"><a href="#cb514-4719" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect (control district)"</span>,</span>
<span id="cb514-4720"><a href="#cb514-4720" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"High Education Share"</span>,</span>
<span id="cb514-4721"><a href="#cb514-4721" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Probability (is.dom)"</span></span>
<span id="cb514-4722"><a href="#cb514-4722" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-4723"><a href="#cb514-4723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-4724"><a href="#cb514-4724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4725"><a href="#cb514-4725" aria-hidden="true" tabindex="-1"></a><span class="co"># income</span></span>
<span id="cb514-4726"><a href="#cb514-4726" aria-hidden="true" tabindex="-1"></a>edu_effect <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(model21a, <span class="at">terms =</span> <span class="st">"high_edu_share [all]"</span>)</span>
<span id="cb514-4727"><a href="#cb514-4727" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(edu_effect) <span class="sc">+</span></span>
<span id="cb514-4728"><a href="#cb514-4728" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-4729"><a href="#cb514-4729" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect (control district, !income)"</span>,</span>
<span id="cb514-4730"><a href="#cb514-4730" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"High Education Share"</span>,</span>
<span id="cb514-4731"><a href="#cb514-4731" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Probability (is.dom)"</span></span>
<span id="cb514-4732"><a href="#cb514-4732" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-4733"><a href="#cb514-4733" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-4734"><a href="#cb514-4734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4735"><a href="#cb514-4735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4736"><a href="#cb514-4736" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4737"><a href="#cb514-4737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4740"><a href="#cb514-4740" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4741"><a href="#cb514-4741" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_analysis_logit_legis_rep_edu</span></span>
<span id="cb514-4742"><a href="#cb514-4742" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4743"><a href="#cb514-4743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4744"><a href="#cb514-4744" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4745"><a href="#cb514-4745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4746"><a href="#cb514-4746" aria-hidden="true" tabindex="-1"></a>model11 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4747"><a href="#cb514-4747" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share,</span>
<span id="cb514-4748"><a href="#cb514-4748" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rep_legis,</span>
<span id="cb514-4749"><a href="#cb514-4749" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4750"><a href="#cb514-4750" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4751"><a href="#cb514-4751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4752"><a href="#cb514-4752" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4753"><a href="#cb514-4753" aria-hidden="true" tabindex="-1"></a>model21 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4754"><a href="#cb514-4754" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> </span>
<span id="cb514-4755"><a href="#cb514-4755" aria-hidden="true" tabindex="-1"></a>    median_household_income_that_year <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span></span>
<span id="cb514-4756"><a href="#cb514-4756" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share,</span>
<span id="cb514-4757"><a href="#cb514-4757" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rep_legis,</span>
<span id="cb514-4758"><a href="#cb514-4758" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4759"><a href="#cb514-4759" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4760"><a href="#cb514-4760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4761"><a href="#cb514-4761" aria-hidden="true" tabindex="-1"></a>model21a <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4762"><a href="#cb514-4762" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span>  foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span></span>
<span id="cb514-4763"><a href="#cb514-4763" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share,</span>
<span id="cb514-4764"><a href="#cb514-4764" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rep_legis,</span>
<span id="cb514-4765"><a href="#cb514-4765" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4766"><a href="#cb514-4766" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4767"><a href="#cb514-4767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4768"><a href="#cb514-4768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4769"><a href="#cb514-4769" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4770"><a href="#cb514-4770" aria-hidden="true" tabindex="-1"></a><span class="co"># ideology</span></span>
<span id="cb514-4771"><a href="#cb514-4771" aria-hidden="true" tabindex="-1"></a>model31 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4772"><a href="#cb514-4772" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">+</span> </span>
<span id="cb514-4773"><a href="#cb514-4773" aria-hidden="true" tabindex="-1"></a>    median_household_income_that_year <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> asian_ratio <span class="sc">+</span></span>
<span id="cb514-4774"><a href="#cb514-4774" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share <span class="sc">+</span> </span>
<span id="cb514-4775"><a href="#cb514-4775" aria-hidden="true" tabindex="-1"></a>    ideology  <span class="sc">+</span> gender_numeric <span class="sc">+</span> age ,</span>
<span id="cb514-4776"><a href="#cb514-4776" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rep_legis,</span>
<span id="cb514-4777"><a href="#cb514-4777" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb514-4778"><a href="#cb514-4778" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4779"><a href="#cb514-4779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4780"><a href="#cb514-4780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4781"><a href="#cb514-4781" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4782"><a href="#cb514-4782" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. </span></span>
<span id="cb514-4783"><a href="#cb514-4783" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model21)</span>
<span id="cb514-4784"><a href="#cb514-4784" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model31)</span>
<span id="cb514-4785"><a href="#cb514-4785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4786"><a href="#cb514-4786" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. </span></span>
<span id="cb514-4787"><a href="#cb514-4787" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. </span></span>
<span id="cb514-4788"><a href="#cb514-4788" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-4789"><a href="#cb514-4789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-4790"><a href="#cb514-4790" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 1: Simple-education"</span> <span class="ot">=</span> model11,</span>
<span id="cb514-4791"><a href="#cb514-4791" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 2: District controls-edu"</span> <span class="ot">=</span> model21,</span>
<span id="cb514-4792"><a href="#cb514-4792" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 2a: District controls(!income)"</span> <span class="ot">=</span> model21a,</span>
<span id="cb514-4793"><a href="#cb514-4793" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 4: + Individual controls(ideo)"</span> <span class="ot">=</span> model31</span>
<span id="cb514-4794"><a href="#cb514-4794" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-4795"><a href="#cb514-4795" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-4796"><a href="#cb514-4796" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-4797"><a href="#cb514-4797" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"logit_legis_rep_district_edu.html"</span>),</span>
<span id="cb514-4798"><a href="#cb514-4798" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-4799"><a href="#cb514-4799" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4800"><a href="#cb514-4800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4801"><a href="#cb514-4801" aria-hidden="true" tabindex="-1"></a><span class="co"># Marginal Effects</span></span>
<span id="cb514-4802"><a href="#cb514-4802" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4803"><a href="#cb514-4803" aria-hidden="true" tabindex="-1"></a>edu_effect <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(model21, <span class="at">terms =</span> <span class="st">"high_edu_share [all]"</span>)</span>
<span id="cb514-4804"><a href="#cb514-4804" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(edu_effect) <span class="sc">+</span></span>
<span id="cb514-4805"><a href="#cb514-4805" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-4806"><a href="#cb514-4806" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect (control district)"</span>,</span>
<span id="cb514-4807"><a href="#cb514-4807" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"High Education Share"</span>,</span>
<span id="cb514-4808"><a href="#cb514-4808" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Probability (is.dom)"</span></span>
<span id="cb514-4809"><a href="#cb514-4809" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-4810"><a href="#cb514-4810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-4811"><a href="#cb514-4811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4812"><a href="#cb514-4812" aria-hidden="true" tabindex="-1"></a><span class="co"># income</span></span>
<span id="cb514-4813"><a href="#cb514-4813" aria-hidden="true" tabindex="-1"></a>edu_effect <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(model21a, <span class="at">terms =</span> <span class="st">"high_edu_share [all]"</span>)</span>
<span id="cb514-4814"><a href="#cb514-4814" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(edu_effect) <span class="sc">+</span></span>
<span id="cb514-4815"><a href="#cb514-4815" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-4816"><a href="#cb514-4816" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect (control district, !income)"</span>,</span>
<span id="cb514-4817"><a href="#cb514-4817" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"High Education Share"</span>,</span>
<span id="cb514-4818"><a href="#cb514-4818" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Probability (is.dom)"</span></span>
<span id="cb514-4819"><a href="#cb514-4819" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-4820"><a href="#cb514-4820" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-4821"><a href="#cb514-4821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4822"><a href="#cb514-4822" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb514-4823"><a href="#cb514-4823" aria-hidden="true" tabindex="-1"></a>eduwhite_effect <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(model21, <span class="at">terms =</span> <span class="st">"agriculture_share [all]"</span>)</span>
<span id="cb514-4824"><a href="#cb514-4824" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(eduwhite_effect) <span class="sc">+</span></span>
<span id="cb514-4825"><a href="#cb514-4825" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb514-4826"><a href="#cb514-4826" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Marginal Effect "</span>,</span>
<span id="cb514-4827"><a href="#cb514-4827" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"agriculture_share"</span>,</span>
<span id="cb514-4828"><a href="#cb514-4828" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted Probability (is.dom)"</span></span>
<span id="cb514-4829"><a href="#cb514-4829" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-4830"><a href="#cb514-4830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb514-4831"><a href="#cb514-4831" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb514-4832"><a href="#cb514-4832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4835"><a href="#cb514-4835" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb514-4836"><a href="#cb514-4836" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: district_analysis_logit_edu_check</span></span>
<span id="cb514-4837"><a href="#cb514-4837" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb514-4838"><a href="#cb514-4838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4839"><a href="#cb514-4839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4840"><a href="#cb514-4840" aria-hidden="true" tabindex="-1"></a>model_cross2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4841"><a href="#cb514-4841" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">*</span> party <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span></span>
<span id="cb514-4842"><a href="#cb514-4842" aria-hidden="true" tabindex="-1"></a>    median_household_income_that_year <span class="sc">+</span></span>
<span id="cb514-4843"><a href="#cb514-4843" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share,</span>
<span id="cb514-4844"><a href="#cb514-4844" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> legis_merged,</span>
<span id="cb514-4845"><a href="#cb514-4845" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> binomial</span>
<span id="cb514-4846"><a href="#cb514-4846" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4847"><a href="#cb514-4847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4848"><a href="#cb514-4848" aria-hidden="true" tabindex="-1"></a>model_cross3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb514-4849"><a href="#cb514-4849" aria-hidden="true" tabindex="-1"></a>  is.dom <span class="sc">~</span> high_edu_share <span class="sc">*</span> party <span class="sc">+</span> foreign_born_ratio <span class="sc">+</span> </span>
<span id="cb514-4850"><a href="#cb514-4850" aria-hidden="true" tabindex="-1"></a>    white_ratio <span class="sc">+</span> black_or_african_american_ratio <span class="sc">+</span> agriculture_share,</span>
<span id="cb514-4851"><a href="#cb514-4851" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> legis_merged,</span>
<span id="cb514-4852"><a href="#cb514-4852" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> binomial</span>
<span id="cb514-4853"><a href="#cb514-4853" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4854"><a href="#cb514-4854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4855"><a href="#cb514-4855" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb514-4856"><a href="#cb514-4856" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb514-4857"><a href="#cb514-4857" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 1: Legis cross"</span> <span class="ot">=</span> model_cross2,</span>
<span id="cb514-4858"><a href="#cb514-4858" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Model 2: Legis cross (!income)"</span> <span class="ot">=</span> model_cross3</span>
<span id="cb514-4859"><a href="#cb514-4859" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-4860"><a href="#cb514-4860" aria-hidden="true" tabindex="-1"></a>  <span class="at">fmt =</span> <span class="dv">3</span>,</span>
<span id="cb514-4861"><a href="#cb514-4861" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb514-4862"><a href="#cb514-4862" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(output_dir, <span class="st">"logit_district_edu_cross.html"</span>),</span>
<span id="cb514-4863"><a href="#cb514-4863" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape =</span> <span class="cn">FALSE</span></span>
<span id="cb514-4864"><a href="#cb514-4864" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb514-4865"><a href="#cb514-4865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-4866"><a href="#cb514-4866" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<script src="data_mining_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>